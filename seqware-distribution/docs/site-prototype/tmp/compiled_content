{:	data{r"/assets/style/_code/{:default{:	lastI".pre

  .log-create
    font-weight: bold
    color: #4a0

  .log-update
    font-weight: bold
    color: #cb0

  .comment
    color: #666666

  .key
    color: #6a0

  .string, .value
    color: #772
    background: #ffc

  .constant, .class, .symbol
    color: #c60

  .function
    color: #e21

  .instance-variable, .local_variable
    color: #6a0

  .reserved, .predefined, .predefined-constant
    color: #09c

  .tag, .keyword
    color: #8c5

  .integer, .attribute_name
    color: #a50

  .m
    padding: 0 0.1em
    background: #555
    color: #fff
:ET:raw@
:pre@
"/assets/style/_main/{;{;I"◊*
  margin: 0
  padding: 0
  border: 0

body
  background: #fff
  border-top: 10px solid #153b66
  font-family: "Gentium Basic", Gentium, Palatino, Georgia, serif

//img
//  display: block
//  margin: 0 auto

.wrapper
  width: 940px
  margin: 0 auto
  position: relative
  background: url(/assets/images/grid2.png) top center repeat-y

.nav
  position: absolute
  top:  0
  left: 0

  li
    display: inline

  a, .active
    margin:  0 2px
    padding: 43px 3px 3px 13px

    background: url(/assets/images/triangle-left.gif) bottom left no-repeat

    font-family: Helvetica, Arial, "Trebuchet MS", sans-serif
    font-weight: bold
    font-size: 12px

    text-transform: uppercase

    line-height: 18px
    
    span
      padding: 5px

  a
    text-decoration: none

    &:link,
    &:visited
      color: #299bf8
      background-color: #daebff

    &:hover
      color: #fff
      background-color: #44ccf6

      position: relative
      top: 9px

    &:active
      color: #299bf8
      background-color: #daebff

      position: relative
      top: 9px

  .active
    color: #fff
    background-color: #44ccf6

    position: relative

    top: 9px

.side
  position: fixed

  margin:  130px 0 0    660px
  padding: 0 0px

  top:   -20px
  width: 300px

  .section
    margin:  0 0 20px 0
    padding: 20px
    background-color: #daebff

  p
    font-family: "Lucida Grande", Helvetica, Arial, sans-serif
    font-size: 13px
    color: #153b66
    //color: darken(#feefdb, 80%)

    kbd
      font-family: "Panic Sans", "Bitstream Vera Sans Mono", Consolas, monospace
      font-size: 14px
      font-weight: bold
      color: #000

    a

      &:link, &:visited
        color: #153b66

      &:hover
        color: #153b66

  .figure
    margin-top: 20px
    text-align: center

  ol
    margin-bottom: 5px

  li
    list-style-type: none
    width: 260px
    margin: 0 0 10px 0

    a, .active
      display: block
      padding: 0 5px
      font-family: Helvetica, Arial, sans-serif
      font-weight: bold
      font-size: 12px
      text-decoration: none
      text-transform: uppercase
      text-align: left
      line-height: 18px
      white-space: nowrap
      overflow: hidden
      background-color: #dbeffe
      background-image: url(/assets/images/triangle-right.gif)
      background-position: bottom right
      background-repeat: no-repeat

    a

      &:link, &:visited
        color: #299bf8

      &:hover
        color: #fff
        background-color: #299bf8

      &:active
        color: #fff
        background-color: #000

    .active
      color: #fff
      background-color: #44ccf6

    li
      margin:  0
      padding: 0
      width: 280px

      a, .active
        margin: 0
        padding: 0 5px
        text-transform: none
        font-weight: normal
        background: #fff

      a

        &:link, &:visited
          color: #44ccf6

        &:hover
          color: #000
          font-weight: bold
          background: transparent

.body
  padding: 70px 0
  width:   640px

  a
    padding: 2px 0
    text-decoration: underline

    &:link, &:visited
      color: #1b67a5

    &:hover
      color: #000

    &.permalink
      margin: 0 5px
      font-weight: normal
      text-decoration: none

      &:link, &:visited
        color: #ccc
        background: none

      &:hover
        color: #299bf8

#intro
  width: 640px

  h1
    font-family: "Graublau Web", Helvetica, Arial, sans-serif
    font-size: 39px
    font-weight: normal
    line-height: 42px
    letter-spacing: -1px
    padding: 20px 0 16px 0
    color: #000

    strong
      font-weight: bold
      letter-spacing: 0
      color: #44ccf6

  h2
    margin: 40px 0 0 0
    height: 40px
    font-family: "Graublau Web", Helvetica, Arial, sans-serif
    font-weight: normal
    font-size: 26px
    line-height: 40px
    letter-spacing: -1px
    color: #000

    strong
      font-weight: bold
      letter-spacing: 0
      color: #44ccf6
  p
    margin: 0
    font-size: 18px
    font-family: "Gentium Basic", Gentium, Palatino, Georgia, serif
    line-height: 20px

  td
    img
      -webkit-box-shadow: 3px 3px 14px #999
      -webkit-border-radius: 5px
      -moz-box-shadow:    3px 3px 14px #999
      -moz-border-radius: 5px
      margin: 40px 40px 40px 40px
      width:  110px
      height: 110px
//background: url(/assets/images/concepts-icon_bgr.png) top center no-repeat

.article

  .header
    margin: 20px 0 40px 0

  h1
    margin: 0
    font-family: "Graublau Web", Helvetica, Arial, sans-serif
    font-weight: bold
    font-size: 46px
    line-height: 60px
    color: #299bf8
    color: #44ccf6

  h2
    margin: 40px 0 0 0
    height: 40px
    font-family: "Graublau Web", Helvetica, Arial, sans-serif
    font-weight: normal
    font-size: 26px
    line-height: 40px
    letter-spacing: -1px
    color: #000

    .date
      color: #ccc
      margin-left: 10px
      letter-spacing: 1px
      font-family: "Graublau Web", Helvetica, Arial, sans-serif
      font-size: 75%
      text-transform: uppercase

  .section:target > h2
    color: #44ccf6

  .section:target > h2:after
    padding: 0 20px
    font-size: 34px
    line-height: 40px
    position: relative
    top: 5px
    content: "‚òú"

  h3
    margin: 20px 0
    font-family: "Graublau Web", Helvetica, Arial, sans-serif
    font-weight: normal
    font-size: 18px
    line-height: 20px
    position: relative
    top: 8px
    color: #000

  p
    font-size: 15px
    line-height: 20px
    margin: 20px 0 0 0
    padding: 0

  p.fixme
    margin: 20px 0
    color: #c00

  p.fixme:before
    content: "FIXME"
    padding: 2px 4px
    margin: 0 5px 0 0
    font-family: Helvetica, Arial, sans-serif
    font-size: 15px
    line-height: 20px
    background: #f00
    color: #fff

  p.warning
    background: #fee
    padding: 5px 8px

  p.warning strong
    color: #f00
    text-transform: uppercase
    font-family: Helvetica, Arial, sans-serif
    font-size: 85%
    padding-right: 2px

  table
    margin: 20px auto
    border-collapse: collapse

    th
      font-weight: bold
      text-transform: uppercase

    tr.head th
      background: #f0f0f0

    tr th.row
      background: #f0f0f0
      text-align: right

    td, th
      padding: 0 5px
      font-family: Helvetica, Arial, sans-serif
      font-size: 12px
      line-height: 20px
      text-align: left

  ul, ol
    margin:  20px 0 0 0
    padding: 0 0 0 20px

  ul ul, ol ol
    margin: 0 20px
    padding: 0

  li
    font-size: 15px
    line-height: 20px

    p
      margin: 20px 0 0 0
      padding: 0

  ul li
    list-style-type: square

  ol.toc
    margin: 20px 0 0 0

    > li
      font-weight: bold
      list-style-type: upper-roman

      li
        font-weight: normal

  dl
    margin: 20px 0

    dt, dd
      font-size:   15px
      line-height: 20px

    dt
      font-weight: bold

    dd
      margin: 0 0 20px 20px

      p
        margin: 20px 0
        padding: 0

      .see
        font-style: italic

      a
        font-style: normal

  .figure
    margin:  20px 0
    padding: 20px 0
    text-align: center

  q, .path
    font-style: italic

  code, kbd, samp, var
    font-family: "Panic Sans", "Bitstream Vera Sans Mono", Consolas, monospace
    font-size: 12px
    line-height: 20px
    padding: 0 2px

  code, samp
    font-style: normal

  kbd
    font-weight: bold

  var
    font-style: italic

  pre
    margin: 20px 0 0 0
    padding: 9px 10px
    white-space: pre-wrap
    white-space: -moz-pre-wrap
    white-space: -pre-wrap
    white-space: -o-pre-wrap
    word-wrap: break-word
    font-family: "Panic Sans", "Bitstream Vera Sans Mono", Consolas, monospace
    font-size: 12px
    line-height: 20px
    border: 1px solid #ccc

    code, kbd, samp, var
      background: transparent
      padding: 0

    .prompt
      color: #999

.caps
  font-size: 90%

#footer
  margin: 0 auto
  padding: 100px 0 40px 0

  p
    width: 620px
    padding-right: 320px
    margin: 0 auto
    font-size: 14px
    line-height: 20px
    color: #666

  a
    text-decoration: underline

    &:link, &:visited
      color: #666

    &:hover
      color: #000
;T;	@;
@"/assets/style/_fonts/{;{;I"Û// Graublau Web

@font-face
  font-family: "Graublau Web"
  src: url(/assets/fonts/graublau-web.eot)
  src: local("Graublau Web"), local("Graublau Web Regular"), local("GraublauWeb"), local("GraublauWeb-Regular"), url(/assets/fonts/graublau-web.otf) format('opentype')

@font-face
  font-family: "Graublau Web"
  font-weight: bold
  src: url(/assets/fonts/graublau-web-bold.eot)
  src: local("Graublau Web Bold"), local("GraublauWeb-Bold"), url(/assets/fonts/graublau-web-bold.otf) format("opentype")

// Gentium Basic

@font-face
  font-family: "Gentium"
  src: url(/assets/fonts/gentium-basic.eot)
  src: local("Gentium Basic"), local("Gentium Basic Regular"), local("GentiumBasic"), local("GentiumBasic-Regular"), url(/assets/fonts/gentium-basic.ttf) format("truetype")

@font-face
  font-family: "Gentium"
  font-style: italic
  src: url(/assets/fonts/gentium-basic-italic.eot)
  src: local("Gentium Basic Italic"), local("GentiumBasic-Italic"), url(/assets/fonts/gentium-basic-italic.ttf) format("truetype")

@font-face
  font-family: "Gentium"
  font-weight: bold
  src: url(/assets/fonts/gentium-basic-bold.eot)
  src: local("Gentium Basic Bold"), local("GentiumBasic-Bold"), url(/assets/fonts/gentium-basic-bold.ttf) format("truetype")

@font-face
  font-family: "Gentium"
  font-weight: bold
  font-style: italic
  src: url(/assets/fonts/gentium-basic-bold-italic.eot)
  src: local("Gentium Basic Bold Italic"), local("GentiumBasic-BoldItalic"), url(/assets/fonts/gentium-basic-bold-italic.ttf) format("truetype")
;T;	@;
@"/docs/{;{
;I"€<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<title>SeqWare ‚Ä∫ Documentation</title>
<meta content="nanoc 3.4.0" name="generator">
<link href="../assets/style-v17.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://feeds.feedburner.com/seqware" rel="alternate" title="The SeqWare Blog" type="application/atom+xml">
<script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-34523087-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script>
</head>
<body>
<div class="wrapper">
<!-- ***** navigation ***** -->
<div class="nav">
<ol>
<li><a href="../"><span>Home</span></a></li>
<li><a href="../blog/"><span>News</span></a></li>
<li><span class="active" title="You're here."><span>Documentation</span></span></li>
<li><a href="../community/"><span>Community</span></a></li>
<li><a href="../partners/"><span>Partners</span></a></li>
<li><a href="../about/"><span>About</span></a></li>
</ol>
</div>
<!-- ***** sidebar ***** -->
<div class="side">
<ol>
<li><a href="1-introduction/"><span>Introduction to SeqWare</span></a></li>
<li><a href="2-installation/"><span>Installation</span></a></li>
<li><a href="3-getting-started/"><span>Getting Started</span></a></li>
<li><a href="4-metadb/"><span>SeqWare MetaDB</span></a></li>
<li><a href="5-portal/"><span>SeqWare Portal</span></a></li>
<li><a href="6-pipeline/"><span>SeqWare Pipeline</span></a></li>
<li><a href="7-web-service/"><span>SeqWare Web Service</span></a></li>
<li><a href="8-query-engine/"><span>SeqWare Query Engine</span></a></li>
<li><a href="9-glossary/"><span>Glossary</span></a></li>
<li><a href="10-faq/"><span>Frequently Asked Questions</span></a></li>
<li><a href="11-api/"><span>APIs</span></a></li>
</ol>
</div>
<!-- ***** body ***** -->
<div class="body">
<div class="article">
<div class="header">
<h1>Documentation</h1>
</div>
<p class="warning"><strong>Note:</strong> This guide is a work in progress.</p>


<p></p>

<p>This is the core documentation for the SeqWare project, including all the
various sub-projects. We wanted to create a single manual that would bring
together all of our documentation since much of it is currently spread across a
poorly-organized wiki.  While this guide is organized by logical sections that
flow from one to the next you do not need to read the whole thing in order to
get started.  Take a look at the tutorials in the &#8220;Getting Started&#8221; section
which will walk you through the core functionality such as SeqWare Pipeline.
Because SeqWare is a fairly complex software stack (with some
difficult-to-configure dependencies) we assume most users will start with a VM,
either a local VirtualBox VM or an Amazon Machine Image (AMI) on Amazon&#8217;s
cloud.</p>

<div class="section" id="conventions">
<h2>Conventions</h2>

<p>The SeqWare documentation uses a few conventions for markup:</p>

<ul>
<li>
<i>Italic text</i> introduces new terms.</li>
<li>
<code>Monospaced text</code> is used for code snippets.</li>
<li>
<kbd>Monospaced, bold text</kbd> is used for commands that should be typed literally.</li>
<li>
<var>Monospaced, italic text</var> is used for text that should be replaced with user-supplied values.</li>
</ul>
<p>The documentation also contains quite a few blocks of code snippets. These are marked up like this:</p>

<pre title="Title of the snippet"><code class="language-ruby"><span class="keyword">class</span> <span class="class">Lorem::Ipsum</span>
  <span class="keyword">def</span> <span class="function">dolor</span>
    [ <span class="symbol">:foo</span>, <span class="string"><span class="delimiter">"</span><span class="content">sit amet, consectetur adipisicing elit</span><span class="delimiter">"</span></span>, <span class="integer">123</span> ]
  <span class="keyword">end</span>
<span class="keyword">end</span></code></pre>


<p>Bash shell input/output are marked up in a similar way. Note that the prompt is
always included, but should never be typed. Here‚Äôs an example:</p>

<pre title="Title of the snippet"><span class="prompt">some-dir%</span> <kbd>echo "hello" &amp;&amp; cd other-dir</kbd>
hello
<span class="prompt">other-dir%</span></pre>
</div>
</div>
</div>
</div>
<!-- ***** footer ***** -->
<div id="footer">
<p>SeqWare ¬© 2007‚Äì2012 Brian O&#8217;Connor. SeqWare is released under the a <a rel="license" href="http://www.gnu.org/licenses/licenses.html">GNU GPL v3</a>. This site is built using the excellent <a href="http://nanoc.stoneship.org/">nanoc</a> tool and example site along with the <a href="http://www.fonts.info/info/press/free-fonts-for-font-face-embedding.htm">Graublau</a> and <a href="http://scripts.sil.org/Gentium">Gentium</a> fonts.</p>
</div>
</body>
</html>
;T;	I"<p class="warning"><strong>Note:</strong> This guide is a work in progress.</p> 

This is the core documentation for the SeqWare project, including all the
various sub-projects. We wanted to create a single manual that would bring
together all of our documentation since much of it is currently spread across a
poorly-organized wiki.  While this guide is organized by logical sections that
flow from one to the next you do not need to read the whole thing in order to
get started.  Take a look at the tutorials in the "Getting Started" section
which will walk you through the core functionality such as SeqWare Pipeline.
Because SeqWare is a fairly complex software stack (with some
difficult-to-configure dependencies) we assume most users will start with a VM,
either a local VirtualBox VM or an Amazon Machine Image (AMI) on Amazon's
cloud.

##Conventions

The SeqWare documentation uses a few conventions for markup:

* <i>Italic text</i> introduces new terms.
* <code>Monospaced text</code> is used for code snippets.
* <kbd>Monospaced, bold text</kbd> is used for commands that should be typed literally.
* <var>Monospaced, italic text</var> is used for text that should be replaced with user-supplied values.

The documentation also contains quite a few blocks of code snippets. These are marked up like this:

<pre title="Title of the snippet"><code class="language-ruby">class Lorem::Ipsum
  def dolor
    [ :foo, "sit amet, consectetur adipisicing elit", 123 ]
  end
end</code></pre>

Bash shell input/output are marked up in a similar way. Note that the prompt is
always included, but should never be typed. Here‚Äôs an example:

<pre title="Title of the snippet"><span class="prompt">some-dir%</span> <kbd>echo "hello" &amp;&amp; cd other-dir</kbd>
hello
<span class="prompt">other-dir%</span></pre>;T;
I"ò<p class="warning"><strong>Note:</strong> This guide is a work in progress.</p>


<p></p>

<p>This is the core documentation for the SeqWare project, including all the
various sub-projects. We wanted to create a single manual that would bring
together all of our documentation since much of it is currently spread across a
poorly-organized wiki.  While this guide is organized by logical sections that
flow from one to the next you do not need to read the whole thing in order to
get started.  Take a look at the tutorials in the "Getting Started" section
which will walk you through the core functionality such as SeqWare Pipeline.
Because SeqWare is a fairly complex software stack (with some
difficult-to-configure dependencies) we assume most users will start with a VM,
either a local VirtualBox VM or an Amazon Machine Image (AMI) on Amazon's
cloud.</p>

<div class="section" id="conventions">
<h2>Conventions</h2>

<p>The SeqWare documentation uses a few conventions for markup:</p>

<ul>
<li>
<i>Italic text</i> introduces new terms.</li>
<li>
<code>Monospaced text</code> is used for code snippets.</li>
<li>
<kbd>Monospaced, bold text</kbd> is used for commands that should be typed literally.</li>
<li>
<var>Monospaced, italic text</var> is used for text that should be replaced with user-supplied values.</li>
</ul>
<p>The documentation also contains quite a few blocks of code snippets. These are marked up like this:</p>

<pre title="Title of the snippet"><code class="language-ruby">class Lorem::Ipsum
  def dolor
    [ :foo, "sit amet, consectetur adipisicing elit", 123 ]
  end
end</code></pre>


<p>Bash shell input/output are marked up in a similar way. Note that the prompt is
always included, but should never be typed. Here‚Äôs an example:</p>

<pre title="Title of the snippet"><span class="prompt">some-dir%</span> <kbd>echo "hello" &amp;&amp; cd other-dir</kbd>
hello
<span class="prompt">other-dir%</span></pre>
</div>;T:before_sectionsI"j<p class="warning"><strong>Note:</strong> This guide is a work in progress.</p>


<p></p>

<p>This is the core documentation for the SeqWare project, including all the
various sub-projects. We wanted to create a single manual that would bring
together all of our documentation since much of it is currently spread across a
poorly-organized wiki.  While this guide is organized by logical sections that
flow from one to the next you do not need to read the whole thing in order to
get started.  Take a look at the tutorials in the "Getting Started" section
which will walk you through the core functionality such as SeqWare Pipeline.
Because SeqWare is a fairly complex software stack (with some
difficult-to-configure dependencies) we assume most users will start with a VM,
either a local VirtualBox VM or an Amazon Machine Image (AMI) on Amazon's
cloud.</p>

<h2>Conventions</h2>

<p>The SeqWare documentation uses a few conventions for markup:</p>

<ul>
<li><i>Italic text</i> introduces new terms.</li>
<li><code>Monospaced text</code> is used for code snippets.</li>
<li><kbd>Monospaced, bold text</kbd> is used for commands that should be typed literally.</li>
<li><var>Monospaced, italic text</var> is used for text that should be replaced with user-supplied values.</li>
</ul>


<p>The documentation also contains quite a few blocks of code snippets. These are marked up like this:</p>

<pre title="Title of the snippet"><code class="language-ruby">class Lorem::Ipsum
  def dolor
    [ :foo, "sit amet, consectetur adipisicing elit", 123 ]
  end
end</code></pre>


<p>Bash shell input/output are marked up in a similar way. Note that the prompt is
always included, but should never be typed. Here‚Äôs an example:</p>

<pre title="Title of the snippet"><span class="prompt">some-dir%</span> <kbd>echo "hello" &amp;&amp; cd other-dir</kbd>
hello
<span class="prompt">other-dir%</span></pre>

;T:	post@"/docs/8-faq/{;{
;I"A<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<title>SeqWare ‚Ä∫ Frequently Asked Questions</title>
<meta content="nanoc 3.4.0" name="generator">
<link href="../../assets/style-v17.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://feeds.feedburner.com/seqware" rel="alternate" title="The SeqWare Blog" type="application/atom+xml">
<script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-34523087-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script>
</head>
<body>
<div class="wrapper">
<!-- ***** navigation ***** -->
<div class="nav">
<ol>
<li><a href="../../"><span>Home</span></a></li>
<li><a href="../../blog/"><span>News</span></a></li>
<li><a href="../"><span>Documentation</span></a></li>
<li><a href="../../community/"><span>Community</span></a></li>
<li><a href="../../partners/"><span>Partners</span></a></li>
<li><a href="../../about/"><span>About</span></a></li>
</ol>
</div>
<!-- ***** sidebar ***** -->
<div class="side">
<ol>
<li><a href="../1-introduction/"><span>Introduction to nanoc</span></a></li>
<li><a href="../2-installation/"><span>Installation</span></a></li>
<li><a href="../3-getting-started/"><span>Getting Started</span></a></li>
<li><a href="../4-basic-concepts/"><span>Basic Concepts</span></a></li>
<li><a href="../5-advanced-concepts/"><span>Advanced Concepts</span></a></li>
<li><a href="../6-guides/"><span>Guides</span></a></li>
<li><a href="../7-glossary/"><span>Glossary</span></a></li>
<li><span class="active" title="You're here."><span>Frequently Asked Questions</span></span></li>
<li><a href="../api/3.4/"><span>API documentation</span></a></li>
</ol>
</div>
<!-- ***** body ***** -->
<div class="body">
<div class="article">
<div class="header">
<h1>Frequently Asked Questions</h1>
</div>
<dl>
<dt>What is the correct pronunciation of ‚Äúnanoc‚Äù?</dt>
  <dd>
<em>nah</em>-nock is the preferred pronunciation.</dd>
  <dt>Is ‚Äúnanoc‚Äù really written with a lowercase N?</dt>
  <dd>Yes. ‚Äúnanoc‚Äù should be written with a lowercase n, even at the start of a sentence. The capitalisation of ‚ÄúNanoc‚Äù is not correct. The namespace for everything nanoc-related, though, is called <code>Nanoc</code>.</dd>
</dl>
</div>
</div>
</div>
<!-- ***** footer ***** -->
<div id="footer">
<p>SeqWare ¬© 2007‚Äì2012 Brian O&#8217;Connor. SeqWare is released under the a <a rel="license" href="http://www.gnu.org/licenses/licenses.html">GNU GPL v3</a>. This site is built using the excellent <a href="http://nanoc.stoneship.org/">nanoc</a> tool and example site along with the <a href="http://www.fonts.info/info/press/free-fonts-for-font-face-embedding.htm">Graublau</a> and <a href="http://scripts.sil.org/Gentium">Gentium</a> fonts.</p>
</div>
</body>
</html>
;T;	I"dWhat is the correct pronunciation of ‚Äúnanoc‚Äù?
: _nah_-nock is the preferred pronunciation.

Is ‚Äúnanoc‚Äù really written with a lowercase N?
: Yes. ‚Äúnanoc‚Äù should be written with a lowercase n, even at the start of a sentence. The capitalisation of ‚ÄúNanoc‚Äù is not correct. The namespace for everything nanoc-related, though, is called `Nanoc`.;T;
I"ß<dl>
<dt>What is the correct pronunciation of ‚Äúnanoc‚Äù?</dt>
  <dd>
<em>nah</em>-nock is the preferred pronunciation.</dd>
  <dt>Is ‚Äúnanoc‚Äù really written with a lowercase N?</dt>
  <dd>Yes. ‚Äúnanoc‚Äù should be written with a lowercase n, even at the start of a sentence. The capitalisation of ‚ÄúNanoc‚Äù is not correct. The namespace for everything nanoc-related, though, is called <code>Nanoc</code>.</dd>
</dl>;T;I"©<dl>
  <dt>What is the correct pronunciation of ‚Äúnanoc‚Äù?</dt>
  <dd><em>nah</em>-nock is the preferred pronunciation.</dd>
  <dt>Is ‚Äúnanoc‚Äù really written with a lowercase N?</dt>
  <dd>Yes. ‚Äúnanoc‚Äù should be written with a lowercase n, even at the start of a sentence. The capitalisation of ‚ÄúNanoc‚Äù is not correct. The namespace for everything nanoc-related, though, is called <code>Nanoc</code>.</dd>
</dl>
;T;@"/docs/4-basic-concepts/{;{
;I"œ<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<title>SeqWare ‚Ä∫ Basic Concepts</title>
<meta content="nanoc 3.4.0" name="generator">
<link href="../../assets/style-v17.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://feeds.feedburner.com/seqware" rel="alternate" title="The SeqWare Blog" type="application/atom+xml">
<script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-34523087-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script>
</head>
<body>
<div class="wrapper">
<!-- ***** navigation ***** -->
<div class="nav">
<ol>
<li><a href="../../"><span>Home</span></a></li>
<li><a href="../../blog/"><span>News</span></a></li>
<li><a href="../"><span>Documentation</span></a></li>
<li><a href="../../community/"><span>Community</span></a></li>
<li><a href="../../partners/"><span>Partners</span></a></li>
<li><a href="../../about/"><span>About</span></a></li>
</ol>
</div>
<!-- ***** sidebar ***** -->
<div class="side">
<ol>
<li><a href="../1-introduction/"><span>Introduction to nanoc</span></a></li>
<li><a href="../2-installation/"><span>Installation</span></a></li>
<li><a href="../3-getting-started/"><span>Getting Started</span></a></li>
<li>
<span class="active" title="You're here."><span>Basic Concepts</span></span><ol class="toc">
<li><a href="#the-commandline-tool">The Commandline Tool</a></li>
<li><a href="#sites">Sites</a></li>
<li><a href="#items">Items</a></li>
<li><a href="#layouts">Layouts</a></li>
<li><a href="#rules">Rules</a></li>
<li><a href="#the-compilation-process">The Compilation Process</a></li>
<li><a href="#filters">Filters</a></li>
<li><a href="#helpers">Helpers</a></li>
<li><a href="#rake-tasks">Rake Tasks</a></li>
<li><a href="#data-sources">Data Sources</a></li>
</ol>
</li>
<li><a href="../5-advanced-concepts/"><span>Advanced Concepts</span></a></li>
<li><a href="../6-guides/"><span>Guides</span></a></li>
<li><a href="../7-glossary/"><span>Glossary</span></a></li>
<li><a href="../8-faq/"><span>Frequently Asked Questions</span></a></li>
<li><a href="../api/3.4/"><span>API documentation</span></a></li>
</ol>
</div>
<!-- ***** body ***** -->
<div class="body">
<div class="article">
<div class="header">
<h1>Basic Concepts</h1>
</div>
<div class="section" id="the-commandline-tool">
<h2>The Commandline Tool</h2>

<p>Interacting with nanoc happens through a commandline tool named <code>nanoc</code>. This tool has a few sub-commands, which you can invoke like this:</p>

<pre title="Executing a nanoc command"><span class="prompt">%</span> <kbd>nanoc</kbd> <var>command</var></pre>

<p>Here, <code>command</code> obviously is the name of the command you‚Äôre invoking. A very useful command is the <code>help</code> command, which will give you a detailed description of a given command. You can use it like this:</p>

<pre title="Getting help on a command"><span class="prompt">%</span> <kbd>nanoc help</kbd> <var>command</var></pre>

<p>For example, this is the help for the <code>create_site</code> command:</p>

<pre title="Getting help on the create_site command"><span class="prompt">%</span> <kbd>nanoc help create_site</kbd>
nanoc create_site [path]

aliases: cs

create a site

    Create a new site at the given path. The site will use the compact
    filesystem data source by default, but this can be changed by
    using the &#8211;datasource commandline option.

options:

   -d &#8211;datasource specify the data source for the new site</pre>

<p>If you want general help, such as a list of available commands and global options, omit the command name, like this:</p>

<pre title="Getting general help for nanoc"><span class="prompt">%</span> <kbd>nanoc help</kbd></pre>

<p>So, if you‚Äôre ever stuck, consult the the commandline help which (hopefully) will put you back on track.</p>

</div>
<div class="section" id="sites">
<h2>Sites</h2>
<p>A site managed by nanoc is a directory with a specific structure. A site consists of items, layouts, a site configuration and a set of rules.</p>

<p>The way the data in a site is stored depends on the data source that is being used. However, unless you‚Äôve explicitly told nanoc to use a different data source, the <code>filesystem_unified</code> one will be used. This manual assumes that this <code>filesystem_unified</code> data source is used. For details, see the <a href="#data-sources">Data Sources</a> section.</p>

<div class="section" id="creating-a-site">
<h3>Creating a Site</h3>

<p>To create a site, use the <code>create_site</code> command. This command takes the site name as its first and only argument, like this:</p>

<pre title="Creating a site"><span class="prompt">%</span> <kbd>nanoc create_site</kbd> <var>site_name</var></pre>

<p>This will create a directory with the given site name, with a bare-bones directory layout.</p>

</div>
<div class="section" id="structure">
<h3>Structure</h3>

<p>A site has the following files and directories:</p>

<dl>
<dt><code>config.yaml</code></dt>
  <dd>contains the site configuration</dd>
  <dt><code>Rules</code></dt>
  <dd>contains compilation, routing and layouting rules</dd>
  <dt><code>content/</code></dt>
  <dd>contains the uncompiled items</dd>
  <dt><code>layouts/</code></dt>
  <dd>contains the layouts</dd>
  <dt><code>lib/</code></dt>
  <dd>contains custom site-specific code (filters, helpers, ‚Ä¶)</dd>
  <dt><code>output/</code></dt>
  <dd>contains the compiled site</dd>
  <dt><code>tmp/</code></dt>
  <dd>contains data used for speeding up compilation (can be safely emptied)</dd>
</dl>
</div>
<div class="section" id="code">
<h3>Code</h3>

<p>nanoc will load all Ruby source files in the <code>lib</code> directory before it starts compiling. All method definitions, class definitions, etc. will be available during the compilation process. This directory is therefore quite useful for putting in site-wide helpers, filters, data sources, etc.</p>

</div>
<div class="section" id="site-configuration">
<h3>Site configuration</h3>

<p>The site configuration is defined by the <code>config.yaml</code> file at the top level of the site directory. The file is in YAML format. The configuration has the following predefined values (check the <a href="../api/3.3/Nanoc/Site.html">API documentation for <code>Nanoc::Site</code></a> for details about the default values):</p>

<dl>
<dt><code>text_extensions</code></dt>
  <dd>A list of file extensions that nanoc will consider to be textual rather than binary. If an item with an extension not in this list is found, the file will be considered as binary.</dd>
  <dt><code>output_dir</code></dt>
  <dd>The path to the directory where all generated files will be written to. This can be an absolute path starting with a slash, but it can also be path relative to the site directory.</dd>
  <dt><code>index_filenames</code></dt>
  <dd>A list of index filenames, i.e. names of files that will be served by a web server when a directory is requested. Usually, index files are named ‚Äúindex.hml‚Äù, but depending on the web server, this may be something else, such as ‚Äúdefault.htm‚Äù. This list is used by nanoc to generate pretty URLs.</dd>
  <dt><code>enable_output_diff</code></dt>
  <dd>Whether or not to generate a diff of the compiled content when compiling a site. The diff will contain the differences between the compiled content before and after the last site compilation.</dd>
  <dt><code>data_sources</code></dt>
  <dd>The data sources where nanoc loads its data from. This is an array of hashes; each array element represents a single data source. By default, there is only a single data source that reads data from the ‚Äúcontent/‚Äù and ‚Äúlayout/‚Äù directories in the site directory. See below for details.</dd>
  <dt><code>watcher</code></dt>
  <dd>Configuration for the ‚Äúwatch‚Äù command, which watches a site for changes and recompiles if necessary. See below for details.</dd>
</dl>
<p>The data source configuration is an array of hashes with the following keys:</p>

<dl>
<dt><code>type</code></dt>
  <dd>The type is the identifier of the data source. By default, this will be <code>filesystem_unified</code>.</dd>
  <dt><code>items_root</code></dt>
  <dd>The path where items should be mounted (comparable to mount points in Unix-like systems). This is ‚Äú/‚Äù by default, meaning that items will have ‚Äú/‚Äù prefixed to their identifiers. If the items root were ‚Äú/en/‚Äù instead, an item at content/about.html would have an identifier of ‚Äú/en/about/‚Äù instead of just ‚Äú/about/‚Äù.</dd>
  <dt><code>layouts_root</code></dt>
  <dd>The path where layouts should be mounted. The layouts root behaves the same as the items root, but applies to layouts rather than items.</dd>
</dl>
<p>The watcher configuration is a hash with the following options:</p>

<dl>
<dt><code>dirs_to_watch</code></dt>
  <dd>A list of directories to watch for changes. When editing this, make sure that the ‚Äúoutput/‚Äù and ‚Äútmp/‚Äù directories are <em>not</em> included in this list, because recompiling the site will cause these directories to change, which  will cause the site to be recompiled, which will cause these directories to change, which will cause the site to be recompiled again, and so on. By default, this contains <code>content</code>, <code>layouts</code> and <code>lib</code>.</dd>
  <dt><code>files_to_watch</code></dt>
  <dd>A list of single files to watch for changes. As mentioned above, don‚Äôt put any files from the ‚Äúoutput/‚Äù or ‚Äútmp/‚Äù directories in here. By default, this contains <code>config.yaml</code> and <code>Rules</code>.</dd>
  <dt><code>notify_on_compilation_success</code></dt>
  <dd>Whether or not to send a Growl or <code>notify-send</code> notification when compilation succeeds.</dd>
  <dt><code>notify_on_compilation_failure</code></dt>
  <dd>Whether or not to send a Growl or <code>notify-send</code> notification when compilation fails.</dd>
</dl>
<p>The prune configuration is a hash with the following options:</p>

<dl>
<dt><code>auto_prune</code></dt>
  <dd>Whether to automatically remove files not managed by nanoc from the output directory. For safety reasons, this is turned off by default.</dd>
  <dt><code>exclude</code></dt>
  <dd>Which files and directories you want to exclude from pruning. If you version your output directory, you should probably exclude VCS directories such as <code>.git</code>, <code>.svn</code> etc. By default, the directories <code>.git</code>, <code>.hg</code>, <code>.svn</code> and <code>CVS</code> will be ignored. </dd>
</dl>
</div>
<div class="section" id="auto-compiling-a-site">
<h3>(Auto)compiling a Site</h3>

<p>To compile a site to its final form, the <code>nanoc compile</code> (or <code>nanoc co</code>) command is used. The compile command is the default command, so it will be invoked if you don‚Äôt pass anything. The compile command will write the compiled site to the output directory as specified in the site configuration file. For example:</p>

<pre title="Compiling a site"><span class="prompt">%</span> <kbd>nanoc compile</kbd>
<span class="prompt">%</span> <kbd>nanoc co</kbd>
<span class="prompt">%</span> <kbd>nanoc</kbd></pre>

<p>nanoc will not compile items that are not outdated. If you want to force nanoc to recompile everything, delete the output directory and re-run the compile command.</p>

<p>It is possible to let nanoc run a local web server, the <em>autocompiler</em>, that serves the nanoc site. Each request will cause the requested item to be compiled on the fly before being served. You can run the autocompiler like this:</p>

<pre title="Compiling a site"><span class="prompt">%</span> <kbd>nanoc autocompile</kbd>
<span class="prompt">%</span> <kbd>nanoc aco</kbd></pre>

<p>The autocompiler will run on port 3000 by default; this can be changed using the <code>--port</code> commandline switch. Note that this autocompiler should <em>only</em> be used for development purposes to make writing sites easier; it is quite unsuitable for use on live servers.</p>

<p>An alternative is the watcher, which will recompile whenever a change to the site is detected. The watcher does not run a web server (you can run one with <code>nanoc view</code>). You can use it like this:</p>

<pre title="Compiling a site"><span class="prompt">%</span> <kbd>nanoc watch &amp;</kbd>
<span class="prompt">%</span> <kbd>nanoc view</kbd></pre>

</div>
</div>
<div class="section" id="items">
<h2>Items</h2>
<p>Items are the basic building blocks of a nanoc-powered site. An item consist of content and metadata attributes.</p>

<p>Items are structured hierarchically. Each item has an identifier that consists of slash-separated parts, which reflects this hierarchy. There is one ‚Äúroot‚Äù or ‚Äúhome‚Äù page which has identifier <code>/</code>; other items will have identifiers such as <code>/journal/2008/some-article/</code>. The hierarchy of files in the <code>content</code> directory reflects this hierarchy.</p>

<p>Items can be textual or binary. If the extension of the item is included in the site configuration‚Äôs <code>text_extension</code> array, it is considered to be textual; otherwise, it will be binary. Site assets such as images, audio files and movies should be binary. Binary items don‚Äôt have their content stored in-memory. Instead, binary items have a filename pointing to the file containing the content.</p>

<p>To get the raw, uncompiled content of a (textual) item, use <a href="../api/3.3/Nanoc/Item.html#raw_content-instance_method"><code>Nanoc::Item#raw_content</code></a>. To get the compiled content, use <a href="../api/3.3/Nanoc/Item.html#compiled_content-instance_method"><code>Nanoc::Item#compiled_content</code></a>. The latter method has a <code>:rep</code> option for specifying the rep to get the compiled content from, and a <code>:snapshot</code> option for specifying the name of the snapshot to fetch. For details, see the <a href="#representations">Representations</a> and <a href="#snapshots">Snapshots</a> sections below. It is not possible to request the content of binary items.</p>

<p>The default list of text extensions is the following:</p>

<pre><code class="language-yaml"><span class="key">text_extensions</span>: <span class="string"><span class="content">[ 'coffee', 'css', 'erb', 'haml', 'handlebars', 'hb', 'htm', 'html', 'js', 'less', 'markdown', 'md', 'ms', 'mustache', 'php', 'rb', 'sass', 'scss', 'txt', 'xhtml', 'xml' ]</span></span></code></pre>

<p>To get the path of the compiled item, use <a href="../api/3.3/Nanoc/Item.html#path-instance_method"><code>Nanoc::Item#path</code></a>. This path is relative to the output directory; it starts with a slash which indicates the web root, i.e. the output directory. The index filenames are stripped off the end of the path. You can pass a <code>:rep</code> option to get the path of a specific representation. For example, the path of an item that is compiled to <code>output/foo/index.html</code> is <code>/foo/</code>.</p>

<p>During compilation, items cannot be modified. You can, however, adjust the item content and attributes in the preprocessor.</p>

<div class="section" id="creating-an-item">
<h3>Creating an Item</h3>

<p>Items are stored as plaintext files on the hard drive (unless you‚Äôre using esoteric data sources), so it‚Äôs easy to manually create items. nanoc provides a <code>create_item</code> (or <code>ci</code>) command for making item generation easier, though. This command looks like this:</p>

<pre title="Creating an item"><span class="prompt">%</span> <kbd>nanoc create_item</kbd> <var>item_identifier</var></pre>

</div>
<div class="section" id="attributes">
<h3>Attributes</h3>

<p>Each item has attributes (metadata) associated with it. This metadata consists of key-value pairs, which are stored in YAML format (although this may vary for different data sources). All attributes are free-form; there are no predefined attributes.</p>

<p>Some filters or helpers may use certain attributes. When using such filters or helpers, be sure to check their documentation (see below) to see what attributes they use, if any.</p>

<p>When using a filesystem-based data source, attributes are stored as YAML in either the top of the file representing the item, or a separate file with the same base name. For example, an item at <code>content/about.html</code> could look like this when the metadata is embedded into the file:</p>

<pre title="Item with embedded metadata"><code class="language-yaml"><span class="head"><span class="head">---</span></span>
<span class="key">title</span>: <span class="string"><span class="delimiter">"</span><span class="content">Some Page</span><span class="delimiter">"</span></span>
<span class="head"><span class="head">---</span></span></code>

<code class="language-html"><span class="tag">&lt;p&gt;</span>Lorem ipsum dolor sit amet‚Ä¶<span class="tag">&lt;/p&gt;</span></code></pre>

<p>If you are using the default data source (<code>filesystem_unified</code>), then each item will automatically receive some extra attributes that may be useful. These are:</p>

<dl>
<dt><code>:filename</code></dt>
  <dd>the name of the file corresponding to the item (if there is only one file that contains both content and metadata)</dd>
  <dt><code>:content_filename</code></dt>
  <dd>the name of the content file (if there is a content file)</dd>
  <dt><code>:meta_filename</code></dt>
  <dd>the name of the meta-file (if there is a meta-file)</dd>
  <dt><code>:extension</code></dt>
  <dd>the extension of the file or the content file (if there is one, because it is possible to have a meta-file without a corresponding content file)</dd>
</dl>
</div>
<div class="section" id="representations">
<h3>Representations</h3>

<p>An item representation (or ‚Äúrep‚Äù for short) is a compiled version of an item. Each representation has a name (a symbol, not a string). An item can have multiple representations, though usually it will have just one (named <code>default</code>).</p>

<p>Multiple representations are useful when items need to be available in multiple formats. For example, HTML and XHTML. You could also have a <code>raw</code> representation that isn‚Äôt compiled at all‚Äîjust the raw, unfiltered, non-laid out content. Sometimes, it may even be useful to have XML, YAML or JSON representations of an item.</p>

<p>An item‚Äôs list of representation can be fetched by calling <a href="../api/3.3/Nanoc/Item.html#reps-instance_method"><code>Nanoc::Item#reps</code></a> instance. To get a specific rep, use <a href="../api/3.3/Nanoc/Item.html#rep_named-instance_method"><code>Nanoc::Item#rep_named</code></a> with the rep name, like this:</p>

<pre title="Finding the item rep with the given name"><code class="language-ruby">rep = <span class="instance-variable">@item</span>.rep_named(<span class="symbol">:default</span>)</code></pre>

</div>
<div class="section" id="snapshots">
<h3>Snapshots</h3>

<p>A snapshot is the compiled content at a specific point during the compilation process. Snapshots can be generated manually, but some snapshots are generated automatically (see below).</p>

<p>To get the compiled content of a specific snapshot, use the <code>:snapshot</code> option of <a href="../api/3.3/Nanoc/Item.html#compiled_content-instance_method"><code>Nanoc::Item#compiled_content</code></a> or <a href="../api/3.3/Nanoc/ItemRep.html#compiled_content-instance_method"><code>Nanoc::ItemRep#compiled_content</code></a>. For example:</p>

<pre title="Getting the compiled content at a certain snapshot"><code class="language-ruby">stuff = some_item.compiled_content(<span class="symbol">:snapshot</span> =&gt; <span class="symbol">:pre</span>)
stuff = some_rep.compiled_content(<span class="symbol">:snapshot</span> =&gt; <span class="symbol">:last</span>)</code></pre>

<p>The following snapshots are generated automatically:</p>

<dl>
<dt><code>:raw</code></dt>
  <dd>The content right before actual compilation is started</dd>
  <dt><code>:pre</code></dt>
  <dd>The content right before the item is laid out</dd>
  <dt><code>:post</code></dt>
  <dd>The content after the item has been laid out and post-filtered</dd>
  <dt><code>:last</code></dt>
  <dd>The most recent compiled content</dd>
</dl>
<p>The <code>:post</code> and <code>:last</code> snapshots will usually be the same. The difference is that <code>:last</code> is a moving snapshot: it always refers to the last compiled content. <code>:last</code> may refer to <code>:raw</code> or <code>:pre</code> early on, but may point to <code>:post</code> later. Also, there will <em>always</em> be a <code>:last</code> snapshot but not necessary a <code>:post</code> snapshot; items that are not laid out will not have one.</p>

<p>Binary items cannot have snapshots.</p>

</div>
<div class="section" id="variables">
<h3>Variables</h3>

<p>When compiling items with filters that support adding code to the item or the layout (such as ERB and Haml), several variables are made available. These variables are:</p>

<dl>
<dt><code>@item_rep</code></dt>
  <dd>The item representation that is currently being compiled.</dd>
  <dt><code>@item</code></dt>
  <dd>The item that is currently being compiled.</dd>
  <dt><code>@items</code></dt>
  <dd>The list of all items, including ones that have not yet been compiled.</dd>
  <dt><code>@layout</code></dt>
  <dd>The layout that is currently being used in the layout phase.</dd>
  <dt><code>@layouts</code></dt>
  <dd>The list of all layouts.</dd>
  <dt><code>@config</code></dt>
  <dd>The site configuration as a hash.</dd>
  <dt><code>@site</code></dt>
  <dd>The site.</dd>
</dl>
<p>To get an item attribute, use the <a href="../api/3.3/Nanoc/Item.html#%5B%5D-instance_method"><code>Nanoc::Item#[]</code></a> method and pass the attribute key as a symbol, e.g. <code>@item[:author]</code>.</p>

</div>
</div>
<div class="section" id="layouts">
<h2>Layouts</h2>

<p>On itself, an item‚Äôs content is not valid HTML yet: it lacks the structure a typical HTML document has. A layout is used to add this missing structure to the item.</p>

<p>For a layout to be useful, it must output the item‚Äôs content at a certain point. This is done by outputting <code>yield</code>. This extremely minimal layout shows an example of how this is usually done:</p>

<pre title="A minimalistic layout"><code class="language-html"><span class="tag">&lt;html&gt;</span>
  <span class="tag">&lt;head&gt;</span>
    <span class="tag">&lt;title&gt;</span><span class="error">&lt;</span>%=h @item[:title] %<span class="error">&gt;</span><span class="tag">&lt;/title&gt;</span>
  <span class="tag">&lt;/head&gt;</span>
  <span class="tag">&lt;body&gt;</span>
    <span class="error">&lt;</span>%= yield %<span class="error">&gt;</span>
  <span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre>

<p>An item is put into a layout by calling the <code>layout</code> function in a compilation rule. See the <a href="#compilation-rules">Compilation Rules</a> section for details.</p>

<p>During compilation, layouts cannot be modified. You can, however, adjust the layout content and attributes in the preprocessor.</p>

<div class="section" id="as-partials">
<h3>As Partials</h3>

<p>Layouts can also be used as <em>partials</em>: a specific layout can be rendered into an item or a layout by using the <code>render</code> function, which takes the layout name as an argument. For example:</p>

<pre title="Rendering the ‚Äúhead‚Äù layout as a partial"><code class="language-html"><span class="error">&lt;</span>%= render 'head' %<span class="error">&gt;</span></code></pre>

<p>To use this helper, activate the <a href="../api/3.3/Nanoc/Helpers/Rendering.html">Rendering</a> helper (see the <a href="#helpers">helpers</a> section for details), which is done by adding this line of code to some file in the <code>lib</code> directory (I recommend <code>lib/helpers.rb</code>):</p>

<pre title="Activating the Rendering helper"><code class="language-ruby">include <span class="constant">Nanoc</span>::<span class="constant">Helpers</span>::<span class="constant">Rendering</span></code></pre>

<p>It is also possible to pass custom variables to rendered partials by putting them into a hash passed to <code>#render</code>. The following example will make a <code>@title</code> variable (set to <code>"Foo"</code> in this example) available in the <code>head</code> layout:</p>

<pre title="Rendering the ‚Äúhead‚Äù partial with custom variables"><code class="language-html"><span class="error">&lt;</span>%= render "head", :title =<span class="error">&gt;</span> "Foo" %<span class="error">&gt;</span></code></pre>

</div>
</div>
<div class="section" id="rules">
<h2>Rules</h2>
<p>The instructions for processing items are located in a file named <code>Rules</code> which lives in a nanoc site directory. This rules file contains <em>routing rules</em>, <em>compilation rules</em> and <em>layouting rules</em>. Compilation rules determine the actions that should be executed during compilation (filtering, layouting), routing rules determine the path where the compiled files should be written to, and layouting rules determine the filter that should be used for a given layout.</p>

<p>A rule consists of a selector, which identifies which items the rule should be applicable to, and an action block (except for layouting rules), which contains the actions to perform.</p>

<p>Each item has exactly one compilation rule and one routing rule. Similarly, each layout has exactly one layouting rule. The first matching rule that is found in the rules file is used. If an item or a layout is not using the correct rule, double-check to make sure that the rules are in the correct order.</p>

<div class="section" id="routing-rules">
<h3>Routing Rules</h3>

<p>A routing rule looks like this:</p>

<pre title="An example (incomplete) routing rule"><code class="language-ruby">route <span class="string"><span class="delimiter">'</span><span class="content">/foo/</span><span class="delimiter">'</span></span> <span class="keyword">do</span>
  <span class="comment"># (routing code here)</span>
<span class="keyword">end</span></code></pre>

<p>The argument for the <a href="../api/3.3/Nanoc/CompilerDSL.html#route-instance_method"><code>#route</code></a> method is the identifier of the item that should be compiled. It can also be a string that contains the <code>*</code> wildcard, which matches zero or more characters. Additionally, it can be a regular expression.</p>

<p>A <code>:rep</code> argument can be passed to the <a href="../api/3.3/Nanoc/CompilerDSL.html#route-instance_method"><code>#route</code></a> call. This indicates the name of the representation this rule should apply to. This is <code>:default</code> by default, which means routing rules apply to the default representation unless specified otherwise.</p>

<p>The code block should return the routed path for the relevant item. The code block can return nil, in which case the item will not be written.</p>

<p>In the code block, you have access to <code>@rep</code>, which is the item representation that is currently being processed, and <code>@item</code>, which is an alias for <code>@rep.item</code>.</p>

<p><strong>Example #1</strong>: The following rule will give the item with identifier <code>/404/</code> the path <code>/errors/404.php</code>:</p>

<pre title="Routing the ‚Äú/404/‚Äù item to ‚Äú/errors/404.php‚Äù"><code class="language-ruby">route <span class="string"><span class="delimiter">"</span><span class="content">/404/</span><span class="delimiter">"</span></span> <span class="keyword">do</span>
  <span class="string"><span class="delimiter">"</span><span class="content">/errors/404.php</span><span class="delimiter">"</span></span>
<span class="keyword">end</span></code></pre>

<p><strong>Example #2</strong>: The following rule will give all identifiers for which no prior matching rule exists a path based directly on its identifier (for example, the item <code>/foo/bar/</code> would get the path <code>/foo/bar/index.html</code>):</p>

<pre title="Routing using a fallback routing rule"><code class="language-ruby">route <span class="string"><span class="delimiter">"</span><span class="content">*</span><span class="delimiter">"</span></span> <span class="keyword">do</span>
  rep.item.identifier + <span class="string"><span class="delimiter">"</span><span class="content">index.html</span><span class="delimiter">"</span></span>
<span class="keyword">end</span></code></pre>

<p><strong>Example #3</strong>: The following rule will prevent all items with identifiers starting with <code>/links/</code>, including the <code>/links/</code> item itself, from being written (the items will still be compiled so that they can be included in other items, however):</p>

<pre title="Preventing the ‚Äú/links/‚Äù item and its sub-items from being written"><code class="language-ruby">route <span class="string"><span class="delimiter">"</span><span class="content">/links/*</span><span class="delimiter">"</span></span> <span class="keyword">do</span>
  <span class="predefined-constant">nil</span>
<span class="keyword">end</span></code></pre>

<p><strong>Example #4</strong>: The following rule will apply to all items below <code>/people/</code>, but not the <code>/people/</code> item itself, and only to textual representations (with name equal to <code>:text</code>):</p>

<pre title="Routing sub-items of ‚Äú/people/‚Äù to a ‚Äú.txt‚Äù file"><code class="language-ruby">route <span class="string"><span class="delimiter">"</span><span class="content">/people/*/</span><span class="delimiter">"</span></span>, <span class="symbol">:rep</span> =&gt; <span class="symbol">:text</span> <span class="keyword">do</span>
  item.identifier + <span class="string"><span class="delimiter">"</span><span class="content">.txt</span><span class="delimiter">"</span></span>
<span class="keyword">end</span></code></pre>

</div>
<div class="section" id="compilation-rules">
<h3>Compilation Rules</h3>

<p>A compilation rule looks like this:</p>

<pre title="An example (incomplete) compilation rule"><code class="language-ruby">compile <span class="string"><span class="delimiter">"</span><span class="content">/foo/</span><span class="delimiter">"</span></span> <span class="keyword">do</span>
  <span class="comment"># (compilation code here)</span>
<span class="keyword">end</span></code></pre>

<p>The argument for the <code>#compile</code> command is exactly the same as the argument
for <code>#route</code>; see above for details.</p>

<p>Just like with routing rules, a <code>:rep</code> argument can be passed to the
<code>#compile</code> call. This indicates the name of the representation this rule
should apply to. This is <code>:default</code> by default, which means compilation
rules apply to the default representation unless specified otherwise.</p>

<p>The code block should execute the necessary actions for compiling the item. It
does not have to return anything.</p>

<p>In the code block, you have access to <code>@rep</code>, which is the item representation
that is currently being processed, and <code>@item</code>, which is an alias for
<code>@rep.item</code>.</p>

<p>A compilation action can either be a filter action, a layout action, or a
snapshot action.</p>

<p>To filter an item representation, call <code>#filter</code> pass the name of the filter as argument, along with any other filter arguments. For example, the following will call the <code>:erb</code> filter on the current item representation:</p>

<pre title="Calling the ‚Äúerb‚Äù filter"><code class="language-ruby">filter <span class="symbol">:erb</span></code></pre>

<p>Additional parameters can be given to invocations of <code>#filter</code>. This is used by some filters, such as the Haml one (<code>:haml</code>), to alter filter behaviour in one way or another. For example, the following invokes the <code>:haml</code> filter with an additional parameter:</p>

<pre title="Calling the ‚Äúhaml‚Äù filter with extra arguments"><code class="language-ruby">filter <span class="symbol">:haml</span>, <span class="symbol">:format</span> =&gt; <span class="symbol">:html5</span></code></pre>

<p>To lay out an item representation, call <code>#layout</code> and pass the layout identifier as argument. For example, the following will lay out the item representation using the <code>/default/</code> layout:</p>

<pre title="Laying out the item with the ‚Äúdefault‚Äù layout"><code class="language-ruby">layout <span class="string"><span class="delimiter">'</span><span class="content">default</span><span class="delimiter">'</span></span></code></pre>

<p>You can run multiple filters and layouts sequentially, like this:</p>

<pre title="Calling multiple filters"><code class="language-ruby">filter <span class="symbol">:erb</span>
filter <span class="symbol">:kramdown</span>
layout <span class="string"><span class="delimiter">'</span><span class="content">default</span><span class="delimiter">'</span></span>
filter <span class="symbol">:rubypants</span></code></pre>

<p>To take a snapshot of an item representation, call <code>#snapshot</code> and pass the snapshot name as argument. For example, the following will create a <code>:foo</code> snapshot of the item representation that can later be referred to:</p>

<pre title="Creating a snapshot named ‚Äúfoo‚Äù of the current compiled content"><code class="language-ruby">snapshot <span class="symbol">:foo</span></code></pre>

<p>You‚Äôll usually call <code>#filter</code>, <code>#layout</code> and <code>#snapshot</code> without explicit receiver, but you can also call them on the <code>@rep</code> object if you want. The following actions are equivalent:</p>

<pre title="Some examples of equivalent calls (with and without explicit receiver)"><code class="language-ruby">filter <span class="symbol">:erb</span>
<span class="instance-variable">@rep</span>.filter <span class="symbol">:erb</span>

layout <span class="string"><span class="delimiter">'</span><span class="content">default</span><span class="delimiter">'</span></span>
<span class="instance-variable">@rep</span>.layout <span class="string"><span class="delimiter">'</span><span class="content">default</span><span class="delimiter">'</span></span>

snapshot <span class="symbol">:foo</span>
<span class="instance-variable">@rep</span>.snapshot <span class="symbol">:foo</span></code></pre>

<p><strong>Example #1</strong>: The following rule will not perform any actions, i.e. the item
will not be filtered nor laid out:</p>

<pre><code class="language-ruby">compile <span class="string"><span class="delimiter">'</span><span class="content">/sample/one/</span><span class="delimiter">'</span></span> <span class="keyword">do</span>
<span class="keyword">end</span></code></pre>

<p><strong>Example #2</strong>: The following rule will filter the rep using the <code>erb</code> filter,
but not lay out the rep:</p>

<pre><code class="language-ruby">compile <span class="string"><span class="delimiter">'</span><span class="content">/samples/two/</span><span class="delimiter">'</span></span> <span class="keyword">do</span>
  filter <span class="symbol">:erb</span>
<span class="keyword">end</span></code></pre>

<p><strong>Example #3</strong>: The following rule will filter the rep using the <code>erb</code> filter,
lay out the rep using the <code>shiny</code> layout, and finally run the laid out rep
through the <code>rubypants</code> filter:</p>

<pre><code class="language-ruby">compile <span class="string"><span class="delimiter">'</span><span class="content">/samples/three/</span><span class="delimiter">'</span></span> <span class="keyword">do</span>
  filter <span class="symbol">:erb</span>
  layout <span class="string"><span class="delimiter">'</span><span class="content">/shiny/</span><span class="delimiter">'</span></span>
  filter <span class="symbol">:rubypants</span>
<span class="keyword">end</span></code></pre>

<p><strong>Example #4</strong>: The following rule will filter the rep using the
<code>relativize_paths</code> filter with the filter argument <code>type</code> equal to <code>css</code>:</p>

<pre><code class="language-ruby">compile <span class="string"><span class="delimiter">'</span><span class="content">/assets/style/</span><span class="delimiter">'</span></span> <span class="keyword">do</span>
  filter <span class="symbol">:relativize_paths</span>, <span class="symbol">:type</span> =&gt; <span class="symbol">:css</span>
<span class="keyword">end</span></code></pre>

<p><strong>Example #5</strong>: The following rule will filter the rep and layout it by
invoking <code>#filter</code> or <code>#layout</code> with an explicit receiver (with and without @ sign):</p>

<pre><code class="language-ruby">compile <span class="string"><span class="delimiter">'</span><span class="content">/samples/three/</span><span class="delimiter">'</span></span> <span class="keyword">do</span>
  <span class="instance-variable">@rep</span>.filter <span class="symbol">:erb</span>
  <span class="instance-variable">@rep</span>.layout <span class="string"><span class="delimiter">'</span><span class="content">/shiny/</span><span class="delimiter">'</span></span>
  <span class="instance-variable">@rep</span>.filter <span class="symbol">:rubypants</span>
<span class="keyword">end</span></code></pre>

<p><strong>Example #6</strong>: The following rule will apply to all items below <code>/people/</code>,
and only to textual representations (with name equal to <code>text</code>):</p>

<pre><code class="language-ruby">compile <span class="string"><span class="delimiter">'</span><span class="content">/people/*</span><span class="delimiter">'</span></span>, <span class="symbol">:rep</span> =&gt; <span class="symbol">:text</span> <span class="keyword">do</span>
  <span class="comment"># don't filter or layout</span>
<span class="keyword">end</span></code></pre>

<p><strong>Example #7</strong>: The following rule will create a snapshot named <code>without_toc</code>
so that the content at that snapshot can then later be reused elsewhere:</p>

<pre><code class="language-ruby">compile <span class="string"><span class="delimiter">'</span><span class="content">/foo/</span><span class="delimiter">'</span></span> <span class="keyword">do</span>
  filter   <span class="symbol">:markdown</span>
  snapshot <span class="symbol">:without_toc</span>
  filter   <span class="symbol">:add_toc</span>
<span class="keyword">end</span></code></pre>

</div>
<div class="section" id="layouting-rules">
<h3>Layouting Rules</h3>

<p>To specify the filter used for a layout, use the <code>#layout</code> method.</p>

<p>The first argument should be a string containing the identifier of the layout.
It can also be a string that contains the <code>*</code> wildcard, which matches zero or
more characters. Additionally, it can be a regular expression.</p>

<p>The second should be the identifier of the filter to use.</p>

<p>In addition to the first two arguments, extra arguments can be supplied; these
will be passed on to the filter.</p>

<p><strong>Example #1</strong>: The following rule will make all layouts use the <code>:erb</code>
filter:</p>

<pre><code class="language-ruby">layout <span class="string"><span class="delimiter">'</span><span class="content">*</span><span class="delimiter">'</span></span>, <span class="symbol">:erb</span></code></pre>

<p><strong>Example #2</strong>: The following rule will make the default layout use the <code>haml</code>
filter and pass a filter argument:</p>

<pre><code class="language-ruby">layout <span class="string"><span class="delimiter">'</span><span class="content">/default/</span><span class="delimiter">'</span></span>, <span class="symbol">:haml</span>, <span class="symbol">:format</span> =&gt; <span class="symbol">:html5</span></code></pre>

<p><strong>Example #3</strong>: The following rule will be applied to all layouts with identifiers starting with a slash followed by an underscore, and ending with a slash. For example, ‚Äú/foo/‚Äù and ‚Äú/foo/_bar/‚Äù would not match, but ‚Äú/_foo/‚Äù, ‚Äú/_foo/bar/‚Äù and even ‚Äú/_foo/_bar/‚Äù would:</p>

<pre><code class="language-ruby">layout <span class="regexp"><span class="delimiter">%r{</span><span class="content">^/_.+/$</span><span class="delimiter">}</span></span>, <span class="symbol">:erb</span></code></pre>

</div>
</div>
<div class="section" id="the-compilation-process">
<h2>The Compilation Process</h2>

<p>Compiling a site involves several steps:</p>

<ol>
<li>Loading the site data</li>
  <li>Preprocessing the site data</li>
  <li>Building the item representations</li>
  <li>Routing the item representations</li>
  <li>Compiling the item representations</li>
</ol>
<div class="section" id="loading-the-site-data">
<h3>Loading the Site Data</h3>

<p>Before compilation starts, data for items and layouts will be read from all data sources, and mounted at the roots specified by the data sources. For more information about data sources, see the <a href="#data-sources">Data Sources</a> section.</p>

</div>
<div class="section" id="preprocessing-the-site-data">
<h3>Preprocessing the Site Data</h3>

<p>After the data is loaded, it is <em>preprocessed</em> if a preprocessor block exists. A preprocessor block is a simple piece of code defined in the <code>Rules</code> file that will be executed after the data is loaded. It looks like this:</p>

<pre title="A sample preprocessor block"><code class="language-ruby">preprocess <span class="keyword">do</span>
  <span class="comment"># (preprocessing code here)</span>
<span class="keyword">end</span></code></pre>

<p>Preprocessors can modify data coming from data sources before it is compiled. It can change item attributes, content and the path, but also add and remove items.</p>

<p>Preprocessors can be used for various purposes. Here are two sample uses:</p>

<ul>
<li>
    <p>A preprocessor could set a <code>language_code</code> attribute based on the item path. An item such as <code>/en/about/</code> would get an attribute <code>language_code</code> equal to <code>'en'</code>. This would eliminate the need for helpers such as <code>language_code_of</code>.</p>
  </li>
  <li>
    <p>A preprocessor could create new (in-memory) items for a given set of items. This can be useful for creating pages that contain paginated items.</p>
  </li>
</ul>
</div>
<div class="section" id="building-the-item-representations">
<h3>Building the Item Representations</h3>

<p>Once the data is loaded and preprocessed, item representations are built for each item. For each item, its compilation rules (one per item representation) are looked up and a rep is built for each rule.</p>

<p>For example, the following code will cause the item <code>/foo/</code> to have only one rep (<code>default</code>), while the item <code>/bar/</code> will have two reps (<code>raw</code> and <code>full</code>):</p>

<pre title="A sample Rules file with compilation rules for different representations"><code class="language-ruby">compile <span class="string"><span class="delimiter">'</span><span class="content">/foo/</span><span class="delimiter">'</span></span> <span class="keyword">do</span>
  <span class="comment"># (compilation code for the default rep here)</span>
<span class="keyword">end</span>

compile <span class="string"><span class="delimiter">'</span><span class="content">/bar/</span><span class="delimiter">'</span></span>, <span class="symbol">:rep</span> =&gt; <span class="symbol">:raw</span> <span class="keyword">do</span>
  <span class="comment"># (compilation code for the :raw rep here)</span>
<span class="keyword">end</span>

compile <span class="string"><span class="delimiter">'</span><span class="content">/bar/</span><span class="delimiter">'</span></span>, <span class="symbol">:rep</span> =&gt; <span class="symbol">:full</span> <span class="keyword">do</span>
  <span class="comment"># (compilation code for the :full rep here)</span>
<span class="keyword">end</span></code></pre>

</div>
<div class="section" id="routing-the-item-representations">
<h3>Routing the Item Representations</h3>

<p>For each item representation, the matching routing rule is looked up and applied to the item rep. The item rep‚Äôs path to the output file will be set to the return value of the routing rule block.</p>

<p>The routing rule block can also return nil, in which case the item representation will not be written to the disk‚Äîuseful when items should be included as part of other, larger items, but should not exist separately.</p>

<p>For example, the following code will cause the item <code>/foo/</code> to be written to <code>output/abc.html</code>, while the <code>/bar/</code> item will be written to <code>output/xyz.css</code>, and the item <code>/qux/</code> will not be written at all:</p>

<pre title="A sample Rules file where items are routed to specific locations"><code class="language-ruby">route <span class="string"><span class="delimiter">'</span><span class="content">/foo/</span><span class="delimiter">'</span></span> <span class="keyword">do</span>
  <span class="string"><span class="delimiter">'</span><span class="content">/abc.html</span><span class="delimiter">'</span></span>
<span class="keyword">end</span>

route <span class="string"><span class="delimiter">'</span><span class="content">/bar/</span><span class="delimiter">'</span></span> <span class="keyword">do</span>
  <span class="string"><span class="delimiter">'</span><span class="content">/xyz.css</span><span class="delimiter">'</span></span>
<span class="keyword">end</span>

route <span class="string"><span class="delimiter">'</span><span class="content">/qux/</span><span class="delimiter">'</span></span> <span class="keyword">do</span>
  <span class="predefined-constant">nil</span>
<span class="keyword">end</span></code></pre>

</div>
<div class="section" id="compiling-the-item-representations">
<h3>Compiling the Item Representations</h3>

<p>Compiling an item means compiling all of its representations, which in turn involves executing the compilation rules on each representation. After a compilation rule has been applied, the item representation‚Äôs compiled content will be written to its output file (if it has one) determined by its routing rule.</p>

<p>The following diagram illustrates item compilation by giving a few examples of how items can be filtered and laid out.</p>

<div class="figure">
	<img src="../../assets/images/manual/item_compilation_diagram.png" alt="Diagram giving several examples of how items can be filtered and laid out">
</div>

<p>Items that have content dependencies on other items, i.e. items that include the content of another item, will be compiled once the content of the items it depends on is available. Circular content dependencies (item ‚ÄúA‚Äù requiring the content of item ‚ÄúB‚Äù and vice versa) are detected and reported.</p>

</div>
</div>
<div class="section" id="filters">
<h2>Filters</h2>

<p>Filters are used for transforming an item‚Äôs content. For example, the ERB filter interprets the item‚Äôs content as text with embedded Ruby, executes the embedded Ruby and returns the result. Each filter has an identifier (a symbol), which is used in the call to <code>#filter</code> in a compilation rule.</p>

<p>Filters can be applied to binary items as well. For example, thumbnail generation for a gallery page can be handled by nanoc. Filters can also convert textual content into binary files and vice versa; text-to-speech filters and OCR filters are therefore possible (but perhaps not very useful).</p>

<p>nanoc comes with quite a handful of filters. <a href="http://nanoc.stoneship.org/docs/api/3.3/Nanoc/Filters.html">Here‚Äôs a list</a>.</p>

</div>
<div class="section" id="helpers">
<h2>Helpers</h2>

<p>A helper is a module with useful functions that can be used in items and layouts.</p>

<p>Helpers need to be activated before they can be used. To activate a helper, <code>include</code> it, like this (in a file in the <code>lib</code> directory, such as <code>lib/helpers.rb</code>):</p>

<pre title="Activating the Blogging helper by #include‚Äôing it"><code class="language-ruby">include <span class="constant">Nanoc</span>::<span class="constant">Helpers</span>::<span class="constant">Blogging</span></code></pre>

<p>Here‚Äôs a <a href="http://nanoc.stoneship.org/docs/api/3.3/Nanoc/Helpers.html">list of helpers that come with nanoc</a>.</p>

</div>
<div class="section" id="rake-tasks">
<h2>Rake Tasks</h2>

<p>nanoc comes with a couple of useful built-in rake tasks. To use them, require them in your rakefile, like this:</p>

<pre title="Making built-in nanoc tasks available for Rake"><code class="language-ruby">require <span class="string"><span class="delimiter">'</span><span class="content">nanoc/tasks</span><span class="delimiter">'</span></span></code></pre>

<p>The tasks that come with nanoc are:</p>

<dl>
<dt><code>clean</code></dt>
  <dd>Removes all files generated by nanoc from the output directory.</dd>
  <dt><code>validate:css</code></dt>
  <dd>Validates the site‚Äôs CSS files.</dd>
  <dt><code>validate:html</code></dt>
  <dd>Validates the site‚Äôs HTML files.</dd>
</dl>
<p>Please note that the HTML/CSS validation tasks validate each file by sending it to the W3C validator. Depending on the number of files you have, this may be quite slow.</p>

</div>
<div class="section" id="data-sources">
<h2>Data Sources</h2>

<p>Each site has one or more <em>data sources</em>: objects that can load site data (items and layouts) from certain locations, and even create new items and layouts.</p>

<p>New nanoc sites will have only one data source: the <code>filesystem_unified</code> one. For details about this data source, see the <a href="http://nanoc.stoneship.org/docs/api/3.3/Nanoc/DataSources/FilesystemUnified.html">documentation for <code>FilesystemUnified</code></a>.</p>

<p>The site configuration has a list of hashes containing the data source configurations. Each list item is a hash with the following keys:</p>

<dl>
<dt><code>type</code></dt>
  <dd>The identifier of data source to use (<code>filesystem_unified</code>, <code>filesystem_verbose</code>‚Ä¶)</dd>
  <dt><code>items_root</code></dt>
  <dd>The root where items should be mounted. Optional; defaults to <code>/</code>.</dd>
  <dt><code>layouts_root</code></dt>
  <dd>The root where layouts should be mounted. Optional; defaults to <code>/</code>.</dd>
  <dt><code>config</code></dt>
  <dd>A hash containing custom configuration options for the data source. The contents of this hash depends on the data source used; see the documentation of the data source for details.</dd>
</dl>
<p>For example, the configuration of a site that uses many data sources could look like this:</p>

<pre title="A site configuration with multiple data sourcs"><code class="language-yaml"><span class="key">data_sources</span>:
  -
    <span class="comment"># This data source simply loads data from the filesystem.</span>
    <span class="key">type</span>:       <span class="string"><span class="content">'filesystem_unified'</span></span>
  -
    <span class="comment"># This data source loads events as items from a calendar application</span>
    <span class="comment"># and stores the loaded items under /events.</span>
    <span class="key">type</span>:       <span class="string"><span class="content">'calendar'</span></span>
    <span class="key">items_root</span>: <span class="string"><span class="content">'/events'</span></span></code></pre>

<p>nanoc comes bundled with the following two data sources:</p>

<dl>
<dt><a href="../api/3.3/Nanoc/DataSources/FilesystemUnified.html"><code>filesystem_unified</code></a></dt>
  <dd>Reads data from files on the disk. It is the default data source for new sites.</dd>
  <dt><a href="../api/3.3/Nanoc/DataSources/FilesystemVerbose.html"><code>filesystem_verbose</code></a></dt>
  <dd>Reads data from files on the disk. Older versions of nanoc used this data source as the default one.</dd>
</dl>
</div>
</div>
</div>
</div>
<!-- ***** footer ***** -->
<div id="footer">
<p>SeqWare ¬© 2007‚Äì2012 Brian O&#8217;Connor. SeqWare is released under the a <a rel="license" href="http://www.gnu.org/licenses/licenses.html">GNU GPL v3</a>. This site is built using the excellent <a href="http://nanoc.stoneship.org/">nanoc</a> tool and example site along with the <a href="http://www.fonts.info/info/press/free-fonts-for-font-face-embedding.htm">Graublau</a> and <a href="http://scripts.sil.org/Gentium">Gentium</a> fonts.</p>
</div>
</body>
</html>
;T;	I"8äThe Commandline Tool
--------------------

Interacting with nanoc happens through a commandline tool named `nanoc`. This tool has a few sub-commands, which you can invoke like this:

<pre title="Executing a nanoc command"><span class="prompt">%</span> <kbd>nanoc</kbd> <var>command</var></pre>

Here, `command` obviously is the name of the command you‚Äôre invoking. A very useful command is the `help` command, which will give you a detailed description of a given command. You can use it like this:

<pre title="Getting help on a command"><span class="prompt">%</span> <kbd>nanoc help</kbd> <var>command</var></pre>

For example, this is the help for the `create_site` command:

<pre title="Getting help on the create_site command"><span class="prompt">%</span> <kbd>nanoc help create_site</kbd>
nanoc create_site [path]

aliases: cs

create a site

    Create a new site at the given path. The site will use the compact
    filesystem data source by default, but this can be changed by
    using the --datasource commandline option.

options:

   -d --datasource specify the data source for the new site</pre>

If you want general help, such as a list of available commands and global options, omit the command name, like this:

<pre title="Getting general help for nanoc"><span class="prompt">%</span> <kbd>nanoc help</kbd></pre>

So, if you‚Äôre ever stuck, consult the the commandline help which (hopefully) will put you back on track.

Sites
-----
A site managed by nanoc is a directory with a specific structure. A site consists of items, layouts, a site configuration and a set of rules.

The way the data in a site is stored depends on the data source that is being used. However, unless you‚Äôve explicitly told nanoc to use a different data source, the `filesystem_unified` one will be used. This manual assumes that this `filesystem_unified` data source is used. For details, see the [Data Sources](#data-sources) section.

### Creating a Site

To create a site, use the `create_site` command. This command takes the site name as its first and only argument, like this:

<pre title="Creating a site"><span class="prompt">%</span> <kbd>nanoc create_site</kbd> <var>site_name</var></pre>

This will create a directory with the given site name, with a bare-bones directory layout.

### Structure

A site has the following files and directories:

`config.yaml`
: contains the site configuration

`Rules`
: contains compilation, routing and layouting rules

`content/`
: contains the uncompiled items

`layouts/`
: contains the layouts

`lib/`
: contains custom site-specific code (filters, helpers, ‚Ä¶)

`output/`
: contains the compiled site

`tmp/`
: contains data used for speeding up compilation (can be safely emptied)

### Code

nanoc will load all Ruby source files in the `lib` directory before it starts compiling. All method definitions, class definitions, etc. will be available during the compilation process. This directory is therefore quite useful for putting in site-wide helpers, filters, data sources, etc.

### Site configuration

The site configuration is defined by the `config.yaml` file at the top level of the site directory. The file is in YAML format. The configuration has the following predefined values (check the [API documentation for `Nanoc::Site`](/docs/api/3.3/Nanoc/Site.html) for details about the default values):

`text_extensions`
: A list of file extensions that nanoc will consider to be textual rather than binary. If an item with an extension not in this list is found, the file will be considered as binary.

`output_dir`
: The path to the directory where all generated files will be written to. This can be an absolute path starting with a slash, but it can also be path relative to the site directory.

`index_filenames`
: A list of index filenames, i.e. names of files that will be served by a web server when a directory is requested. Usually, index files are named ‚Äúindex.hml‚Äù, but depending on the web server, this may be something else, such as ‚Äúdefault.htm‚Äù. This list is used by nanoc to generate pretty URLs.

`enable_output_diff`
: Whether or not to generate a diff of the compiled content when compiling a site. The diff will contain the differences between the compiled content before and after the last site compilation.

`data_sources`
: The data sources where nanoc loads its data from. This is an array of hashes; each array element represents a single data source. By default, there is only a single data source that reads data from the ‚Äúcontent/‚Äù and ‚Äúlayout/‚Äù directories in the site directory. See below for details.

`watcher`
: Configuration for the ‚Äúwatch‚Äù command, which watches a site for changes and recompiles if necessary. See below for details.

The data source configuration is an array of hashes with the following keys:

`type`
: The type is the identifier of the data source. By default, this will be `filesystem_unified`.

`items_root`
: The path where items should be mounted (comparable to mount points in Unix-like systems). This is ‚Äú/‚Äù by default, meaning that items will have ‚Äú/‚Äù prefixed to their identifiers. If the items root were ‚Äú/en/‚Äù instead, an item at content/about.html would have an identifier of ‚Äú/en/about/‚Äù instead of just ‚Äú/about/‚Äù.

`layouts_root`
: The path where layouts should be mounted. The layouts root behaves the same as the items root, but applies to layouts rather than items.

The watcher configuration is a hash with the following options:

`dirs_to_watch`
: A list of directories to watch for changes. When editing this, make sure that the ‚Äúoutput/‚Äù and ‚Äútmp/‚Äù directories are _not_ included in this list, because recompiling the site will cause these directories to change, which  will cause the site to be recompiled, which will cause these directories to change, which will cause the site to be recompiled again, and so on. By default, this contains `content`, `layouts` and `lib`.

`files_to_watch`
: A list of single files to watch for changes. As mentioned above, don‚Äôt put any files from the ‚Äúoutput/‚Äù or ‚Äútmp/‚Äù directories in here. By default, this contains `config.yaml` and `Rules`.

`notify_on_compilation_success`
: Whether or not to send a Growl or `notify-send` notification when compilation succeeds.

`notify_on_compilation_failure`
: Whether or not to send a Growl or `notify-send` notification when compilation fails.

The prune configuration is a hash with the following options:

`auto_prune`
: Whether to automatically remove files not managed by nanoc from the output directory. For safety reasons, this is turned off by default.

`exclude`
: Which files and directories you want to exclude from pruning. If you version your output directory, you should probably exclude VCS directories such as `.git`, `.svn` etc. By default, the directories `.git`, `.hg`, `.svn` and `CVS` will be ignored. 

### (Auto)compiling a Site

To compile a site to its final form, the `nanoc compile` (or `nanoc co`) command is used. The compile command is the default command, so it will be invoked if you don‚Äôt pass anything. The compile command will write the compiled site to the output directory as specified in the site configuration file. For example:

<pre title="Compiling a site"><span class="prompt">%</span> <kbd>nanoc compile</kbd>
<span class="prompt">%</span> <kbd>nanoc co</kbd>
<span class="prompt">%</span> <kbd>nanoc</kbd></pre>

nanoc will not compile items that are not outdated. If you want to force nanoc to recompile everything, delete the output directory and re-run the compile command.

It is possible to let nanoc run a local web server, the _autocompiler_, that serves the nanoc site. Each request will cause the requested item to be compiled on the fly before being served. You can run the autocompiler like this:

<pre title="Compiling a site"><span class="prompt">%</span> <kbd>nanoc autocompile</kbd>
<span class="prompt">%</span> <kbd>nanoc aco</kbd></pre>

The autocompiler will run on port 3000 by default; this can be changed using the `--port` commandline switch. Note that this autocompiler should *only* be used for development purposes to make writing sites easier; it is quite unsuitable for use on live servers.

An alternative is the watcher, which will recompile whenever a change to the site is detected. The watcher does not run a web server (you can run one with `nanoc view`). You can use it like this:

<pre title="Compiling a site"><span class="prompt">%</span> <kbd>nanoc watch &amp;</kbd>
<span class="prompt">%</span> <kbd>nanoc view</kbd></pre>

Items
-----
Items are the basic building blocks of a nanoc-powered site. An item consist of content and metadata attributes.

Items are structured hierarchically. Each item has an identifier that consists of slash-separated parts, which reflects this hierarchy. There is one ‚Äúroot‚Äù or ‚Äúhome‚Äù page which has identifier `/`; other items will have identifiers such as `/journal/2008/some-article/`. The hierarchy of files in the `content` directory reflects this hierarchy.

Items can be textual or binary. If the extension of the item is included in the site configuration‚Äôs `text_extension` array, it is considered to be textual; otherwise, it will be binary. Site assets such as images, audio files and movies should be binary. Binary items don‚Äôt have their content stored in-memory. Instead, binary items have a filename pointing to the file containing the content.

To get the raw, uncompiled content of a (textual) item, use [`Nanoc::Item#raw_content`](/docs/api/3.3/Nanoc/Item.html#raw_content-instance_method). To get the compiled content, use [`Nanoc::Item#compiled_content`](/docs/api/3.3/Nanoc/Item.html#compiled_content-instance_method). The latter method has a `:rep` option for specifying the rep to get the compiled content from, and a `:snapshot` option for specifying the name of the snapshot to fetch. For details, see the [Representations](#representations) and [Snapshots](#snapshots) sections below. It is not possible to request the content of binary items.

The default list of text extensions is the following:

<pre><code class="language-yaml">
text_extensions: [ <%= Nanoc::Site::DEFAULT_CONFIG[:text_extensions].map { |i| "'#{i}'" }.join(', ') %> ]
</code></pre>

To get the path of the compiled item, use [`Nanoc::Item#path`](/docs/api/3.3/Nanoc/Item.html#path-instance_method). This path is relative to the output directory; it starts with a slash which indicates the web root, i.e. the output directory. The index filenames are stripped off the end of the path. You can pass a `:rep` option to get the path of a specific representation. For example, the path of an item that is compiled to `output/foo/index.html` is `/foo/`.

During compilation, items cannot be modified. You can, however, adjust the item content and attributes in the preprocessor.

### Creating an Item

Items are stored as plaintext files on the hard drive (unless you‚Äôre using esoteric data sources), so it‚Äôs easy to manually create items. nanoc provides a `create_item` (or `ci`) command for making item generation easier, though. This command looks like this:

<pre title="Creating an item"><span class="prompt">%</span> <kbd>nanoc create_item</kbd> <var>item_identifier</var></pre>

### Attributes

Each item has attributes (metadata) associated with it. This metadata consists of key-value pairs, which are stored in YAML format (although this may vary for different data sources). All attributes are free-form; there are no predefined attributes.

Some filters or helpers may use certain attributes. When using such filters or helpers, be sure to check their documentation (see below) to see what attributes they use, if any.

When using a filesystem-based data source, attributes are stored as YAML in either the top of the file representing the item, or a separate file with the same base name. For example, an item at `content/about.html` could look like this when the metadata is embedded into the file:

<pre title="Item with embedded metadata"><code class="language-yaml">---
title: "Some Page"
---</code>

<code class="language-html">&lt;p>Lorem ipsum dolor sit amet‚Ä¶&lt;/p></code></pre>

If you are using the default data source (`filesystem_unified`), then each item will automatically receive some extra attributes that may be useful. These are:

`:filename`
: the name of the file corresponding to the item (if there is only one file that contains both content and metadata)

`:content_filename`
: the name of the content file (if there is a content file)

`:meta_filename`
: the name of the meta-file (if there is a meta-file)

`:extension`
: the extension of the file or the content file (if there is one, because it is possible to have a meta-file without a corresponding content file)

### Representations

An item representation (or ‚Äúrep‚Äù for short) is a compiled version of an item. Each representation has a name (a symbol, not a string). An item can have multiple representations, though usually it will have just one (named `default`).

Multiple representations are useful when items need to be available in multiple formats. For example, HTML and XHTML. You could also have a `raw` representation that isn‚Äôt compiled at all‚Äîjust the raw, unfiltered, non-laid out content. Sometimes, it may even be useful to have XML, YAML or JSON representations of an item.

An item‚Äôs list of representation can be fetched by calling [`Nanoc::Item#reps`](/docs/api/3.3/Nanoc/Item.html#reps-instance_method) instance. To get a specific rep, use [`Nanoc::Item#rep_named`](/docs/api/3.3/Nanoc/Item.html#rep_named-instance_method) with the rep name, like this:

<pre title="Finding the item rep with the given name"><code class="language-ruby">
rep = @item.rep_named(:default)
</code></pre>

### Snapshots

A snapshot is the compiled content at a specific point during the compilation process. Snapshots can be generated manually, but some snapshots are generated automatically (see below).

To get the compiled content of a specific snapshot, use the `:snapshot` option of [`Nanoc::Item#compiled_content`](/docs/api/3.3/Nanoc/Item.html#compiled_content-instance_method) or [`Nanoc::ItemRep#compiled_content`](/docs/api/3.3/Nanoc/ItemRep.html#compiled_content-instance_method). For example:

<pre title="Getting the compiled content at a certain snapshot"><code class="language-ruby">
stuff = some_item.compiled_content(:snapshot => :pre)
stuff = some_rep.compiled_content(:snapshot => :last)
</code></pre>

The following snapshots are generated automatically:

`:raw`
: The content right before actual compilation is started

`:pre`
: The content right before the item is laid out

`:post`
: The content after the item has been laid out and post-filtered

`:last`
: The most recent compiled content

The `:post` and `:last` snapshots will usually be the same. The difference is that `:last` is a moving snapshot: it always refers to the last compiled content. `:last` may refer to `:raw` or `:pre` early on, but may point to `:post` later. Also, there will _always_ be a `:last` snapshot but not necessary a `:post` snapshot; items that are not laid out will not have one.

Binary items cannot have snapshots.

### Variables

When compiling items with filters that support adding code to the item or the layout (such as ERB and Haml), several variables are made available. These variables are:

`@item_rep`
: The item representation that is currently being compiled.

`@item`
: The item that is currently being compiled.

`@items`
: The list of all items, including ones that have not yet been compiled.

`@layout`
: The layout that is currently being used in the layout phase.

`@layouts`
: The list of all layouts.

`@config`
: The site configuration as a hash.

`@site`
: The site.

To get an item attribute, use the [`Nanoc::Item#[]`](/docs/api/3.3/Nanoc/Item.html#%5B%5D-instance_method) method and pass the attribute key as a symbol, e.g. `@item[:author]`.

Layouts
-------

On itself, an item‚Äôs content is not valid HTML yet: it lacks the structure a typical HTML document has. A layout is used to add this missing structure to the item.

For a layout to be useful, it must output the item‚Äôs content at a certain point. This is done by outputting `yield`. This extremely minimal layout shows an example of how this is usually done:

<pre title="A minimalistic layout"><code class="language-html">&lt;html>
  &lt;head>
    &lt;title>&lt;%=h @item[:title] %>&lt;/title>
  &lt;/head>
  &lt;body>
    &lt;%= yield %>
  &lt;/body>
&lt;/html></code></pre>

An item is put into a layout by calling the `layout` function in a compilation rule. See the [Compilation Rules](#compilation-rules) section for details.

During compilation, layouts cannot be modified. You can, however, adjust the layout content and attributes in the preprocessor.

### As Partials

Layouts can also be used as *partials*: a specific layout can be rendered into an item or a layout by using the `render` function, which takes the layout name as an argument. For example:

<pre title="Rendering the ‚Äúhead‚Äù layout as a partial"><code class="language-html">&lt;%= render 'head' %></code></pre>

To use this helper, activate the [Rendering](/docs/api/3.3/Nanoc/Helpers/Rendering.html) helper (see the [helpers](#helpers) section for details), which is done by adding this line of code to some file in the `lib` directory (I recommend `lib/helpers.rb`):

<pre title="Activating the Rendering helper"><code class="language-ruby">include Nanoc::Helpers::Rendering</code></pre>

It is also possible to pass custom variables to rendered partials by putting them into a hash passed to `#render`. The following example will make a `@title` variable (set to `"Foo"` in this example) available in the `head` layout:

<pre title="Rendering the ‚Äúhead‚Äù partial with custom variables"><code class="language-html">&lt;%= render "head", :title => "Foo" %></code></pre>

Rules
-----
The instructions for processing items are located in a file named `Rules` which lives in a nanoc site directory. This rules file contains _routing rules_, _compilation rules_ and _layouting rules_. Compilation rules determine the actions that should be executed during compilation (filtering, layouting), routing rules determine the path where the compiled files should be written to, and layouting rules determine the filter that should be used for a given layout.

A rule consists of a selector, which identifies which items the rule should be applicable to, and an action block (except for layouting rules), which contains the actions to perform.

Each item has exactly one compilation rule and one routing rule. Similarly, each layout has exactly one layouting rule. The first matching rule that is found in the rules file is used. If an item or a layout is not using the correct rule, double-check to make sure that the rules are in the correct order.

### Routing Rules

A routing rule looks like this:

<pre title="An example (incomplete) routing rule"><code class="language-ruby">route '/foo/' do
  # (routing code here)
end</code></pre>

The argument for the [`#route`](/docs/api/3.3/Nanoc/CompilerDSL.html#route-instance_method) method is the identifier of the item that should be compiled. It can also be a string that contains the `*` wildcard, which matches zero or more characters. Additionally, it can be a regular expression.

A `:rep` argument can be passed to the [`#route`](/docs/api/3.3/Nanoc/CompilerDSL.html#route-instance_method) call. This indicates the name of the representation this rule should apply to. This is `:default` by default, which means routing rules apply to the default representation unless specified otherwise.

The code block should return the routed path for the relevant item. The code block can return nil, in which case the item will not be written.

In the code block, you have access to `@rep`, which is the item representation that is currently being processed, and `@item`, which is an alias for `@rep.item`.

**Example #1**: The following rule will give the item with identifier `/404/` the path `/errors/404.php`:

<pre title="Routing the ‚Äú/404/‚Äù item to ‚Äú/errors/404.php‚Äù"><code class="language-ruby">route "/404/" do
  "/errors/404.php"
end</code></pre>

**Example #2**: The following rule will give all identifiers for which no prior matching rule exists a path based directly on its identifier (for example, the item `/foo/bar/` would get the path `/foo/bar/index.html`):

<pre title="Routing using a fallback routing rule"><code class="language-ruby">route "*" do
  rep.item.identifier + "index.html"
end</code></pre>

**Example #3**: The following rule will prevent all items with identifiers starting with `/links/`, including the `/links/` item itself, from being written (the items will still be compiled so that they can be included in other items, however):

<pre title="Preventing the ‚Äú/links/‚Äù item and its sub-items from being written"><code class="language-ruby">route "/links/*" do
  nil
end</code></pre>

**Example #4**: The following rule will apply to all items below `/people/`, but not the `/people/` item itself, and only to textual representations (with name equal to `:text`):

<pre title="Routing sub-items of ‚Äú/people/‚Äù to a ‚Äú.txt‚Äù file"><code class="language-ruby">route "/people/*/", :rep => :text do
  item.identifier + ".txt"
end</code></pre>

### Compilation Rules

A compilation rule looks like this:

<pre title="An example (incomplete) compilation rule"><code class="language-ruby">compile "/foo/" do
  # (compilation code here)
end</code></pre>

The argument for the `#compile` command is exactly the same as the argument
for `#route`; see above for details.

Just like with routing rules, a `:rep` argument can be passed to the
`#compile` call. This indicates the name of the representation this rule
should apply to. This is `:default` by default, which means compilation
rules apply to the default representation unless specified otherwise.

The code block should execute the necessary actions for compiling the item. It
does not have to return anything.

In the code block, you have access to `@rep`, which is the item representation
that is currently being processed, and `@item`, which is an alias for
`@rep.item`.

A compilation action can either be a filter action, a layout action, or a
snapshot action.

To filter an item representation, call `#filter` pass the name of the filter as argument, along with any other filter arguments. For example, the following will call the `:erb` filter on the current item representation:

<pre title="Calling the ‚Äúerb‚Äù filter"><code class="language-ruby">
filter :erb</code></pre>

Additional parameters can be given to invocations of `#filter`. This is used by some filters, such as the Haml one (`:haml`), to alter filter behaviour in one way or another. For example, the following invokes the `:haml` filter with an additional parameter:

<pre title="Calling the ‚Äúhaml‚Äù filter with extra arguments"><code class="language-ruby">
filter :haml, :format => :html5</code></pre>

To lay out an item representation, call `#layout` and pass the layout identifier as argument. For example, the following will lay out the item representation using the `/default/` layout:

<pre title="Laying out the item with the ‚Äúdefault‚Äù layout"><code class="language-ruby">
layout 'default'</code></pre>

You can run multiple filters and layouts sequentially, like this:

<pre title="Calling multiple filters"><code class="language-ruby">
filter :erb
filter :kramdown
layout 'default'
filter :rubypants</code></pre>

To take a snapshot of an item representation, call `#snapshot` and pass the snapshot name as argument. For example, the following will create a `:foo` snapshot of the item representation that can later be referred to:

<pre title="Creating a snapshot named ‚Äúfoo‚Äù of the current compiled content"><code class="language-ruby">
snapshot :foo</code></pre>

You‚Äôll usually call `#filter`, `#layout` and `#snapshot` without explicit receiver, but you can also call them on the `@rep` object if you want. The following actions are equivalent:

<pre title="Some examples of equivalent calls (with and without explicit receiver)"><code class="language-ruby">
filter :erb
@rep.filter :erb

layout 'default'
@rep.layout 'default'

snapshot :foo
@rep.snapshot :foo</code></pre>

**Example #1**: The following rule will not perform any actions, i.e. the item
will not be filtered nor laid out:

<pre><code class="language-ruby">
compile '/sample/one/' do
end
</code></pre>

**Example #2**: The following rule will filter the rep using the `erb` filter,
but not lay out the rep:

<pre><code class="language-ruby">
compile '/samples/two/' do
  filter :erb
end
</code></pre>

**Example #3**: The following rule will filter the rep using the `erb` filter,
lay out the rep using the `shiny` layout, and finally run the laid out rep
through the `rubypants` filter:

<pre><code class="language-ruby">
compile '/samples/three/' do
  filter :erb
  layout '/shiny/'
  filter :rubypants
end
</code></pre>

**Example #4**: The following rule will filter the rep using the
`relativize_paths` filter with the filter argument `type` equal to `css`:

<pre><code class="language-ruby">
compile '/assets/style/' do
  filter :relativize_paths, :type => :css
end
</code></pre>

**Example #5**: The following rule will filter the rep and layout it by
invoking `#filter` or `#layout` with an explicit receiver (with and without @ sign):

<pre><code class="language-ruby">
compile '/samples/three/' do
  @rep.filter :erb
  @rep.layout '/shiny/'
  @rep.filter :rubypants
end
</code></pre>

**Example #6**: The following rule will apply to all items below `/people/`,
and only to textual representations (with name equal to `text`):

<pre><code class="language-ruby">
compile '/people/*', :rep => :text do
  # don't filter or layout
end
</code></pre>

**Example #7**: The following rule will create a snapshot named `without_toc`
so that the content at that snapshot can then later be reused elsewhere:

<pre><code class="language-ruby">
compile '/foo/' do
  filter   :markdown
  snapshot :without_toc
  filter   :add_toc
end
</code></pre>

### Layouting Rules

To specify the filter used for a layout, use the `#layout` method.

The first argument should be a string containing the identifier of the layout.
It can also be a string that contains the `*` wildcard, which matches zero or
more characters. Additionally, it can be a regular expression.

The second should be the identifier of the filter to use.

In addition to the first two arguments, extra arguments can be supplied; these
will be passed on to the filter.

**Example #1**: The following rule will make all layouts use the `:erb`
filter:

<pre><code class="language-ruby">
layout '*', :erb</code></pre>

**Example #2**: The following rule will make the default layout use the `haml`
filter and pass a filter argument:

<pre><code class="language-ruby">
layout '/default/', :haml, :format => :html5</code></pre>

**Example #3**: The following rule will be applied to all layouts with identifiers starting with a slash followed by an underscore, and ending with a slash. For example, ‚Äú/foo/‚Äù and ‚Äú/foo/_bar/‚Äù would not match, but ‚Äú/_foo/‚Äù, ‚Äú/_foo/bar/‚Äù and even ‚Äú/_foo/_bar/‚Äù would:

<pre><code class="language-ruby">
layout %r{^/_.+/$}, :erb</code></pre>

The Compilation Process
-----------------------

Compiling a site involves several steps:

1. Loading the site data
2. Preprocessing the site data
3. Building the item representations
4. Routing the item representations
5. Compiling the item representations

### Loading the Site Data

Before compilation starts, data for items and layouts will be read from all data sources, and mounted at the roots specified by the data sources. For more information about data sources, see the [Data Sources](#data-sources) section.

### Preprocessing the Site Data

After the data is loaded, it is _preprocessed_ if a preprocessor block exists. A preprocessor block is a simple piece of code defined in the `Rules` file that will be executed after the data is loaded. It looks like this:

<pre title="A sample preprocessor block"><code class="language-ruby">
preprocess do
  # (preprocessing code here)
end
</code></pre>

Preprocessors can modify data coming from data sources before it is compiled. It can change item attributes, content and the path, but also add and remove items.

Preprocessors can be used for various purposes. Here are two sample uses:

* A preprocessor could set a `language_code` attribute based on the item path. An item such as `/en/about/` would get an attribute `language_code` equal to `'en'`. This would eliminate the need for helpers such as `language_code_of`.

* A preprocessor could create new (in-memory) items for a given set of items. This can be useful for creating pages that contain paginated items.

### Building the Item Representations

Once the data is loaded and preprocessed, item representations are built for each item. For each item, its compilation rules (one per item representation) are looked up and a rep is built for each rule.

For example, the following code will cause the item `/foo/` to have only one rep (`default`), while the item `/bar/` will have two reps (`raw` and `full`):

<pre title="A sample Rules file with compilation rules for different representations"><code class="language-ruby">compile '/foo/' do
  # (compilation code for the default rep here)
end

compile '/bar/', :rep => :raw do
  # (compilation code for the :raw rep here)
end

compile '/bar/', :rep => :full do
  # (compilation code for the :full rep here)
end</code></pre>

### Routing the Item Representations

For each item representation, the matching routing rule is looked up and applied to the item rep. The item rep‚Äôs path to the output file will be set to the return value of the routing rule block.

The routing rule block can also return nil, in which case the item representation will not be written to the disk‚Äîuseful when items should be included as part of other, larger items, but should not exist separately.

For example, the following code will cause the item `/foo/` to be written to `output/abc.html`, while the `/bar/` item will be written to `output/xyz.css`, and the item `/qux/` will not be written at all:

<pre title="A sample Rules file where items are routed to specific locations"><code class="language-ruby">route '/foo/' do
  '/abc.html'
end

route '/bar/' do
  '/xyz.css'
end

route '/qux/' do
  nil
end</code></pre>

### Compiling the Item Representations

Compiling an item means compiling all of its representations, which in turn involves executing the compilation rules on each representation. After a compilation rule has been applied, the item representation‚Äôs compiled content will be written to its output file (if it has one) determined by its routing rule.

The following diagram illustrates item compilation by giving a few examples of how items can be filtered and laid out.

<div class="figure">
	<img src="/assets/images/manual/item_compilation_diagram.png" alt="Diagram giving several examples of how items can be filtered and laid out">
</div>

Items that have content dependencies on other items, i.e. items that include the content of another item, will be compiled once the content of the items it depends on is available. Circular content dependencies (item "A" requiring the content of item "B" and vice versa) are detected and reported.

Filters
-------

Filters are used for transforming an item‚Äôs content. For example, the ERB filter interprets the item‚Äôs content as text with embedded Ruby, executes the embedded Ruby and returns the result. Each filter has an identifier (a symbol), which is used in the call to `#filter` in a compilation rule.

Filters can be applied to binary items as well. For example, thumbnail generation for a gallery page can be handled by nanoc. Filters can also convert textual content into binary files and vice versa; text-to-speech filters and OCR filters are therefore possible (but perhaps not very useful).

nanoc comes with quite a handful of filters. [Here‚Äôs a list](http://nanoc.stoneship.org/docs/api/3.3/Nanoc/Filters.html).

Helpers
-------

A helper is a module with useful functions that can be used in items and layouts.

Helpers need to be activated before they can be used. To activate a helper, `include` it, like this (in a file in the `lib` directory, such as `lib/helpers.rb`):

<pre title="Activating the Blogging helper by #include‚Äôing it"><code class="language-ruby">
include Nanoc::Helpers::Blogging
</code></pre>

Here‚Äôs a [list of helpers that come with nanoc](http://nanoc.stoneship.org/docs/api/3.3/Nanoc/Helpers.html).

Rake Tasks
----------

nanoc comes with a couple of useful built-in rake tasks. To use them, require them in your rakefile, like this:

<pre title="Making built-in nanoc tasks available for Rake"><code class="language-ruby">
require 'nanoc/tasks'
</code></pre>

The tasks that come with nanoc are:

`clean`
: Removes all files generated by nanoc from the output directory.

`validate:css`
: Validates the site‚Äôs CSS files.

`validate:html`
: Validates the site‚Äôs HTML files.

Please note that the HTML/CSS validation tasks validate each file by sending it to the W3C validator. Depending on the number of files you have, this may be quite slow.

Data Sources
------------

Each site has one or more _data sources_: objects that can load site data (items and layouts) from certain locations, and even create new items and layouts.

New nanoc sites will have only one data source: the `filesystem_unified` one. For details about this data source, see the [documentation for `FilesystemUnified`](http://nanoc.stoneship.org/docs/api/3.3/Nanoc/DataSources/FilesystemUnified.html).

The site configuration has a list of hashes containing the data source configurations. Each list item is a hash with the following keys:

`type`
: The identifier of data source to use (`filesystem_unified`, `filesystem_verbose`‚Ä¶)

`items_root`
: The root where items should be mounted. Optional; defaults to `/`.

`layouts_root`
: The root where layouts should be mounted. Optional; defaults to `/`.

`config`
: A hash containing custom configuration options for the data source. The contents of this hash depends on the data source used; see the documentation of the data source for details.

For example, the configuration of a site that uses many data sources could look like this:

<pre title="A site configuration with multiple data sourcs"><code class="language-yaml">data_sources:
  -
    # This data source simply loads data from the filesystem.
    type:       'filesystem_unified'
  -
    # This data source loads events as items from a calendar application
    # and stores the loaded items under /events.
    type:       'calendar'
    items_root: '/events'</code></pre>

nanoc comes bundled with the following two data sources:

[`filesystem_unified`](/docs/api/3.3/Nanoc/DataSources/FilesystemUnified.html)
: Reads data from files on the disk. It is the default data source for new sites.

[`filesystem_verbose`](/docs/api/3.3/Nanoc/DataSources/FilesystemVerbose.html)
: Reads data from files on the disk. Older versions of nanoc used this data source as the default one.;T;
I"y¢<div class="section" id="the-commandline-tool">
<h2>The Commandline Tool</h2>

<p>Interacting with nanoc happens through a commandline tool named <code>nanoc</code>. This tool has a few sub-commands, which you can invoke like this:</p>

<pre title="Executing a nanoc command"><span class="prompt">%</span> <kbd>nanoc</kbd> <var>command</var></pre>

<p>Here, <code>command</code> obviously is the name of the command you‚Äôre invoking. A very useful command is the <code>help</code> command, which will give you a detailed description of a given command. You can use it like this:</p>

<pre title="Getting help on a command"><span class="prompt">%</span> <kbd>nanoc help</kbd> <var>command</var></pre>

<p>For example, this is the help for the <code>create_site</code> command:</p>

<pre title="Getting help on the create_site command"><span class="prompt">%</span> <kbd>nanoc help create_site</kbd>
nanoc create_site [path]

aliases: cs

create a site

    Create a new site at the given path. The site will use the compact
    filesystem data source by default, but this can be changed by
    using the --datasource commandline option.

options:

   -d --datasource specify the data source for the new site</pre>

<p>If you want general help, such as a list of available commands and global options, omit the command name, like this:</p>

<pre title="Getting general help for nanoc"><span class="prompt">%</span> <kbd>nanoc help</kbd></pre>

<p>So, if you‚Äôre ever stuck, consult the the commandline help which (hopefully) will put you back on track.</p>

</div><div class="section" id="sites">
<h2>Sites</h2>
<p>A site managed by nanoc is a directory with a specific structure. A site consists of items, layouts, a site configuration and a set of rules.</p>

<p>The way the data in a site is stored depends on the data source that is being used. However, unless you‚Äôve explicitly told nanoc to use a different data source, the <code>filesystem_unified</code> one will be used. This manual assumes that this <code>filesystem_unified</code> data source is used. For details, see the <a href="#data-sources">Data Sources</a> section.</p>

<div class="section" id="creating-a-site">
<h3>Creating a Site</h3>

<p>To create a site, use the <code>create_site</code> command. This command takes the site name as its first and only argument, like this:</p>

<pre title="Creating a site"><span class="prompt">%</span> <kbd>nanoc create_site</kbd> <var>site_name</var></pre>

<p>This will create a directory with the given site name, with a bare-bones directory layout.</p>

</div>
<div class="section" id="structure">
<h3>Structure</h3>

<p>A site has the following files and directories:</p>

<dl>
<dt><code>config.yaml</code></dt>
  <dd>contains the site configuration</dd>
  <dt><code>Rules</code></dt>
  <dd>contains compilation, routing and layouting rules</dd>
  <dt><code>content/</code></dt>
  <dd>contains the uncompiled items</dd>
  <dt><code>layouts/</code></dt>
  <dd>contains the layouts</dd>
  <dt><code>lib/</code></dt>
  <dd>contains custom site-specific code (filters, helpers, ‚Ä¶)</dd>
  <dt><code>output/</code></dt>
  <dd>contains the compiled site</dd>
  <dt><code>tmp/</code></dt>
  <dd>contains data used for speeding up compilation (can be safely emptied)</dd>
</dl>
</div>
<div class="section" id="code">
<h3>Code</h3>

<p>nanoc will load all Ruby source files in the <code>lib</code> directory before it starts compiling. All method definitions, class definitions, etc. will be available during the compilation process. This directory is therefore quite useful for putting in site-wide helpers, filters, data sources, etc.</p>

</div>
<div class="section" id="site-configuration">
<h3>Site configuration</h3>

<p>The site configuration is defined by the <code>config.yaml</code> file at the top level of the site directory. The file is in YAML format. The configuration has the following predefined values (check the <a href="/docs/api/3.3/Nanoc/Site.html">API documentation for <code>Nanoc::Site</code></a> for details about the default values):</p>

<dl>
<dt><code>text_extensions</code></dt>
  <dd>A list of file extensions that nanoc will consider to be textual rather than binary. If an item with an extension not in this list is found, the file will be considered as binary.</dd>
  <dt><code>output_dir</code></dt>
  <dd>The path to the directory where all generated files will be written to. This can be an absolute path starting with a slash, but it can also be path relative to the site directory.</dd>
  <dt><code>index_filenames</code></dt>
  <dd>A list of index filenames, i.e. names of files that will be served by a web server when a directory is requested. Usually, index files are named ‚Äúindex.hml‚Äù, but depending on the web server, this may be something else, such as ‚Äúdefault.htm‚Äù. This list is used by nanoc to generate pretty URLs.</dd>
  <dt><code>enable_output_diff</code></dt>
  <dd>Whether or not to generate a diff of the compiled content when compiling a site. The diff will contain the differences between the compiled content before and after the last site compilation.</dd>
  <dt><code>data_sources</code></dt>
  <dd>The data sources where nanoc loads its data from. This is an array of hashes; each array element represents a single data source. By default, there is only a single data source that reads data from the ‚Äúcontent/‚Äù and ‚Äúlayout/‚Äù directories in the site directory. See below for details.</dd>
  <dt><code>watcher</code></dt>
  <dd>Configuration for the ‚Äúwatch‚Äù command, which watches a site for changes and recompiles if necessary. See below for details.</dd>
</dl>
<p>The data source configuration is an array of hashes with the following keys:</p>

<dl>
<dt><code>type</code></dt>
  <dd>The type is the identifier of the data source. By default, this will be <code>filesystem_unified</code>.</dd>
  <dt><code>items_root</code></dt>
  <dd>The path where items should be mounted (comparable to mount points in Unix-like systems). This is ‚Äú/‚Äù by default, meaning that items will have ‚Äú/‚Äù prefixed to their identifiers. If the items root were ‚Äú/en/‚Äù instead, an item at content/about.html would have an identifier of ‚Äú/en/about/‚Äù instead of just ‚Äú/about/‚Äù.</dd>
  <dt><code>layouts_root</code></dt>
  <dd>The path where layouts should be mounted. The layouts root behaves the same as the items root, but applies to layouts rather than items.</dd>
</dl>
<p>The watcher configuration is a hash with the following options:</p>

<dl>
<dt><code>dirs_to_watch</code></dt>
  <dd>A list of directories to watch for changes. When editing this, make sure that the ‚Äúoutput/‚Äù and ‚Äútmp/‚Äù directories are <em>not</em> included in this list, because recompiling the site will cause these directories to change, which  will cause the site to be recompiled, which will cause these directories to change, which will cause the site to be recompiled again, and so on. By default, this contains <code>content</code>, <code>layouts</code> and <code>lib</code>.</dd>
  <dt><code>files_to_watch</code></dt>
  <dd>A list of single files to watch for changes. As mentioned above, don‚Äôt put any files from the ‚Äúoutput/‚Äù or ‚Äútmp/‚Äù directories in here. By default, this contains <code>config.yaml</code> and <code>Rules</code>.</dd>
  <dt><code>notify_on_compilation_success</code></dt>
  <dd>Whether or not to send a Growl or <code>notify-send</code> notification when compilation succeeds.</dd>
  <dt><code>notify_on_compilation_failure</code></dt>
  <dd>Whether or not to send a Growl or <code>notify-send</code> notification when compilation fails.</dd>
</dl>
<p>The prune configuration is a hash with the following options:</p>

<dl>
<dt><code>auto_prune</code></dt>
  <dd>Whether to automatically remove files not managed by nanoc from the output directory. For safety reasons, this is turned off by default.</dd>
  <dt><code>exclude</code></dt>
  <dd>Which files and directories you want to exclude from pruning. If you version your output directory, you should probably exclude VCS directories such as <code>.git</code>, <code>.svn</code> etc. By default, the directories <code>.git</code>, <code>.hg</code>, <code>.svn</code> and <code>CVS</code> will be ignored. </dd>
</dl>
</div>
<div class="section" id="auto-compiling-a-site">
<h3>(Auto)compiling a Site</h3>

<p>To compile a site to its final form, the <code>nanoc compile</code> (or <code>nanoc co</code>) command is used. The compile command is the default command, so it will be invoked if you don‚Äôt pass anything. The compile command will write the compiled site to the output directory as specified in the site configuration file. For example:</p>

<pre title="Compiling a site"><span class="prompt">%</span> <kbd>nanoc compile</kbd>
<span class="prompt">%</span> <kbd>nanoc co</kbd>
<span class="prompt">%</span> <kbd>nanoc</kbd></pre>

<p>nanoc will not compile items that are not outdated. If you want to force nanoc to recompile everything, delete the output directory and re-run the compile command.</p>

<p>It is possible to let nanoc run a local web server, the <em>autocompiler</em>, that serves the nanoc site. Each request will cause the requested item to be compiled on the fly before being served. You can run the autocompiler like this:</p>

<pre title="Compiling a site"><span class="prompt">%</span> <kbd>nanoc autocompile</kbd>
<span class="prompt">%</span> <kbd>nanoc aco</kbd></pre>

<p>The autocompiler will run on port 3000 by default; this can be changed using the <code>--port</code> commandline switch. Note that this autocompiler should <em>only</em> be used for development purposes to make writing sites easier; it is quite unsuitable for use on live servers.</p>

<p>An alternative is the watcher, which will recompile whenever a change to the site is detected. The watcher does not run a web server (you can run one with <code>nanoc view</code>). You can use it like this:</p>

<pre title="Compiling a site"><span class="prompt">%</span> <kbd>nanoc watch &amp;</kbd>
<span class="prompt">%</span> <kbd>nanoc view</kbd></pre>

</div>
</div><div class="section" id="items">
<h2>Items</h2>
<p>Items are the basic building blocks of a nanoc-powered site. An item consist of content and metadata attributes.</p>

<p>Items are structured hierarchically. Each item has an identifier that consists of slash-separated parts, which reflects this hierarchy. There is one ‚Äúroot‚Äù or ‚Äúhome‚Äù page which has identifier <code>/</code>; other items will have identifiers such as <code>/journal/2008/some-article/</code>. The hierarchy of files in the <code>content</code> directory reflects this hierarchy.</p>

<p>Items can be textual or binary. If the extension of the item is included in the site configuration‚Äôs <code>text_extension</code> array, it is considered to be textual; otherwise, it will be binary. Site assets such as images, audio files and movies should be binary. Binary items don‚Äôt have their content stored in-memory. Instead, binary items have a filename pointing to the file containing the content.</p>

<p>To get the raw, uncompiled content of a (textual) item, use <a href="/docs/api/3.3/Nanoc/Item.html#raw_content-instance_method"><code>Nanoc::Item#raw_content</code></a>. To get the compiled content, use <a href="/docs/api/3.3/Nanoc/Item.html#compiled_content-instance_method"><code>Nanoc::Item#compiled_content</code></a>. The latter method has a <code>:rep</code> option for specifying the rep to get the compiled content from, and a <code>:snapshot</code> option for specifying the name of the snapshot to fetch. For details, see the <a href="#representations">Representations</a> and <a href="#snapshots">Snapshots</a> sections below. It is not possible to request the content of binary items.</p>

<p>The default list of text extensions is the following:</p>

<pre><code class="language-yaml">text_extensions: [ 'coffee', 'css', 'erb', 'haml', 'handlebars', 'hb', 'htm', 'html', 'js', 'less', 'markdown', 'md', 'ms', 'mustache', 'php', 'rb', 'sass', 'scss', 'txt', 'xhtml', 'xml' ]
</code></pre>

<p>To get the path of the compiled item, use <a href="/docs/api/3.3/Nanoc/Item.html#path-instance_method"><code>Nanoc::Item#path</code></a>. This path is relative to the output directory; it starts with a slash which indicates the web root, i.e. the output directory. The index filenames are stripped off the end of the path. You can pass a <code>:rep</code> option to get the path of a specific representation. For example, the path of an item that is compiled to <code>output/foo/index.html</code> is <code>/foo/</code>.</p>

<p>During compilation, items cannot be modified. You can, however, adjust the item content and attributes in the preprocessor.</p>

<div class="section" id="creating-an-item">
<h3>Creating an Item</h3>

<p>Items are stored as plaintext files on the hard drive (unless you‚Äôre using esoteric data sources), so it‚Äôs easy to manually create items. nanoc provides a <code>create_item</code> (or <code>ci</code>) command for making item generation easier, though. This command looks like this:</p>

<pre title="Creating an item"><span class="prompt">%</span> <kbd>nanoc create_item</kbd> <var>item_identifier</var></pre>

</div>
<div class="section" id="attributes">
<h3>Attributes</h3>

<p>Each item has attributes (metadata) associated with it. This metadata consists of key-value pairs, which are stored in YAML format (although this may vary for different data sources). All attributes are free-form; there are no predefined attributes.</p>

<p>Some filters or helpers may use certain attributes. When using such filters or helpers, be sure to check their documentation (see below) to see what attributes they use, if any.</p>

<p>When using a filesystem-based data source, attributes are stored as YAML in either the top of the file representing the item, or a separate file with the same base name. For example, an item at <code>content/about.html</code> could look like this when the metadata is embedded into the file:</p>

<pre title="Item with embedded metadata"><code class="language-yaml">---
title: "Some Page"
---</code>

<code class="language-html">&lt;p&gt;Lorem ipsum dolor sit amet‚Ä¶&lt;/p&gt;</code></pre>

<p>If you are using the default data source (<code>filesystem_unified</code>), then each item will automatically receive some extra attributes that may be useful. These are:</p>

<dl>
<dt><code>:filename</code></dt>
  <dd>the name of the file corresponding to the item (if there is only one file that contains both content and metadata)</dd>
  <dt><code>:content_filename</code></dt>
  <dd>the name of the content file (if there is a content file)</dd>
  <dt><code>:meta_filename</code></dt>
  <dd>the name of the meta-file (if there is a meta-file)</dd>
  <dt><code>:extension</code></dt>
  <dd>the extension of the file or the content file (if there is one, because it is possible to have a meta-file without a corresponding content file)</dd>
</dl>
</div>
<div class="section" id="representations">
<h3>Representations</h3>

<p>An item representation (or ‚Äúrep‚Äù for short) is a compiled version of an item. Each representation has a name (a symbol, not a string). An item can have multiple representations, though usually it will have just one (named <code>default</code>).</p>

<p>Multiple representations are useful when items need to be available in multiple formats. For example, HTML and XHTML. You could also have a <code>raw</code> representation that isn‚Äôt compiled at all‚Äîjust the raw, unfiltered, non-laid out content. Sometimes, it may even be useful to have XML, YAML or JSON representations of an item.</p>

<p>An item‚Äôs list of representation can be fetched by calling <a href="/docs/api/3.3/Nanoc/Item.html#reps-instance_method"><code>Nanoc::Item#reps</code></a> instance. To get a specific rep, use <a href="/docs/api/3.3/Nanoc/Item.html#rep_named-instance_method"><code>Nanoc::Item#rep_named</code></a> with the rep name, like this:</p>

<pre title="Finding the item rep with the given name"><code class="language-ruby">rep = @item.rep_named(:default)
</code></pre>

</div>
<div class="section" id="snapshots">
<h3>Snapshots</h3>

<p>A snapshot is the compiled content at a specific point during the compilation process. Snapshots can be generated manually, but some snapshots are generated automatically (see below).</p>

<p>To get the compiled content of a specific snapshot, use the <code>:snapshot</code> option of <a href="/docs/api/3.3/Nanoc/Item.html#compiled_content-instance_method"><code>Nanoc::Item#compiled_content</code></a> or <a href="/docs/api/3.3/Nanoc/ItemRep.html#compiled_content-instance_method"><code>Nanoc::ItemRep#compiled_content</code></a>. For example:</p>

<pre title="Getting the compiled content at a certain snapshot"><code class="language-ruby">stuff = some_item.compiled_content(:snapshot =&gt; :pre)
stuff = some_rep.compiled_content(:snapshot =&gt; :last)
</code></pre>

<p>The following snapshots are generated automatically:</p>

<dl>
<dt><code>:raw</code></dt>
  <dd>The content right before actual compilation is started</dd>
  <dt><code>:pre</code></dt>
  <dd>The content right before the item is laid out</dd>
  <dt><code>:post</code></dt>
  <dd>The content after the item has been laid out and post-filtered</dd>
  <dt><code>:last</code></dt>
  <dd>The most recent compiled content</dd>
</dl>
<p>The <code>:post</code> and <code>:last</code> snapshots will usually be the same. The difference is that <code>:last</code> is a moving snapshot: it always refers to the last compiled content. <code>:last</code> may refer to <code>:raw</code> or <code>:pre</code> early on, but may point to <code>:post</code> later. Also, there will <em>always</em> be a <code>:last</code> snapshot but not necessary a <code>:post</code> snapshot; items that are not laid out will not have one.</p>

<p>Binary items cannot have snapshots.</p>

</div>
<div class="section" id="variables">
<h3>Variables</h3>

<p>When compiling items with filters that support adding code to the item or the layout (such as ERB and Haml), several variables are made available. These variables are:</p>

<dl>
<dt><code>@item_rep</code></dt>
  <dd>The item representation that is currently being compiled.</dd>
  <dt><code>@item</code></dt>
  <dd>The item that is currently being compiled.</dd>
  <dt><code>@items</code></dt>
  <dd>The list of all items, including ones that have not yet been compiled.</dd>
  <dt><code>@layout</code></dt>
  <dd>The layout that is currently being used in the layout phase.</dd>
  <dt><code>@layouts</code></dt>
  <dd>The list of all layouts.</dd>
  <dt><code>@config</code></dt>
  <dd>The site configuration as a hash.</dd>
  <dt><code>@site</code></dt>
  <dd>The site.</dd>
</dl>
<p>To get an item attribute, use the <a href="/docs/api/3.3/Nanoc/Item.html#%5B%5D-instance_method"><code>Nanoc::Item#[]</code></a> method and pass the attribute key as a symbol, e.g. <code>@item[:author]</code>.</p>

</div>
</div><div class="section" id="layouts">
<h2>Layouts</h2>

<p>On itself, an item‚Äôs content is not valid HTML yet: it lacks the structure a typical HTML document has. A layout is used to add this missing structure to the item.</p>

<p>For a layout to be useful, it must output the item‚Äôs content at a certain point. This is done by outputting <code>yield</code>. This extremely minimal layout shows an example of how this is usually done:</p>

<pre title="A minimalistic layout"><code class="language-html">&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;&lt;%=h @item[:title] %&gt;&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;%= yield %&gt;
  &lt;/body&gt;
&lt;/html&gt;</code></pre>

<p>An item is put into a layout by calling the <code>layout</code> function in a compilation rule. See the <a href="#compilation-rules">Compilation Rules</a> section for details.</p>

<p>During compilation, layouts cannot be modified. You can, however, adjust the layout content and attributes in the preprocessor.</p>

<div class="section" id="as-partials">
<h3>As Partials</h3>

<p>Layouts can also be used as <em>partials</em>: a specific layout can be rendered into an item or a layout by using the <code>render</code> function, which takes the layout name as an argument. For example:</p>

<pre title="Rendering the ‚Äúhead‚Äù layout as a partial"><code class="language-html">&lt;%= render 'head' %&gt;</code></pre>

<p>To use this helper, activate the <a href="/docs/api/3.3/Nanoc/Helpers/Rendering.html">Rendering</a> helper (see the <a href="#helpers">helpers</a> section for details), which is done by adding this line of code to some file in the <code>lib</code> directory (I recommend <code>lib/helpers.rb</code>):</p>

<pre title="Activating the Rendering helper"><code class="language-ruby">include Nanoc::Helpers::Rendering</code></pre>

<p>It is also possible to pass custom variables to rendered partials by putting them into a hash passed to <code>#render</code>. The following example will make a <code>@title</code> variable (set to <code>"Foo"</code> in this example) available in the <code>head</code> layout:</p>

<pre title="Rendering the ‚Äúhead‚Äù partial with custom variables"><code class="language-html">&lt;%= render "head", :title =&gt; "Foo" %&gt;</code></pre>

</div>
</div><div class="section" id="rules">
<h2>Rules</h2>
<p>The instructions for processing items are located in a file named <code>Rules</code> which lives in a nanoc site directory. This rules file contains <em>routing rules</em>, <em>compilation rules</em> and <em>layouting rules</em>. Compilation rules determine the actions that should be executed during compilation (filtering, layouting), routing rules determine the path where the compiled files should be written to, and layouting rules determine the filter that should be used for a given layout.</p>

<p>A rule consists of a selector, which identifies which items the rule should be applicable to, and an action block (except for layouting rules), which contains the actions to perform.</p>

<p>Each item has exactly one compilation rule and one routing rule. Similarly, each layout has exactly one layouting rule. The first matching rule that is found in the rules file is used. If an item or a layout is not using the correct rule, double-check to make sure that the rules are in the correct order.</p>

<div class="section" id="routing-rules">
<h3>Routing Rules</h3>

<p>A routing rule looks like this:</p>

<pre title="An example (incomplete) routing rule"><code class="language-ruby">route '/foo/' do
  # (routing code here)
end</code></pre>

<p>The argument for the <a href="/docs/api/3.3/Nanoc/CompilerDSL.html#route-instance_method"><code>#route</code></a> method is the identifier of the item that should be compiled. It can also be a string that contains the <code>*</code> wildcard, which matches zero or more characters. Additionally, it can be a regular expression.</p>

<p>A <code>:rep</code> argument can be passed to the <a href="/docs/api/3.3/Nanoc/CompilerDSL.html#route-instance_method"><code>#route</code></a> call. This indicates the name of the representation this rule should apply to. This is <code>:default</code> by default, which means routing rules apply to the default representation unless specified otherwise.</p>

<p>The code block should return the routed path for the relevant item. The code block can return nil, in which case the item will not be written.</p>

<p>In the code block, you have access to <code>@rep</code>, which is the item representation that is currently being processed, and <code>@item</code>, which is an alias for <code>@rep.item</code>.</p>

<p><strong>Example #1</strong>: The following rule will give the item with identifier <code>/404/</code> the path <code>/errors/404.php</code>:</p>

<pre title="Routing the ‚Äú/404/‚Äù item to ‚Äú/errors/404.php‚Äù"><code class="language-ruby">route "/404/" do
  "/errors/404.php"
end</code></pre>

<p><strong>Example #2</strong>: The following rule will give all identifiers for which no prior matching rule exists a path based directly on its identifier (for example, the item <code>/foo/bar/</code> would get the path <code>/foo/bar/index.html</code>):</p>

<pre title="Routing using a fallback routing rule"><code class="language-ruby">route "*" do
  rep.item.identifier + "index.html"
end</code></pre>

<p><strong>Example #3</strong>: The following rule will prevent all items with identifiers starting with <code>/links/</code>, including the <code>/links/</code> item itself, from being written (the items will still be compiled so that they can be included in other items, however):</p>

<pre title="Preventing the ‚Äú/links/‚Äù item and its sub-items from being written"><code class="language-ruby">route "/links/*" do
  nil
end</code></pre>

<p><strong>Example #4</strong>: The following rule will apply to all items below <code>/people/</code>, but not the <code>/people/</code> item itself, and only to textual representations (with name equal to <code>:text</code>):</p>

<pre title="Routing sub-items of ‚Äú/people/‚Äù to a ‚Äú.txt‚Äù file"><code class="language-ruby">route "/people/*/", :rep =&gt; :text do
  item.identifier + ".txt"
end</code></pre>

</div>
<div class="section" id="compilation-rules">
<h3>Compilation Rules</h3>

<p>A compilation rule looks like this:</p>

<pre title="An example (incomplete) compilation rule"><code class="language-ruby">compile "/foo/" do
  # (compilation code here)
end</code></pre>

<p>The argument for the <code>#compile</code> command is exactly the same as the argument
for <code>#route</code>; see above for details.</p>

<p>Just like with routing rules, a <code>:rep</code> argument can be passed to the
<code>#compile</code> call. This indicates the name of the representation this rule
should apply to. This is <code>:default</code> by default, which means compilation
rules apply to the default representation unless specified otherwise.</p>

<p>The code block should execute the necessary actions for compiling the item. It
does not have to return anything.</p>

<p>In the code block, you have access to <code>@rep</code>, which is the item representation
that is currently being processed, and <code>@item</code>, which is an alias for
<code>@rep.item</code>.</p>

<p>A compilation action can either be a filter action, a layout action, or a
snapshot action.</p>

<p>To filter an item representation, call <code>#filter</code> pass the name of the filter as argument, along with any other filter arguments. For example, the following will call the <code>:erb</code> filter on the current item representation:</p>

<pre title="Calling the ‚Äúerb‚Äù filter"><code class="language-ruby">filter :erb</code></pre>

<p>Additional parameters can be given to invocations of <code>#filter</code>. This is used by some filters, such as the Haml one (<code>:haml</code>), to alter filter behaviour in one way or another. For example, the following invokes the <code>:haml</code> filter with an additional parameter:</p>

<pre title="Calling the ‚Äúhaml‚Äù filter with extra arguments"><code class="language-ruby">filter :haml, :format =&gt; :html5</code></pre>

<p>To lay out an item representation, call <code>#layout</code> and pass the layout identifier as argument. For example, the following will lay out the item representation using the <code>/default/</code> layout:</p>

<pre title="Laying out the item with the ‚Äúdefault‚Äù layout"><code class="language-ruby">layout 'default'</code></pre>

<p>You can run multiple filters and layouts sequentially, like this:</p>

<pre title="Calling multiple filters"><code class="language-ruby">filter :erb
filter :kramdown
layout 'default'
filter :rubypants</code></pre>

<p>To take a snapshot of an item representation, call <code>#snapshot</code> and pass the snapshot name as argument. For example, the following will create a <code>:foo</code> snapshot of the item representation that can later be referred to:</p>

<pre title="Creating a snapshot named ‚Äúfoo‚Äù of the current compiled content"><code class="language-ruby">snapshot :foo</code></pre>

<p>You‚Äôll usually call <code>#filter</code>, <code>#layout</code> and <code>#snapshot</code> without explicit receiver, but you can also call them on the <code>@rep</code> object if you want. The following actions are equivalent:</p>

<pre title="Some examples of equivalent calls (with and without explicit receiver)"><code class="language-ruby">filter :erb
@rep.filter :erb

layout 'default'
@rep.layout 'default'

snapshot :foo
@rep.snapshot :foo</code></pre>

<p><strong>Example #1</strong>: The following rule will not perform any actions, i.e. the item
will not be filtered nor laid out:</p>

<pre><code class="language-ruby">compile '/sample/one/' do
end
</code></pre>

<p><strong>Example #2</strong>: The following rule will filter the rep using the <code>erb</code> filter,
but not lay out the rep:</p>

<pre><code class="language-ruby">compile '/samples/two/' do
  filter :erb
end
</code></pre>

<p><strong>Example #3</strong>: The following rule will filter the rep using the <code>erb</code> filter,
lay out the rep using the <code>shiny</code> layout, and finally run the laid out rep
through the <code>rubypants</code> filter:</p>

<pre><code class="language-ruby">compile '/samples/three/' do
  filter :erb
  layout '/shiny/'
  filter :rubypants
end
</code></pre>

<p><strong>Example #4</strong>: The following rule will filter the rep using the
<code>relativize_paths</code> filter with the filter argument <code>type</code> equal to <code>css</code>:</p>

<pre><code class="language-ruby">compile '/assets/style/' do
  filter :relativize_paths, :type =&gt; :css
end
</code></pre>

<p><strong>Example #5</strong>: The following rule will filter the rep and layout it by
invoking <code>#filter</code> or <code>#layout</code> with an explicit receiver (with and without @ sign):</p>

<pre><code class="language-ruby">compile '/samples/three/' do
  @rep.filter :erb
  @rep.layout '/shiny/'
  @rep.filter :rubypants
end
</code></pre>

<p><strong>Example #6</strong>: The following rule will apply to all items below <code>/people/</code>,
and only to textual representations (with name equal to <code>text</code>):</p>

<pre><code class="language-ruby">compile '/people/*', :rep =&gt; :text do
  # don't filter or layout
end
</code></pre>

<p><strong>Example #7</strong>: The following rule will create a snapshot named <code>without_toc</code>
so that the content at that snapshot can then later be reused elsewhere:</p>

<pre><code class="language-ruby">compile '/foo/' do
  filter   :markdown
  snapshot :without_toc
  filter   :add_toc
end
</code></pre>

</div>
<div class="section" id="layouting-rules">
<h3>Layouting Rules</h3>

<p>To specify the filter used for a layout, use the <code>#layout</code> method.</p>

<p>The first argument should be a string containing the identifier of the layout.
It can also be a string that contains the <code>*</code> wildcard, which matches zero or
more characters. Additionally, it can be a regular expression.</p>

<p>The second should be the identifier of the filter to use.</p>

<p>In addition to the first two arguments, extra arguments can be supplied; these
will be passed on to the filter.</p>

<p><strong>Example #1</strong>: The following rule will make all layouts use the <code>:erb</code>
filter:</p>

<pre><code class="language-ruby">layout '*', :erb</code></pre>

<p><strong>Example #2</strong>: The following rule will make the default layout use the <code>haml</code>
filter and pass a filter argument:</p>

<pre><code class="language-ruby">layout '/default/', :haml, :format =&gt; :html5</code></pre>

<p><strong>Example #3</strong>: The following rule will be applied to all layouts with identifiers starting with a slash followed by an underscore, and ending with a slash. For example, ‚Äú/foo/‚Äù and ‚Äú/foo/_bar/‚Äù would not match, but ‚Äú/_foo/‚Äù, ‚Äú/_foo/bar/‚Äù and even ‚Äú/_foo/_bar/‚Äù would:</p>

<pre><code class="language-ruby">layout %r{^/_.+/$}, :erb</code></pre>

</div>
</div><div class="section" id="the-compilation-process">
<h2>The Compilation Process</h2>

<p>Compiling a site involves several steps:</p>

<ol>
<li>Loading the site data</li>
  <li>Preprocessing the site data</li>
  <li>Building the item representations</li>
  <li>Routing the item representations</li>
  <li>Compiling the item representations</li>
</ol>
<div class="section" id="loading-the-site-data">
<h3>Loading the Site Data</h3>

<p>Before compilation starts, data for items and layouts will be read from all data sources, and mounted at the roots specified by the data sources. For more information about data sources, see the <a href="#data-sources">Data Sources</a> section.</p>

</div>
<div class="section" id="preprocessing-the-site-data">
<h3>Preprocessing the Site Data</h3>

<p>After the data is loaded, it is <em>preprocessed</em> if a preprocessor block exists. A preprocessor block is a simple piece of code defined in the <code>Rules</code> file that will be executed after the data is loaded. It looks like this:</p>

<pre title="A sample preprocessor block"><code class="language-ruby">preprocess do
  # (preprocessing code here)
end
</code></pre>

<p>Preprocessors can modify data coming from data sources before it is compiled. It can change item attributes, content and the path, but also add and remove items.</p>

<p>Preprocessors can be used for various purposes. Here are two sample uses:</p>

<ul>
<li>
    <p>A preprocessor could set a <code>language_code</code> attribute based on the item path. An item such as <code>/en/about/</code> would get an attribute <code>language_code</code> equal to <code>'en'</code>. This would eliminate the need for helpers such as <code>language_code_of</code>.</p>
  </li>
  <li>
    <p>A preprocessor could create new (in-memory) items for a given set of items. This can be useful for creating pages that contain paginated items.</p>
  </li>
</ul>
</div>
<div class="section" id="building-the-item-representations">
<h3>Building the Item Representations</h3>

<p>Once the data is loaded and preprocessed, item representations are built for each item. For each item, its compilation rules (one per item representation) are looked up and a rep is built for each rule.</p>

<p>For example, the following code will cause the item <code>/foo/</code> to have only one rep (<code>default</code>), while the item <code>/bar/</code> will have two reps (<code>raw</code> and <code>full</code>):</p>

<pre title="A sample Rules file with compilation rules for different representations"><code class="language-ruby">compile '/foo/' do
  # (compilation code for the default rep here)
end

compile '/bar/', :rep =&gt; :raw do
  # (compilation code for the :raw rep here)
end

compile '/bar/', :rep =&gt; :full do
  # (compilation code for the :full rep here)
end</code></pre>

</div>
<div class="section" id="routing-the-item-representations">
<h3>Routing the Item Representations</h3>

<p>For each item representation, the matching routing rule is looked up and applied to the item rep. The item rep‚Äôs path to the output file will be set to the return value of the routing rule block.</p>

<p>The routing rule block can also return nil, in which case the item representation will not be written to the disk‚Äîuseful when items should be included as part of other, larger items, but should not exist separately.</p>

<p>For example, the following code will cause the item <code>/foo/</code> to be written to <code>output/abc.html</code>, while the <code>/bar/</code> item will be written to <code>output/xyz.css</code>, and the item <code>/qux/</code> will not be written at all:</p>

<pre title="A sample Rules file where items are routed to specific locations"><code class="language-ruby">route '/foo/' do
  '/abc.html'
end

route '/bar/' do
  '/xyz.css'
end

route '/qux/' do
  nil
end</code></pre>

</div>
<div class="section" id="compiling-the-item-representations">
<h3>Compiling the Item Representations</h3>

<p>Compiling an item means compiling all of its representations, which in turn involves executing the compilation rules on each representation. After a compilation rule has been applied, the item representation‚Äôs compiled content will be written to its output file (if it has one) determined by its routing rule.</p>

<p>The following diagram illustrates item compilation by giving a few examples of how items can be filtered and laid out.</p>

<div class="figure">
	<img src="/assets/images/manual/item_compilation_diagram.png" alt="Diagram giving several examples of how items can be filtered and laid out">
</div>

<p>Items that have content dependencies on other items, i.e. items that include the content of another item, will be compiled once the content of the items it depends on is available. Circular content dependencies (item ‚ÄúA‚Äù requiring the content of item ‚ÄúB‚Äù and vice versa) are detected and reported.</p>

</div>
</div><div class="section" id="filters">
<h2>Filters</h2>

<p>Filters are used for transforming an item‚Äôs content. For example, the ERB filter interprets the item‚Äôs content as text with embedded Ruby, executes the embedded Ruby and returns the result. Each filter has an identifier (a symbol), which is used in the call to <code>#filter</code> in a compilation rule.</p>

<p>Filters can be applied to binary items as well. For example, thumbnail generation for a gallery page can be handled by nanoc. Filters can also convert textual content into binary files and vice versa; text-to-speech filters and OCR filters are therefore possible (but perhaps not very useful).</p>

<p>nanoc comes with quite a handful of filters. <a href="http://nanoc.stoneship.org/docs/api/3.3/Nanoc/Filters.html">Here‚Äôs a list</a>.</p>

</div><div class="section" id="helpers">
<h2>Helpers</h2>

<p>A helper is a module with useful functions that can be used in items and layouts.</p>

<p>Helpers need to be activated before they can be used. To activate a helper, <code>include</code> it, like this (in a file in the <code>lib</code> directory, such as <code>lib/helpers.rb</code>):</p>

<pre title="Activating the Blogging helper by #include‚Äôing it"><code class="language-ruby">include Nanoc::Helpers::Blogging
</code></pre>

<p>Here‚Äôs a <a href="http://nanoc.stoneship.org/docs/api/3.3/Nanoc/Helpers.html">list of helpers that come with nanoc</a>.</p>

</div><div class="section" id="rake-tasks">
<h2>Rake Tasks</h2>

<p>nanoc comes with a couple of useful built-in rake tasks. To use them, require them in your rakefile, like this:</p>

<pre title="Making built-in nanoc tasks available for Rake"><code class="language-ruby">require 'nanoc/tasks'
</code></pre>

<p>The tasks that come with nanoc are:</p>

<dl>
<dt><code>clean</code></dt>
  <dd>Removes all files generated by nanoc from the output directory.</dd>
  <dt><code>validate:css</code></dt>
  <dd>Validates the site‚Äôs CSS files.</dd>
  <dt><code>validate:html</code></dt>
  <dd>Validates the site‚Äôs HTML files.</dd>
</dl>
<p>Please note that the HTML/CSS validation tasks validate each file by sending it to the W3C validator. Depending on the number of files you have, this may be quite slow.</p>

</div><div class="section" id="data-sources">
<h2>Data Sources</h2>

<p>Each site has one or more <em>data sources</em>: objects that can load site data (items and layouts) from certain locations, and even create new items and layouts.</p>

<p>New nanoc sites will have only one data source: the <code>filesystem_unified</code> one. For details about this data source, see the <a href="http://nanoc.stoneship.org/docs/api/3.3/Nanoc/DataSources/FilesystemUnified.html">documentation for <code>FilesystemUnified</code></a>.</p>

<p>The site configuration has a list of hashes containing the data source configurations. Each list item is a hash with the following keys:</p>

<dl>
<dt><code>type</code></dt>
  <dd>The identifier of data source to use (<code>filesystem_unified</code>, <code>filesystem_verbose</code>‚Ä¶)</dd>
  <dt><code>items_root</code></dt>
  <dd>The root where items should be mounted. Optional; defaults to <code>/</code>.</dd>
  <dt><code>layouts_root</code></dt>
  <dd>The root where layouts should be mounted. Optional; defaults to <code>/</code>.</dd>
  <dt><code>config</code></dt>
  <dd>A hash containing custom configuration options for the data source. The contents of this hash depends on the data source used; see the documentation of the data source for details.</dd>
</dl>
<p>For example, the configuration of a site that uses many data sources could look like this:</p>

<pre title="A site configuration with multiple data sourcs"><code class="language-yaml">data_sources:
  -
    # This data source simply loads data from the filesystem.
    type:       'filesystem_unified'
  -
    # This data source loads events as items from a calendar application
    # and stores the loaded items under /events.
    type:       'calendar'
    items_root: '/events'</code></pre>

<p>nanoc comes bundled with the following two data sources:</p>

<dl>
<dt><a href="/docs/api/3.3/Nanoc/DataSources/FilesystemUnified.html"><code>filesystem_unified</code></a></dt>
  <dd>Reads data from files on the disk. It is the default data source for new sites.</dd>
  <dt><a href="/docs/api/3.3/Nanoc/DataSources/FilesystemVerbose.html"><code>filesystem_verbose</code></a></dt>
  <dd>Reads data from files on the disk. Older versions of nanoc used this data source as the default one.</dd>
</dl>
</div>;T;I"ù<h2>The Commandline Tool</h2>

<p>Interacting with nanoc happens through a commandline tool named <code>nanoc</code>. This tool has a few sub-commands, which you can invoke like this:</p>

<pre title="Executing a nanoc command"><span class="prompt">%</span> <kbd>nanoc</kbd> <var>command</var></pre>

<p>Here, <code>command</code> obviously is the name of the command you‚Äôre invoking. A very useful command is the <code>help</code> command, which will give you a detailed description of a given command. You can use it like this:</p>

<pre title="Getting help on a command"><span class="prompt">%</span> <kbd>nanoc help</kbd> <var>command</var></pre>

<p>For example, this is the help for the <code>create_site</code> command:</p>

<pre title="Getting help on the create_site command"><span class="prompt">%</span> <kbd>nanoc help create_site</kbd>
nanoc create_site [path]

aliases: cs

create a site

    Create a new site at the given path. The site will use the compact
    filesystem data source by default, but this can be changed by
    using the --datasource commandline option.

options:

   -d --datasource specify the data source for the new site</pre>

<p>If you want general help, such as a list of available commands and global options, omit the command name, like this:</p>

<pre title="Getting general help for nanoc"><span class="prompt">%</span> <kbd>nanoc help</kbd></pre>

<p>So, if you‚Äôre ever stuck, consult the the commandline help which (hopefully) will put you back on track.</p>

<h2>Sites</h2>
<p>A site managed by nanoc is a directory with a specific structure. A site consists of items, layouts, a site configuration and a set of rules.</p>

<p>The way the data in a site is stored depends on the data source that is being used. However, unless you‚Äôve explicitly told nanoc to use a different data source, the <code>filesystem_unified</code> one will be used. This manual assumes that this <code>filesystem_unified</code> data source is used. For details, see the <a href="#data-sources">Data Sources</a> section.</p>

<h3>Creating a Site</h3>

<p>To create a site, use the <code>create_site</code> command. This command takes the site name as its first and only argument, like this:</p>

<pre title="Creating a site"><span class="prompt">%</span> <kbd>nanoc create_site</kbd> <var>site_name</var></pre>

<p>This will create a directory with the given site name, with a bare-bones directory layout.</p>

<h3>Structure</h3>

<p>A site has the following files and directories:</p>

<dl>
  <dt><code>config.yaml</code></dt>
  <dd>contains the site configuration</dd>
  <dt><code>Rules</code></dt>
  <dd>contains compilation, routing and layouting rules</dd>
  <dt><code>content/</code></dt>
  <dd>contains the uncompiled items</dd>
  <dt><code>layouts/</code></dt>
  <dd>contains the layouts</dd>
  <dt><code>lib/</code></dt>
  <dd>contains custom site-specific code (filters, helpers, ‚Ä¶)</dd>
  <dt><code>output/</code></dt>
  <dd>contains the compiled site</dd>
  <dt><code>tmp/</code></dt>
  <dd>contains data used for speeding up compilation (can be safely emptied)</dd>
</dl>

<h3>Code</h3>

<p>nanoc will load all Ruby source files in the <code>lib</code> directory before it starts compiling. All method definitions, class definitions, etc. will be available during the compilation process. This directory is therefore quite useful for putting in site-wide helpers, filters, data sources, etc.</p>

<h3>Site configuration</h3>

<p>The site configuration is defined by the <code>config.yaml</code> file at the top level of the site directory. The file is in YAML format. The configuration has the following predefined values (check the <a href="/docs/api/3.3/Nanoc/Site.html">API documentation for <code>Nanoc::Site</code></a> for details about the default values):</p>

<dl>
  <dt><code>text_extensions</code></dt>
  <dd>A list of file extensions that nanoc will consider to be textual rather than binary. If an item with an extension not in this list is found, the file will be considered as binary.</dd>
  <dt><code>output_dir</code></dt>
  <dd>The path to the directory where all generated files will be written to. This can be an absolute path starting with a slash, but it can also be path relative to the site directory.</dd>
  <dt><code>index_filenames</code></dt>
  <dd>A list of index filenames, i.e. names of files that will be served by a web server when a directory is requested. Usually, index files are named ‚Äúindex.hml‚Äù, but depending on the web server, this may be something else, such as ‚Äúdefault.htm‚Äù. This list is used by nanoc to generate pretty URLs.</dd>
  <dt><code>enable_output_diff</code></dt>
  <dd>Whether or not to generate a diff of the compiled content when compiling a site. The diff will contain the differences between the compiled content before and after the last site compilation.</dd>
  <dt><code>data_sources</code></dt>
  <dd>The data sources where nanoc loads its data from. This is an array of hashes; each array element represents a single data source. By default, there is only a single data source that reads data from the ‚Äúcontent/‚Äù and ‚Äúlayout/‚Äù directories in the site directory. See below for details.</dd>
  <dt><code>watcher</code></dt>
  <dd>Configuration for the ‚Äúwatch‚Äù command, which watches a site for changes and recompiles if necessary. See below for details.</dd>
</dl>

<p>The data source configuration is an array of hashes with the following keys:</p>

<dl>
  <dt><code>type</code></dt>
  <dd>The type is the identifier of the data source. By default, this will be <code>filesystem_unified</code>.</dd>
  <dt><code>items_root</code></dt>
  <dd>The path where items should be mounted (comparable to mount points in Unix-like systems). This is ‚Äú/‚Äù by default, meaning that items will have ‚Äú/‚Äù prefixed to their identifiers. If the items root were ‚Äú/en/‚Äù instead, an item at content/about.html would have an identifier of ‚Äú/en/about/‚Äù instead of just ‚Äú/about/‚Äù.</dd>
  <dt><code>layouts_root</code></dt>
  <dd>The path where layouts should be mounted. The layouts root behaves the same as the items root, but applies to layouts rather than items.</dd>
</dl>

<p>The watcher configuration is a hash with the following options:</p>

<dl>
  <dt><code>dirs_to_watch</code></dt>
  <dd>A list of directories to watch for changes. When editing this, make sure that the ‚Äúoutput/‚Äù and ‚Äútmp/‚Äù directories are <em>not</em> included in this list, because recompiling the site will cause these directories to change, which  will cause the site to be recompiled, which will cause these directories to change, which will cause the site to be recompiled again, and so on. By default, this contains <code>content</code>, <code>layouts</code> and <code>lib</code>.</dd>
  <dt><code>files_to_watch</code></dt>
  <dd>A list of single files to watch for changes. As mentioned above, don‚Äôt put any files from the ‚Äúoutput/‚Äù or ‚Äútmp/‚Äù directories in here. By default, this contains <code>config.yaml</code> and <code>Rules</code>.</dd>
  <dt><code>notify_on_compilation_success</code></dt>
  <dd>Whether or not to send a Growl or <code>notify-send</code> notification when compilation succeeds.</dd>
  <dt><code>notify_on_compilation_failure</code></dt>
  <dd>Whether or not to send a Growl or <code>notify-send</code> notification when compilation fails.</dd>
</dl>

<p>The prune configuration is a hash with the following options:</p>

<dl>
  <dt><code>auto_prune</code></dt>
  <dd>Whether to automatically remove files not managed by nanoc from the output directory. For safety reasons, this is turned off by default.</dd>
  <dt><code>exclude</code></dt>
  <dd>Which files and directories you want to exclude from pruning. If you version your output directory, you should probably exclude VCS directories such as <code>.git</code>, <code>.svn</code> etc. By default, the directories <code>.git</code>, <code>.hg</code>, <code>.svn</code> and <code>CVS</code> will be ignored. </dd>
</dl>

<h3>(Auto)compiling a Site</h3>

<p>To compile a site to its final form, the <code>nanoc compile</code> (or <code>nanoc co</code>) command is used. The compile command is the default command, so it will be invoked if you don‚Äôt pass anything. The compile command will write the compiled site to the output directory as specified in the site configuration file. For example:</p>

<pre title="Compiling a site"><span class="prompt">%</span> <kbd>nanoc compile</kbd>
<span class="prompt">%</span> <kbd>nanoc co</kbd>
<span class="prompt">%</span> <kbd>nanoc</kbd></pre>

<p>nanoc will not compile items that are not outdated. If you want to force nanoc to recompile everything, delete the output directory and re-run the compile command.</p>

<p>It is possible to let nanoc run a local web server, the <em>autocompiler</em>, that serves the nanoc site. Each request will cause the requested item to be compiled on the fly before being served. You can run the autocompiler like this:</p>

<pre title="Compiling a site"><span class="prompt">%</span> <kbd>nanoc autocompile</kbd>
<span class="prompt">%</span> <kbd>nanoc aco</kbd></pre>

<p>The autocompiler will run on port 3000 by default; this can be changed using the <code>--port</code> commandline switch. Note that this autocompiler should <em>only</em> be used for development purposes to make writing sites easier; it is quite unsuitable for use on live servers.</p>

<p>An alternative is the watcher, which will recompile whenever a change to the site is detected. The watcher does not run a web server (you can run one with <code>nanoc view</code>). You can use it like this:</p>

<pre title="Compiling a site"><span class="prompt">%</span> <kbd>nanoc watch &amp;</kbd>
<span class="prompt">%</span> <kbd>nanoc view</kbd></pre>

<h2>Items</h2>
<p>Items are the basic building blocks of a nanoc-powered site. An item consist of content and metadata attributes.</p>

<p>Items are structured hierarchically. Each item has an identifier that consists of slash-separated parts, which reflects this hierarchy. There is one ‚Äúroot‚Äù or ‚Äúhome‚Äù page which has identifier <code>/</code>; other items will have identifiers such as <code>/journal/2008/some-article/</code>. The hierarchy of files in the <code>content</code> directory reflects this hierarchy.</p>

<p>Items can be textual or binary. If the extension of the item is included in the site configuration‚Äôs <code>text_extension</code> array, it is considered to be textual; otherwise, it will be binary. Site assets such as images, audio files and movies should be binary. Binary items don‚Äôt have their content stored in-memory. Instead, binary items have a filename pointing to the file containing the content.</p>

<p>To get the raw, uncompiled content of a (textual) item, use <a href="/docs/api/3.3/Nanoc/Item.html#raw_content-instance_method"><code>Nanoc::Item#raw_content</code></a>. To get the compiled content, use <a href="/docs/api/3.3/Nanoc/Item.html#compiled_content-instance_method"><code>Nanoc::Item#compiled_content</code></a>. The latter method has a <code>:rep</code> option for specifying the rep to get the compiled content from, and a <code>:snapshot</code> option for specifying the name of the snapshot to fetch. For details, see the <a href="#representations">Representations</a> and <a href="#snapshots">Snapshots</a> sections below. It is not possible to request the content of binary items.</p>

<p>The default list of text extensions is the following:</p>

<pre><code class="language-yaml">text_extensions: [ 'coffee', 'css', 'erb', 'haml', 'handlebars', 'hb', 'htm', 'html', 'js', 'less', 'markdown', 'md', 'ms', 'mustache', 'php', 'rb', 'sass', 'scss', 'txt', 'xhtml', 'xml' ]
</code></pre>

<p>To get the path of the compiled item, use <a href="/docs/api/3.3/Nanoc/Item.html#path-instance_method"><code>Nanoc::Item#path</code></a>. This path is relative to the output directory; it starts with a slash which indicates the web root, i.e. the output directory. The index filenames are stripped off the end of the path. You can pass a <code>:rep</code> option to get the path of a specific representation. For example, the path of an item that is compiled to <code>output/foo/index.html</code> is <code>/foo/</code>.</p>

<p>During compilation, items cannot be modified. You can, however, adjust the item content and attributes in the preprocessor.</p>

<h3>Creating an Item</h3>

<p>Items are stored as plaintext files on the hard drive (unless you‚Äôre using esoteric data sources), so it‚Äôs easy to manually create items. nanoc provides a <code>create_item</code> (or <code>ci</code>) command for making item generation easier, though. This command looks like this:</p>

<pre title="Creating an item"><span class="prompt">%</span> <kbd>nanoc create_item</kbd> <var>item_identifier</var></pre>

<h3>Attributes</h3>

<p>Each item has attributes (metadata) associated with it. This metadata consists of key-value pairs, which are stored in YAML format (although this may vary for different data sources). All attributes are free-form; there are no predefined attributes.</p>

<p>Some filters or helpers may use certain attributes. When using such filters or helpers, be sure to check their documentation (see below) to see what attributes they use, if any.</p>

<p>When using a filesystem-based data source, attributes are stored as YAML in either the top of the file representing the item, or a separate file with the same base name. For example, an item at <code>content/about.html</code> could look like this when the metadata is embedded into the file:</p>

<pre title="Item with embedded metadata"><code class="language-yaml">---
title: "Some Page"
---</code>

<code class="language-html">&lt;p&gt;Lorem ipsum dolor sit amet‚Ä¶&lt;/p&gt;</code></pre>

<p>If you are using the default data source (<code>filesystem_unified</code>), then each item will automatically receive some extra attributes that may be useful. These are:</p>

<dl>
  <dt><code>:filename</code></dt>
  <dd>the name of the file corresponding to the item (if there is only one file that contains both content and metadata)</dd>
  <dt><code>:content_filename</code></dt>
  <dd>the name of the content file (if there is a content file)</dd>
  <dt><code>:meta_filename</code></dt>
  <dd>the name of the meta-file (if there is a meta-file)</dd>
  <dt><code>:extension</code></dt>
  <dd>the extension of the file or the content file (if there is one, because it is possible to have a meta-file without a corresponding content file)</dd>
</dl>

<h3>Representations</h3>

<p>An item representation (or ‚Äúrep‚Äù for short) is a compiled version of an item. Each representation has a name (a symbol, not a string). An item can have multiple representations, though usually it will have just one (named <code>default</code>).</p>

<p>Multiple representations are useful when items need to be available in multiple formats. For example, HTML and XHTML. You could also have a <code>raw</code> representation that isn‚Äôt compiled at all‚Äîjust the raw, unfiltered, non-laid out content. Sometimes, it may even be useful to have XML, YAML or JSON representations of an item.</p>

<p>An item‚Äôs list of representation can be fetched by calling <a href="/docs/api/3.3/Nanoc/Item.html#reps-instance_method"><code>Nanoc::Item#reps</code></a> instance. To get a specific rep, use <a href="/docs/api/3.3/Nanoc/Item.html#rep_named-instance_method"><code>Nanoc::Item#rep_named</code></a> with the rep name, like this:</p>

<pre title="Finding the item rep with the given name"><code class="language-ruby">rep = @item.rep_named(:default)
</code></pre>

<h3>Snapshots</h3>

<p>A snapshot is the compiled content at a specific point during the compilation process. Snapshots can be generated manually, but some snapshots are generated automatically (see below).</p>

<p>To get the compiled content of a specific snapshot, use the <code>:snapshot</code> option of <a href="/docs/api/3.3/Nanoc/Item.html#compiled_content-instance_method"><code>Nanoc::Item#compiled_content</code></a> or <a href="/docs/api/3.3/Nanoc/ItemRep.html#compiled_content-instance_method"><code>Nanoc::ItemRep#compiled_content</code></a>. For example:</p>

<pre title="Getting the compiled content at a certain snapshot"><code class="language-ruby">stuff = some_item.compiled_content(:snapshot =&gt; :pre)
stuff = some_rep.compiled_content(:snapshot =&gt; :last)
</code></pre>

<p>The following snapshots are generated automatically:</p>

<dl>
  <dt><code>:raw</code></dt>
  <dd>The content right before actual compilation is started</dd>
  <dt><code>:pre</code></dt>
  <dd>The content right before the item is laid out</dd>
  <dt><code>:post</code></dt>
  <dd>The content after the item has been laid out and post-filtered</dd>
  <dt><code>:last</code></dt>
  <dd>The most recent compiled content</dd>
</dl>

<p>The <code>:post</code> and <code>:last</code> snapshots will usually be the same. The difference is that <code>:last</code> is a moving snapshot: it always refers to the last compiled content. <code>:last</code> may refer to <code>:raw</code> or <code>:pre</code> early on, but may point to <code>:post</code> later. Also, there will <em>always</em> be a <code>:last</code> snapshot but not necessary a <code>:post</code> snapshot; items that are not laid out will not have one.</p>

<p>Binary items cannot have snapshots.</p>

<h3>Variables</h3>

<p>When compiling items with filters that support adding code to the item or the layout (such as ERB and Haml), several variables are made available. These variables are:</p>

<dl>
  <dt><code>@item_rep</code></dt>
  <dd>The item representation that is currently being compiled.</dd>
  <dt><code>@item</code></dt>
  <dd>The item that is currently being compiled.</dd>
  <dt><code>@items</code></dt>
  <dd>The list of all items, including ones that have not yet been compiled.</dd>
  <dt><code>@layout</code></dt>
  <dd>The layout that is currently being used in the layout phase.</dd>
  <dt><code>@layouts</code></dt>
  <dd>The list of all layouts.</dd>
  <dt><code>@config</code></dt>
  <dd>The site configuration as a hash.</dd>
  <dt><code>@site</code></dt>
  <dd>The site.</dd>
</dl>

<p>To get an item attribute, use the <a href="/docs/api/3.3/Nanoc/Item.html#%5B%5D-instance_method"><code>Nanoc::Item#[]</code></a> method and pass the attribute key as a symbol, e.g. <code>@item[:author]</code>.</p>

<h2>Layouts</h2>

<p>On itself, an item‚Äôs content is not valid HTML yet: it lacks the structure a typical HTML document has. A layout is used to add this missing structure to the item.</p>

<p>For a layout to be useful, it must output the item‚Äôs content at a certain point. This is done by outputting <code>yield</code>. This extremely minimal layout shows an example of how this is usually done:</p>

<pre title="A minimalistic layout"><code class="language-html">&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;&lt;%=h @item[:title] %&gt;&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;%= yield %&gt;
  &lt;/body&gt;
&lt;/html&gt;</code></pre>

<p>An item is put into a layout by calling the <code>layout</code> function in a compilation rule. See the <a href="#compilation-rules">Compilation Rules</a> section for details.</p>

<p>During compilation, layouts cannot be modified. You can, however, adjust the layout content and attributes in the preprocessor.</p>

<h3>As Partials</h3>

<p>Layouts can also be used as <em>partials</em>: a specific layout can be rendered into an item or a layout by using the <code>render</code> function, which takes the layout name as an argument. For example:</p>

<pre title="Rendering the ‚Äúhead‚Äù layout as a partial"><code class="language-html">&lt;%= render 'head' %&gt;</code></pre>

<p>To use this helper, activate the <a href="/docs/api/3.3/Nanoc/Helpers/Rendering.html">Rendering</a> helper (see the <a href="#helpers">helpers</a> section for details), which is done by adding this line of code to some file in the <code>lib</code> directory (I recommend <code>lib/helpers.rb</code>):</p>

<pre title="Activating the Rendering helper"><code class="language-ruby">include Nanoc::Helpers::Rendering</code></pre>

<p>It is also possible to pass custom variables to rendered partials by putting them into a hash passed to <code>#render</code>. The following example will make a <code>@title</code> variable (set to <code>"Foo"</code> in this example) available in the <code>head</code> layout:</p>

<pre title="Rendering the ‚Äúhead‚Äù partial with custom variables"><code class="language-html">&lt;%= render "head", :title =&gt; "Foo" %&gt;</code></pre>

<h2>Rules</h2>
<p>The instructions for processing items are located in a file named <code>Rules</code> which lives in a nanoc site directory. This rules file contains <em>routing rules</em>, <em>compilation rules</em> and <em>layouting rules</em>. Compilation rules determine the actions that should be executed during compilation (filtering, layouting), routing rules determine the path where the compiled files should be written to, and layouting rules determine the filter that should be used for a given layout.</p>

<p>A rule consists of a selector, which identifies which items the rule should be applicable to, and an action block (except for layouting rules), which contains the actions to perform.</p>

<p>Each item has exactly one compilation rule and one routing rule. Similarly, each layout has exactly one layouting rule. The first matching rule that is found in the rules file is used. If an item or a layout is not using the correct rule, double-check to make sure that the rules are in the correct order.</p>

<h3>Routing Rules</h3>

<p>A routing rule looks like this:</p>

<pre title="An example (incomplete) routing rule"><code class="language-ruby">route '/foo/' do
  # (routing code here)
end</code></pre>

<p>The argument for the <a href="/docs/api/3.3/Nanoc/CompilerDSL.html#route-instance_method"><code>#route</code></a> method is the identifier of the item that should be compiled. It can also be a string that contains the <code>*</code> wildcard, which matches zero or more characters. Additionally, it can be a regular expression.</p>

<p>A <code>:rep</code> argument can be passed to the <a href="/docs/api/3.3/Nanoc/CompilerDSL.html#route-instance_method"><code>#route</code></a> call. This indicates the name of the representation this rule should apply to. This is <code>:default</code> by default, which means routing rules apply to the default representation unless specified otherwise.</p>

<p>The code block should return the routed path for the relevant item. The code block can return nil, in which case the item will not be written.</p>

<p>In the code block, you have access to <code>@rep</code>, which is the item representation that is currently being processed, and <code>@item</code>, which is an alias for <code>@rep.item</code>.</p>

<p><strong>Example #1</strong>: The following rule will give the item with identifier <code>/404/</code> the path <code>/errors/404.php</code>:</p>

<pre title="Routing the ‚Äú/404/‚Äù item to ‚Äú/errors/404.php‚Äù"><code class="language-ruby">route "/404/" do
  "/errors/404.php"
end</code></pre>

<p><strong>Example #2</strong>: The following rule will give all identifiers for which no prior matching rule exists a path based directly on its identifier (for example, the item <code>/foo/bar/</code> would get the path <code>/foo/bar/index.html</code>):</p>

<pre title="Routing using a fallback routing rule"><code class="language-ruby">route "*" do
  rep.item.identifier + "index.html"
end</code></pre>

<p><strong>Example #3</strong>: The following rule will prevent all items with identifiers starting with <code>/links/</code>, including the <code>/links/</code> item itself, from being written (the items will still be compiled so that they can be included in other items, however):</p>

<pre title="Preventing the ‚Äú/links/‚Äù item and its sub-items from being written"><code class="language-ruby">route "/links/*" do
  nil
end</code></pre>

<p><strong>Example #4</strong>: The following rule will apply to all items below <code>/people/</code>, but not the <code>/people/</code> item itself, and only to textual representations (with name equal to <code>:text</code>):</p>

<pre title="Routing sub-items of ‚Äú/people/‚Äù to a ‚Äú.txt‚Äù file"><code class="language-ruby">route "/people/*/", :rep =&gt; :text do
  item.identifier + ".txt"
end</code></pre>

<h3>Compilation Rules</h3>

<p>A compilation rule looks like this:</p>

<pre title="An example (incomplete) compilation rule"><code class="language-ruby">compile "/foo/" do
  # (compilation code here)
end</code></pre>

<p>The argument for the <code>#compile</code> command is exactly the same as the argument
for <code>#route</code>; see above for details.</p>

<p>Just like with routing rules, a <code>:rep</code> argument can be passed to the
<code>#compile</code> call. This indicates the name of the representation this rule
should apply to. This is <code>:default</code> by default, which means compilation
rules apply to the default representation unless specified otherwise.</p>

<p>The code block should execute the necessary actions for compiling the item. It
does not have to return anything.</p>

<p>In the code block, you have access to <code>@rep</code>, which is the item representation
that is currently being processed, and <code>@item</code>, which is an alias for
<code>@rep.item</code>.</p>

<p>A compilation action can either be a filter action, a layout action, or a
snapshot action.</p>

<p>To filter an item representation, call <code>#filter</code> pass the name of the filter as argument, along with any other filter arguments. For example, the following will call the <code>:erb</code> filter on the current item representation:</p>

<pre title="Calling the ‚Äúerb‚Äù filter"><code class="language-ruby">filter :erb</code></pre>

<p>Additional parameters can be given to invocations of <code>#filter</code>. This is used by some filters, such as the Haml one (<code>:haml</code>), to alter filter behaviour in one way or another. For example, the following invokes the <code>:haml</code> filter with an additional parameter:</p>

<pre title="Calling the ‚Äúhaml‚Äù filter with extra arguments"><code class="language-ruby">filter :haml, :format =&gt; :html5</code></pre>

<p>To lay out an item representation, call <code>#layout</code> and pass the layout identifier as argument. For example, the following will lay out the item representation using the <code>/default/</code> layout:</p>

<pre title="Laying out the item with the ‚Äúdefault‚Äù layout"><code class="language-ruby">layout 'default'</code></pre>

<p>You can run multiple filters and layouts sequentially, like this:</p>

<pre title="Calling multiple filters"><code class="language-ruby">filter :erb
filter :kramdown
layout 'default'
filter :rubypants</code></pre>

<p>To take a snapshot of an item representation, call <code>#snapshot</code> and pass the snapshot name as argument. For example, the following will create a <code>:foo</code> snapshot of the item representation that can later be referred to:</p>

<pre title="Creating a snapshot named ‚Äúfoo‚Äù of the current compiled content"><code class="language-ruby">snapshot :foo</code></pre>

<p>You‚Äôll usually call <code>#filter</code>, <code>#layout</code> and <code>#snapshot</code> without explicit receiver, but you can also call them on the <code>@rep</code> object if you want. The following actions are equivalent:</p>

<pre title="Some examples of equivalent calls (with and without explicit receiver)"><code class="language-ruby">filter :erb
@rep.filter :erb

layout 'default'
@rep.layout 'default'

snapshot :foo
@rep.snapshot :foo</code></pre>

<p><strong>Example #1</strong>: The following rule will not perform any actions, i.e. the item
will not be filtered nor laid out:</p>

<pre><code class="language-ruby">compile '/sample/one/' do
end
</code></pre>

<p><strong>Example #2</strong>: The following rule will filter the rep using the <code>erb</code> filter,
but not lay out the rep:</p>

<pre><code class="language-ruby">compile '/samples/two/' do
  filter :erb
end
</code></pre>

<p><strong>Example #3</strong>: The following rule will filter the rep using the <code>erb</code> filter,
lay out the rep using the <code>shiny</code> layout, and finally run the laid out rep
through the <code>rubypants</code> filter:</p>

<pre><code class="language-ruby">compile '/samples/three/' do
  filter :erb
  layout '/shiny/'
  filter :rubypants
end
</code></pre>

<p><strong>Example #4</strong>: The following rule will filter the rep using the
<code>relativize_paths</code> filter with the filter argument <code>type</code> equal to <code>css</code>:</p>

<pre><code class="language-ruby">compile '/assets/style/' do
  filter :relativize_paths, :type =&gt; :css
end
</code></pre>

<p><strong>Example #5</strong>: The following rule will filter the rep and layout it by
invoking <code>#filter</code> or <code>#layout</code> with an explicit receiver (with and without @ sign):</p>

<pre><code class="language-ruby">compile '/samples/three/' do
  @rep.filter :erb
  @rep.layout '/shiny/'
  @rep.filter :rubypants
end
</code></pre>

<p><strong>Example #6</strong>: The following rule will apply to all items below <code>/people/</code>,
and only to textual representations (with name equal to <code>text</code>):</p>

<pre><code class="language-ruby">compile '/people/*', :rep =&gt; :text do
  # don't filter or layout
end
</code></pre>

<p><strong>Example #7</strong>: The following rule will create a snapshot named <code>without_toc</code>
so that the content at that snapshot can then later be reused elsewhere:</p>

<pre><code class="language-ruby">compile '/foo/' do
  filter   :markdown
  snapshot :without_toc
  filter   :add_toc
end
</code></pre>

<h3>Layouting Rules</h3>

<p>To specify the filter used for a layout, use the <code>#layout</code> method.</p>

<p>The first argument should be a string containing the identifier of the layout.
It can also be a string that contains the <code>*</code> wildcard, which matches zero or
more characters. Additionally, it can be a regular expression.</p>

<p>The second should be the identifier of the filter to use.</p>

<p>In addition to the first two arguments, extra arguments can be supplied; these
will be passed on to the filter.</p>

<p><strong>Example #1</strong>: The following rule will make all layouts use the <code>:erb</code>
filter:</p>

<pre><code class="language-ruby">layout '*', :erb</code></pre>

<p><strong>Example #2</strong>: The following rule will make the default layout use the <code>haml</code>
filter and pass a filter argument:</p>

<pre><code class="language-ruby">layout '/default/', :haml, :format =&gt; :html5</code></pre>

<p><strong>Example #3</strong>: The following rule will be applied to all layouts with identifiers starting with a slash followed by an underscore, and ending with a slash. For example, ‚Äú/foo/‚Äù and ‚Äú/foo/_bar/‚Äù would not match, but ‚Äú/_foo/‚Äù, ‚Äú/_foo/bar/‚Äù and even ‚Äú/_foo/_bar/‚Äù would:</p>

<pre><code class="language-ruby">layout %r{^/_.+/$}, :erb</code></pre>

<h2>The Compilation Process</h2>

<p>Compiling a site involves several steps:</p>

<ol>
  <li>Loading the site data</li>
  <li>Preprocessing the site data</li>
  <li>Building the item representations</li>
  <li>Routing the item representations</li>
  <li>Compiling the item representations</li>
</ol>

<h3>Loading the Site Data</h3>

<p>Before compilation starts, data for items and layouts will be read from all data sources, and mounted at the roots specified by the data sources. For more information about data sources, see the <a href="#data-sources">Data Sources</a> section.</p>

<h3>Preprocessing the Site Data</h3>

<p>After the data is loaded, it is <em>preprocessed</em> if a preprocessor block exists. A preprocessor block is a simple piece of code defined in the <code>Rules</code> file that will be executed after the data is loaded. It looks like this:</p>

<pre title="A sample preprocessor block"><code class="language-ruby">preprocess do
  # (preprocessing code here)
end
</code></pre>

<p>Preprocessors can modify data coming from data sources before it is compiled. It can change item attributes, content and the path, but also add and remove items.</p>

<p>Preprocessors can be used for various purposes. Here are two sample uses:</p>

<ul>
  <li>
    <p>A preprocessor could set a <code>language_code</code> attribute based on the item path. An item such as <code>/en/about/</code> would get an attribute <code>language_code</code> equal to <code>'en'</code>. This would eliminate the need for helpers such as <code>language_code_of</code>.</p>
  </li>
  <li>
    <p>A preprocessor could create new (in-memory) items for a given set of items. This can be useful for creating pages that contain paginated items.</p>
  </li>
</ul>

<h3>Building the Item Representations</h3>

<p>Once the data is loaded and preprocessed, item representations are built for each item. For each item, its compilation rules (one per item representation) are looked up and a rep is built for each rule.</p>

<p>For example, the following code will cause the item <code>/foo/</code> to have only one rep (<code>default</code>), while the item <code>/bar/</code> will have two reps (<code>raw</code> and <code>full</code>):</p>

<pre title="A sample Rules file with compilation rules for different representations"><code class="language-ruby">compile '/foo/' do
  # (compilation code for the default rep here)
end

compile '/bar/', :rep =&gt; :raw do
  # (compilation code for the :raw rep here)
end

compile '/bar/', :rep =&gt; :full do
  # (compilation code for the :full rep here)
end</code></pre>

<h3>Routing the Item Representations</h3>

<p>For each item representation, the matching routing rule is looked up and applied to the item rep. The item rep‚Äôs path to the output file will be set to the return value of the routing rule block.</p>

<p>The routing rule block can also return nil, in which case the item representation will not be written to the disk‚Äîuseful when items should be included as part of other, larger items, but should not exist separately.</p>

<p>For example, the following code will cause the item <code>/foo/</code> to be written to <code>output/abc.html</code>, while the <code>/bar/</code> item will be written to <code>output/xyz.css</code>, and the item <code>/qux/</code> will not be written at all:</p>

<pre title="A sample Rules file where items are routed to specific locations"><code class="language-ruby">route '/foo/' do
  '/abc.html'
end

route '/bar/' do
  '/xyz.css'
end

route '/qux/' do
  nil
end</code></pre>

<h3>Compiling the Item Representations</h3>

<p>Compiling an item means compiling all of its representations, which in turn involves executing the compilation rules on each representation. After a compilation rule has been applied, the item representation‚Äôs compiled content will be written to its output file (if it has one) determined by its routing rule.</p>

<p>The following diagram illustrates item compilation by giving a few examples of how items can be filtered and laid out.</p>

<div class="figure">
	<img src="/assets/images/manual/item_compilation_diagram.png" alt="Diagram giving several examples of how items can be filtered and laid out" />
</div>

<p>Items that have content dependencies on other items, i.e. items that include the content of another item, will be compiled once the content of the items it depends on is available. Circular content dependencies (item ‚ÄúA‚Äù requiring the content of item ‚ÄúB‚Äù and vice versa) are detected and reported.</p>

<h2>Filters</h2>

<p>Filters are used for transforming an item‚Äôs content. For example, the ERB filter interprets the item‚Äôs content as text with embedded Ruby, executes the embedded Ruby and returns the result. Each filter has an identifier (a symbol), which is used in the call to <code>#filter</code> in a compilation rule.</p>

<p>Filters can be applied to binary items as well. For example, thumbnail generation for a gallery page can be handled by nanoc. Filters can also convert textual content into binary files and vice versa; text-to-speech filters and OCR filters are therefore possible (but perhaps not very useful).</p>

<p>nanoc comes with quite a handful of filters. <a href="http://nanoc.stoneship.org/docs/api/3.3/Nanoc/Filters.html">Here‚Äôs a list</a>.</p>

<h2>Helpers</h2>

<p>A helper is a module with useful functions that can be used in items and layouts.</p>

<p>Helpers need to be activated before they can be used. To activate a helper, <code>include</code> it, like this (in a file in the <code>lib</code> directory, such as <code>lib/helpers.rb</code>):</p>

<pre title="Activating the Blogging helper by #include‚Äôing it"><code class="language-ruby">include Nanoc::Helpers::Blogging
</code></pre>

<p>Here‚Äôs a <a href="http://nanoc.stoneship.org/docs/api/3.3/Nanoc/Helpers.html">list of helpers that come with nanoc</a>.</p>

<h2>Rake Tasks</h2>

<p>nanoc comes with a couple of useful built-in rake tasks. To use them, require them in your rakefile, like this:</p>

<pre title="Making built-in nanoc tasks available for Rake"><code class="language-ruby">require 'nanoc/tasks'
</code></pre>

<p>The tasks that come with nanoc are:</p>

<dl>
  <dt><code>clean</code></dt>
  <dd>Removes all files generated by nanoc from the output directory.</dd>
  <dt><code>validate:css</code></dt>
  <dd>Validates the site‚Äôs CSS files.</dd>
  <dt><code>validate:html</code></dt>
  <dd>Validates the site‚Äôs HTML files.</dd>
</dl>

<p>Please note that the HTML/CSS validation tasks validate each file by sending it to the W3C validator. Depending on the number of files you have, this may be quite slow.</p>

<h2>Data Sources</h2>

<p>Each site has one or more <em>data sources</em>: objects that can load site data (items and layouts) from certain locations, and even create new items and layouts.</p>

<p>New nanoc sites will have only one data source: the <code>filesystem_unified</code> one. For details about this data source, see the <a href="http://nanoc.stoneship.org/docs/api/3.3/Nanoc/DataSources/FilesystemUnified.html">documentation for <code>FilesystemUnified</code></a>.</p>

<p>The site configuration has a list of hashes containing the data source configurations. Each list item is a hash with the following keys:</p>

<dl>
  <dt><code>type</code></dt>
  <dd>The identifier of data source to use (<code>filesystem_unified</code>, <code>filesystem_verbose</code>‚Ä¶)</dd>
  <dt><code>items_root</code></dt>
  <dd>The root where items should be mounted. Optional; defaults to <code>/</code>.</dd>
  <dt><code>layouts_root</code></dt>
  <dd>The root where layouts should be mounted. Optional; defaults to <code>/</code>.</dd>
  <dt><code>config</code></dt>
  <dd>A hash containing custom configuration options for the data source. The contents of this hash depends on the data source used; see the documentation of the data source for details.</dd>
</dl>

<p>For example, the configuration of a site that uses many data sources could look like this:</p>

<pre title="A site configuration with multiple data sourcs"><code class="language-yaml">data_sources:
  -
    # This data source simply loads data from the filesystem.
    type:       'filesystem_unified'
  -
    # This data source loads events as items from a calendar application
    # and stores the loaded items under /events.
    type:       'calendar'
    items_root: '/events'</code></pre>

<p>nanoc comes bundled with the following two data sources:</p>

<dl>
  <dt><a href="/docs/api/3.3/Nanoc/DataSources/FilesystemUnified.html"><code>filesystem_unified</code></a></dt>
  <dd>Reads data from files on the disk. It is the default data source for new sites.</dd>
  <dt><a href="/docs/api/3.3/Nanoc/DataSources/FilesystemVerbose.html"><code>filesystem_verbose</code></a></dt>
  <dd>Reads data from files on the disk. Older versions of nanoc used this data source as the default one.</dd>
</dl>
;T;@$"/docs/7-glossary/{;{
;I"L$<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<title>SeqWare ‚Ä∫ Glossary</title>
<meta content="nanoc 3.4.0" name="generator">
<link href="../../assets/style-v17.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://feeds.feedburner.com/seqware" rel="alternate" title="The SeqWare Blog" type="application/atom+xml">
<script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-34523087-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script>
</head>
<body>
<div class="wrapper">
<!-- ***** navigation ***** -->
<div class="nav">
<ol>
<li><a href="../../"><span>Home</span></a></li>
<li><a href="../../blog/"><span>News</span></a></li>
<li><a href="../"><span>Documentation</span></a></li>
<li><a href="../../community/"><span>Community</span></a></li>
<li><a href="../../partners/"><span>Partners</span></a></li>
<li><a href="../../about/"><span>About</span></a></li>
</ol>
</div>
<!-- ***** sidebar ***** -->
<div class="side">
<ol>
<li><a href="../1-introduction/"><span>Introduction to nanoc</span></a></li>
<li><a href="../2-installation/"><span>Installation</span></a></li>
<li><a href="../3-getting-started/"><span>Getting Started</span></a></li>
<li><a href="../4-basic-concepts/"><span>Basic Concepts</span></a></li>
<li><a href="../5-advanced-concepts/"><span>Advanced Concepts</span></a></li>
<li><a href="../6-guides/"><span>Guides</span></a></li>
<li><span class="active" title="You're here."><span>Glossary</span></span></li>
<li><a href="../8-faq/"><span>Frequently Asked Questions</span></a></li>
<li><a href="../api/3.4/"><span>API documentation</span></a></li>
</ol>
</div>
<!-- ***** body ***** -->
<div class="body">
<div class="article">
<div class="header">
<h1>Glossary</h1>
</div>
<dl class="glossary">
<dt id="glossary-asset">asset</dt>
    <dd><span class="see">see <a href="#glossary-item">item</a></span></dd>

    <dt id="glossary-attribute">attribute</dt>
    <dd>A key-value pair that contains extra <a href="#glossary-metadata">metadata</a> about an <a href="#glossary-item">item</a> or a <a href="#glossary-layout">layout</a>.</dd>

    <dt id="glossary-compilation">compilation</dt>
    <dd>The act of <a href="#glossary-filter">filtering</a> and <a href="#glossary-layout">laying out</a> all <a href="#glossary-item">items</a> in a <a href="#glossary-site">site</a>, according to <a href="#glossary-routing-rule">routing rules</a>, <a href="#glossary-compilation-rule">compilation rules</a> and <a href="#glossary-layout-rule">layout rules</a>.</dd>

    <dt id="glossary-compilation-rule">compilation rule</dt>
    <dd>A <a href="#glossary-rule">rule</a> that defines how an <a href="#glossary-item">item</a> should be <a href="#glossary-filter">filtered</a> and/or <a href="#glossary-layout">laid out</a>.</dd>

    <dt id="glossary-content-file">content file</dt>
    <dd>A file containing the actual content of an <a href="#glossary-item">item</a> or a <a href="#glossary-layout">layout</a>. Usually, there will also be a <a href="#glossary-meta-file">meta-file</a> containing <a href="#glossary-metadata">metadata</a> about that item or layout, although some <a href="#glossary-data-source">data sources</a> (e.g. <code>filesystem_combined</code>) merge the content file and the meta-file into a single file.</dd>

    <dt id="glossary-data-source">data source</dt>
    <dd>An object that reads data from a given location and turns this data into <a href="#glossary-item">items</a> and/or <a href="#glossary-layout">layouts</a>. By default, data can be read from the filesystem, but data sources for databases and online web services are also possible.</dd>

    <dt id="glossary-filter">filter</dt>
    <dd>An object that transforms content from one format into another format. There are filters that evaluate embedded Ruby code (<code>erb</code>, <code>haml</code>), filters that transform from text to HTML (<code>bluecloth</code>, <code>redcloth</code>), filters that ‚Äúclean‚Äù HTML (<code>rubypants</code>), and more.</dd>

    <dt id="glossary-helper">helper</dt>
    <dd>A module that, when included, offers additional functionality such as easy linking to pages, building XML sitemaps or Atom web feeds.</dd>

    <dt id="glossary-identifier">identifier</dt>
    <dd>A string that is used to uniquely identify an <a href="#glossary-item">item</a>. It starts and ends with a slash. It is used to construct <a href="#glossary-path">paths</a> of item <a href="#glossary-representation">representations</a>.</dd>

    <dt id="glossary-item">item</dt>
    <dd>The main piece of unprocessed content in a <a href="#glossary-site">site</a>. This can be a HTML page, a CSS file, a script file, etc. An item can have multiple <a href="#glossary-representation">representations</a>. It is sometimes referred to as a <a href="#glossary-page">page</a> or an <a href="#glossary-asset">asset</a>.</dd>

    <dt id="glossary-layout">layout</dt>
    <dd>An object consisting of content and <a href="#glossary-metadata">metadata</a> that embeds content from <a href="#glossary-item">items</a> or layouts. For example, it can be used to add headers, footers and sidebars to pages.</dd>

    <dt id="glossary-layout-rule">layout rule</dt>
    <dd>A <a href="#glossary-rule">rule</a> that specifies what <a href="#glossary-filter">filter</a> should be used when processing a <a href="#glossary-layout">layout</a>.</dd>

    <dt id="glossary-metadata">metadata</dt>
    <dd>A collection of <a href="#glossary-attribute">attributes</a>, usually stored in a <a href="#glossary-meta-file">meta-file</a>, for an <a href="#glossary-item">item</a> or a <a href="#glossary-layout">layout</a>.</dd>

    <dt id="glossary-meta-file">meta-file</dt>
    <dd>A file containing <a href="#glossary-metadata">metadata</a> about an <a href="#glossary-item">item</a> or a <a href="#glossary-layout">layout</a>. It is usually paired with a <a href="#glossary-content-file">content file</a>. Some <a href="#glossary-data-source">data sources</a> put the metadata and the content in a single file.</dd>

    <dt id="glossary-output-directory">output directory</dt>
    <dd>The directory to which compiled <a href="#glossary-representation">item representations</a> are written.</dd>

    <dt id="glossary-path">path</dt>
    <dd>A string containing the path, relative to the <a href="#glossary-output-directory">output directory</a>, to a compiled <a href="#glossary-representation">item representation</a>.</dd>

    <dt id="glossary-page">page</dt>
    <dd><span class="see">see <a href="#glossary-item">item</a></span></dd>

    <dt id="glossary-partial">partial</dt>
    <dd>A <a href="#glossary-layout">layout</a> that is not used for embedding content, but rather used for being embedded in layouts or <a href="#glossary-item">items</a> using the <code>Rendering</code> helper.</dd>

    <dt id="glossary-rep">rep</dt>
    <dd><span class="see">see <a href="#glossary-representation">representation</a></span></dd>

    <dt id="glossary-representation">representation</dt>
    <dd>A &#8220;version&#8221; of an <a href="#glossary-item">item</a>. For example, an item can have a HTML, an XHTML, a JSON and a YAML representation. A single representation corresponds to one output file (or zero, if the representation does not have a <a href="#glossary-path">path</a>).</dd>

    <dt id="glossary-routing-rule">routing rule</dt>
    <dd>A <a href="#glossary-rule">rule</a> that defines what <a href="#glossary-path">path</a> a <a href="#glossary-representation">representation</a> should get.</dd>

    <dt id="glossary-rule">rule</dt>
    <dd>A bit of code that defines how an <a href="#glossary-item">item</a> should be processed (routed using a <a href="#glossary-routing-rule">routing rule</a> and compiled using a <a href="#glossary-compilation-rule">compilation rule</a>), or which <a href="#glossary-filter">filter</a> should be used for processing a given <a href="#glossary-layout">layout</a> in a <a href="#glossary-layout-rule">layout rule</a>.</dd>

    <dt id="glossary-site">site</dt>
    <dd>A directory containing <a href="#glossary-item">items</a>, <a href="#glossary-layout">layouts</a>, <a href="#glossary-rule">rules</a> and custom code. It can also refer to the compiled site, which can be found in the uncompiled site‚Äôs <a href="#glossary-output-directory">output directory</a>.</dd>
</dl>
</div>
</div>
</div>
<!-- ***** footer ***** -->
<div id="footer">
<p>SeqWare ¬© 2007‚Äì2012 Brian O&#8217;Connor. SeqWare is released under the a <a rel="license" href="http://www.gnu.org/licenses/licenses.html">GNU GPL v3</a>. This site is built using the excellent <a href="http://nanoc.stoneship.org/">nanoc</a> tool and example site along with the <a href="http://www.fonts.info/info/press/free-fonts-for-font-face-embedding.htm">Graublau</a> and <a href="http://scripts.sil.org/Gentium">Gentium</a> fonts.</p>
</div>
</body>
</html>
;T;	I"I<dl class="glossary">
	<dt id="glossary-asset">asset</dt>
	<dd><span class="see">see <a href="#glossary-item">item</a></span></dd>

	<dt id="glossary-attribute">attribute</dt>
	<dd>A key-value pair that contains extra <a href="#glossary-metadata">metadata</a> about an <a href="#glossary-item">item</a> or a <a href="#glossary-layout">layout</a>.</dd>

	<dt id="glossary-compilation">compilation</dt>
	<dd>The act of <a href="#glossary-filter">filtering</a> and <a href="#glossary-layout">laying out</a> all <a href="#glossary-item">items</a> in a <a href="#glossary-site">site</a>, according to <a href="#glossary-routing-rule">routing rules</a>, <a href="#glossary-compilation-rule">compilation rules</a> and <a href="#glossary-layout-rule">layout rules</a>.</dd>

	<dt id="glossary-compilation-rule">compilation rule</dt>
	<dd>A <a href="#glossary-rule">rule</a> that defines how an <a href="#glossary-item">item</a> should be <a href="#glossary-filter">filtered</a> and/or <a href="#glossary-layout">laid out</a>.</dd>

	<dt id="glossary-content-file">content file</dt>
	<dd>A file containing the actual content of an <a href="#glossary-item">item</a> or a <a href="#glossary-layout">layout</a>. Usually, there will also be a <a href="#glossary-meta-file">meta-file</a> containing <a href="#glossary-metadata">metadata</a> about that item or layout, although some <a href="#glossary-data-source">data sources</a> (e.g. <code>filesystem_combined</code>) merge the content file and the meta-file into a single file.</dd>

	<dt id="glossary-data-source">data source</dt>
	<dd>An object that reads data from a given location and turns this data into <a href="#glossary-item">items</a> and/or <a href="#glossary-layout">layouts</a>. By default, data can be read from the filesystem, but data sources for databases and online web services are also possible.</dd>

	<dt id="glossary-filter">filter</dt>
	<dd>An object that transforms content from one format into another format. There are filters that evaluate embedded Ruby code (<code>erb</code>, <code>haml</code>), filters that transform from text to HTML (<code>bluecloth</code>, <code>redcloth</code>), filters that ‚Äúclean‚Äù HTML (<code>rubypants</code>), and more.</dd>

	<dt id="glossary-helper">helper</dt>
	<dd>A module that, when included, offers additional functionality such as easy linking to pages, building XML sitemaps or Atom web feeds.</dd>

	<dt id="glossary-identifier">identifier</dt>
	<dd>A string that is used to uniquely identify an <a href="#glossary-item">item</a>. It starts and ends with a slash. It is used to construct <a href="#glossary-path">paths</a> of item <a href="#glossary-representation">representations</a>.</dd>

	<dt id="glossary-item">item</dt>
	<dd>The main piece of unprocessed content in a <a href="#glossary-site">site</a>. This can be a HTML page, a CSS file, a script file, etc. An item can have multiple <a href="#glossary-representation">representations</a>. It is sometimes referred to as a <a href="#glossary-page">page</a> or an <a href="#glossary-asset">asset</a>.</dd>

	<dt id="glossary-layout">layout</dt>
	<dd>An object consisting of content and <a href="#glossary-metadata">metadata</a> that embeds content from <a href="#glossary-item">items</a> or layouts. For example, it can be used to add headers, footers and sidebars to pages.</dd>

	<dt id="glossary-layout-rule">layout rule</dt>
	<dd>A <a href="#glossary-rule">rule</a> that specifies what <a href="#glossary-filter">filter</a> should be used when processing a <a href="#glossary-layout">layout</a>.</dd>

	<dt id="glossary-metadata">metadata</dt>
	<dd>A collection of <a href="#glossary-attribute">attributes</a>, usually stored in a <a href="#glossary-meta-file">meta-file</a>, for an <a href="#glossary-item">item</a> or a <a href="#glossary-layout">layout</a>.</dd>

	<dt id="glossary-meta-file">meta-file</dt>
	<dd>A file containing <a href="#glossary-metadata">metadata</a> about an <a href="#glossary-item">item</a> or a <a href="#glossary-layout">layout</a>. It is usually paired with a <a href="#glossary-content-file">content file</a>. Some <a href="#glossary-data-source">data sources</a> put the metadata and the content in a single file.</dd>

	<dt id="glossary-output-directory">output directory</dt>
	<dd>The directory to which compiled <a href="#glossary-representation">item representations</a> are written.</dd>

	<dt id="glossary-path">path</dt>
	<dd>A string containing the path, relative to the <a href="#glossary-output-directory">output directory</a>, to a compiled <a href="#glossary-representation">item representation</a>.</dd>

	<dt id="glossary-page">page</dt>
	<dd><span class="see">see <a href="#glossary-item">item</a></span></dd>

	<dt id="glossary-partial">partial</dt>
	<dd>A <a href="#glossary-layout">layout</a> that is not used for embedding content, but rather used for being embedded in layouts or <a href="#glossary-item">items</a> using the <code>Rendering</code> helper.</dd>

	<dt id="glossary-rep">rep</dt>
	<dd><span class="see">see <a href="#glossary-representation">representation</a></span></dd>

	<dt id="glossary-representation">representation</dt>
	<dd>A "version" of an <a href="#glossary-item">item</a>. For example, an item can have a HTML, an XHTML, a JSON and a YAML representation. A single representation corresponds to one output file (or zero, if the representation does not have a <a href="#glossary-path">path</a>).</dd>

	<dt id="glossary-routing-rule">routing rule</dt>
	<dd>A <a href="#glossary-rule">rule</a> that defines what <a href="#glossary-path">path</a> a <a href="#glossary-representation">representation</a> should get.</dd>

	<dt id="glossary-rule">rule</dt>
	<dd>A bit of code that defines how an <a href="#glossary-item">item</a> should be processed (routed using a <a href="#glossary-routing-rule">routing rule</a> and compiled using a <a href="#glossary-compilation-rule">compilation rule</a>), or which <a href="#glossary-filter">filter</a> should be used for processing a given <a href="#glossary-layout">layout</a> in a <a href="#glossary-layout-rule">layout rule</a>.</dd>

	<dt id="glossary-site">site</dt>
	<dd>A directory containing <a href="#glossary-item">items</a>, <a href='#glossary-layout'>layouts</a>, <a href="#glossary-rule">rules</a> and custom code. It can also refer to the compiled site, which can be found in the uncompiled site‚Äôs <a href="#glossary-output-directory">output directory</a>.</dd>
</dl>;T;
I"œ<dl class="glossary">
<dt id="glossary-asset">asset</dt>
    <dd><span class="see">see <a href="#glossary-item">item</a></span></dd>

    <dt id="glossary-attribute">attribute</dt>
    <dd>A key-value pair that contains extra <a href="#glossary-metadata">metadata</a> about an <a href="#glossary-item">item</a> or a <a href="#glossary-layout">layout</a>.</dd>

    <dt id="glossary-compilation">compilation</dt>
    <dd>The act of <a href="#glossary-filter">filtering</a> and <a href="#glossary-layout">laying out</a> all <a href="#glossary-item">items</a> in a <a href="#glossary-site">site</a>, according to <a href="#glossary-routing-rule">routing rules</a>, <a href="#glossary-compilation-rule">compilation rules</a> and <a href="#glossary-layout-rule">layout rules</a>.</dd>

    <dt id="glossary-compilation-rule">compilation rule</dt>
    <dd>A <a href="#glossary-rule">rule</a> that defines how an <a href="#glossary-item">item</a> should be <a href="#glossary-filter">filtered</a> and/or <a href="#glossary-layout">laid out</a>.</dd>

    <dt id="glossary-content-file">content file</dt>
    <dd>A file containing the actual content of an <a href="#glossary-item">item</a> or a <a href="#glossary-layout">layout</a>. Usually, there will also be a <a href="#glossary-meta-file">meta-file</a> containing <a href="#glossary-metadata">metadata</a> about that item or layout, although some <a href="#glossary-data-source">data sources</a> (e.g. <code>filesystem_combined</code>) merge the content file and the meta-file into a single file.</dd>

    <dt id="glossary-data-source">data source</dt>
    <dd>An object that reads data from a given location and turns this data into <a href="#glossary-item">items</a> and/or <a href="#glossary-layout">layouts</a>. By default, data can be read from the filesystem, but data sources for databases and online web services are also possible.</dd>

    <dt id="glossary-filter">filter</dt>
    <dd>An object that transforms content from one format into another format. There are filters that evaluate embedded Ruby code (<code>erb</code>, <code>haml</code>), filters that transform from text to HTML (<code>bluecloth</code>, <code>redcloth</code>), filters that ‚Äúclean‚Äù HTML (<code>rubypants</code>), and more.</dd>

    <dt id="glossary-helper">helper</dt>
    <dd>A module that, when included, offers additional functionality such as easy linking to pages, building XML sitemaps or Atom web feeds.</dd>

    <dt id="glossary-identifier">identifier</dt>
    <dd>A string that is used to uniquely identify an <a href="#glossary-item">item</a>. It starts and ends with a slash. It is used to construct <a href="#glossary-path">paths</a> of item <a href="#glossary-representation">representations</a>.</dd>

    <dt id="glossary-item">item</dt>
    <dd>The main piece of unprocessed content in a <a href="#glossary-site">site</a>. This can be a HTML page, a CSS file, a script file, etc. An item can have multiple <a href="#glossary-representation">representations</a>. It is sometimes referred to as a <a href="#glossary-page">page</a> or an <a href="#glossary-asset">asset</a>.</dd>

    <dt id="glossary-layout">layout</dt>
    <dd>An object consisting of content and <a href="#glossary-metadata">metadata</a> that embeds content from <a href="#glossary-item">items</a> or layouts. For example, it can be used to add headers, footers and sidebars to pages.</dd>

    <dt id="glossary-layout-rule">layout rule</dt>
    <dd>A <a href="#glossary-rule">rule</a> that specifies what <a href="#glossary-filter">filter</a> should be used when processing a <a href="#glossary-layout">layout</a>.</dd>

    <dt id="glossary-metadata">metadata</dt>
    <dd>A collection of <a href="#glossary-attribute">attributes</a>, usually stored in a <a href="#glossary-meta-file">meta-file</a>, for an <a href="#glossary-item">item</a> or a <a href="#glossary-layout">layout</a>.</dd>

    <dt id="glossary-meta-file">meta-file</dt>
    <dd>A file containing <a href="#glossary-metadata">metadata</a> about an <a href="#glossary-item">item</a> or a <a href="#glossary-layout">layout</a>. It is usually paired with a <a href="#glossary-content-file">content file</a>. Some <a href="#glossary-data-source">data sources</a> put the metadata and the content in a single file.</dd>

    <dt id="glossary-output-directory">output directory</dt>
    <dd>The directory to which compiled <a href="#glossary-representation">item representations</a> are written.</dd>

    <dt id="glossary-path">path</dt>
    <dd>A string containing the path, relative to the <a href="#glossary-output-directory">output directory</a>, to a compiled <a href="#glossary-representation">item representation</a>.</dd>

    <dt id="glossary-page">page</dt>
    <dd><span class="see">see <a href="#glossary-item">item</a></span></dd>

    <dt id="glossary-partial">partial</dt>
    <dd>A <a href="#glossary-layout">layout</a> that is not used for embedding content, but rather used for being embedded in layouts or <a href="#glossary-item">items</a> using the <code>Rendering</code> helper.</dd>

    <dt id="glossary-rep">rep</dt>
    <dd><span class="see">see <a href="#glossary-representation">representation</a></span></dd>

    <dt id="glossary-representation">representation</dt>
    <dd>A "version" of an <a href="#glossary-item">item</a>. For example, an item can have a HTML, an XHTML, a JSON and a YAML representation. A single representation corresponds to one output file (or zero, if the representation does not have a <a href="#glossary-path">path</a>).</dd>

    <dt id="glossary-routing-rule">routing rule</dt>
    <dd>A <a href="#glossary-rule">rule</a> that defines what <a href="#glossary-path">path</a> a <a href="#glossary-representation">representation</a> should get.</dd>

    <dt id="glossary-rule">rule</dt>
    <dd>A bit of code that defines how an <a href="#glossary-item">item</a> should be processed (routed using a <a href="#glossary-routing-rule">routing rule</a> and compiled using a <a href="#glossary-compilation-rule">compilation rule</a>), or which <a href="#glossary-filter">filter</a> should be used for processing a given <a href="#glossary-layout">layout</a> in a <a href="#glossary-layout-rule">layout rule</a>.</dd>

    <dt id="glossary-site">site</dt>
    <dd>A directory containing <a href="#glossary-item">items</a>, <a href="#glossary-layout">layouts</a>, <a href="#glossary-rule">rules</a> and custom code. It can also refer to the compiled site, which can be found in the uncompiled site‚Äôs <a href="#glossary-output-directory">output directory</a>.</dd>
</dl>;T;I"’<dl class="glossary">
    <dt id="glossary-asset">asset</dt>
    <dd><span class="see">see <a href="#glossary-item">item</a></span></dd>

    <dt id="glossary-attribute">attribute</dt>
    <dd>A key-value pair that contains extra <a href="#glossary-metadata">metadata</a> about an <a href="#glossary-item">item</a> or a <a href="#glossary-layout">layout</a>.</dd>

    <dt id="glossary-compilation">compilation</dt>
    <dd>The act of <a href="#glossary-filter">filtering</a> and <a href="#glossary-layout">laying out</a> all <a href="#glossary-item">items</a> in a <a href="#glossary-site">site</a>, according to <a href="#glossary-routing-rule">routing rules</a>, <a href="#glossary-compilation-rule">compilation rules</a> and <a href="#glossary-layout-rule">layout rules</a>.</dd>

    <dt id="glossary-compilation-rule">compilation rule</dt>
    <dd>A <a href="#glossary-rule">rule</a> that defines how an <a href="#glossary-item">item</a> should be <a href="#glossary-filter">filtered</a> and/or <a href="#glossary-layout">laid out</a>.</dd>

    <dt id="glossary-content-file">content file</dt>
    <dd>A file containing the actual content of an <a href="#glossary-item">item</a> or a <a href="#glossary-layout">layout</a>. Usually, there will also be a <a href="#glossary-meta-file">meta-file</a> containing <a href="#glossary-metadata">metadata</a> about that item or layout, although some <a href="#glossary-data-source">data sources</a> (e.g. <code>filesystem_combined</code>) merge the content file and the meta-file into a single file.</dd>

    <dt id="glossary-data-source">data source</dt>
    <dd>An object that reads data from a given location and turns this data into <a href="#glossary-item">items</a> and/or <a href="#glossary-layout">layouts</a>. By default, data can be read from the filesystem, but data sources for databases and online web services are also possible.</dd>

    <dt id="glossary-filter">filter</dt>
    <dd>An object that transforms content from one format into another format. There are filters that evaluate embedded Ruby code (<code>erb</code>, <code>haml</code>), filters that transform from text to HTML (<code>bluecloth</code>, <code>redcloth</code>), filters that ‚Äúclean‚Äù HTML (<code>rubypants</code>), and more.</dd>

    <dt id="glossary-helper">helper</dt>
    <dd>A module that, when included, offers additional functionality such as easy linking to pages, building XML sitemaps or Atom web feeds.</dd>

    <dt id="glossary-identifier">identifier</dt>
    <dd>A string that is used to uniquely identify an <a href="#glossary-item">item</a>. It starts and ends with a slash. It is used to construct <a href="#glossary-path">paths</a> of item <a href="#glossary-representation">representations</a>.</dd>

    <dt id="glossary-item">item</dt>
    <dd>The main piece of unprocessed content in a <a href="#glossary-site">site</a>. This can be a HTML page, a CSS file, a script file, etc. An item can have multiple <a href="#glossary-representation">representations</a>. It is sometimes referred to as a <a href="#glossary-page">page</a> or an <a href="#glossary-asset">asset</a>.</dd>

    <dt id="glossary-layout">layout</dt>
    <dd>An object consisting of content and <a href="#glossary-metadata">metadata</a> that embeds content from <a href="#glossary-item">items</a> or layouts. For example, it can be used to add headers, footers and sidebars to pages.</dd>

    <dt id="glossary-layout-rule">layout rule</dt>
    <dd>A <a href="#glossary-rule">rule</a> that specifies what <a href="#glossary-filter">filter</a> should be used when processing a <a href="#glossary-layout">layout</a>.</dd>

    <dt id="glossary-metadata">metadata</dt>
    <dd>A collection of <a href="#glossary-attribute">attributes</a>, usually stored in a <a href="#glossary-meta-file">meta-file</a>, for an <a href="#glossary-item">item</a> or a <a href="#glossary-layout">layout</a>.</dd>

    <dt id="glossary-meta-file">meta-file</dt>
    <dd>A file containing <a href="#glossary-metadata">metadata</a> about an <a href="#glossary-item">item</a> or a <a href="#glossary-layout">layout</a>. It is usually paired with a <a href="#glossary-content-file">content file</a>. Some <a href="#glossary-data-source">data sources</a> put the metadata and the content in a single file.</dd>

    <dt id="glossary-output-directory">output directory</dt>
    <dd>The directory to which compiled <a href="#glossary-representation">item representations</a> are written.</dd>

    <dt id="glossary-path">path</dt>
    <dd>A string containing the path, relative to the <a href="#glossary-output-directory">output directory</a>, to a compiled <a href="#glossary-representation">item representation</a>.</dd>

    <dt id="glossary-page">page</dt>
    <dd><span class="see">see <a href="#glossary-item">item</a></span></dd>

    <dt id="glossary-partial">partial</dt>
    <dd>A <a href="#glossary-layout">layout</a> that is not used for embedding content, but rather used for being embedded in layouts or <a href="#glossary-item">items</a> using the <code>Rendering</code> helper.</dd>

    <dt id="glossary-rep">rep</dt>
    <dd><span class="see">see <a href="#glossary-representation">representation</a></span></dd>

    <dt id="glossary-representation">representation</dt>
    <dd>A "version" of an <a href="#glossary-item">item</a>. For example, an item can have a HTML, an XHTML, a JSON and a YAML representation. A single representation corresponds to one output file (or zero, if the representation does not have a <a href="#glossary-path">path</a>).</dd>

    <dt id="glossary-routing-rule">routing rule</dt>
    <dd>A <a href="#glossary-rule">rule</a> that defines what <a href="#glossary-path">path</a> a <a href="#glossary-representation">representation</a> should get.</dd>

    <dt id="glossary-rule">rule</dt>
    <dd>A bit of code that defines how an <a href="#glossary-item">item</a> should be processed (routed using a <a href="#glossary-routing-rule">routing rule</a> and compiled using a <a href="#glossary-compilation-rule">compilation rule</a>), or which <a href="#glossary-filter">filter</a> should be used for processing a given <a href="#glossary-layout">layout</a> in a <a href="#glossary-layout-rule">layout rule</a>.</dd>

    <dt id="glossary-site">site</dt>
    <dd>A directory containing <a href="#glossary-item">items</a>, <a href='#glossary-layout'>layouts</a>, <a href="#glossary-rule">rules</a> and custom code. It can also refer to the compiled site, which can be found in the uncompiled site‚Äôs <a href="#glossary-output-directory">output directory</a>.</dd>
</dl>

;T;@+"/docs/5-advanced-concepts/{;{
;I"ÓH<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<title>SeqWare ‚Ä∫ Advanced Concepts</title>
<meta content="nanoc 3.4.0" name="generator">
<link href="../../assets/style-v17.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://feeds.feedburner.com/seqware" rel="alternate" title="The SeqWare Blog" type="application/atom+xml">
<script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-34523087-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script>
</head>
<body>
<div class="wrapper">
<!-- ***** navigation ***** -->
<div class="nav">
<ol>
<li><a href="../../"><span>Home</span></a></li>
<li><a href="../../blog/"><span>News</span></a></li>
<li><a href="../"><span>Documentation</span></a></li>
<li><a href="../../community/"><span>Community</span></a></li>
<li><a href="../../partners/"><span>Partners</span></a></li>
<li><a href="../../about/"><span>About</span></a></li>
</ol>
</div>
<!-- ***** sidebar ***** -->
<div class="side">
<ol>
<li><a href="../1-introduction/"><span>Introduction to nanoc</span></a></li>
<li><a href="../2-installation/"><span>Installation</span></a></li>
<li><a href="../3-getting-started/"><span>Getting Started</span></a></li>
<li><a href="../4-basic-concepts/"><span>Basic Concepts</span></a></li>
<li>
<span class="active" title="You're here."><span>Advanced Concepts</span></span><ol class="toc">
<li><a href="#writing-helpers">Writing Helpers</a></li>
<li><a href="#writing-filters">Writing Filters</a></li>
<li><a href="#writing-commands">Writing Commands</a></li>
<li><a href="#writing-data-sources">Writing Data Sources</a></li>
</ol>
</li>
<li><a href="../6-guides/"><span>Guides</span></a></li>
<li><a href="../7-glossary/"><span>Glossary</span></a></li>
<li><a href="../8-faq/"><span>Frequently Asked Questions</span></a></li>
<li><a href="../api/3.4/"><span>API documentation</span></a></li>
</ol>
</div>
<!-- ***** body ***** -->
<div class="body">
<div class="article">
<div class="header">
<h1>Advanced Concepts</h1>
</div>
<div class="section" id="writing-helpers">
<h2>Writing Helpers</h2>

<p>Helpers are modules that can be <code>include</code>d to provide additional functionality. The functions in these modules will then be callable from items and layouts. Such helpers need to be located in the <code>lib/</code> directory; often, it is a good idea to place them in <code>lib/helpers/</code>.</p>

<p>For example, the file <code>lib/helpers/random_text.rb</code> could contain this:</p>

<pre title="Defining the RandomTextHelper helper"><code class="language-ruby"><span class="keyword">module</span> <span class="class">RandomTextHelper</span>
  <span class="keyword">def</span> <span class="function">random_text</span>
    <span class="string"><span class="delimiter">"</span><span class="content">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</span><span class="delimiter">"</span></span>
  <span class="keyword">end</span>
<span class="keyword">end</span></code></pre>

<p>To allow the <code>#random_text</code> method to be called, it can be <code>include</code>d. This is often done in <code>lib/helpers_.rb</code> (the underscore is necessary to ensure that the file is loaded <em>after</em> the helpers are loaded, which is necessary because files in <code>lib/</code> are loaded in alphabetical order). For example:</p>

<pre title="Loading the RandomTextHelper helper"><code class="language-ruby">include <span class="constant">RandomTextHelper</span></code></pre>

<p>Now, in an item or layout, the methods provided by this helper can be used. For example, the default layout, assuming it is filtered using ERB, can call the method like this:</p>

<pre title="Calling the random_text method after having loaded the RandomTextHelper helper"><code class="language-html"><span class="tag">&lt;p&gt;</span><span class="error">&lt;</span>%= random_text %<span class="error">&gt;</span><span class="tag">&lt;/p&gt;</span></code></pre>

</div>
<div class="section" id="writing-filters">
<h2>Writing Filters</h2>

<p>Filters are classes that inherit from <code>Nanoc::Filter</code>. Writing custom filters is done by subclassing said superclass and overriding the <code>#run</code> method, which is responsible for transforming the content.</p>

<p>A filter has an identifier, which is an unique name that is used in calls to <code>#filter</code> in a compilation rule. A filter identifier is set using <code>#identifier</code>, like this:</p>

<pre><code class="language-ruby"><span class="keyword">class</span> <span class="class">CensorFilter</span> &lt; <span class="constant">Nanoc</span>::<span class="constant">Filter</span>
  identifier <span class="symbol">:censor</span>

  <span class="comment"># (other code here)</span>
<span class="keyword">end</span></code></pre>

<p>By default, filters will take textual content as input, and output text as well. Filters can be applied to binary content as well, and they can even tranform text into binary content and vice versa. To identify the type of the input and the output, declare the type in the class, like this:</p>

<pre><code class="language-ruby"><span class="keyword">class</span> <span class="class">SampleTextualFilter</span> &lt; <span class="constant">Nanoc</span>::<span class="constant">Filter</span>
  identifier <span class="symbol">:sample_textual</span>
  type <span class="symbol">:text</span>
  <span class="comment"># also possible:</span>
  <span class="comment">#   type :text =&gt; :text</span>

  <span class="comment"># (other code here)</span>
<span class="keyword">end</span>

<span class="keyword">class</span> <span class="class">SampleBinaryFilter</span> &lt; <span class="constant">Nanoc</span>::<span class="constant">Filter</span>
  identifier <span class="symbol">:sample_binary</span>
  type <span class="symbol">:binary</span>
  <span class="comment"># also possible:</span>
  <span class="comment">#   type :binary =&gt; :binary</span>

  <span class="comment"># (other code here)</span>
<span class="keyword">end</span>

<span class="keyword">class</span> <span class="class">SampleTextualToBinaryFilter</span> &lt; <span class="constant">Nanoc</span>::<span class="constant">Filter</span>
  identifier <span class="symbol">:sample_textual_to_binary</span>
  type <span class="symbol">:text</span> =&gt; <span class="symbol">:binary</span>

  <span class="comment"># (other code here)</span>
<span class="keyword">end</span></code></pre>

<p>The <code>#run</code> method looks a bit different for filters that apply to textual items than filters that apply to binary items. Filters that apply to textual items have a <code>content</code> argument; a string that contains the content to filter. Filters that apply to binary items, on the other hand, have a <code>filename</code> argument instead, containing the location of the file to be filtered. For example:</p>

<pre><code class="language-ruby"><span class="keyword">class</span> <span class="class">SampleTextualFilter</span> &lt; <span class="constant">Nanoc</span>::<span class="constant">Filter</span>
  identifier <span class="symbol">:sample_textual</span>
  type <span class="symbol">:text</span>
  <span class="keyword">def</span> <span class="function">run</span>(content, params={})
    <span class="comment"># (filter code here)</span>
  <span class="keyword">end</span>
<span class="keyword">end</span>

<span class="keyword">class</span> <span class="class">SampleBinaryFilter</span> &lt; <span class="constant">Nanoc</span>::<span class="constant">Filter</span>
  identifier <span class="symbol">:sample_binary</span>
  type <span class="symbol">:binary</span>
  <span class="keyword">def</span> <span class="function">run</span>(filename, params={})
    <span class="comment"># (filter code here)</span>
  <span class="keyword">end</span>
<span class="keyword">end</span></code></pre>

<p>Filters that output textual content should return the filtered content at the end of the method. Filters that output binary content should instead ensure that the content is written to the location returned by the <code>#output_filename</code> method.</p>

<p>Filters have access to <code>@item</code>, <code>@item_rep</code>, <code>@items</code>, <code>@layouts</code>, <code>@config</code> and <code>@site</code>, just like during the compilation process.</p>

<p>Here are three complete examples of filters that transform textual and binary content:</p>

<pre><code class="language-ruby"><span class="keyword">class</span> <span class="class">CensorFilter</span> &lt; <span class="constant">Nanoc</span>::<span class="constant">Filter</span>
  identifier <span class="symbol">:censor</span>

  <span class="keyword">def</span> <span class="function">run</span>(content, params={})
    content.gsub(<span class="string"><span class="delimiter">'</span><span class="content">nanoc sucks</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">nanoc rocks</span><span class="delimiter">'</span></span>)
  <span class="keyword">end</span>
<span class="keyword">end</span>

<span class="keyword">class</span> <span class="class">ResizeFilter</span> &lt; <span class="constant">Nanoc</span>::<span class="constant">Filter</span>
  identifier <span class="symbol">:resize</span>
  type <span class="symbol">:binary</span>

  <span class="keyword">def</span> <span class="function">run</span>(filename, params={})
    system(
      <span class="string"><span class="delimiter">'</span><span class="content">sips</span><span class="delimiter">'</span></span>,
      <span class="string"><span class="delimiter">'</span><span class="content">--resampleWidth</span><span class="delimiter">'</span></span>, params[<span class="symbol">:width</span>],
      <span class="string"><span class="delimiter">'</span><span class="content">--out</span><span class="delimiter">'</span></span>, output_filename,
      filename
    )
  <span class="keyword">end</span>
<span class="keyword">end</span>

<span class="keyword">class</span> <span class="class">SynthesiseAudio</span> &lt; <span class="constant">Nanoc</span>::<span class="constant">Filter</span> 
  identifier <span class="symbol">:synthesise_audio</span> 
  type <span class="symbol">:text</span> =&gt; <span class="symbol">:binary</span>

  <span class="keyword">def</span> <span class="function">run</span>(content, params={}) 
    system(<span class="string"><span class="delimiter">'</span><span class="content">say</span><span class="delimiter">'</span></span>, content, <span class="string"><span class="delimiter">'</span><span class="content">-o</span><span class="delimiter">'</span></span>, output_filename)
  <span class="keyword">end</span> 
<span class="keyword">end</span></code></pre>

<p>When writing filters that apply to binary data, make sure that you check the exit code and any errors generated by the sub-process that you are invoking (if any). If the sub-process exists with an error, you should raise an error in the filter.</p>

</div>
<div class="section" id="writing-commands">
<h2>Writing Commands</h2>

<p>As of nanoc 3.2, it is possible to write custom commands. Create a <code>commands/</code> directory in your site directory and drop your commands there. A command is defined using a DSL and looks something like this:</p>

<pre><code class="language-ruby">usage       <span class="string"><span class="delimiter">'</span><span class="content">dostuff [options]</span><span class="delimiter">'</span></span>
aliases     <span class="symbol">:ds</span>, <span class="symbol">:stuff</span>
summary     <span class="string"><span class="delimiter">'</span><span class="content">does stuff</span><span class="delimiter">'</span></span>
description <span class="string"><span class="delimiter">'</span><span class="content">This command does a lot of stuff. I really mean a lot.</span><span class="delimiter">'</span></span>

flag   <span class="symbol">:h</span>, <span class="symbol">:help</span>,  <span class="string"><span class="delimiter">'</span><span class="content">show help for this command</span><span class="delimiter">'</span></span> <span class="keyword">do</span> |value, cmd|
  puts cmd.help
  exit <span class="integer">0</span>
<span class="keyword">end</span>
flag   <span class="symbol">:m</span>, <span class="symbol">:more</span>,  <span class="string"><span class="delimiter">'</span><span class="content">do even more stuff</span><span class="delimiter">'</span></span>
option <span class="symbol">:s</span>, <span class="symbol">:stuff</span>, <span class="string"><span class="delimiter">'</span><span class="content">specify stuff to do</span><span class="delimiter">'</span></span>, <span class="symbol">:argument</span> =&gt; <span class="symbol">:optional</span>

run <span class="keyword">do</span> |opts, args, cmd|
  stuff = opts[<span class="symbol">:stuff</span>] || <span class="string"><span class="delimiter">'</span><span class="content">generic stuff</span><span class="delimiter">'</span></span>
  puts <span class="string"><span class="delimiter">"</span><span class="content">Doing </span><span class="inline"><span class="inline-delimiter">#{</span>stuff<span class="inline-delimiter">}</span></span><span class="content">!</span><span class="delimiter">"</span></span>

  <span class="keyword">if</span> opts[<span class="symbol">:more</span>]
    puts <span class="string"><span class="delimiter">'</span><span class="content">Doing it even more!</span><span class="delimiter">'</span></span>
  <span class="keyword">end</span>
<span class="keyword">end</span></code></pre>

<p>The name of the command is derived from the filename. For example, a command defined in <code>commands/dostuff.rb</code> will have the name <code>dostuff</code> and to invoke it you‚Äôd type ‚Äúnanoc dostuff‚Äù. You can have nested commands by defining subcommands in subdirectories. For example, the command at <code>commands/foo/bar.rb</code> will be a subcommand of the command at <code>commands/foo.rb</code>.</p>

<p>For details on how to create such commands, check out the documentation for <a href="http://rubydoc.info/gems/cri/2.0.0/file/README.md">Cri</a>, the framework used by nanoc for generating commands.</p>

</div>
<div class="section" id="writing-data-sources">
<h2>Writing Data Sources</h2>

<p>Data sources are responsible for loading and storing a site‚Äôs data: items, layouts and code snippets. They inherit from <code>Nanoc::DataSource</code>. A very useful reference is the <a href="../api/3.3/Nanoc/DataSource.html"><code>Nanoc::DataSource</code> source code documentation</a>.</p>

<p>Each data source has an identifier. This is a unique name that is used in a site‚Äôs ‚Äôs configuration file to specify which data source should be used to fetch data. It is specified like this:</p>

<pre><code class="language-ruby"><span class="keyword">class</span> <span class="class">SampleDataSource</span> &lt; <span class="constant">Nanoc</span>::<span class="constant">DataSource</span>
  identifier <span class="symbol">:sample</span>
  <span class="comment"># (other code here)</span>
<span class="keyword">end</span></code></pre>

<p>All methods in the data source have access to the <code>@site</code> object, which represents the site. One useful thing that can be done with this is request the configuration hash, using <code>@site.config</code>.</p>

<p>There are two methods you may want to implement first: <code>#up</code> and <code>#down</code>. <code>#up</code> is executed when the data source is loaded. For example, this would be the ideal place to establish a connection to the database. <code>#down</code> is executed when the data source is unloaded, so this is the ideal place to undo what <code>#up</code> did. You don‚Äôt need to implement <code>#up</code> or <code>#down</code> if you don‚Äôt want to.</p>

<p>The <code>#setup</code> method is used to create the initial site structure. For example, a database data source could create the necessary tables here. This method is required to be implemented.</p>

<p>You may also want to implement the optional <code>#update</code> method, which is used by the <code>update</code> command to update the data source to a newer version. This is very useful if the data source changes the way data is stored.</p>

<p>The two main methods in a data source are <code>#items</code> and <code>#layouts</code>. These load items (<a href="../api/3.3/Nanoc/Item.html"><code>Nanoc::Item</code></a>) and layouts (<a href="../api/3.3/Nanoc/Layout.html"><code>Nanoc::Layout</code></a>) respectively. Implementing these methods is optional, so if you e.g. have a data source that only returns items, there‚Äôs no need to implement <code>#layouts</code>.</p>

<p>If your data source can create items and/or layouts, then <code>#create_item</code> and <code>#create_layout</code> are methods you will want to implement. These will be used by the <code>create_site</code>, <code>create_item</code> and <code>create_layout</code> commands.</p>

<p>If all this sounds a bit vague, check out the <a href="../api/3.3/Nanoc/DataSource.html">documentation for <code>Nanoc::DataSource</code></a>. You may also want to take a look at the code for some of the data sources; the code is well-documented and should help you to get started quickly.</p>
</div>
</div>
</div>
</div>
<!-- ***** footer ***** -->
<div id="footer">
<p>SeqWare ¬© 2007‚Äì2012 Brian O&#8217;Connor. SeqWare is released under the a <a rel="license" href="http://www.gnu.org/licenses/licenses.html">GNU GPL v3</a>. This site is built using the excellent <a href="http://nanoc.stoneship.org/">nanoc</a> tool and example site along with the <a href="http://www.fonts.info/info/press/free-fonts-for-font-face-embedding.htm">Graublau</a> and <a href="http://scripts.sil.org/Gentium">Gentium</a> fonts.</p>
</div>
</body>
</html>
;T;	I"
#Writing Helpers
---------------

Helpers are modules that can be `include`d to provide additional functionality. The functions in these modules will then be callable from items and layouts. Such helpers need to be located in the `lib/` directory; often, it is a good idea to place them in `lib/helpers/`.

For example, the file `lib/helpers/random_text.rb` could contain this:

<pre title="Defining the RandomTextHelper helper"><code class="language-ruby">module RandomTextHelper
  def random_text
    "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."
  end
end
</code></pre>

To allow the `#random_text` method to be called, it can be `include`d. This is often done in `lib/helpers_.rb` (the underscore is necessary to ensure that the file is loaded _after_ the helpers are loaded, which is necessary because files in `lib/` are loaded in alphabetical order). For example:

<pre title="Loading the RandomTextHelper helper"><code class="language-ruby">include RandomTextHelper
</code></pre>

Now, in an item or layout, the methods provided by this helper can be used. For example, the default layout, assuming it is filtered using ERB, can call the method like this:

<pre title="Calling the random_text method after having loaded the RandomTextHelper helper"><code class="language-html">&lt;p>&lt;%= random_text %>&lt;/p>
</code></pre>

Writing Filters
---------------

Filters are classes that inherit from `Nanoc::Filter`. Writing custom filters is done by subclassing said superclass and overriding the `#run` method, which is responsible for transforming the content.

A filter has an identifier, which is an unique name that is used in calls to `#filter` in a compilation rule. A filter identifier is set using `#identifier`, like this:

<pre><code class="language-ruby">class CensorFilter &lt; Nanoc::Filter
  identifier :censor

  # (other code here)
end
</code></pre>

By default, filters will take textual content as input, and output text as well. Filters can be applied to binary content as well, and they can even tranform text into binary content and vice versa. To identify the type of the input and the output, declare the type in the class, like this:

<pre><code class="language-ruby">class SampleTextualFilter &lt; Nanoc::Filter
  identifier :sample_textual
  type :text
  # also possible:
  #   type :text => :text

  # (other code here)
end

class SampleBinaryFilter &lt; Nanoc::Filter
  identifier :sample_binary
  type :binary
  # also possible:
  #   type :binary => :binary

  # (other code here)
end

class SampleTextualToBinaryFilter &lt; Nanoc::Filter
  identifier :sample_textual_to_binary
  type :text => :binary

  # (other code here)
end
</code></pre>

The `#run` method looks a bit different for filters that apply to textual items than filters that apply to binary items. Filters that apply to textual items have a `content` argument; a string that contains the content to filter. Filters that apply to binary items, on the other hand, have a `filename` argument instead, containing the location of the file to be filtered. For example:

<pre><code class="language-ruby">class SampleTextualFilter &lt; Nanoc::Filter
  identifier :sample_textual
  type :text
  def run(content, params={})
    # (filter code here)
  end
end

class SampleBinaryFilter &lt; Nanoc::Filter
  identifier :sample_binary
  type :binary
  def run(filename, params={})
    # (filter code here)
  end
end
</code></pre>

Filters that output textual content should return the filtered content at the end of the method. Filters that output binary content should instead ensure that the content is written to the location returned by the `#output_filename` method.

Filters have access to `@item`, `@item_rep`, `@items`, `@layouts`, `@config` and `@site`, just like during the compilation process.

Here are three complete examples of filters that transform textual and binary content:

<pre><code class="language-ruby">class CensorFilter &lt; Nanoc::Filter
  identifier :censor

  def run(content, params={})
    content.gsub('nanoc sucks', 'nanoc rocks')
  end
end

class ResizeFilter &lt; Nanoc::Filter
  identifier :resize
  type :binary

  def run(filename, params={})
    system(
      'sips',
      '--resampleWidth', params[:width],
      '--out', output_filename,
      filename
    )
  end
end

class SynthesiseAudio &lt; Nanoc::Filter 
  identifier :synthesise_audio 
  type :text => :binary

  def run(content, params={}) 
    system('say', content, '-o', output_filename)
  end 
end
</code></pre>

When writing filters that apply to binary data, make sure that you check the exit code and any errors generated by the sub-process that you are invoking (if any). If the sub-process exists with an error, you should raise an error in the filter.

Writing Commands
----------------

As of nanoc 3.2, it is possible to write custom commands. Create a `commands/` directory in your site directory and drop your commands there. A command is defined using a DSL and looks something like this:

	#!ruby
	usage       'dostuff [options]'
	aliases     :ds, :stuff
	summary     'does stuff'
	description 'This command does a lot of stuff. I really mean a lot.'
    
	flag   :h, :help,  'show help for this command' do |value, cmd|
	  puts cmd.help
	  exit 0
	end
	flag   :m, :more,  'do even more stuff'
	option :s, :stuff, 'specify stuff to do', :argument => :optional
    
	run do |opts, args, cmd|
	  stuff = opts[:stuff] || 'generic stuff'
	  puts "Doing #{stuff}!"
    
	  if opts[:more]
	    puts 'Doing it even more!'
	  end
	end

The name of the command is derived from the filename. For example, a command defined in `commands/dostuff.rb` will have the name `dostuff` and to invoke it you‚Äôd type ‚Äúnanoc dostuff‚Äù. You can have nested commands by defining subcommands in subdirectories. For example, the command at `commands/foo/bar.rb` will be a subcommand of the command at `commands/foo.rb`.

For details on how to create such commands, check out the documentation for [Cri](http://rubydoc.info/gems/cri/2.0.0/file/README.md), the framework used by nanoc for generating commands.

Writing Data Sources
--------------------

Data sources are responsible for loading and storing a site‚Äôs data: items, layouts and code snippets. They inherit from `Nanoc::DataSource`. A very useful reference is the [`Nanoc::DataSource` source code documentation](/docs/api/3.3/Nanoc/DataSource.html).

Each data source has an identifier. This is a unique name that is used in a site‚Äôs ‚Äôs configuration file to specify which data source should be used to fetch data. It is specified like this:

<pre><code class="language-ruby">class SampleDataSource &lt; Nanoc::DataSource
  identifier :sample
  # (other code here)
end
</code></pre>

All methods in the data source have access to the `@site` object, which represents the site. One useful thing that can be done with this is request the configuration hash, using `@site.config`.

There are two methods you may want to implement first: `#up` and `#down`. `#up` is executed when the data source is loaded. For example, this would be the ideal place to establish a connection to the database. `#down` is executed when the data source is unloaded, so this is the ideal place to undo what `#up` did. You don‚Äôt need to implement `#up` or `#down` if you don‚Äôt want to.

The `#setup` method is used to create the initial site structure. For example, a database data source could create the necessary tables here. This method is required to be implemented.

You may also want to implement the optional `#update` method, which is used by the `update` command to update the data source to a newer version. This is very useful if the data source changes the way data is stored.

The two main methods in a data source are `#items` and `#layouts`. These load items ([`Nanoc::Item`](/docs/api/3.3/Nanoc/Item.html)) and layouts ([`Nanoc::Layout`](/docs/api/3.3/Nanoc/Layout.html)) respectively. Implementing these methods is optional, so if you e.g. have a data source that only returns items, there‚Äôs no need to implement `#layouts`.

If your data source can create items and/or layouts, then `#create_item` and `#create_layout` are methods you will want to implement. These will be used by the `create_site`, `create_item` and `create_layout` commands.

If all this sounds a bit vague, check out the [documentation for `Nanoc::DataSource`](/docs/api/3.3/Nanoc/DataSource.html). You may also want to take a look at the code for some of the data sources; the code is well-documented and should help you to get started quickly.;T;
I"Ë&<div class="section" id="writing-helpers">
<h2>Writing Helpers</h2>

<p>Helpers are modules that can be <code>include</code>d to provide additional functionality. The functions in these modules will then be callable from items and layouts. Such helpers need to be located in the <code>lib/</code> directory; often, it is a good idea to place them in <code>lib/helpers/</code>.</p>

<p>For example, the file <code>lib/helpers/random_text.rb</code> could contain this:</p>

<pre title="Defining the RandomTextHelper helper"><code class="language-ruby">module RandomTextHelper
  def random_text
    "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."
  end
end
</code></pre>

<p>To allow the <code>#random_text</code> method to be called, it can be <code>include</code>d. This is often done in <code>lib/helpers_.rb</code> (the underscore is necessary to ensure that the file is loaded <em>after</em> the helpers are loaded, which is necessary because files in <code>lib/</code> are loaded in alphabetical order). For example:</p>

<pre title="Loading the RandomTextHelper helper"><code class="language-ruby">include RandomTextHelper
</code></pre>

<p>Now, in an item or layout, the methods provided by this helper can be used. For example, the default layout, assuming it is filtered using ERB, can call the method like this:</p>

<pre title="Calling the random_text method after having loaded the RandomTextHelper helper"><code class="language-html">&lt;p&gt;&lt;%= random_text %&gt;&lt;/p&gt;
</code></pre>

</div><div class="section" id="writing-filters">
<h2>Writing Filters</h2>

<p>Filters are classes that inherit from <code>Nanoc::Filter</code>. Writing custom filters is done by subclassing said superclass and overriding the <code>#run</code> method, which is responsible for transforming the content.</p>

<p>A filter has an identifier, which is an unique name that is used in calls to <code>#filter</code> in a compilation rule. A filter identifier is set using <code>#identifier</code>, like this:</p>

<pre><code class="language-ruby">class CensorFilter &lt; Nanoc::Filter
  identifier :censor

  # (other code here)
end
</code></pre>

<p>By default, filters will take textual content as input, and output text as well. Filters can be applied to binary content as well, and they can even tranform text into binary content and vice versa. To identify the type of the input and the output, declare the type in the class, like this:</p>

<pre><code class="language-ruby">class SampleTextualFilter &lt; Nanoc::Filter
  identifier :sample_textual
  type :text
  # also possible:
  #   type :text =&gt; :text

  # (other code here)
end

class SampleBinaryFilter &lt; Nanoc::Filter
  identifier :sample_binary
  type :binary
  # also possible:
  #   type :binary =&gt; :binary

  # (other code here)
end

class SampleTextualToBinaryFilter &lt; Nanoc::Filter
  identifier :sample_textual_to_binary
  type :text =&gt; :binary

  # (other code here)
end
</code></pre>

<p>The <code>#run</code> method looks a bit different for filters that apply to textual items than filters that apply to binary items. Filters that apply to textual items have a <code>content</code> argument; a string that contains the content to filter. Filters that apply to binary items, on the other hand, have a <code>filename</code> argument instead, containing the location of the file to be filtered. For example:</p>

<pre><code class="language-ruby">class SampleTextualFilter &lt; Nanoc::Filter
  identifier :sample_textual
  type :text
  def run(content, params={})
    # (filter code here)
  end
end

class SampleBinaryFilter &lt; Nanoc::Filter
  identifier :sample_binary
  type :binary
  def run(filename, params={})
    # (filter code here)
  end
end
</code></pre>

<p>Filters that output textual content should return the filtered content at the end of the method. Filters that output binary content should instead ensure that the content is written to the location returned by the <code>#output_filename</code> method.</p>

<p>Filters have access to <code>@item</code>, <code>@item_rep</code>, <code>@items</code>, <code>@layouts</code>, <code>@config</code> and <code>@site</code>, just like during the compilation process.</p>

<p>Here are three complete examples of filters that transform textual and binary content:</p>

<pre><code class="language-ruby">class CensorFilter &lt; Nanoc::Filter
  identifier :censor

  def run(content, params={})
    content.gsub('nanoc sucks', 'nanoc rocks')
  end
end

class ResizeFilter &lt; Nanoc::Filter
  identifier :resize
  type :binary

  def run(filename, params={})
    system(
      'sips',
      '--resampleWidth', params[:width],
      '--out', output_filename,
      filename
    )
  end
end

class SynthesiseAudio &lt; Nanoc::Filter 
  identifier :synthesise_audio 
  type :text =&gt; :binary

  def run(content, params={}) 
    system('say', content, '-o', output_filename)
  end 
end
</code></pre>

<p>When writing filters that apply to binary data, make sure that you check the exit code and any errors generated by the sub-process that you are invoking (if any). If the sub-process exists with an error, you should raise an error in the filter.</p>

</div><div class="section" id="writing-commands">
<h2>Writing Commands</h2>

<p>As of nanoc 3.2, it is possible to write custom commands. Create a <code>commands/</code> directory in your site directory and drop your commands there. A command is defined using a DSL and looks something like this:</p>

<pre><code>#!ruby
usage       'dostuff [options]'
aliases     :ds, :stuff
summary     'does stuff'
description 'This command does a lot of stuff. I really mean a lot.'

flag   :h, :help,  'show help for this command' do |value, cmd|
  puts cmd.help
  exit 0
end
flag   :m, :more,  'do even more stuff'
option :s, :stuff, 'specify stuff to do', :argument =&gt; :optional

run do |opts, args, cmd|
  stuff = opts[:stuff] || 'generic stuff'
  puts "Doing #{stuff}!"

  if opts[:more]
    puts 'Doing it even more!'
  end
end
</code></pre>

<p>The name of the command is derived from the filename. For example, a command defined in <code>commands/dostuff.rb</code> will have the name <code>dostuff</code> and to invoke it you‚Äôd type ‚Äúnanoc dostuff‚Äù. You can have nested commands by defining subcommands in subdirectories. For example, the command at <code>commands/foo/bar.rb</code> will be a subcommand of the command at <code>commands/foo.rb</code>.</p>

<p>For details on how to create such commands, check out the documentation for <a href="http://rubydoc.info/gems/cri/2.0.0/file/README.md">Cri</a>, the framework used by nanoc for generating commands.</p>

</div><div class="section" id="writing-data-sources">
<h2>Writing Data Sources</h2>

<p>Data sources are responsible for loading and storing a site‚Äôs data: items, layouts and code snippets. They inherit from <code>Nanoc::DataSource</code>. A very useful reference is the <a href="/docs/api/3.3/Nanoc/DataSource.html"><code>Nanoc::DataSource</code> source code documentation</a>.</p>

<p>Each data source has an identifier. This is a unique name that is used in a site‚Äôs ‚Äôs configuration file to specify which data source should be used to fetch data. It is specified like this:</p>

<pre><code class="language-ruby">class SampleDataSource &lt; Nanoc::DataSource
  identifier :sample
  # (other code here)
end
</code></pre>

<p>All methods in the data source have access to the <code>@site</code> object, which represents the site. One useful thing that can be done with this is request the configuration hash, using <code>@site.config</code>.</p>

<p>There are two methods you may want to implement first: <code>#up</code> and <code>#down</code>. <code>#up</code> is executed when the data source is loaded. For example, this would be the ideal place to establish a connection to the database. <code>#down</code> is executed when the data source is unloaded, so this is the ideal place to undo what <code>#up</code> did. You don‚Äôt need to implement <code>#up</code> or <code>#down</code> if you don‚Äôt want to.</p>

<p>The <code>#setup</code> method is used to create the initial site structure. For example, a database data source could create the necessary tables here. This method is required to be implemented.</p>

<p>You may also want to implement the optional <code>#update</code> method, which is used by the <code>update</code> command to update the data source to a newer version. This is very useful if the data source changes the way data is stored.</p>

<p>The two main methods in a data source are <code>#items</code> and <code>#layouts</code>. These load items (<a href="/docs/api/3.3/Nanoc/Item.html"><code>Nanoc::Item</code></a>) and layouts (<a href="/docs/api/3.3/Nanoc/Layout.html"><code>Nanoc::Layout</code></a>) respectively. Implementing these methods is optional, so if you e.g. have a data source that only returns items, there‚Äôs no need to implement <code>#layouts</code>.</p>

<p>If your data source can create items and/or layouts, then <code>#create_item</code> and <code>#create_layout</code> are methods you will want to implement. These will be used by the <code>create_site</code>, <code>create_item</code> and <code>create_layout</code> commands.</p>

<p>If all this sounds a bit vague, check out the <a href="/docs/api/3.3/Nanoc/DataSource.html">documentation for <code>Nanoc::DataSource</code></a>. You may also want to take a look at the code for some of the data sources; the code is well-documented and should help you to get started quickly.</p>
</div>;T;I"&<h2>Writing Helpers</h2>

<p>Helpers are modules that can be <code>include</code>d to provide additional functionality. The functions in these modules will then be callable from items and layouts. Such helpers need to be located in the <code>lib/</code> directory; often, it is a good idea to place them in <code>lib/helpers/</code>.</p>

<p>For example, the file <code>lib/helpers/random_text.rb</code> could contain this:</p>

<pre title="Defining the RandomTextHelper helper"><code class="language-ruby">module RandomTextHelper
  def random_text
    "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."
  end
end
</code></pre>

<p>To allow the <code>#random_text</code> method to be called, it can be <code>include</code>d. This is often done in <code>lib/helpers_.rb</code> (the underscore is necessary to ensure that the file is loaded <em>after</em> the helpers are loaded, which is necessary because files in <code>lib/</code> are loaded in alphabetical order). For example:</p>

<pre title="Loading the RandomTextHelper helper"><code class="language-ruby">include RandomTextHelper
</code></pre>

<p>Now, in an item or layout, the methods provided by this helper can be used. For example, the default layout, assuming it is filtered using ERB, can call the method like this:</p>

<pre title="Calling the random_text method after having loaded the RandomTextHelper helper"><code class="language-html">&lt;p&gt;&lt;%= random_text %&gt;&lt;/p&gt;
</code></pre>

<h2>Writing Filters</h2>

<p>Filters are classes that inherit from <code>Nanoc::Filter</code>. Writing custom filters is done by subclassing said superclass and overriding the <code>#run</code> method, which is responsible for transforming the content.</p>

<p>A filter has an identifier, which is an unique name that is used in calls to <code>#filter</code> in a compilation rule. A filter identifier is set using <code>#identifier</code>, like this:</p>

<pre><code class="language-ruby">class CensorFilter &lt; Nanoc::Filter
  identifier :censor

  # (other code here)
end
</code></pre>

<p>By default, filters will take textual content as input, and output text as well. Filters can be applied to binary content as well, and they can even tranform text into binary content and vice versa. To identify the type of the input and the output, declare the type in the class, like this:</p>

<pre><code class="language-ruby">class SampleTextualFilter &lt; Nanoc::Filter
  identifier :sample_textual
  type :text
  # also possible:
  #   type :text =&gt; :text

  # (other code here)
end

class SampleBinaryFilter &lt; Nanoc::Filter
  identifier :sample_binary
  type :binary
  # also possible:
  #   type :binary =&gt; :binary

  # (other code here)
end

class SampleTextualToBinaryFilter &lt; Nanoc::Filter
  identifier :sample_textual_to_binary
  type :text =&gt; :binary

  # (other code here)
end
</code></pre>

<p>The <code>#run</code> method looks a bit different for filters that apply to textual items than filters that apply to binary items. Filters that apply to textual items have a <code>content</code> argument; a string that contains the content to filter. Filters that apply to binary items, on the other hand, have a <code>filename</code> argument instead, containing the location of the file to be filtered. For example:</p>

<pre><code class="language-ruby">class SampleTextualFilter &lt; Nanoc::Filter
  identifier :sample_textual
  type :text
  def run(content, params={})
    # (filter code here)
  end
end

class SampleBinaryFilter &lt; Nanoc::Filter
  identifier :sample_binary
  type :binary
  def run(filename, params={})
    # (filter code here)
  end
end
</code></pre>

<p>Filters that output textual content should return the filtered content at the end of the method. Filters that output binary content should instead ensure that the content is written to the location returned by the <code>#output_filename</code> method.</p>

<p>Filters have access to <code>@item</code>, <code>@item_rep</code>, <code>@items</code>, <code>@layouts</code>, <code>@config</code> and <code>@site</code>, just like during the compilation process.</p>

<p>Here are three complete examples of filters that transform textual and binary content:</p>

<pre><code class="language-ruby">class CensorFilter &lt; Nanoc::Filter
  identifier :censor

  def run(content, params={})
    content.gsub('nanoc sucks', 'nanoc rocks')
  end
end

class ResizeFilter &lt; Nanoc::Filter
  identifier :resize
  type :binary

  def run(filename, params={})
    system(
      'sips',
      '--resampleWidth', params[:width],
      '--out', output_filename,
      filename
    )
  end
end

class SynthesiseAudio &lt; Nanoc::Filter 
  identifier :synthesise_audio 
  type :text =&gt; :binary

  def run(content, params={}) 
    system('say', content, '-o', output_filename)
  end 
end
</code></pre>

<p>When writing filters that apply to binary data, make sure that you check the exit code and any errors generated by the sub-process that you are invoking (if any). If the sub-process exists with an error, you should raise an error in the filter.</p>

<h2>Writing Commands</h2>

<p>As of nanoc 3.2, it is possible to write custom commands. Create a <code>commands/</code> directory in your site directory and drop your commands there. A command is defined using a DSL and looks something like this:</p>

<pre><code>#!ruby
usage       'dostuff [options]'
aliases     :ds, :stuff
summary     'does stuff'
description 'This command does a lot of stuff. I really mean a lot.'

flag   :h, :help,  'show help for this command' do |value, cmd|
  puts cmd.help
  exit 0
end
flag   :m, :more,  'do even more stuff'
option :s, :stuff, 'specify stuff to do', :argument =&gt; :optional

run do |opts, args, cmd|
  stuff = opts[:stuff] || 'generic stuff'
  puts "Doing #{stuff}!"

  if opts[:more]
    puts 'Doing it even more!'
  end
end
</code></pre>

<p>The name of the command is derived from the filename. For example, a command defined in <code>commands/dostuff.rb</code> will have the name <code>dostuff</code> and to invoke it you‚Äôd type ‚Äúnanoc dostuff‚Äù. You can have nested commands by defining subcommands in subdirectories. For example, the command at <code>commands/foo/bar.rb</code> will be a subcommand of the command at <code>commands/foo.rb</code>.</p>

<p>For details on how to create such commands, check out the documentation for <a href="http://rubydoc.info/gems/cri/2.0.0/file/README.md">Cri</a>, the framework used by nanoc for generating commands.</p>

<h2>Writing Data Sources</h2>

<p>Data sources are responsible for loading and storing a site‚Äôs data: items, layouts and code snippets. They inherit from <code>Nanoc::DataSource</code>. A very useful reference is the <a href="/docs/api/3.3/Nanoc/DataSource.html"><code>Nanoc::DataSource</code> source code documentation</a>.</p>

<p>Each data source has an identifier. This is a unique name that is used in a site‚Äôs ‚Äôs configuration file to specify which data source should be used to fetch data. It is specified like this:</p>

<pre><code class="language-ruby">class SampleDataSource &lt; Nanoc::DataSource
  identifier :sample
  # (other code here)
end
</code></pre>

<p>All methods in the data source have access to the <code>@site</code> object, which represents the site. One useful thing that can be done with this is request the configuration hash, using <code>@site.config</code>.</p>

<p>There are two methods you may want to implement first: <code>#up</code> and <code>#down</code>. <code>#up</code> is executed when the data source is loaded. For example, this would be the ideal place to establish a connection to the database. <code>#down</code> is executed when the data source is unloaded, so this is the ideal place to undo what <code>#up</code> did. You don‚Äôt need to implement <code>#up</code> or <code>#down</code> if you don‚Äôt want to.</p>

<p>The <code>#setup</code> method is used to create the initial site structure. For example, a database data source could create the necessary tables here. This method is required to be implemented.</p>

<p>You may also want to implement the optional <code>#update</code> method, which is used by the <code>update</code> command to update the data source to a newer version. This is very useful if the data source changes the way data is stored.</p>

<p>The two main methods in a data source are <code>#items</code> and <code>#layouts</code>. These load items (<a href="/docs/api/3.3/Nanoc/Item.html"><code>Nanoc::Item</code></a>) and layouts (<a href="/docs/api/3.3/Nanoc/Layout.html"><code>Nanoc::Layout</code></a>) respectively. Implementing these methods is optional, so if you e.g. have a data source that only returns items, there‚Äôs no need to implement <code>#layouts</code>.</p>

<p>If your data source can create items and/or layouts, then <code>#create_item</code> and <code>#create_layout</code> are methods you will want to implement. These will be used by the <code>create_site</code>, <code>create_item</code> and <code>create_layout</code> commands.</p>

<p>If all this sounds a bit vague, check out the <a href="/docs/api/3.3/Nanoc/DataSource.html">documentation for <code>Nanoc::DataSource</code></a>. You may also want to take a look at the code for some of the data sources; the code is well-documented and should help you to get started quickly.</p>
;T;@2"/docs/6-guides/{;{
;I"*„<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<title>SeqWare ‚Ä∫ Guides</title>
<meta content="nanoc 3.4.0" name="generator">
<link href="../../assets/style-v17.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://feeds.feedburner.com/seqware" rel="alternate" title="The SeqWare Blog" type="application/atom+xml">
<script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-34523087-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script>
</head>
<body>
<div class="wrapper">
<!-- ***** navigation ***** -->
<div class="nav">
<ol>
<li><a href="../../"><span>Home</span></a></li>
<li><a href="../../blog/"><span>News</span></a></li>
<li><a href="../"><span>Documentation</span></a></li>
<li><a href="../../community/"><span>Community</span></a></li>
<li><a href="../../partners/"><span>Partners</span></a></li>
<li><a href="../../about/"><span>About</span></a></li>
</ol>
</div>
<!-- ***** sidebar ***** -->
<div class="side">
<ol>
<li><a href="../1-introduction/"><span>Introduction to nanoc</span></a></li>
<li><a href="../2-installation/"><span>Installation</span></a></li>
<li><a href="../3-getting-started/"><span>Getting Started</span></a></li>
<li><a href="../4-basic-concepts/"><span>Basic Concepts</span></a></li>
<li><a href="../5-advanced-concepts/"><span>Advanced Concepts</span></a></li>
<li>
<span class="active" title="You're here."><span>Guides</span></span><ol class="toc">
<li><a href="#deploying-sites">Deploying sites</a></li>
<li><a href="#paginating-articles">Paginating articles</a></li>
<li><a href="#using-filters-based-on-file-extensions">Using filters based on file extensions</a></li>
<li><a href="#using-binary-items-effectively">Using binary items effectively</a></li>
<li><a href="#creating-multilingual-sites">Creating multilingual sites</a></li>
</ol>
</li>
<li><a href="../7-glossary/"><span>Glossary</span></a></li>
<li><a href="../8-faq/"><span>Frequently Asked Questions</span></a></li>
<li><a href="../api/3.4/"><span>API documentation</span></a></li>
</ol>
</div>
<!-- ***** body ***** -->
<div class="body">
<div class="article">
<div class="header">
<h1>Guides</h1>
</div>
<div class="section" id="deploying-sites">
<h2>Deploying sites</h2>

<p>There are quite a few ways to deploy a site to a web host. The most traditional way of uploading a site involves using FTP to transfer the files (perhaps using an ‚Äúupdate‚Äù or ‚Äúsynchronise‚Äù option). If your web host provides access via SSH, you can use SCP or SFTP to deploy a site.</p>

<div class="section" id="with-rsync">
<h3>With rsync</h3>

<p>If your web host supports rsync, then deploying a site can be fully automated, and the transfer itself can be quite fast, too. rsync is unfortunately a bit cumbersome, providing a great deal of options (check <kbd>man rsync</kbd> in case of doubt), but fortunately nanoc provides a ‚Äúdeploy‚Äù command that can make this quite a bit easier: a simple <kbd>nanoc deploy</kbd> will deploy your site.</p>

<p>To use the deploy command, open the config.yaml file and add a <code>deploy</code> hash. Inside, add a hash with a key that describes the destination (for example, <code>public</code> or <code>staging</code>). Inside this hash, set <code>dst</code> to the destination, in the format used by rsync and scp, to where the files should be uploaded, and set <code>kind</code> to <code>rsync</code>. Here‚Äôs what it will look like:</p>

<pre><code class="language-yaml"><span class="key">deploy</span>:
  <span class="key">public</span>:
    <span class="key">kind</span>: <span class="string"><span class="content">rsync</span></span>
    <span class="key">dst</span>:  <span class="string"><span class="delimiter">"</span><span class="content">stoneship.org:/var/www/sites/example.com/public</span><span class="delimiter">"</span></span>
  <span class="key">staging</span>:
    <span class="key">kind</span>: <span class="string"><span class="content">rsync</span></span>
    <span class="key">dst</span>:  <span class="string"><span class="delimiter">"</span><span class="content">stoneship.org:/var/www/sites/example.com/public/staging</span><span class="delimiter">"</span></span></code></pre>

<p>By default, the rsync deployer will upload all files in the output directory to the given location. None of the existing files in the target location will be deleted; however, be aware that files with the same name will be overwritten. To run the deploy command, pass it a <code>--target</code> option, like this:</p>

<pre title="Deploying"><span class="prompt">%</span> <kbd>nanoc deploy --target staging</kbd></pre>


<p>This will deploy using the ‚Äústaging‚Äù configuration. Replace ‚Äústaging‚Äù with ‚Äúpublic‚Äù if you want to deploy to the location marked with ‚Äúpublic‚Äù.</p>

<p>If you want to check whether the executed <code>rsync</code> command is really correct, you can perform a dry run by passing <code>--dry-run</code>. The rsync command will be printed, but not executed. For example:</p>

<pre title="Performing a dry run"><span class="prompt">%</span> <kbd>nanoc deploy --target public --dry-run</kbd></pre>


<p>You can override the options that nanoc uses for invoking rsync. The following example will make sure that all existing files on the remote server are deleted after uploading (use with caution!).</p>

<pre title="Custom rsync options in the deployment configuration"><code class="language-yaml"><span class="key">options</span>: <span class="string"><span class="content">[ '-gpPrtvz', '--delete-after' ]</span></span></code></pre>


</div>
</div>
<div class="section" id="paginating-articles">
<h2>Paginating articles</h2>

<p>First, a word of caution: I am not a fan of paginating items. Even though pagination is fairly easy to do in nanoc, I recommend not doing it, for one specific reason. Every time an object is added to a paginated collection, one object shifts from one page to the next. When a paginated page is bookmarked, it may show entirely different content a month later, and when a paginated page turns up as a result on a search engine, it may no longer contain the content that the person was looking for anymore. To avoid these issues, I recommend creating separate pages for each category, tag or year. Having said all this, I‚Äôll nonetheless show you how to do pagination in nanoc, so you can get an idea of how it can be done.</p>

<p>To paginate articles, we‚Äôll use the preprocessor block in the Rules file. The preprocessor contains code that will be executed before the site is compiled, but after the site data (items, layouts, etc) have been loaded. This is the ideal moment to create new items (which is what we will be doing) or modify or delete existing ones. The preprocessor block will look like this:</p>

<pre title="A preprocessor block that still needs to be filled in"><code class="language-ruby">preprocess <span class="keyword">do</span>
  <span class="keyword">def</span> <span class="function">paginate_articles</span>
    <span class="comment"># code will go here</span>
  <span class="keyword">end</span>

  paginate_articles
<span class="keyword">end</span></code></pre>


<p>Like the snippet says, the actual code for paginating the articles will go in the #paginate_articles method that is defined inside the preprocess block. The code could go directly in the preprocess block, with no method definitions or calls, like this:</p>

<pre title="A simpler preprocessor block that still needs to be filled in"><code class="language-ruby">preprocess <span class="keyword">do</span>
  <span class="comment"># code will go here</span>
<span class="keyword">end</span></code></pre>


<p>‚Ä¶but if your preprocessor block grows, it‚Äôs quite useful to separate different tasks in different methods. It‚Äôs also possible to store the method definitions in the lib/ directory somewhere, allowing the preprocessor block to be quite small and easy to understand.</p>

<p>The <code>#paginate_articles</code> method will have to do three things: fetch a list of all articles to paginate, split the entire list of articles in a list of sub-lists (read: ‚Äúpages‚Äù), and finally generate a <code>Nanoc::Item</code> for each of these sub-lists.</p>

<p>The first step, getting all articles to paginate, is quite easy. It will probably look a bit like this:</p>

<pre title="Fetching all articles to paginate"><code class="language-ruby">articles_to_paginate = items.select { |i| i[<span class="symbol">:kind</span>] == <span class="string"><span class="delimiter">'</span><span class="content">article</span><span class="delimiter">'</span></span> }.
  sort_by { |a| <span class="constant">Time</span>.parse(a[<span class="symbol">:created_at</span>]) }</code></pre>


<p>However, you can use the blogging helper to make this a bit cleaner. The blogging helper has a #sorted_articles method, which does exactly that. Here‚Äôs the cleaned-up version:</p>

<pre title="Fetching all articles to paginate (alternative approach)"><code class="language-ruby">include <span class="constant">Nanoc</span>::<span class="constant">Helpers</span>::<span class="constant">Blogging</span>
articles_to_paginate = sorted_articles</code></pre>


<p>The next step involves splitting the list of articles into sub-arrays. Here‚Äôs an easy way to do it:</p>

<pre title="Splitting the list of articles into sub-lists"><code class="language-ruby">article_groups = []
<span class="keyword">until</span> articles_to_paginate.empty?
  article_groups &lt;&lt; articles_to_paginate.slice!(<span class="integer">0</span>..<span class="integer">4</span>)
<span class="keyword">end</span></code></pre>


<p>This will generate sub-lists of length 5, but you can make the length of these pages configurable by adding <code>page_size: 5</code> in the site configuration and changing the article-slicing code to the following:</p>

<pre title="Splitting the list of articles into sub-lists (configurable approach)"><code class="language-ruby">article_groups = []
<span class="keyword">until</span> articles_to_paginate.empty?
  article_groups &lt;&lt; articles_to_paginate.slice!(<span class="integer">0</span>..<span class="instance-variable">@config</span>[<span class="symbol">:page_size</span>]-<span class="integer">1</span>)
<span class="keyword">end</span></code></pre>


<p>The final step involves generating pages for each individual sub-list. This is done by constructing <code>Nanoc::Item</code> objects and adding them to the <code>@items</code> array, like this:</p>

<pre title="Generating items for each of the sub-lists"><code class="language-ruby">article_groups.each_with_index <span class="keyword">do</span> |subarticles, i|
  first = i*config[<span class="symbol">:page_size</span>] + <span class="integer">1</span>
  last  = (i+<span class="integer">1</span>)*config[<span class="symbol">:page_size</span>]

  <span class="instance-variable">@items</span> &lt;&lt; <span class="constant">Nanoc</span>::<span class="constant">Item</span>.new(
    <span class="string"><span class="delimiter">"</span><span class="content">‚Ä¶ page content here ‚Ä¶</span><span class="delimiter">"</span></span>,
    { <span class="symbol">:title</span> =&gt; <span class="string"><span class="delimiter">"</span><span class="content">Archive (articles </span><span class="inline"><span class="inline-delimiter">#{</span>first<span class="inline-delimiter">}</span></span><span class="content"> to </span><span class="inline"><span class="inline-delimiter">#{</span>last<span class="inline-delimiter">}</span></span><span class="content">)</span><span class="delimiter">"</span></span> },
    <span class="string"><span class="delimiter">"</span><span class="content">/blog/archive/</span><span class="inline"><span class="inline-delimiter">#{</span>i+<span class="integer">1</span><span class="inline-delimiter">}</span></span><span class="content">/</span><span class="delimiter">"</span></span>
  )
<span class="keyword">end</span></code></pre>


<p>In this piece of code, I‚Äôm running over each sub-list (named articles) with the index of the sub-list (named i). I‚Äôm also calculating the index of the first and the last article, so I can give the pagination pages titles such as ‚ÄúArchive (articles 15 to 20).‚Äù The last statement generates the actual item: the first argument is the page content (see next paragraph), the second argument is a hash with attributes, and the last argument is the item identifier.</p>

<p>Obviously, one thing that is still lacking from the above piece of code is the content for the pagination page. This content should be code that runs over each article and prints each one. The content for this pagination page is rather large, so I‚Äôve opted to create a partial named <code>pagination_page</code> and put the content in there. This partial is stored in layouts/pagination_page.erb and looks like this:</p>

<pre title="The content for the pagination_page partial"><code class="language-html"><span class="error">&lt;</span>% pages = sorted_articles.slice(@item_id*@config[:page_size], @config[:page_size]) %<span class="error">&gt;</span>
<span class="error">&lt;</span>% pages.each do |article| %<span class="error">&gt;</span>
  <span class="tag">&lt;h1&gt;</span><span class="error">&lt;</span>%= article[:title] %<span class="error">&gt;</span><span class="tag">&lt;/h1&gt;</span>
  <span class="error">&lt;</span>%= article.compiled_content %<span class="error">&gt;</span>
<span class="error">&lt;</span>% end %<span class="error">&gt;</span></code></pre>


<p>Your version should probably be a little more fancy, including a navigation bar and previous/next links, but you get the idea: this piece of code takes a sub-list of the list of all articles and iterates over this sub-list. To make the newly generated pagination pages render this partial, replace the ‚Äúpage content here‚Äù string with the following:</p>

<pre title="The content for the paginated pages"><code class="language-ruby"><span class="string"><span class="delimiter">"</span><span class="content">&lt;%= render 'pagination_page', :item_id =&gt; </span><span class="inline"><span class="inline-delimiter">#{</span>i<span class="inline-delimiter">}</span></span><span class="content"> %&gt;</span><span class="delimiter">"</span></span></code></pre>


<p>The final thing that you should take care of, is to ensure that the pagination_page partial is rendered using the correct filter. In the Rules file, add this line above all other layout rules:</p>

<pre title="The layout rule for the pagination_page partial"><code class="language-ruby">layout <span class="string"><span class="delimiter">'</span><span class="content">/pagination_page/</span><span class="delimiter">'</span></span>, <span class="symbol">:erb</span></code></pre>


<p>You should also ensure that the generated pagination pages are filtered using erb. Add this line above all other compilation rules:</p>

<pre title="The compilation rule for the on-the-fly generated pagination pages"><code class="language-ruby">compile <span class="string"><span class="delimiter">'</span><span class="content">/blog/archive/*/</span><span class="delimiter">'</span></span> <span class="keyword">do</span>
  filter <span class="symbol">:erb</span>
  layout <span class="string"><span class="delimiter">'</span><span class="content">/default/</span><span class="delimiter">'</span></span>
<span class="keyword">end</span></code></pre>


<p>When you compile the site now, you should see that nanoc generates new files corresponding to the pagination pages, such as output/blog/archive/1/index.html. Mission complete!</p>

</div>
<div class="section" id="using-filters-based-on-file-extensions">
<h2>Using filters based on file extensions</h2>

<p>Each item has an <code>:extension</code> attribute, containing the extension of the file that corresponds with the item. For example, an item with identifier /foo/ that is read from content/foo.md will have an <code>:extension</code> attribute with value <code>'md'</code>.</p>

<p>You can use this attribute in the Rules file. If you want to run filters based on file extensions, use a case/when statement on the file extension, like this:</p>

<pre title="A sample compilation rule that filters based on file extension"><code class="language-ruby">compile <span class="string"><span class="delimiter">'</span><span class="content">*</span><span class="delimiter">'</span></span> <span class="keyword">do</span>
  <span class="keyword">case</span> item[<span class="symbol">:extension</span>]
    <span class="keyword">when</span> <span class="string"><span class="delimiter">'</span><span class="content">md</span><span class="delimiter">'</span></span>
      filter <span class="symbol">:rdiscount</span>
    <span class="keyword">when</span> <span class="string"><span class="delimiter">'</span><span class="content">haml</span><span class="delimiter">'</span></span>
      filter <span class="symbol">:haml</span>
  <span class="keyword">end</span>
<span class="keyword">end</span></code></pre>


</div>
<div class="section" id="using-binary-items-effectively">
<h2>Using binary items effectively</h2>

<p>nanoc 3.1 adds support for binary items. Such items will not be loaded into memory, allowing nanoc to handle large files if necessary. Images, audio files and videos are good examples of binary items. Support for binary items makes nanoc quite powerful. This section gives a couple of examples of how binary items can be used.</p>

<div class="section" id="building-an-image-gallery">
<h3>Building an image gallery</h3>

<p>If you want to include a gallery on your web site, containing thumbnails that link to full-size images, you can let nanoc handle the thumbnail generation instead of generating the thumbnails up front.</p>

<p class="warning"><strong>Note:</strong> If you have a lot of images to convert, and if the conversion process itself is taking a long time, consider performing the conversion up-front once, and then let a Rake task copy the generated thumbnails into the output directory. nanoc‚Äôs dependency resolution is not yet perfect; nanoc may decide to recompile items even though they do not need to.</p>


<p>This example assumes that several images are stored in the <code>content/gallery</code> folder. A file at <code>content/gallery.html</code> corresponds to the gallery page itself; this item is filtered through ERB and, for the time being, contains a list of links to full-size images:</p>

<pre title="Original code for the gallery page"><code class="language-rhtml"><span class="tag">&lt;ul&gt;</span>
<span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="instance-variable">@item</span>.children.each <span class="keyword">do</span> |img| <span class="inline-delimiter">%&gt;</span></span>
  <span class="tag">&lt;li&gt;</span><span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">"</span></span><span class="inline"><span class="inline-delimiter">&lt;%=</span> img.path <span class="inline-delimiter">%&gt;</span></span><span class="string"><span class="delimiter">"</span></span><span class="tag">&gt;</span><span class="inline"><span class="inline-delimiter">&lt;%=</span> img.path <span class="inline-delimiter">%&gt;</span></span><span class="tag">&lt;/a&gt;</span><span class="tag">&lt;/li&gt;</span>
<span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">end</span> <span class="inline-delimiter">%&gt;</span></span>
<span class="tag">&lt;/ul&gt;</span></code></pre>


<p>This gallery page will be enhanced so that it displays a list of thumbnails of these images, rather than the paths to the images.</p>

<p>In order to let the site handle full-size images, there will need to be a compilation rule and a routing rule for full-size images. The compilation rule does not need to do anything; the image should simply be copied. Here‚Äôs what the rules look like:</p>

<pre title="Compilation and routing rules for the full-size representations"><code class="language-ruby">compile <span class="string"><span class="delimiter">'</span><span class="content">/gallery/*/</span><span class="delimiter">'</span></span> <span class="keyword">do</span>
<span class="keyword">end</span>

route <span class="string"><span class="delimiter">'</span><span class="content">/gallery/*/</span><span class="delimiter">'</span></span> <span class="keyword">do</span>
  <span class="comment"># Make sure that /gallery/some_image/ is routed to</span>
  <span class="comment"># /gallery/some_image.jpg or /gallery/some_image.png or so</span>
  item.identifier.chop + <span class="string"><span class="delimiter">'</span><span class="content">.</span><span class="delimiter">'</span></span> + item[<span class="symbol">:extension</span>]
<span class="keyword">end</span></code></pre>


<p>To generate the image thumbnails, a custom filter will be necessary. Depending on what OS you are on, and what software you have installed, you may need to use different filters. On Mac OS X, you can use <code>sips</code>, so place this in <code>lib/filters/thumbnailize.rb</code>:</p>

<pre title="Filter for generating thumbnails using sips"><code class="language-ruby"><span class="keyword">class</span> <span class="class">Thumbnailize</span> &lt; <span class="constant">Nanoc</span>::<span class="constant">Filter</span>

  identifier <span class="symbol">:thumbnailize</span>
  type       <span class="symbol">:binary</span>

  <span class="keyword">def</span> <span class="function">run</span>(filename, params={})
    system(
      <span class="string"><span class="delimiter">'</span><span class="content">sips</span><span class="delimiter">'</span></span>,
      <span class="string"><span class="delimiter">'</span><span class="content">--resampleWidth</span><span class="delimiter">'</span></span>,
      params[<span class="symbol">:width</span>].to_s,
      <span class="string"><span class="delimiter">'</span><span class="content">--out</span><span class="delimiter">'</span></span>,
      output_filename,
      filename
    )
  <span class="keyword">end</span>

<span class="keyword">end</span></code></pre>


<p>On platforms that have <code>convert</code>, which is part of <a href="http://www.imagemagick.org/">ImageMagick</a> and <a href="http://www.graphicsmagick.org/">GraphicsMagick</a>, you can use the following filter instead:</p>

<pre title="Filter for generating thumbnails using convert"><code class="language-ruby"><span class="keyword">class</span> <span class="class">Thumbnailize</span> &lt; <span class="constant">Nanoc</span>::<span class="constant">Filter</span>

  identifier <span class="symbol">:thumbnailize</span>
  type       <span class="symbol">:binary</span>

  <span class="keyword">def</span> <span class="function">run</span>(filename, params={})
    system(
      <span class="string"><span class="delimiter">'</span><span class="content">convert</span><span class="delimiter">'</span></span>,
      <span class="string"><span class="delimiter">'</span><span class="content">-resize</span><span class="delimiter">'</span></span>,
      params[<span class="symbol">:width</span>].to_s,
      filename,
      output_filename
    )
  <span class="keyword">end</span>

<span class="keyword">end</span></code></pre>


<p>To generate the actual thumbnails, the images will need a <code>:thumbnail</code> representation, and accompanying compilation/routing rules:</p>

<pre title="Compilation and routing rules for the thumbnail representations"><code class="language-ruby">compile <span class="string"><span class="delimiter">'</span><span class="content">/gallery/*/</span><span class="delimiter">'</span></span>, <span class="symbol">:rep</span> =&gt; <span class="symbol">:thumbnail</span> <span class="keyword">do</span>
  filter <span class="symbol">:thumbnailize</span>, <span class="symbol">:width</span> =&gt; <span class="integer">200</span>
<span class="keyword">end</span>

route <span class="string"><span class="delimiter">'</span><span class="content">/gallery/*/</span><span class="delimiter">'</span></span>, <span class="symbol">:rep</span> =&gt; <span class="symbol">:thumbnail</span> <span class="keyword">do</span>
  item.identifier.chop + <span class="string"><span class="delimiter">'</span><span class="content">-thumbnail.</span><span class="delimiter">'</span></span> + item[<span class="symbol">:extension</span>]
<span class="keyword">end</span></code></pre>


<p>When the site is compiled now, you‚Äôll find both <code>output/gallery/some_image.jpg</code> as well as <code>output/gallery/some_image-thumbnail.jpg</code>, corresponding to the full-size image and its thumbnail. The gallery page can now be updated so that it displays these images:</p>

<pre title="Updated code for the gallery page"><code class="language-rhtml"><span class="tag">&lt;ul&gt;</span>
<span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="instance-variable">@item</span>.children.each <span class="keyword">do</span> |img| <span class="inline-delimiter">%&gt;</span></span>
  <span class="tag">&lt;li&gt;</span>
    <span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">"</span></span><span class="inline"><span class="inline-delimiter">&lt;%=</span> img.path <span class="inline-delimiter">%&gt;</span></span><span class="string"><span class="delimiter">"</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">"</span></span><span class="inline"><span class="inline-delimiter">&lt;%=</span> img.path(<span class="symbol">:rep</span> =&gt; <span class="symbol">:thumbnail</span>) <span class="inline-delimiter">%&gt;</span></span><span class="string"><span class="delimiter">"</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;/a&gt;</span>
  <span class="tag">&lt;/li&gt;</span>
<span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">end</span> <span class="inline-delimiter">%&gt;</span></span>
<span class="tag">&lt;/ul&gt;</span></code></pre>


<p>If you want to give each thumbnail a bit of ALT text, you can do so by treating the ALT text as metadata that you want to assign to that item. To do so, create a metadata file for the item you want to give the ALT text; this file will have the same name as the image file itself, but a different extension (‚Äú.yaml‚Äù). For example, an image at <code>content/gallery/rick.jpg</code> would have a metadata file named <code>content/gallery/rick.yaml</code>. Inside the newly created YAML file, add the ALT text, like this:</p>

<pre title="Metadata for an item"><code class="language-yaml"><span class="key">alt</span>: <span class="string"><span class="delimiter">"</span><span class="content">A picture of a kitten that looks cute but is actually quite evil</span><span class="delimiter">"</span></span></code></pre>


<p>Writing the ALT text on the gallery page is now as simple as printing the <code>img[:alt]</code> text, like this:</p>

<pre title="Updated code for the gallery page with ALT text"><code class="language-rhtml"><span class="tag">&lt;ul&gt;</span>
<span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="instance-variable">@item</span>.children.each <span class="keyword">do</span> |img| <span class="inline-delimiter">%&gt;</span></span>
  <span class="tag">&lt;li&gt;</span>
    <span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">"</span></span><span class="inline"><span class="inline-delimiter">&lt;%=</span> img.path <span class="inline-delimiter">%&gt;</span></span><span class="string"><span class="delimiter">"</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">"</span></span><span class="inline"><span class="inline-delimiter">&lt;%=</span> img.path(<span class="symbol">:rep</span> =&gt; <span class="symbol">:thumbnail</span>) <span class="inline-delimiter">%&gt;</span></span><span class="string"><span class="delimiter">"</span></span> <span class="attribute-name">alt</span>=<span class="string"><span class="delimiter">"</span></span><span class="inline"><span class="inline-delimiter">&lt;%=</span> img[<span class="symbol">:alt</span>] <span class="inline-delimiter">%&gt;</span></span><span class="string"><span class="delimiter">"</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;/a&gt;</span>
  <span class="tag">&lt;/li&gt;</span>
<span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">end</span> <span class="inline-delimiter">%&gt;</span></span>
<span class="tag">&lt;/ul&gt;</span></code></pre>


<p>The resulting page will still not be very pretty, though. You‚Äôd definitely need to arrange the thumbnails properly, perhaps using some CSS floats. Properly styling this page with CSS, however, is left as an excercise for the reader. :)</p>

</div>
<div class="section" id="preparing-videos-for-html5">
<h3>Preparing videos for HTML5</h3>

<p>Let‚Äôs see how a video file can be handled by nanoc. The video file that I‚Äôll use in this example is a H.264 file, which I would like to use in a HTML5 <code>&lt;video&gt;</code> element. Because Firefox does not support the H.264 format, we‚Äôll let nanoc convert this item into a Theora-encoded movie in an Ogg container.</p>

<p class="warning"><strong>Note:</strong> Because videos can take a long time to convert (several minutes or more), and because nanoc‚Äôs dependency resolution is not yet perfect, it is for the time being not recommended to let nanoc convert these items. It may be better to convert movies up front and copy them to the output directory at compile time (perhaps using a Rake task).</p>


<p>Let‚Äôs assume the source video file is stored in <code>content/movies/rick.mp4</code>. For the time being, let‚Äôs just copy this file to the output and not transform it yet. For this, a compilation and a routing rule will be necessary:</p>

<pre title="Compilation and routing rules for the default representation"><code class="language-ruby">compile <span class="string"><span class="delimiter">'</span><span class="content">/movies/*/</span><span class="delimiter">'</span></span> <span class="keyword">do</span>
  <span class="comment"># Do nothing</span>
<span class="keyword">end</span>

route <span class="string"><span class="delimiter">'</span><span class="content">/movies/*/</span><span class="delimiter">'</span></span> <span class="keyword">do</span>
  <span class="comment"># Make sure that "/movies/rick/" becomes "/movies/rick.mp4"</span>
  item.identifier.chop + <span class="string"><span class="delimiter">'</span><span class="content">.</span><span class="delimiter">'</span></span> + item[<span class="symbol">:extension</span>]
<span class="keyword">end</span></code></pre>


<p>We‚Äôll use the <a href="http://v2v.cc/~j/ffmpeg2theora/">ffmpeg2theora</a> commandline tool to convert videos from various source formats into Theora. Usually, <code>ffmpeg2theora</code> will be invoked like this:</p>

<pre title="Using ffmpeg2theora to convert a file to Theora"><kbd>ffmpeg2theora</kbd> <var>input.mp4</var> <kbd>--output</kbd> <var>output.ogg</var></pre>


<p>The conversion will be handled by a filter. The code for this filter is listed below. This filter should be stored somewhere in the <code>lib/</code> directory‚ÄîI recommend <code>lib/filters/ffmpeg2theora.rb</code>. Note how the filter writes the generated file to the filename returned by the <code>#output_filename</code> method; this is necessary for nanoc to find the generated file.</p>

<pre title="Filter that wraps ffmpeg2theora"><code class="language-ruby"><span class="keyword">class</span> <span class="class">Ffmpeg2TheoraFilter</span> &lt; <span class="constant">Nanoc</span>::<span class="constant">Filter</span>

  identifier <span class="symbol">:ffmpeg2theora</span>
  type       <span class="symbol">:binary</span>

  <span class="keyword">def</span> <span class="function">run</span>(filename, params={})
    system(<span class="string"><span class="delimiter">'</span><span class="content">ffmpeg2theora</span><span class="delimiter">'</span></span>, filename, <span class="string"><span class="delimiter">'</span><span class="content">--output</span><span class="delimiter">'</span></span>, output_filename)
  <span class="keyword">end</span>

<span class="keyword">end</span></code></pre>


<p>Note that it is a good idea to add error checking to the <code>#run</code> method here: if the executed command exits with a non-zero exit status, indicating failure, or if no output file is written, the filter should raise an exception. For clarity, this error-handling code has been left out.</p>

<p>Creating the Theora representations of the original video is now done by adding a compilation rule and a routing rule for a new <code>:theora</code> representation, like this:</p>

<pre title="Compilation and routing rules for the Theora representation"><code class="language-ruby">compile <span class="string"><span class="delimiter">'</span><span class="content">/movies/*/</span><span class="delimiter">'</span></span>, <span class="symbol">:rep</span> =&gt; <span class="symbol">:theora</span> <span class="keyword">do</span>
  filter <span class="symbol">:ffmpeg2theora</span>
<span class="keyword">end</span>

route <span class="string"><span class="delimiter">'</span><span class="content">/movies/*/</span><span class="delimiter">'</span></span>, <span class="symbol">:rep</span> =&gt; <span class="symbol">:theora</span> <span class="keyword">do</span>
  <span class="comment"># Make sure that "/movies/rick/" becomes "/movies/rick.ogg"</span>
  item.identifier.chop + <span class="string"><span class="delimiter">'</span><span class="content">.ogg</span><span class="delimiter">'</span></span>
<span class="keyword">end</span></code></pre>


<p>When the site is compiled, you should find two new files the output directory: <code>output/movies/rick.mp4</code> and <code>output/movies/rick.ogg</code>, which you can now <a href="http://diveintohtml5.info/video.html">use in HTML5 video</a>!</p>

</div>
</div>
<div class="section" id="creating-multilingual-sites">
<h2>Creating multilingual sites</h2>

<p>Creating a site in multiple languages can be tedious, but nanoc can nonetheless be useful in making the management of multilingual sites a bit easier. The approach that I will be describing in this guide is fairly opinionated. It is not necessarily the best way, but it is an approach that worked quite well for me. This guide is inspired by the techniques I used for the <a href="http://mystonline.com/">Myst Online web site</a>. Feel free to check out the <a href="http://projects.stoneship.org/hg/sites-moul">source for the Myst Online web site</a> to see the details about how it is done.</p>

<p>A multilingual site is a site where each page is available in multiple languages. Each language forms some sort of sub-site. For example, the English translation could have pages ‚ÄúAbout‚Äù and ‚ÄúPlay,‚Äù while the Dutch translation could have matching ‚ÄúOver‚Äù and ‚ÄúSpeel‚Äù pages.</p>

<p>For the Myst Online site, I decided to organise the pages in different languages by creating a top-level directory containing the abbreviated language name (en for English, nl for Dutch, fr for French, etc). Inside the language-specific directory, each page has a path that is also translated (so no /nl/play, but rather /nl/speel). Here‚Äôs an example:</p>

<pre title="URL structure of a multilingual site">
/en
  /about
  /play
/nl
  /over
  /speel
/fr
  /informations
  /jouez
</pre>


<p>The way these pages are maintained is fairly standard: each page is an individual item in the content/ directory that is compiled to the output/ directory. You‚Äôd create these items just like you would in an  ordinary, monolingual site. Here‚Äôs what the content/ directory looks like:</p>

<pre title="Directory structure of a multilingual site">
content/
  en/
    about.html
    play.html
  nl/
    over.html
    speel.html
  fr/
    informations.html
    jouez.html
</pre>


<p>One useful function that will be necessary later on is <code>#language_code_of</code>, which returns the language code (e.g. <code>en</code> or <code>nl</code>) for a given item. This function is implemented like this:</p>

<pre title="Getting the language code of a given item"><code class="language-ruby"><span class="keyword">def</span> <span class="function">language_code_of</span>(item)
  <span class="comment"># "/en/foo/" becomes "en"</span>
  (item.identifier.match(<span class="regexp"><span class="delimiter">/</span><span class="content">^</span><span class="char">\/</span><span class="content">([a-z]{2})</span><span class="char">\/</span><span class="delimiter">/</span></span>) || [])[<span class="integer">1</span>]
 <span class="keyword">end</span></code></pre>


<p>Once you have the basic content, you can improve the site to make it easier for switch languages. For this to work, each item needs a ‚Äúcanonical identifier‚Äù so that it is easy to find translations of a given page. The same items in different languages will all have the same canonical identifier. For the Myst Online web site, I chose the English identifier as the canonical identifier, but the choice you make here is fairly arbitrary. For example, the ‚Äú/en/about/‚Äù page has ‚Äú/about/‚Äù as its canonical identifier, and ‚Äú/nl/speel/‚Äù has ‚Äú/play/‚Äù as its canonical identifier. The canonical identifier is probably best stored in a <code>canonical_identifier</code> attribute.</p>

<p>Now, it is possible to find all translations of a given item simply by finding all items with the same canonical identifier. This is fairly simple:</p>

<pre title="Finding all translations of a given item"><code class="language-ruby"><span class="keyword">def</span> <span class="function">translations_of</span>(item)
  <span class="instance-variable">@items</span>.select <span class="keyword">do</span> |i| 
    i[<span class="symbol">:canonical_identifier</span>] == item[<span class="symbol">:canonical_identifier</span>]
  <span class="keyword">end</span>
<span class="keyword">end</span></code></pre>


<p>One more function is necessary: one that converts a language code into the language name (in the language itself, so it should not return ‚ÄúDutch‚Äù for ‚Äúnl‚Äù but it should return ‚ÄúNederlands‚Äù). Here‚Äôs now this function works:</p>

<pre title="Finding the language name for a given language code"><code class="language-ruby"><span class="constant">LANGUAGE_CODE_TO_NAME_MAPPING</span> = {
  <span class="string"><span class="delimiter">'</span><span class="content">en</span><span class="delimiter">'</span></span> =&gt; <span class="string"><span class="delimiter">'</span><span class="content">English</span><span class="delimiter">'</span></span>,
  <span class="string"><span class="delimiter">'</span><span class="content">nl</span><span class="delimiter">'</span></span> =&gt; <span class="string"><span class="delimiter">'</span><span class="content">Nederlands</span><span class="delimiter">'</span></span>
}

<span class="keyword">def</span> <span class="function">language_name_for_code</span>(code)
  <span class="constant">LANGUAGE_CODE_TO_NAME_MAPPING</span>[code]
<span class="keyword">end</span></code></pre>


<p>For completeness, let‚Äôs write a function that returns the language name for a given item as well:</p>

<pre title="Finding the language name of a given item"><code class="language-ruby"><span class="keyword">def</span> <span class="function">language_name_of</span>(item)
  language_name_for_code(
    language_code_of(item))
<span class="keyword">end</span></code></pre>


<p>Now, it is possible to link to all translations from a given item. Here‚Äôs how it is done (in ERB):</p>

<pre title="Listing all translations of a given item"><code class="language-rhtml"><span class="tag">&lt;ul&gt;</span>
  <span class="inline"><span class="inline-delimiter">&lt;%</span> translations_of(<span class="instance-variable">@item</span>).each <span class="keyword">do</span> |t| <span class="inline-delimiter">%&gt;</span></span>
    <span class="tag">&lt;li&gt;</span>
      <span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">"</span></span><span class="inline"><span class="inline-delimiter">&lt;%=</span> t.path <span class="inline-delimiter">%&gt;</span></span><span class="string"><span class="delimiter">"</span></span><span class="tag">&gt;</span>
        <span class="inline"><span class="inline-delimiter">&lt;%=</span> language_name_of(t) <span class="inline-delimiter">%&gt;</span></span>
      <span class="tag">&lt;/a&gt;</span>
    <span class="tag">&lt;/li&gt;</span>
  <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">end</span> <span class="inline-delimiter">%&gt;</span></span>
<span class="tag">&lt;/ul&gt;</span></code></pre>


<p>It is best to prevent linking to the active page, so you should check whether the translation <code>t</code> is the same as <code>@item</code> and handle this situation differently. For example:</p>

<pre title="Listing all translations of a given item, improved implementation"><code class="language-rhtml"><span class="tag">&lt;ul&gt;</span>
  <span class="inline"><span class="inline-delimiter">&lt;%</span> translations_of(<span class="instance-variable">@item</span>).each <span class="keyword">do</span> |t| <span class="inline-delimiter">%&gt;</span></span>
    <span class="tag">&lt;li&gt;</span>
      <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">if</span> <span class="instance-variable">@item</span> == t <span class="inline-delimiter">%&gt;</span></span>
        <span class="tag">&lt;span</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">active</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
          <span class="inline"><span class="inline-delimiter">&lt;%=</span> language_name_of(t) <span class="inline-delimiter">%&gt;</span></span>
        <span class="tag">&lt;/span&gt;</span>
      <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">else</span> <span class="inline-delimiter">%&gt;</span></span>
        <span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">"</span></span><span class="inline"><span class="inline-delimiter">&lt;%=</span> t.path <span class="inline-delimiter">%&gt;</span></span><span class="string"><span class="delimiter">"</span></span><span class="tag">&gt;</span>
          <span class="inline"><span class="inline-delimiter">&lt;%=</span> language_name_of(t) <span class="inline-delimiter">%&gt;</span></span>
        <span class="tag">&lt;/a&gt;</span>
      <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">end</span> <span class="inline-delimiter">%&gt;</span></span>
    <span class="tag">&lt;/li&gt;</span>
  <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">end</span> <span class="inline-delimiter">%&gt;</span></span>
<span class="tag">&lt;/ul&gt;</span></code></pre>


<p>One extra enhancement would be to indicate the language of the link destinations as well as the language of the link text itself. For this, the <code>hreflang</code> resp. the <code>lang</code> attributes are used. Here‚Äôs what the code could look like:</p>

<pre title="Listing all translations of a given item, improved implementation bis"><code class="language-rhtml"><span class="tag">&lt;ul&gt;</span>
  <span class="inline"><span class="inline-delimiter">&lt;%</span> translations_of(<span class="instance-variable">@item</span>).each <span class="keyword">do</span> |t| <span class="inline-delimiter">%&gt;</span></span>
    <span class="tag">&lt;li&gt;</span>
      <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">if</span> <span class="instance-variable">@item</span> == t <span class="inline-delimiter">%&gt;</span></span>
        <span class="tag">&lt;span</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">active</span><span class="delimiter">"</span></span> <span class="attribute-name">lang</span>=<span class="string"><span class="delimiter">"</span></span><span class="inline"><span class="inline-delimiter">&lt;%=</span> language_code_of(t) <span class="inline-delimiter">%&gt;</span></span><span class="string"><span class="delimiter">"</span></span><span class="tag">&gt;</span>
          <span class="inline"><span class="inline-delimiter">&lt;%=</span> language_name_of(t) <span class="inline-delimiter">%&gt;</span></span>
        <span class="tag">&lt;/span&gt;</span>
      <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">else</span> <span class="inline-delimiter">%&gt;</span></span>
        <span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">"</span></span><span class="inline"><span class="inline-delimiter">&lt;%=</span> t.path <span class="inline-delimiter">%&gt;</span></span><span class="string"><span class="delimiter">"</span></span>
           <span class="attribute-name">lang</span>=<span class="string"><span class="delimiter">"</span></span><span class="inline"><span class="inline-delimiter">&lt;%=</span> language_code_of(t) <span class="inline-delimiter">%&gt;</span></span><span class="string"><span class="delimiter">"</span></span>
           <span class="attribute-name">hreflang</span>=<span class="string"><span class="delimiter">"</span></span><span class="inline"><span class="inline-delimiter">&lt;%=</span> language_code_of(t) <span class="inline-delimiter">%&gt;</span></span><span class="string"><span class="delimiter">"</span></span><span class="tag">&gt;</span>
          <span class="inline"><span class="inline-delimiter">&lt;%=</span> language_name_of(t) <span class="inline-delimiter">%&gt;</span></span>
        <span class="tag">&lt;/a&gt;</span>
      <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">end</span> <span class="inline-delimiter">%&gt;</span></span>
    <span class="tag">&lt;/li&gt;</span>
  <span class="inline"><span class="inline-delimiter">&lt;%</span> <span class="keyword">end</span> <span class="inline-delimiter">%&gt;</span></span>
<span class="tag">&lt;/ul&gt;</span></code></pre>


<p>The language of the links and the link destinations are now indicated, but the language of the document itself isn‚Äôt yet. The <code>html</code> element should get a <code>lang</code> attribute that contains the language code. Here‚Äôs what it could look like in the layout:</p>

<pre title="Setting the document‚Äôs language code"><code class="language-rhtml"><span class="tag">&lt;html</span> <span class="attribute-name">lang</span>=<span class="string"><span class="delimiter">"</span></span><span class="inline"><span class="inline-delimiter">&lt;%=</span> language_code_of(<span class="instance-variable">@item</span>) <span class="inline-delimiter">%&gt;</span></span><span class="string"><span class="delimiter">"</span></span><span class="tag">&gt;</span></code></pre>


<p>At this point, the site is already a lot friendlier for people from different languages. One thing is still missing , though: a landing page that redirects people to the language of their choice. This means that the landing page will require server-side scripting. For the Myst Online site, I used PHP as this is a widely available scripting language for creating web sites, but other languages such as Ruby would have worked as well. A good way of redirecting visitors is to check the contents of the <code>Accept-Language</code> HTTP header, find the preferred language, and then redirect them to the appropriate page.</p>

<p>Here‚Äôs the PHP code for parsing the header and returning a list of language codes requested by the user agent, sorted by decreasing preference (‚Äúqval‚Äù):</p>

<pre title="Parsing the Accept-Language header"><code class="language-php"><span class="comment">// Parse the Accept-Language header</span>
<span class="local-variable">$langs</span> = <span class="predefined">array</span>();
<span class="keyword">if</span>(<span class="predefined">isset</span>(<span class="predefined">$_SERVER</span>[<span class="string"><span class="delimiter">'</span><span class="content">HTTP_ACCEPT_LANGUAGE</span><span class="delimiter">'</span></span>]))
{
  <span class="comment">// Parse language</span>
  <span class="comment">// e.g. en-ca,en;q=0.8,en-us;q=0.6,de-de;q=0.4,de;q=0.2</span>
  <span class="predefined">preg_match_all</span>(
    <span class="string"><span class="delimiter">'</span><span class="content">/([a-z]{1,8}(-[a-z]{1,8})?)</span><span class="content">\s</span><span class="content">*(;</span><span class="content">\s</span><span class="content">*q</span><span class="content">\s</span><span class="content">*=</span><span class="content">\s</span><span class="content">*(1|0</span><span class="content">\.</span><span class="content">[0-9]+))?/i</span><span class="delimiter">'</span></span>,
    <span class="predefined">$_SERVER</span>[<span class="string"><span class="delimiter">'</span><span class="content">HTTP_ACCEPT_LANGUAGE</span><span class="delimiter">'</span></span>],
    <span class="local-variable">$lang</span>);

  <span class="keyword">if</span>(<span class="predefined">count</span>(<span class="local-variable">$lang</span>[<span class="integer">1</span>]) &gt; <span class="integer">0</span>)
  {
    <span class="comment">// Create key-value pair</span>
    <span class="local-variable">$langs</span> = <span class="predefined">array_combine</span>(<span class="local-variable">$lang</span>[<span class="integer">1</span>], <span class="local-variable">$lang</span>[<span class="integer">4</span>]);

    <span class="comment">// Use default q value of 1</span>
    <span class="keyword">foreach</span> (<span class="local-variable">$langs</span> <span class="keyword">as</span> <span class="local-variable">$lang</span> =&gt; <span class="local-variable">$val</span>)
    {
      <span class="keyword">if</span> (<span class="local-variable">$val</span> === <span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>)
        <span class="local-variable">$langs</span>[<span class="local-variable">$lang</span>] = <span class="integer">1</span>;
    }

    <span class="comment">// Sort based on q value</span>
    <span class="predefined">arsort</span>(<span class="local-variable">$langs</span>, <span class="predefined-constant">SORT_NUMERIC</span>);
  }
}</code></pre>


<p>Once the list of requested language codes is constructed, we can iterate over this list and try to redirect. For each of the requested languages, check whether the site has a translation in this language, and if it does, redirect.</p>

<p>First, though, we need to build the list of codes of all languages the site is translated in. This involves generating PHP code using Ruby code, which is icky, but it does the trick. Here‚Äôs the code:</p>

<pre title="Building a PHP list of all language codes"><code class="language-rhtml"><span class="inline"><span class="inline-delimiter">&lt;%#</span><span class="comment"> Find all language codes </span><span class="inline-delimiter">%&gt;</span></span>
<span class="inline"><span class="inline-delimiter">&lt;%</span>
home         = <span class="instance-variable">@items</span>.find { |i| i.identifier == <span class="string"><span class="delimiter">'</span><span class="content">/en/</span><span class="delimiter">'</span></span> }
translations = translations_of(home)
codes        = translations.map { |t| language_code_of(t) }
<span class="inline-delimiter">%&gt;</span></span>

<span class="inline"><span class="inline-delimiter">&lt;%#</span><span class="comment"> Build PHP array of language codes </span><span class="inline-delimiter">%&gt;</span></span>
$codes = array(<span class="inline"><span class="inline-delimiter">&lt;%=</span> codes.join(<span class="string"><span class="delimiter">'</span><span class="content">, </span><span class="delimiter">'</span></span>) <span class="inline-delimiter">%&gt;</span></span>);</code></pre>


<p>The redirection code itself is given below. Note the redirection to the English version of the site s a fallback if no other languages could be satisfied.</p>

<pre title="Finding the correct language to redirect to"><code class="language-php"><span class="comment">// Show correct site</span>
<span class="keyword">foreach</span>(<span class="local-variable">$langs</span> <span class="keyword">as</span> <span class="local-variable">$request_lang</span> =&gt; <span class="local-variable">$qval</span>)
{
  <span class="keyword">foreach</span>(<span class="local-variable">$codes</span> <span class="keyword">as</span> <span class="local-variable">$code</span>)
  {
    <span class="keyword">if</span>(<span class="predefined">strpos</span>(<span class="local-variable">$request_lang</span>, <span class="local-variable">$code</span>) === <span class="integer">0</span>)
      redirect(<span class="local-variable">$code</span>);
  }
}
redirect(<span class="string"><span class="delimiter">'</span><span class="content">en</span><span class="delimiter">'</span></span>);</code></pre>


<p>The PHP <code>redirect()</code> function still needs to be implemented. This function creates a HTTP redirect to the home page in the given language. The HTTP header is different based on whether HTTP 1.0 or 1.1 is used. Here is its implementation:</p>

<pre title="The redirect function"><code class="language-php"><span class="keyword">function</span> <span class="function">redirect</span>(<span class="local-variable">$lang</span>)
{
  <span class="keyword">global</span> <span class="local-variable">$base_url</span>;
  
  <span class="comment">// Set HTTP status code</span>
  <span class="keyword">if</span> (<span class="predefined">$_SERVER</span>[<span class="string"><span class="delimiter">'</span><span class="content">SERVER_PROTOCOL</span><span class="delimiter">'</span></span>] == <span class="string"><span class="delimiter">'</span><span class="content">HTTP/1.1</span><span class="delimiter">'</span></span>)
    <span class="predefined">header</span>(<span class="string"><span class="delimiter">'</span><span class="content">HTTP/1.1 303 See Other</span><span class="delimiter">'</span></span>);
  <span class="keyword">else</span>
    <span class="predefined">header</span>(<span class="string"><span class="delimiter">'</span><span class="content">HTTP/1.0 302 Moved Temporarily</span><span class="delimiter">'</span></span>);
  
  <span class="comment">// Set location</span>
  <span class="predefined">header</span>(<span class="string"><span class="delimiter">'</span><span class="content">Location: </span><span class="delimiter">'</span></span> . <span class="local-variable">$base_url</span> . <span class="string"><span class="delimiter">'</span><span class="content">/</span><span class="delimiter">'</span></span> . <span class="local-variable">$lang</span> . <span class="string"><span class="delimiter">'</span><span class="content">/</span><span class="delimiter">'</span></span>);
  
  <span class="comment">// Stop!</span>
  <span class="predefined">exit</span>();
}</code></pre>


<p>The global <code>$base_url</code> variable contains the base URL for the web site. For the Myst Online web site, this is ‚Äúhttp://mystonline.com‚Äù. It is used to build the full redirection URL. You can either hardcode this in PHP, like this:</p>

<pre title="Setting the base URL"><code class="language-php"><span class="local-variable">$base_url</span> = <span class="string"><span class="delimiter">'</span><span class="content">http://mystonline.com</span><span class="delimiter">'</span></span>;</code></pre>


<p>‚Ä¶ or you can set the <code>base_url</code> confguration attribute in ‚Äúconfig.yaml‚Äù and generate the PHP code for setting it (a bit icky, but DRYer):</p>

<pre title="Setting the base URL (DRYer version)"><code class="language-php"><span class="local-variable">$base_url</span> = <span class="string"><span class="delimiter">'</span><span class="content">&lt;%= @site.config[:base_url] %&gt;</span><span class="delimiter">'</span></span>;</code></pre>


<p>That‚Äôs the end of this guide. Now, you have a web site in multiple languages where every language is given equal attention. For example, a German speaking person can arrive on the site and be redirected to the German version of the site, and even the URLs will be in German.</p>
</div>
</div>
</div>
</div>
<!-- ***** footer ***** -->
<div id="footer">
<p>SeqWare ¬© 2007‚Äì2012 Brian O&#8217;Connor. SeqWare is released under the a <a rel="license" href="http://www.gnu.org/licenses/licenses.html">GNU GPL v3</a>. This site is built using the excellent <a href="http://nanoc.stoneship.org/">nanoc</a> tool and example site along with the <a href="http://www.fonts.info/info/press/free-fonts-for-font-face-embedding.htm">Graublau</a> and <a href="http://scripts.sil.org/Gentium">Gentium</a> fonts.</p>
</div>
</body>
</html>
;T;	I" uDeploying sites
---------------

There are quite a few ways to deploy a site to a web host. The most traditional way of uploading a site involves using FTP to transfer the files (perhaps using an ‚Äúupdate‚Äù or ‚Äúsynchronise‚Äù option). If your web host provides access via SSH, you can use SCP or SFTP to deploy a site.

### With rsync

If your web host supports rsync, then deploying a site can be fully automated, and the transfer itself can be quite fast, too. rsync is unfortunately a bit cumbersome, providing a great deal of options (check <kbd>man rsync</kbd> in case of doubt), but fortunately nanoc provides a ‚Äúdeploy‚Äù command that can make this quite a bit easier: a simple <kbd>nanoc deploy</kbd> will deploy your site.

To use the deploy command, open the config.yaml file and add a `deploy` hash. Inside, add a hash with a key that describes the destination (for example, `public` or `staging`). Inside this hash, set `dst` to the destination, in the format used by rsync and scp, to where the files should be uploaded, and set `kind` to `rsync`. Here‚Äôs what it will look like:

	#!yaml
	deploy:
	  public:
	    kind: rsync
	    dst:  "stoneship.org:/var/www/sites/example.com/public"
	  staging:
	    kind: rsync
	    dst:  "stoneship.org:/var/www/sites/example.com/public/staging"

By default, the rsync deployer will upload all files in the output directory to the given location. None of the existing files in the target location will be deleted; however, be aware that files with the same name will be overwritten. To run the deploy command, pass it a `--target` option, like this:

<pre title="Deploying"><span class="prompt">%</span> <kbd>nanoc deploy --target staging</kbd></pre>

This will deploy using the ‚Äústaging‚Äù configuration. Replace ‚Äústaging‚Äù with ‚Äúpublic‚Äù if you want to deploy to the location marked with ‚Äúpublic‚Äù.

If you want to check whether the executed `rsync` command is really correct, you can perform a dry run by passing `--dry-run`. The rsync command will be printed, but not executed. For example:

<pre title="Performing a dry run"><span class="prompt">%</span> <kbd>nanoc deploy --target public --dry-run</kbd></pre>

You can override the options that nanoc uses for invoking rsync. The following example will make sure that all existing files on the remote server are deleted after uploading (use with caution!).

<pre title="Custom rsync options in the deployment configuration"><code class="language-yaml">options: [ '-gpPrtvz', '--delete-after' ]</code></pre>

Paginating articles
-------------------

First, a word of caution: I am not a fan of paginating items. Even though pagination is fairly easy to do in nanoc, I recommend not doing it, for one specific reason. Every time an object is added to a paginated collection, one object shifts from one page to the next. When a paginated page is bookmarked, it may show entirely different content a month later, and when a paginated page turns up as a result on a search engine, it may no longer contain the content that the person was looking for anymore. To avoid these issues, I recommend creating separate pages for each category, tag or year. Having said all this, I‚Äôll nonetheless show you how to do pagination in nanoc, so you can get an idea of how it can be done.

To paginate articles, we‚Äôll use the preprocessor block in the Rules file. The preprocessor contains code that will be executed before the site is compiled, but after the site data (items, layouts, etc) have been loaded. This is the ideal moment to create new items (which is what we will be doing) or modify or delete existing ones. The preprocessor block will look like this:

<pre title="A preprocessor block that still needs to be filled in"><code class="language-ruby">preprocess do
  def paginate_articles
    # code will go here
  end

  paginate_articles
end</code></pre>

Like the snippet says, the actual code for paginating the articles will go in the #paginate_articles method that is defined inside the preprocess block. The code could go directly in the preprocess block, with no method definitions or calls, like this:

<pre title="A simpler preprocessor block that still needs to be filled in"><code class="language-ruby">preprocess do
  # code will go here
end</code></pre>

‚Ä¶but if your preprocessor block grows, it‚Äôs quite useful to separate different tasks in different methods. It‚Äôs also possible to store the method definitions in the lib/ directory somewhere, allowing the preprocessor block to be quite small and easy to understand.

The `#paginate_articles` method will have to do three things: fetch a list of all articles to paginate, split the entire list of articles in a list of sub-lists (read: ‚Äúpages‚Äù), and finally generate a `Nanoc::Item` for each of these sub-lists.

The first step, getting all articles to paginate, is quite easy. It will probably look a bit like this:

<pre title="Fetching all articles to paginate"><code class="language-ruby">articles_to_paginate = items.select { |i| i[:kind] == 'article' }.
  sort_by { |a| Time.parse(a[:created_at]) }</code></pre>

However, you can use the blogging helper to make this a bit cleaner. The blogging helper has a #sorted_articles method, which does exactly that. Here‚Äôs the cleaned-up version:

<pre title="Fetching all articles to paginate (alternative approach)"><code class="language-ruby">include Nanoc::Helpers::Blogging
articles_to_paginate = sorted_articles</code></pre>

The next step involves splitting the list of articles into sub-arrays. Here‚Äôs an easy way to do it:

<pre title="Splitting the list of articles into sub-lists"><code class="language-ruby">article_groups = []
until articles_to_paginate.empty?
  article_groups &lt;&lt; articles_to_paginate.slice!(0..4)
end</code></pre>

This will generate sub-lists of length 5, but you can make the length of these pages configurable by adding `page_size: 5` in the site configuration and changing the article-slicing code to the following:

<pre title="Splitting the list of articles into sub-lists (configurable approach)"><code class="language-ruby">article_groups = []
until articles_to_paginate.empty?
  article_groups &lt;&lt; articles_to_paginate.slice!(0..@config[:page_size]-1)
end</code></pre>

The final step involves generating pages for each individual sub-list. This is done by constructing `Nanoc::Item` objects and adding them to the `@items` array, like this:

<pre title="Generating items for each of the sub-lists"><code class="language-ruby">article_groups.each_with_index do |subarticles, i|
  first = i*config[:page_size] + 1
  last  = (i+1)*config[:page_size]

  @items &lt;&lt; Nanoc::Item.new(
    "‚Ä¶ page content here ‚Ä¶",
    { :title => "Archive (articles #{first} to #{last})" },
    "/blog/archive/#{i+1}/"
  )
end</code></pre>

In this piece of code, I‚Äôm running over each sub-list (named articles) with the index of the sub-list (named i). I‚Äôm also calculating the index of the first and the last article, so I can give the pagination pages titles such as ‚ÄúArchive (articles 15 to 20).‚Äù The last statement generates the actual item: the first argument is the page content (see next paragraph), the second argument is a hash with attributes, and the last argument is the item identifier.

Obviously, one thing that is still lacking from the above piece of code is the content for the pagination page. This content should be code that runs over each article and prints each one. The content for this pagination page is rather large, so I‚Äôve opted to create a partial named `pagination_page` and put the content in there. This partial is stored in layouts/pagination_page.erb and looks like this:

<pre title="The content for the pagination_page partial"><code class="language-html">&lt;% pages = sorted_articles.slice(@item_id*@config[:page_size], @config[:page_size]) %&gt;
&lt;% pages.each do |article| %>
  &lt;h1>&lt;%= article[:title] %>&lt;/h1>
  &lt;%= article.compiled_content %>
&lt;% end %></code></pre>

Your version should probably be a little more fancy, including a navigation bar and previous/next links, but you get the idea: this piece of code takes a sub-list of the list of all articles and iterates over this sub-list. To make the newly generated pagination pages render this partial, replace the ‚Äúpage content here‚Äù string with the following:

<pre title="The content for the paginated pages"><code class="language-ruby">"&lt;%= render 'pagination_page', :item_id => #{i} %>"</code></pre>

The final thing that you should take care of, is to ensure that the pagination_page partial is rendered using the correct filter. In the Rules file, add this line above all other layout rules:

<pre title="The layout rule for the pagination_page partial"><code class="language-ruby">layout '/pagination_page/', :erb</code></pre>

You should also ensure that the generated pagination pages are filtered using erb. Add this line above all other compilation rules:

<pre title="The compilation rule for the on-the-fly generated pagination pages"><code class="language-ruby">compile '/blog/archive/*/' do
  filter :erb
  layout '/default/'
end</code></pre>

When you compile the site now, you should see that nanoc generates new files corresponding to the pagination pages, such as output/blog/archive/1/index.html. Mission complete!

Using filters based on file extensions
--------------------------------------

Each item has an `:extension` attribute, containing the extension of the file that corresponds with the item. For example, an item with identifier /foo/ that is read from content/foo.md will have an `:extension` attribute with value `'md'`.

You can use this attribute in the Rules file. If you want to run filters based on file extensions, use a case/when statement on the file extension, like this:

<pre title="A sample compilation rule that filters based on file extension"><code class="language-ruby">compile '*' do
  case item[:extension]
    when 'md'
      filter :rdiscount
    when 'haml'
      filter :haml
  end
end</code></pre>

Using binary items effectively
------------------------------

nanoc 3.1 adds support for binary items. Such items will not be loaded into memory, allowing nanoc to handle large files if necessary. Images, audio files and videos are good examples of binary items. Support for binary items makes nanoc quite powerful. This section gives a couple of examples of how binary items can be used.

### Building an image gallery

If you want to include a gallery on your web site, containing thumbnails that link to full-size images, you can let nanoc handle the thumbnail generation instead of generating the thumbnails up front.

<p class="warning"><strong>Note:</strong> If you have a lot of images to convert, and if the conversion process itself is taking a long time, consider performing the conversion up-front once, and then let a Rake task copy the generated thumbnails into the output directory. nanoc‚Äôs dependency resolution is not yet perfect; nanoc may decide to recompile items even though they do not need to.</p>

This example assumes that several images are stored in the `content/gallery` folder. A file at `content/gallery.html` corresponds to the gallery page itself; this item is filtered through ERB and, for the time being, contains a list of links to full-size images:

<pre title="Original code for the gallery page"><code class="language-rhtml">
&lt;ul>
&lt;% @item.children.each do |img| %>
  &lt;li>&lt;a href="&lt;%= img.path %>">&lt;%= img.path %>&lt;/a>&lt;/li>
&lt;% end %>
&lt;/ul>
</code></pre>

This gallery page will be enhanced so that it displays a list of thumbnails of these images, rather than the paths to the images.

In order to let the site handle full-size images, there will need to be a compilation rule and a routing rule for full-size images. The compilation rule does not need to do anything; the image should simply be copied. Here‚Äôs what the rules look like:

<pre title="Compilation and routing rules for the full-size representations"><code class="language-ruby">
compile '/gallery/*/' do
end

route '/gallery/*/' do
  # Make sure that /gallery/some_image/ is routed to
  # /gallery/some_image.jpg or /gallery/some_image.png or so
  item.identifier.chop + '.' + item[:extension]
end
</code></pre>

To generate the image thumbnails, a custom filter will be necessary. Depending on what OS you are on, and what software you have installed, you may need to use different filters. On Mac OS X, you can use `sips`, so place this in `lib/filters/thumbnailize.rb`:

<pre title="Filter for generating thumbnails using sips"><code class="language-ruby">
class Thumbnailize &lt; Nanoc::Filter

  identifier :thumbnailize
  type       :binary

  def run(filename, params={})
    system(
      'sips',
      '--resampleWidth',
      params[:width].to_s,
      '--out',
      output_filename,
      filename
    )
  end

end
</code></pre>

On platforms that have `convert`, which is part of [ImageMagick](http://www.imagemagick.org/) and [GraphicsMagick](http://www.graphicsmagick.org/), you can use the following filter instead:

<pre title="Filter for generating thumbnails using convert"><code class="language-ruby">
class Thumbnailize &lt; Nanoc::Filter

  identifier :thumbnailize
  type       :binary

  def run(filename, params={})
    system(
      'convert',
      '-resize',
      params[:width].to_s,
      filename,
      output_filename
    )
  end

end
</code></pre>

To generate the actual thumbnails, the images will need a `:thumbnail` representation, and accompanying compilation/routing rules:

<pre title="Compilation and routing rules for the thumbnail representations"><code class="language-ruby">
compile '/gallery/*/', :rep => :thumbnail do
  filter :thumbnailize, :width => 200
end

route '/gallery/*/', :rep => :thumbnail do
  item.identifier.chop + '-thumbnail.' + item[:extension]
end
</code></pre>

When the site is compiled now, you‚Äôll find both `output/gallery/some_image.jpg` as well as `output/gallery/some_image-thumbnail.jpg`, corresponding to the full-size image and its thumbnail. The gallery page can now be updated so that it displays these images:

<pre title="Updated code for the gallery page"><code class="language-rhtml">
&lt;ul>
&lt;% @item.children.each do |img| %>
  &lt;li>
    &lt;a href="&lt;%= img.path %>">
      &lt;img src="&lt;%= img.path(:rep => :thumbnail) %>">
    &lt;/a>
  &lt;/li>
&lt;% end %>
&lt;/ul>
</code></pre>

If you want to give each thumbnail a bit of ALT text, you can do so by treating the ALT text as metadata that you want to assign to that item. To do so, create a metadata file for the item you want to give the ALT text; this file will have the same name as the image file itself, but a different extension (‚Äú.yaml‚Äù). For example, an image at `content/gallery/rick.jpg` would have a metadata file named `content/gallery/rick.yaml`. Inside the newly created YAML file, add the ALT text, like this:

<pre title="Metadata for an item"><code class="language-yaml">
alt: "A picture of a kitten that looks cute but is actually quite evil"
</code></pre>

Writing the ALT text on the gallery page is now as simple as printing the `img[:alt]` text, like this:

<pre title="Updated code for the gallery page with ALT text"><code class="language-rhtml">
&lt;ul>
&lt;% @item.children.each do |img| %>
  &lt;li>
    &lt;a href="&lt;%= img.path %>">
      &lt;img src="&lt;%= img.path(:rep => :thumbnail) %>" alt="&lt;%= img[:alt] %>">
    &lt;/a>
  &lt;/li>
&lt;% end %>
&lt;/ul>
</code></pre>

The resulting page will still not be very pretty, though. You‚Äôd definitely need to arrange the thumbnails properly, perhaps using some CSS floats. Properly styling this page with CSS, however, is left as an excercise for the reader. :)

### Preparing videos for HTML5

Let‚Äôs see how a video file can be handled by nanoc. The video file that I‚Äôll use in this example is a H.264 file, which I would like to use in a HTML5 `<video>` element. Because Firefox does not support the H.264 format, we‚Äôll let nanoc convert this item into a Theora-encoded movie in an Ogg container.

<p class="warning"><strong>Note:</strong> Because videos can take a long time to convert (several minutes or more), and because nanoc‚Äôs dependency resolution is not yet perfect, it is for the time being not recommended to let nanoc convert these items. It may be better to convert movies up front and copy them to the output directory at compile time (perhaps using a Rake task).</p>

Let‚Äôs assume the source video file is stored in `content/movies/rick.mp4`. For the time being, let‚Äôs just copy this file to the output and not transform it yet. For this, a compilation and a routing rule will be necessary:

<pre title="Compilation and routing rules for the default representation"><code class="language-ruby">
compile '/movies/*/' do
  # Do nothing
end

route '/movies/*/' do
  # Make sure that "/movies/rick/" becomes "/movies/rick.mp4"
  item.identifier.chop + '.' + item[:extension]
end
</code></pre>

We‚Äôll use the <a href="http://v2v.cc/~j/ffmpeg2theora/">ffmpeg2theora</a> commandline tool to convert videos from various source formats into Theora. Usually, `ffmpeg2theora` will be invoked like this:

<pre title="Using ffmpeg2theora to convert a file to Theora"><kbd>ffmpeg2theora</kbd> <var>input.mp4</var> <kbd>--output</kbd> <var>output.ogg</var></pre>

The conversion will be handled by a filter. The code for this filter is listed below. This filter should be stored somewhere in the `lib/` directory‚ÄîI recommend `lib/filters/ffmpeg2theora.rb`. Note how the filter writes the generated file to the filename returned by the `#output_filename` method; this is necessary for nanoc to find the generated file.

<pre title="Filter that wraps ffmpeg2theora"><code class="language-ruby">
class Ffmpeg2TheoraFilter &lt; Nanoc::Filter

  identifier :ffmpeg2theora
  type       :binary

  def run(filename, params={})
    system('ffmpeg2theora', filename, '--output', output_filename)
  end

end
</code></pre>

Note that it is a good idea to add error checking to the `#run` method here: if the executed command exits with a non-zero exit status, indicating failure, or if no output file is written, the filter should raise an exception. For clarity, this error-handling code has been left out.

Creating the Theora representations of the original video is now done by adding a compilation rule and a routing rule for a new `:theora` representation, like this:

<pre title="Compilation and routing rules for the Theora representation"><code class="language-ruby">
compile '/movies/*/', :rep => :theora do
  filter :ffmpeg2theora
end

route '/movies/*/', :rep => :theora do
  # Make sure that "/movies/rick/" becomes "/movies/rick.ogg"
  item.identifier.chop + '.ogg'
end
</code></pre>

When the site is compiled, you should find two new files the output directory: `output/movies/rick.mp4` and `output/movies/rick.ogg`, which you can now [use in HTML5 video](http://diveintohtml5.info/video.html)!

Creating multilingual sites
---------------------------

Creating a site in multiple languages can be tedious, but nanoc can nonetheless be useful in making the management of multilingual sites a bit easier. The approach that I will be describing in this guide is fairly opinionated. It is not necessarily the best way, but it is an approach that worked quite well for me. This guide is inspired by the techniques I used for the [Myst Online web site](http://mystonline.com/). Feel free to check out the [source for the Myst Online web site](http://projects.stoneship.org/hg/sites-moul) to see the details about how it is done.

A multilingual site is a site where each page is available in multiple languages. Each language forms some sort of sub-site. For example, the English translation could have pages ‚ÄúAbout‚Äù and ‚ÄúPlay,‚Äù while the Dutch translation could have matching ‚ÄúOver‚Äù and ‚ÄúSpeel‚Äù pages.

For the Myst Online site, I decided to organise the pages in different languages by creating a top-level directory containing the abbreviated language name (en for English, nl for Dutch, fr for French, etc). Inside the language-specific directory, each page has a path that is also translated (so no /nl/play, but rather /nl/speel). Here‚Äôs an example:

<pre title="URL structure of a multilingual site">
/en
  /about
  /play
/nl
  /over
  /speel
/fr
  /informations
  /jouez
</pre>

The way these pages are maintained is fairly standard: each page is an individual item in the content/ directory that is compiled to the output/ directory. You‚Äôd create these items just like you would in an  ordinary, monolingual site. Here‚Äôs what the content/ directory looks like:

<pre title="Directory structure of a multilingual site">
content/
  en/
    about.html
    play.html
  nl/
    over.html
    speel.html
  fr/
    informations.html
    jouez.html
</pre>

One useful function that will be necessary later on is `#language_code_of`, which returns the language code (e.g. `en` or `nl`) for a given item. This function is implemented like this:

<pre title="Getting the language code of a given item"><code class="language-ruby">
def language_code_of(item)
  # "/en/foo/" becomes "en"
  (item.identifier.match(/^\/([a-z]{2})\//) || [])[1]
 end
</code></pre>

Once you have the basic content, you can improve the site to make it easier for switch languages. For this to work, each item needs a ‚Äúcanonical identifier‚Äù so that it is easy to find translations of a given page. The same items in different languages will all have the same canonical identifier. For the Myst Online web site, I chose the English identifier as the canonical identifier, but the choice you make here is fairly arbitrary. For example, the ‚Äú/en/about/‚Äù page has ‚Äú/about/‚Äù as its canonical identifier, and ‚Äú/nl/speel/‚Äù has ‚Äú/play/‚Äù as its canonical identifier. The canonical identifier is probably best stored in a `canonical_identifier` attribute.

Now, it is possible to find all translations of a given item simply by finding all items with the same canonical identifier. This is fairly simple:

<pre title="Finding all translations of a given item"><code class="language-ruby">
def translations_of(item)
  @items.select do |i| 
    i[:canonical_identifier] == item[:canonical_identifier]
  end
end
</code></pre>

One more function is necessary: one that converts a language code into the language name (in the language itself, so it should not return ‚ÄúDutch‚Äù for ‚Äúnl‚Äù but it should return ‚ÄúNederlands‚Äù). Here‚Äôs now this function works:

<pre title="Finding the language name for a given language code"><code class="language-ruby">
LANGUAGE_CODE_TO_NAME_MAPPING = {
  'en' => 'English',
  'nl' => 'Nederlands'
}

def language_name_for_code(code)
  LANGUAGE_CODE_TO_NAME_MAPPING[code]
end
</code></pre>

For completeness, let‚Äôs write a function that returns the language name for a given item as well:

<pre title="Finding the language name of a given item"><code class="language-ruby">
def language_name_of(item)
  language_name_for_code(
    language_code_of(item))
end
</code></pre>

Now, it is possible to link to all translations from a given item. Here‚Äôs how it is done (in ERB):

<pre title="Listing all translations of a given item"><code class="language-rhtml">
&lt;ul&gt;
  &lt;% translations_of(@item).each do |t| %&gt;
    &lt;li&gt;
      &lt;a href=&quot;&lt;%= t.path %&gt;&quot;&gt;
        &lt;%= language_name_of(t) %&gt;
      &lt;/a&gt;
    &lt;/li&gt;
  &lt;% end %&gt;
&lt;/ul&gt;
</code></pre>

It is best to prevent linking to the active page, so you should check whether the translation `t` is the same as `@item` and handle this situation differently. For example:

<pre title="Listing all translations of a given item, improved implementation"><code class="language-rhtml">
&lt;ul&gt;
  &lt;% translations_of(@item).each do |t| %&gt;
    &lt;li&gt;
      &lt;% if @item == t %&gt;
        &lt;span class=&quot;active&quot;&gt;
          &lt;%= language_name_of(t) %&gt;
        &lt;/span&gt;
      &lt;% else %&gt;
        &lt;a href=&quot;&lt;%= t.path %&gt;&quot;&gt;
          &lt;%= language_name_of(t) %&gt;
        &lt;/a&gt;
      &lt;% end %&gt;
    &lt;/li&gt;
  &lt;% end %&gt;
&lt;/ul&gt;
</code></pre>

One extra enhancement would be to indicate the language of the link destinations as well as the language of the link text itself. For this, the `hreflang` resp. the `lang` attributes are used. Here‚Äôs what the code could look like:

<pre title="Listing all translations of a given item, improved implementation bis"><code class="language-rhtml">
&lt;ul>
  &lt;% translations_of(@item).each do |t| %>
    &lt;li>
      &lt;% if @item == t %>
        &lt;span class="active" lang="&lt;%= language_code_of(t) %>">
          &lt;%= language_name_of(t) %>
        &lt;/span>
      &lt;% else %>
        &lt;a href="&lt;%= t.path %>"
           lang="&lt;%= language_code_of(t) %>"
           hreflang="&lt;%= language_code_of(t) %>">
          &lt;%= language_name_of(t) %>
        &lt;/a>
      &lt;% end %>
    &lt;/li>
  &lt;% end %>
&lt;/ul>
</code></pre>

The language of the links and the link destinations are now indicated, but the language of the document itself isn‚Äôt yet. The `html` element should get a `lang` attribute that contains the language code. Here‚Äôs what it could look like in the layout:

<pre title="Setting the document‚Äôs language code"><code class="language-rhtml">
&lt;html lang="&lt;%= language_code_of(@item) %>">
</code></pre>

At this point, the site is already a lot friendlier for people from different languages. One thing is still missing , though: a landing page that redirects people to the language of their choice. This means that the landing page will require server-side scripting. For the Myst Online site, I used PHP as this is a widely available scripting language for creating web sites, but other languages such as Ruby would have worked as well. A good way of redirecting visitors is to check the contents of the `Accept-Language` HTTP header, find the preferred language, and then redirect them to the appropriate page.

Here‚Äôs the PHP code for parsing the header and returning a list of language codes requested by the user agent, sorted by decreasing preference (‚Äúqval‚Äù):

<pre title="Parsing the Accept-Language header"><code class="language-php">
// Parse the Accept-Language header
$langs = array();
if(isset($_SERVER['HTTP_ACCEPT_LANGUAGE']))
{
  // Parse language
  // e.g. en-ca,en;q=0.8,en-us;q=0.6,de-de;q=0.4,de;q=0.2
  preg_match_all(
    '/([a-z]{1,8}(-[a-z]{1,8})?)\s*(;\s*q\s*=\s*(1|0\.[0-9]+))?/i',
    $_SERVER['HTTP_ACCEPT_LANGUAGE'],
    $lang);

  if(count($lang[1]) > 0)
  {
    // Create key-value pair
    $langs = array_combine($lang[1], $lang[4]);

    // Use default q value of 1
    foreach ($langs as $lang => $val)
    {
      if ($val === '')
        $langs[$lang] = 1;
    }

    // Sort based on q value
    arsort($langs, SORT_NUMERIC);
  }
}
</code></pre>

Once the list of requested language codes is constructed, we can iterate over this list and try to redirect. For each of the requested languages, check whether the site has a translation in this language, and if it does, redirect.

First, though, we need to build the list of codes of all languages the site is translated in. This involves generating PHP code using Ruby code, which is icky, but it does the trick. Here‚Äôs the code:

<pre title="Building a PHP list of all language codes"><code class="language-rhtml">
&lt;%# Find all language codes %&gt;
&lt;%
home         = @items.find { |i| i.identifier == &#x27;/en/&#x27; }
translations = translations_of(home)
codes        = translations.map { |t| language_code_of(t) }
%&gt;

&lt;%# Build PHP array of language codes %&gt;
$codes = array(&lt;%= codes.join(&#x27;, &#x27;) %&gt;);
</code></pre>

The redirection code itself is given below. Note the redirection to the English version of the site s a fallback if no other languages could be satisfied.

<pre title="Finding the correct language to redirect to"><code class="language-php">
// Show correct site
foreach($langs as $request_lang => $qval)
{
  foreach($codes as $code)
  {
    if(strpos($request_lang, $code) === 0)
      redirect($code);
  }
}
redirect('en');
</code></pre>

The PHP `redirect()` function still needs to be implemented. This function creates a HTTP redirect to the home page in the given language. The HTTP header is different based on whether HTTP 1.0 or 1.1 is used. Here is its implementation:

<pre title="The redirect function"><code class="language-php">
function redirect($lang)
{
  global $base_url;
  
  // Set HTTP status code
  if ($_SERVER['SERVER_PROTOCOL'] == 'HTTP/1.1')
    header('HTTP/1.1 303 See Other');
  else
    header('HTTP/1.0 302 Moved Temporarily');
  
  // Set location
  header('Location: ' . $base_url . '/' . $lang . '/');
  
  // Stop!
  exit();
}
</code></pre>

The global `$base_url` variable contains the base URL for the web site. For the Myst Online web site, this is ‚Äúhttp://mystonline.com‚Äù. It is used to build the full redirection URL. You can either hardcode this in PHP, like this:

<pre title="Setting the base URL"><code class="language-php">
$base_url = 'http://mystonline.com';
</code></pre>

‚Ä¶ or you can set the `base_url` confguration attribute in ‚Äúconfig.yaml‚Äù and generate the PHP code for setting it (a bit icky, but DRYer):

<pre title="Setting the base URL (DRYer version)"><code class="language-php">
$base_url = &#x27;&lt;%= @site.config[:base_url] %&gt;&#x27;;
</code></pre>

That‚Äôs the end of this guide. Now, you have a web site in multiple languages where every language is given equal attention. For example, a German speaking person can arrive on the site and be redirected to the German version of the site, and even the URLs will be in German.;T;
I"§{<div class="section" id="deploying-sites">
<h2>Deploying sites</h2>

<p>There are quite a few ways to deploy a site to a web host. The most traditional way of uploading a site involves using FTP to transfer the files (perhaps using an ‚Äúupdate‚Äù or ‚Äúsynchronise‚Äù option). If your web host provides access via SSH, you can use SCP or SFTP to deploy a site.</p>

<div class="section" id="with-rsync">
<h3>With rsync</h3>

<p>If your web host supports rsync, then deploying a site can be fully automated, and the transfer itself can be quite fast, too. rsync is unfortunately a bit cumbersome, providing a great deal of options (check <kbd>man rsync</kbd> in case of doubt), but fortunately nanoc provides a ‚Äúdeploy‚Äù command that can make this quite a bit easier: a simple <kbd>nanoc deploy</kbd> will deploy your site.</p>

<p>To use the deploy command, open the config.yaml file and add a <code>deploy</code> hash. Inside, add a hash with a key that describes the destination (for example, <code>public</code> or <code>staging</code>). Inside this hash, set <code>dst</code> to the destination, in the format used by rsync and scp, to where the files should be uploaded, and set <code>kind</code> to <code>rsync</code>. Here‚Äôs what it will look like:</p>

<pre><code>#!yaml
deploy:
  public:
    kind: rsync
    dst:  "stoneship.org:/var/www/sites/example.com/public"
  staging:
    kind: rsync
    dst:  "stoneship.org:/var/www/sites/example.com/public/staging"
</code></pre>

<p>By default, the rsync deployer will upload all files in the output directory to the given location. None of the existing files in the target location will be deleted; however, be aware that files with the same name will be overwritten. To run the deploy command, pass it a <code>--target</code> option, like this:</p>

<pre title="Deploying"><span class="prompt">%</span> <kbd>nanoc deploy --target staging</kbd></pre>


<p>This will deploy using the ‚Äústaging‚Äù configuration. Replace ‚Äústaging‚Äù with ‚Äúpublic‚Äù if you want to deploy to the location marked with ‚Äúpublic‚Äù.</p>

<p>If you want to check whether the executed <code>rsync</code> command is really correct, you can perform a dry run by passing <code>--dry-run</code>. The rsync command will be printed, but not executed. For example:</p>

<pre title="Performing a dry run"><span class="prompt">%</span> <kbd>nanoc deploy --target public --dry-run</kbd></pre>


<p>You can override the options that nanoc uses for invoking rsync. The following example will make sure that all existing files on the remote server are deleted after uploading (use with caution!).</p>

<pre title="Custom rsync options in the deployment configuration"><code class="language-yaml">options: [ '-gpPrtvz', '--delete-after' ]</code></pre>


</div>
</div><div class="section" id="paginating-articles">
<h2>Paginating articles</h2>

<p>First, a word of caution: I am not a fan of paginating items. Even though pagination is fairly easy to do in nanoc, I recommend not doing it, for one specific reason. Every time an object is added to a paginated collection, one object shifts from one page to the next. When a paginated page is bookmarked, it may show entirely different content a month later, and when a paginated page turns up as a result on a search engine, it may no longer contain the content that the person was looking for anymore. To avoid these issues, I recommend creating separate pages for each category, tag or year. Having said all this, I‚Äôll nonetheless show you how to do pagination in nanoc, so you can get an idea of how it can be done.</p>

<p>To paginate articles, we‚Äôll use the preprocessor block in the Rules file. The preprocessor contains code that will be executed before the site is compiled, but after the site data (items, layouts, etc) have been loaded. This is the ideal moment to create new items (which is what we will be doing) or modify or delete existing ones. The preprocessor block will look like this:</p>

<pre title="A preprocessor block that still needs to be filled in"><code class="language-ruby">preprocess do
  def paginate_articles
    # code will go here
  end

  paginate_articles
end</code></pre>


<p>Like the snippet says, the actual code for paginating the articles will go in the #paginate_articles method that is defined inside the preprocess block. The code could go directly in the preprocess block, with no method definitions or calls, like this:</p>

<pre title="A simpler preprocessor block that still needs to be filled in"><code class="language-ruby">preprocess do
  # code will go here
end</code></pre>


<p>‚Ä¶but if your preprocessor block grows, it‚Äôs quite useful to separate different tasks in different methods. It‚Äôs also possible to store the method definitions in the lib/ directory somewhere, allowing the preprocessor block to be quite small and easy to understand.</p>

<p>The <code>#paginate_articles</code> method will have to do three things: fetch a list of all articles to paginate, split the entire list of articles in a list of sub-lists (read: ‚Äúpages‚Äù), and finally generate a <code>Nanoc::Item</code> for each of these sub-lists.</p>

<p>The first step, getting all articles to paginate, is quite easy. It will probably look a bit like this:</p>

<pre title="Fetching all articles to paginate"><code class="language-ruby">articles_to_paginate = items.select { |i| i[:kind] == 'article' }.
  sort_by { |a| Time.parse(a[:created_at]) }</code></pre>


<p>However, you can use the blogging helper to make this a bit cleaner. The blogging helper has a #sorted_articles method, which does exactly that. Here‚Äôs the cleaned-up version:</p>

<pre title="Fetching all articles to paginate (alternative approach)"><code class="language-ruby">include Nanoc::Helpers::Blogging
articles_to_paginate = sorted_articles</code></pre>


<p>The next step involves splitting the list of articles into sub-arrays. Here‚Äôs an easy way to do it:</p>

<pre title="Splitting the list of articles into sub-lists"><code class="language-ruby">article_groups = []
until articles_to_paginate.empty?
  article_groups &lt;&lt; articles_to_paginate.slice!(0..4)
end</code></pre>


<p>This will generate sub-lists of length 5, but you can make the length of these pages configurable by adding <code>page_size: 5</code> in the site configuration and changing the article-slicing code to the following:</p>

<pre title="Splitting the list of articles into sub-lists (configurable approach)"><code class="language-ruby">article_groups = []
until articles_to_paginate.empty?
  article_groups &lt;&lt; articles_to_paginate.slice!(0..@config[:page_size]-1)
end</code></pre>


<p>The final step involves generating pages for each individual sub-list. This is done by constructing <code>Nanoc::Item</code> objects and adding them to the <code>@items</code> array, like this:</p>

<pre title="Generating items for each of the sub-lists"><code class="language-ruby">article_groups.each_with_index do |subarticles, i|
  first = i*config[:page_size] + 1
  last  = (i+1)*config[:page_size]

  @items &lt;&lt; Nanoc::Item.new(
    "‚Ä¶ page content here ‚Ä¶",
    { :title =&gt; "Archive (articles #{first} to #{last})" },
    "/blog/archive/#{i+1}/"
  )
end</code></pre>


<p>In this piece of code, I‚Äôm running over each sub-list (named articles) with the index of the sub-list (named i). I‚Äôm also calculating the index of the first and the last article, so I can give the pagination pages titles such as ‚ÄúArchive (articles 15 to 20).‚Äù The last statement generates the actual item: the first argument is the page content (see next paragraph), the second argument is a hash with attributes, and the last argument is the item identifier.</p>

<p>Obviously, one thing that is still lacking from the above piece of code is the content for the pagination page. This content should be code that runs over each article and prints each one. The content for this pagination page is rather large, so I‚Äôve opted to create a partial named <code>pagination_page</code> and put the content in there. This partial is stored in layouts/pagination_page.erb and looks like this:</p>

<pre title="The content for the pagination_page partial"><code class="language-html">&lt;% pages = sorted_articles.slice(@item_id*@config[:page_size], @config[:page_size]) %&gt;
&lt;% pages.each do |article| %&gt;
  &lt;h1&gt;&lt;%= article[:title] %&gt;&lt;/h1&gt;
  &lt;%= article.compiled_content %&gt;
&lt;% end %&gt;</code></pre>


<p>Your version should probably be a little more fancy, including a navigation bar and previous/next links, but you get the idea: this piece of code takes a sub-list of the list of all articles and iterates over this sub-list. To make the newly generated pagination pages render this partial, replace the ‚Äúpage content here‚Äù string with the following:</p>

<pre title="The content for the paginated pages"><code class="language-ruby">"&lt;%= render 'pagination_page', :item_id =&gt; #{i} %&gt;"</code></pre>


<p>The final thing that you should take care of, is to ensure that the pagination_page partial is rendered using the correct filter. In the Rules file, add this line above all other layout rules:</p>

<pre title="The layout rule for the pagination_page partial"><code class="language-ruby">layout '/pagination_page/', :erb</code></pre>


<p>You should also ensure that the generated pagination pages are filtered using erb. Add this line above all other compilation rules:</p>

<pre title="The compilation rule for the on-the-fly generated pagination pages"><code class="language-ruby">compile '/blog/archive/*/' do
  filter :erb
  layout '/default/'
end</code></pre>


<p>When you compile the site now, you should see that nanoc generates new files corresponding to the pagination pages, such as output/blog/archive/1/index.html. Mission complete!</p>

</div><div class="section" id="using-filters-based-on-file-extensions">
<h2>Using filters based on file extensions</h2>

<p>Each item has an <code>:extension</code> attribute, containing the extension of the file that corresponds with the item. For example, an item with identifier /foo/ that is read from content/foo.md will have an <code>:extension</code> attribute with value <code>'md'</code>.</p>

<p>You can use this attribute in the Rules file. If you want to run filters based on file extensions, use a case/when statement on the file extension, like this:</p>

<pre title="A sample compilation rule that filters based on file extension"><code class="language-ruby">compile '*' do
  case item[:extension]
    when 'md'
      filter :rdiscount
    when 'haml'
      filter :haml
  end
end</code></pre>


</div><div class="section" id="using-binary-items-effectively">
<h2>Using binary items effectively</h2>

<p>nanoc 3.1 adds support for binary items. Such items will not be loaded into memory, allowing nanoc to handle large files if necessary. Images, audio files and videos are good examples of binary items. Support for binary items makes nanoc quite powerful. This section gives a couple of examples of how binary items can be used.</p>

<div class="section" id="building-an-image-gallery">
<h3>Building an image gallery</h3>

<p>If you want to include a gallery on your web site, containing thumbnails that link to full-size images, you can let nanoc handle the thumbnail generation instead of generating the thumbnails up front.</p>

<p class="warning"><strong>Note:</strong> If you have a lot of images to convert, and if the conversion process itself is taking a long time, consider performing the conversion up-front once, and then let a Rake task copy the generated thumbnails into the output directory. nanoc‚Äôs dependency resolution is not yet perfect; nanoc may decide to recompile items even though they do not need to.</p>


<p>This example assumes that several images are stored in the <code>content/gallery</code> folder. A file at <code>content/gallery.html</code> corresponds to the gallery page itself; this item is filtered through ERB and, for the time being, contains a list of links to full-size images:</p>

<pre title="Original code for the gallery page"><code class="language-rhtml">&lt;ul&gt;
&lt;% @item.children.each do |img| %&gt;
  &lt;li&gt;&lt;a href="&lt;%= img.path %&gt;"&gt;&lt;%= img.path %&gt;&lt;/a&gt;&lt;/li&gt;
&lt;% end %&gt;
&lt;/ul&gt;
</code></pre>


<p>This gallery page will be enhanced so that it displays a list of thumbnails of these images, rather than the paths to the images.</p>

<p>In order to let the site handle full-size images, there will need to be a compilation rule and a routing rule for full-size images. The compilation rule does not need to do anything; the image should simply be copied. Here‚Äôs what the rules look like:</p>

<pre title="Compilation and routing rules for the full-size representations"><code class="language-ruby">compile '/gallery/*/' do
end

route '/gallery/*/' do
  # Make sure that /gallery/some_image/ is routed to
  # /gallery/some_image.jpg or /gallery/some_image.png or so
  item.identifier.chop + '.' + item[:extension]
end
</code></pre>


<p>To generate the image thumbnails, a custom filter will be necessary. Depending on what OS you are on, and what software you have installed, you may need to use different filters. On Mac OS X, you can use <code>sips</code>, so place this in <code>lib/filters/thumbnailize.rb</code>:</p>

<pre title="Filter for generating thumbnails using sips"><code class="language-ruby">class Thumbnailize &lt; Nanoc::Filter

  identifier :thumbnailize
  type       :binary

  def run(filename, params={})
    system(
      'sips',
      '--resampleWidth',
      params[:width].to_s,
      '--out',
      output_filename,
      filename
    )
  end

end
</code></pre>


<p>On platforms that have <code>convert</code>, which is part of <a href="http://www.imagemagick.org/">ImageMagick</a> and <a href="http://www.graphicsmagick.org/">GraphicsMagick</a>, you can use the following filter instead:</p>

<pre title="Filter for generating thumbnails using convert"><code class="language-ruby">class Thumbnailize &lt; Nanoc::Filter

  identifier :thumbnailize
  type       :binary

  def run(filename, params={})
    system(
      'convert',
      '-resize',
      params[:width].to_s,
      filename,
      output_filename
    )
  end

end
</code></pre>


<p>To generate the actual thumbnails, the images will need a <code>:thumbnail</code> representation, and accompanying compilation/routing rules:</p>

<pre title="Compilation and routing rules for the thumbnail representations"><code class="language-ruby">compile '/gallery/*/', :rep =&gt; :thumbnail do
  filter :thumbnailize, :width =&gt; 200
end

route '/gallery/*/', :rep =&gt; :thumbnail do
  item.identifier.chop + '-thumbnail.' + item[:extension]
end
</code></pre>


<p>When the site is compiled now, you‚Äôll find both <code>output/gallery/some_image.jpg</code> as well as <code>output/gallery/some_image-thumbnail.jpg</code>, corresponding to the full-size image and its thumbnail. The gallery page can now be updated so that it displays these images:</p>

<pre title="Updated code for the gallery page"><code class="language-rhtml">&lt;ul&gt;
&lt;% @item.children.each do |img| %&gt;
  &lt;li&gt;
    &lt;a href="&lt;%= img.path %&gt;"&gt;
      &lt;img src="&lt;%= img.path(:rep =&gt; :thumbnail) %&gt;"&gt;
    &lt;/a&gt;
  &lt;/li&gt;
&lt;% end %&gt;
&lt;/ul&gt;
</code></pre>


<p>If you want to give each thumbnail a bit of ALT text, you can do so by treating the ALT text as metadata that you want to assign to that item. To do so, create a metadata file for the item you want to give the ALT text; this file will have the same name as the image file itself, but a different extension (‚Äú.yaml‚Äù). For example, an image at <code>content/gallery/rick.jpg</code> would have a metadata file named <code>content/gallery/rick.yaml</code>. Inside the newly created YAML file, add the ALT text, like this:</p>

<pre title="Metadata for an item"><code class="language-yaml">alt: "A picture of a kitten that looks cute but is actually quite evil"
</code></pre>


<p>Writing the ALT text on the gallery page is now as simple as printing the <code>img[:alt]</code> text, like this:</p>

<pre title="Updated code for the gallery page with ALT text"><code class="language-rhtml">&lt;ul&gt;
&lt;% @item.children.each do |img| %&gt;
  &lt;li&gt;
    &lt;a href="&lt;%= img.path %&gt;"&gt;
      &lt;img src="&lt;%= img.path(:rep =&gt; :thumbnail) %&gt;" alt="&lt;%= img[:alt] %&gt;"&gt;
    &lt;/a&gt;
  &lt;/li&gt;
&lt;% end %&gt;
&lt;/ul&gt;
</code></pre>


<p>The resulting page will still not be very pretty, though. You‚Äôd definitely need to arrange the thumbnails properly, perhaps using some CSS floats. Properly styling this page with CSS, however, is left as an excercise for the reader. :)</p>

</div>
<div class="section" id="preparing-videos-for-html5">
<h3>Preparing videos for HTML5</h3>

<p>Let‚Äôs see how a video file can be handled by nanoc. The video file that I‚Äôll use in this example is a H.264 file, which I would like to use in a HTML5 <code>&lt;video&gt;</code> element. Because Firefox does not support the H.264 format, we‚Äôll let nanoc convert this item into a Theora-encoded movie in an Ogg container.</p>

<p class="warning"><strong>Note:</strong> Because videos can take a long time to convert (several minutes or more), and because nanoc‚Äôs dependency resolution is not yet perfect, it is for the time being not recommended to let nanoc convert these items. It may be better to convert movies up front and copy them to the output directory at compile time (perhaps using a Rake task).</p>


<p>Let‚Äôs assume the source video file is stored in <code>content/movies/rick.mp4</code>. For the time being, let‚Äôs just copy this file to the output and not transform it yet. For this, a compilation and a routing rule will be necessary:</p>

<pre title="Compilation and routing rules for the default representation"><code class="language-ruby">compile '/movies/*/' do
  # Do nothing
end

route '/movies/*/' do
  # Make sure that "/movies/rick/" becomes "/movies/rick.mp4"
  item.identifier.chop + '.' + item[:extension]
end
</code></pre>


<p>We‚Äôll use the <a href="http://v2v.cc/~j/ffmpeg2theora/">ffmpeg2theora</a> commandline tool to convert videos from various source formats into Theora. Usually, <code>ffmpeg2theora</code> will be invoked like this:</p>

<pre title="Using ffmpeg2theora to convert a file to Theora"><kbd>ffmpeg2theora</kbd> <var>input.mp4</var> <kbd>--output</kbd> <var>output.ogg</var></pre>


<p>The conversion will be handled by a filter. The code for this filter is listed below. This filter should be stored somewhere in the <code>lib/</code> directory‚ÄîI recommend <code>lib/filters/ffmpeg2theora.rb</code>. Note how the filter writes the generated file to the filename returned by the <code>#output_filename</code> method; this is necessary for nanoc to find the generated file.</p>

<pre title="Filter that wraps ffmpeg2theora"><code class="language-ruby">class Ffmpeg2TheoraFilter &lt; Nanoc::Filter

  identifier :ffmpeg2theora
  type       :binary

  def run(filename, params={})
    system('ffmpeg2theora', filename, '--output', output_filename)
  end

end
</code></pre>


<p>Note that it is a good idea to add error checking to the <code>#run</code> method here: if the executed command exits with a non-zero exit status, indicating failure, or if no output file is written, the filter should raise an exception. For clarity, this error-handling code has been left out.</p>

<p>Creating the Theora representations of the original video is now done by adding a compilation rule and a routing rule for a new <code>:theora</code> representation, like this:</p>

<pre title="Compilation and routing rules for the Theora representation"><code class="language-ruby">compile '/movies/*/', :rep =&gt; :theora do
  filter :ffmpeg2theora
end

route '/movies/*/', :rep =&gt; :theora do
  # Make sure that "/movies/rick/" becomes "/movies/rick.ogg"
  item.identifier.chop + '.ogg'
end
</code></pre>


<p>When the site is compiled, you should find two new files the output directory: <code>output/movies/rick.mp4</code> and <code>output/movies/rick.ogg</code>, which you can now <a href="http://diveintohtml5.info/video.html">use in HTML5 video</a>!</p>

</div>
</div><div class="section" id="creating-multilingual-sites">
<h2>Creating multilingual sites</h2>

<p>Creating a site in multiple languages can be tedious, but nanoc can nonetheless be useful in making the management of multilingual sites a bit easier. The approach that I will be describing in this guide is fairly opinionated. It is not necessarily the best way, but it is an approach that worked quite well for me. This guide is inspired by the techniques I used for the <a href="http://mystonline.com/">Myst Online web site</a>. Feel free to check out the <a href="http://projects.stoneship.org/hg/sites-moul">source for the Myst Online web site</a> to see the details about how it is done.</p>

<p>A multilingual site is a site where each page is available in multiple languages. Each language forms some sort of sub-site. For example, the English translation could have pages ‚ÄúAbout‚Äù and ‚ÄúPlay,‚Äù while the Dutch translation could have matching ‚ÄúOver‚Äù and ‚ÄúSpeel‚Äù pages.</p>

<p>For the Myst Online site, I decided to organise the pages in different languages by creating a top-level directory containing the abbreviated language name (en for English, nl for Dutch, fr for French, etc). Inside the language-specific directory, each page has a path that is also translated (so no /nl/play, but rather /nl/speel). Here‚Äôs an example:</p>

<pre title="URL structure of a multilingual site">
/en
  /about
  /play
/nl
  /over
  /speel
/fr
  /informations
  /jouez
</pre>


<p>The way these pages are maintained is fairly standard: each page is an individual item in the content/ directory that is compiled to the output/ directory. You‚Äôd create these items just like you would in an  ordinary, monolingual site. Here‚Äôs what the content/ directory looks like:</p>

<pre title="Directory structure of a multilingual site">
content/
  en/
    about.html
    play.html
  nl/
    over.html
    speel.html
  fr/
    informations.html
    jouez.html
</pre>


<p>One useful function that will be necessary later on is <code>#language_code_of</code>, which returns the language code (e.g. <code>en</code> or <code>nl</code>) for a given item. This function is implemented like this:</p>

<pre title="Getting the language code of a given item"><code class="language-ruby">def language_code_of(item)
  # "/en/foo/" becomes "en"
  (item.identifier.match(/^\/([a-z]{2})\//) || [])[1]
 end
</code></pre>


<p>Once you have the basic content, you can improve the site to make it easier for switch languages. For this to work, each item needs a ‚Äúcanonical identifier‚Äù so that it is easy to find translations of a given page. The same items in different languages will all have the same canonical identifier. For the Myst Online web site, I chose the English identifier as the canonical identifier, but the choice you make here is fairly arbitrary. For example, the ‚Äú/en/about/‚Äù page has ‚Äú/about/‚Äù as its canonical identifier, and ‚Äú/nl/speel/‚Äù has ‚Äú/play/‚Äù as its canonical identifier. The canonical identifier is probably best stored in a <code>canonical_identifier</code> attribute.</p>

<p>Now, it is possible to find all translations of a given item simply by finding all items with the same canonical identifier. This is fairly simple:</p>

<pre title="Finding all translations of a given item"><code class="language-ruby">def translations_of(item)
  @items.select do |i| 
    i[:canonical_identifier] == item[:canonical_identifier]
  end
end
</code></pre>


<p>One more function is necessary: one that converts a language code into the language name (in the language itself, so it should not return ‚ÄúDutch‚Äù for ‚Äúnl‚Äù but it should return ‚ÄúNederlands‚Äù). Here‚Äôs now this function works:</p>

<pre title="Finding the language name for a given language code"><code class="language-ruby">LANGUAGE_CODE_TO_NAME_MAPPING = {
  'en' =&gt; 'English',
  'nl' =&gt; 'Nederlands'
}

def language_name_for_code(code)
  LANGUAGE_CODE_TO_NAME_MAPPING[code]
end
</code></pre>


<p>For completeness, let‚Äôs write a function that returns the language name for a given item as well:</p>

<pre title="Finding the language name of a given item"><code class="language-ruby">def language_name_of(item)
  language_name_for_code(
    language_code_of(item))
end
</code></pre>


<p>Now, it is possible to link to all translations from a given item. Here‚Äôs how it is done (in ERB):</p>

<pre title="Listing all translations of a given item"><code class="language-rhtml">&lt;ul&gt;
  &lt;% translations_of(@item).each do |t| %&gt;
    &lt;li&gt;
      &lt;a href="&lt;%= t.path %&gt;"&gt;
        &lt;%= language_name_of(t) %&gt;
      &lt;/a&gt;
    &lt;/li&gt;
  &lt;% end %&gt;
&lt;/ul&gt;
</code></pre>


<p>It is best to prevent linking to the active page, so you should check whether the translation <code>t</code> is the same as <code>@item</code> and handle this situation differently. For example:</p>

<pre title="Listing all translations of a given item, improved implementation"><code class="language-rhtml">&lt;ul&gt;
  &lt;% translations_of(@item).each do |t| %&gt;
    &lt;li&gt;
      &lt;% if @item == t %&gt;
        &lt;span class="active"&gt;
          &lt;%= language_name_of(t) %&gt;
        &lt;/span&gt;
      &lt;% else %&gt;
        &lt;a href="&lt;%= t.path %&gt;"&gt;
          &lt;%= language_name_of(t) %&gt;
        &lt;/a&gt;
      &lt;% end %&gt;
    &lt;/li&gt;
  &lt;% end %&gt;
&lt;/ul&gt;
</code></pre>


<p>One extra enhancement would be to indicate the language of the link destinations as well as the language of the link text itself. For this, the <code>hreflang</code> resp. the <code>lang</code> attributes are used. Here‚Äôs what the code could look like:</p>

<pre title="Listing all translations of a given item, improved implementation bis"><code class="language-rhtml">&lt;ul&gt;
  &lt;% translations_of(@item).each do |t| %&gt;
    &lt;li&gt;
      &lt;% if @item == t %&gt;
        &lt;span class="active" lang="&lt;%= language_code_of(t) %&gt;"&gt;
          &lt;%= language_name_of(t) %&gt;
        &lt;/span&gt;
      &lt;% else %&gt;
        &lt;a href="&lt;%= t.path %&gt;"
           lang="&lt;%= language_code_of(t) %&gt;"
           hreflang="&lt;%= language_code_of(t) %&gt;"&gt;
          &lt;%= language_name_of(t) %&gt;
        &lt;/a&gt;
      &lt;% end %&gt;
    &lt;/li&gt;
  &lt;% end %&gt;
&lt;/ul&gt;
</code></pre>


<p>The language of the links and the link destinations are now indicated, but the language of the document itself isn‚Äôt yet. The <code>html</code> element should get a <code>lang</code> attribute that contains the language code. Here‚Äôs what it could look like in the layout:</p>

<pre title="Setting the document‚Äôs language code"><code class="language-rhtml">&lt;html lang="&lt;%= language_code_of(@item) %&gt;"&gt;
</code></pre>


<p>At this point, the site is already a lot friendlier for people from different languages. One thing is still missing , though: a landing page that redirects people to the language of their choice. This means that the landing page will require server-side scripting. For the Myst Online site, I used PHP as this is a widely available scripting language for creating web sites, but other languages such as Ruby would have worked as well. A good way of redirecting visitors is to check the contents of the <code>Accept-Language</code> HTTP header, find the preferred language, and then redirect them to the appropriate page.</p>

<p>Here‚Äôs the PHP code for parsing the header and returning a list of language codes requested by the user agent, sorted by decreasing preference (‚Äúqval‚Äù):</p>

<pre title="Parsing the Accept-Language header"><code class="language-php">// Parse the Accept-Language header
$langs = array();
if(isset($_SERVER['HTTP_ACCEPT_LANGUAGE']))
{
  // Parse language
  // e.g. en-ca,en;q=0.8,en-us;q=0.6,de-de;q=0.4,de;q=0.2
  preg_match_all(
    '/([a-z]{1,8}(-[a-z]{1,8})?)\s*(;\s*q\s*=\s*(1|0\.[0-9]+))?/i',
    $_SERVER['HTTP_ACCEPT_LANGUAGE'],
    $lang);

  if(count($lang[1]) &gt; 0)
  {
    // Create key-value pair
    $langs = array_combine($lang[1], $lang[4]);

    // Use default q value of 1
    foreach ($langs as $lang =&gt; $val)
    {
      if ($val === '')
        $langs[$lang] = 1;
    }

    // Sort based on q value
    arsort($langs, SORT_NUMERIC);
  }
}
</code></pre>


<p>Once the list of requested language codes is constructed, we can iterate over this list and try to redirect. For each of the requested languages, check whether the site has a translation in this language, and if it does, redirect.</p>

<p>First, though, we need to build the list of codes of all languages the site is translated in. This involves generating PHP code using Ruby code, which is icky, but it does the trick. Here‚Äôs the code:</p>

<pre title="Building a PHP list of all language codes"><code class="language-rhtml">&lt;%# Find all language codes %&gt;
&lt;%
home         = @items.find { |i| i.identifier == '/en/' }
translations = translations_of(home)
codes        = translations.map { |t| language_code_of(t) }
%&gt;

&lt;%# Build PHP array of language codes %&gt;
$codes = array(&lt;%= codes.join(', ') %&gt;);
</code></pre>


<p>The redirection code itself is given below. Note the redirection to the English version of the site s a fallback if no other languages could be satisfied.</p>

<pre title="Finding the correct language to redirect to"><code class="language-php">// Show correct site
foreach($langs as $request_lang =&gt; $qval)
{
  foreach($codes as $code)
  {
    if(strpos($request_lang, $code) === 0)
      redirect($code);
  }
}
redirect('en');
</code></pre>


<p>The PHP <code>redirect()</code> function still needs to be implemented. This function creates a HTTP redirect to the home page in the given language. The HTTP header is different based on whether HTTP 1.0 or 1.1 is used. Here is its implementation:</p>

<pre title="The redirect function"><code class="language-php">function redirect($lang)
{
  global $base_url;
  
  // Set HTTP status code
  if ($_SERVER['SERVER_PROTOCOL'] == 'HTTP/1.1')
    header('HTTP/1.1 303 See Other');
  else
    header('HTTP/1.0 302 Moved Temporarily');
  
  // Set location
  header('Location: ' . $base_url . '/' . $lang . '/');
  
  // Stop!
  exit();
}
</code></pre>


<p>The global <code>$base_url</code> variable contains the base URL for the web site. For the Myst Online web site, this is ‚Äúhttp://mystonline.com‚Äù. It is used to build the full redirection URL. You can either hardcode this in PHP, like this:</p>

<pre title="Setting the base URL"><code class="language-php">$base_url = 'http://mystonline.com';
</code></pre>


<p>‚Ä¶ or you can set the <code>base_url</code> confguration attribute in ‚Äúconfig.yaml‚Äù and generate the PHP code for setting it (a bit icky, but DRYer):</p>

<pre title="Setting the base URL (DRYer version)"><code class="language-php">$base_url = '&lt;%= @site.config[:base_url] %&gt;';
</code></pre>


<p>That‚Äôs the end of this guide. Now, you have a web site in multiple languages where every language is given equal attention. For example, a German speaking person can arrive on the site and be redirected to the German version of the site, and even the URLs will be in German.</p>
</div>;T;I".y<h2>Deploying sites</h2>

<p>There are quite a few ways to deploy a site to a web host. The most traditional way of uploading a site involves using FTP to transfer the files (perhaps using an ‚Äúupdate‚Äù or ‚Äúsynchronise‚Äù option). If your web host provides access via SSH, you can use SCP or SFTP to deploy a site.</p>

<h3>With rsync</h3>

<p>If your web host supports rsync, then deploying a site can be fully automated, and the transfer itself can be quite fast, too. rsync is unfortunately a bit cumbersome, providing a great deal of options (check <kbd>man rsync</kbd> in case of doubt), but fortunately nanoc provides a ‚Äúdeploy‚Äù command that can make this quite a bit easier: a simple <kbd>nanoc deploy</kbd> will deploy your site.</p>

<p>To use the deploy command, open the config.yaml file and add a <code>deploy</code> hash. Inside, add a hash with a key that describes the destination (for example, <code>public</code> or <code>staging</code>). Inside this hash, set <code>dst</code> to the destination, in the format used by rsync and scp, to where the files should be uploaded, and set <code>kind</code> to <code>rsync</code>. Here‚Äôs what it will look like:</p>

<pre><code>#!yaml
deploy:
  public:
    kind: rsync
    dst:  "stoneship.org:/var/www/sites/example.com/public"
  staging:
    kind: rsync
    dst:  "stoneship.org:/var/www/sites/example.com/public/staging"
</code></pre>

<p>By default, the rsync deployer will upload all files in the output directory to the given location. None of the existing files in the target location will be deleted; however, be aware that files with the same name will be overwritten. To run the deploy command, pass it a <code>--target</code> option, like this:</p>

<pre title="Deploying"><span class="prompt">%</span> <kbd>nanoc deploy --target staging</kbd></pre>


<p>This will deploy using the ‚Äústaging‚Äù configuration. Replace ‚Äústaging‚Äù with ‚Äúpublic‚Äù if you want to deploy to the location marked with ‚Äúpublic‚Äù.</p>

<p>If you want to check whether the executed <code>rsync</code> command is really correct, you can perform a dry run by passing <code>--dry-run</code>. The rsync command will be printed, but not executed. For example:</p>

<pre title="Performing a dry run"><span class="prompt">%</span> <kbd>nanoc deploy --target public --dry-run</kbd></pre>


<p>You can override the options that nanoc uses for invoking rsync. The following example will make sure that all existing files on the remote server are deleted after uploading (use with caution!).</p>

<pre title="Custom rsync options in the deployment configuration"><code class="language-yaml">options: [ '-gpPrtvz', '--delete-after' ]</code></pre>


<h2>Paginating articles</h2>

<p>First, a word of caution: I am not a fan of paginating items. Even though pagination is fairly easy to do in nanoc, I recommend not doing it, for one specific reason. Every time an object is added to a paginated collection, one object shifts from one page to the next. When a paginated page is bookmarked, it may show entirely different content a month later, and when a paginated page turns up as a result on a search engine, it may no longer contain the content that the person was looking for anymore. To avoid these issues, I recommend creating separate pages for each category, tag or year. Having said all this, I‚Äôll nonetheless show you how to do pagination in nanoc, so you can get an idea of how it can be done.</p>

<p>To paginate articles, we‚Äôll use the preprocessor block in the Rules file. The preprocessor contains code that will be executed before the site is compiled, but after the site data (items, layouts, etc) have been loaded. This is the ideal moment to create new items (which is what we will be doing) or modify or delete existing ones. The preprocessor block will look like this:</p>

<pre title="A preprocessor block that still needs to be filled in"><code class="language-ruby">preprocess do
  def paginate_articles
    # code will go here
  end

  paginate_articles
end</code></pre>


<p>Like the snippet says, the actual code for paginating the articles will go in the #paginate_articles method that is defined inside the preprocess block. The code could go directly in the preprocess block, with no method definitions or calls, like this:</p>

<pre title="A simpler preprocessor block that still needs to be filled in"><code class="language-ruby">preprocess do
  # code will go here
end</code></pre>


<p>‚Ä¶but if your preprocessor block grows, it‚Äôs quite useful to separate different tasks in different methods. It‚Äôs also possible to store the method definitions in the lib/ directory somewhere, allowing the preprocessor block to be quite small and easy to understand.</p>

<p>The <code>#paginate_articles</code> method will have to do three things: fetch a list of all articles to paginate, split the entire list of articles in a list of sub-lists (read: ‚Äúpages‚Äù), and finally generate a <code>Nanoc::Item</code> for each of these sub-lists.</p>

<p>The first step, getting all articles to paginate, is quite easy. It will probably look a bit like this:</p>

<pre title="Fetching all articles to paginate"><code class="language-ruby">articles_to_paginate = items.select { |i| i[:kind] == 'article' }.
  sort_by { |a| Time.parse(a[:created_at]) }</code></pre>


<p>However, you can use the blogging helper to make this a bit cleaner. The blogging helper has a #sorted_articles method, which does exactly that. Here‚Äôs the cleaned-up version:</p>

<pre title="Fetching all articles to paginate (alternative approach)"><code class="language-ruby">include Nanoc::Helpers::Blogging
articles_to_paginate = sorted_articles</code></pre>


<p>The next step involves splitting the list of articles into sub-arrays. Here‚Äôs an easy way to do it:</p>

<pre title="Splitting the list of articles into sub-lists"><code class="language-ruby">article_groups = []
until articles_to_paginate.empty?
  article_groups &lt;&lt; articles_to_paginate.slice!(0..4)
end</code></pre>


<p>This will generate sub-lists of length 5, but you can make the length of these pages configurable by adding <code>page_size: 5</code> in the site configuration and changing the article-slicing code to the following:</p>

<pre title="Splitting the list of articles into sub-lists (configurable approach)"><code class="language-ruby">article_groups = []
until articles_to_paginate.empty?
  article_groups &lt;&lt; articles_to_paginate.slice!(0..@config[:page_size]-1)
end</code></pre>


<p>The final step involves generating pages for each individual sub-list. This is done by constructing <code>Nanoc::Item</code> objects and adding them to the <code>@items</code> array, like this:</p>

<pre title="Generating items for each of the sub-lists"><code class="language-ruby">article_groups.each_with_index do |subarticles, i|
  first = i*config[:page_size] + 1
  last  = (i+1)*config[:page_size]

  @items &lt;&lt; Nanoc::Item.new(
    "‚Ä¶ page content here ‚Ä¶",
    { :title => "Archive (articles #{first} to #{last})" },
    "/blog/archive/#{i+1}/"
  )
end</code></pre>


<p>In this piece of code, I‚Äôm running over each sub-list (named articles) with the index of the sub-list (named i). I‚Äôm also calculating the index of the first and the last article, so I can give the pagination pages titles such as ‚ÄúArchive (articles 15 to 20).‚Äù The last statement generates the actual item: the first argument is the page content (see next paragraph), the second argument is a hash with attributes, and the last argument is the item identifier.</p>

<p>Obviously, one thing that is still lacking from the above piece of code is the content for the pagination page. This content should be code that runs over each article and prints each one. The content for this pagination page is rather large, so I‚Äôve opted to create a partial named <code>pagination_page</code> and put the content in there. This partial is stored in layouts/pagination_page.erb and looks like this:</p>

<pre title="The content for the pagination_page partial"><code class="language-html">&lt;% pages = sorted_articles.slice(@item_id*@config[:page_size], @config[:page_size]) %&gt;
&lt;% pages.each do |article| %>
  &lt;h1>&lt;%= article[:title] %>&lt;/h1>
  &lt;%= article.compiled_content %>
&lt;% end %></code></pre>


<p>Your version should probably be a little more fancy, including a navigation bar and previous/next links, but you get the idea: this piece of code takes a sub-list of the list of all articles and iterates over this sub-list. To make the newly generated pagination pages render this partial, replace the ‚Äúpage content here‚Äù string with the following:</p>

<pre title="The content for the paginated pages"><code class="language-ruby">"&lt;%= render 'pagination_page', :item_id => #{i} %>"</code></pre>


<p>The final thing that you should take care of, is to ensure that the pagination_page partial is rendered using the correct filter. In the Rules file, add this line above all other layout rules:</p>

<pre title="The layout rule for the pagination_page partial"><code class="language-ruby">layout '/pagination_page/', :erb</code></pre>


<p>You should also ensure that the generated pagination pages are filtered using erb. Add this line above all other compilation rules:</p>

<pre title="The compilation rule for the on-the-fly generated pagination pages"><code class="language-ruby">compile '/blog/archive/*/' do
  filter :erb
  layout '/default/'
end</code></pre>


<p>When you compile the site now, you should see that nanoc generates new files corresponding to the pagination pages, such as output/blog/archive/1/index.html. Mission complete!</p>

<h2>Using filters based on file extensions</h2>

<p>Each item has an <code>:extension</code> attribute, containing the extension of the file that corresponds with the item. For example, an item with identifier /foo/ that is read from content/foo.md will have an <code>:extension</code> attribute with value <code>'md'</code>.</p>

<p>You can use this attribute in the Rules file. If you want to run filters based on file extensions, use a case/when statement on the file extension, like this:</p>

<pre title="A sample compilation rule that filters based on file extension"><code class="language-ruby">compile '*' do
  case item[:extension]
    when 'md'
      filter :rdiscount
    when 'haml'
      filter :haml
  end
end</code></pre>


<h2>Using binary items effectively</h2>

<p>nanoc 3.1 adds support for binary items. Such items will not be loaded into memory, allowing nanoc to handle large files if necessary. Images, audio files and videos are good examples of binary items. Support for binary items makes nanoc quite powerful. This section gives a couple of examples of how binary items can be used.</p>

<h3>Building an image gallery</h3>

<p>If you want to include a gallery on your web site, containing thumbnails that link to full-size images, you can let nanoc handle the thumbnail generation instead of generating the thumbnails up front.</p>

<p class="warning"><strong>Note:</strong> If you have a lot of images to convert, and if the conversion process itself is taking a long time, consider performing the conversion up-front once, and then let a Rake task copy the generated thumbnails into the output directory. nanoc‚Äôs dependency resolution is not yet perfect; nanoc may decide to recompile items even though they do not need to.</p>


<p>This example assumes that several images are stored in the <code>content/gallery</code> folder. A file at <code>content/gallery.html</code> corresponds to the gallery page itself; this item is filtered through ERB and, for the time being, contains a list of links to full-size images:</p>

<pre title="Original code for the gallery page"><code class="language-rhtml">&lt;ul>
&lt;% @item.children.each do |img| %>
  &lt;li>&lt;a href="&lt;%= img.path %>">&lt;%= img.path %>&lt;/a>&lt;/li>
&lt;% end %>
&lt;/ul>
</code></pre>


<p>This gallery page will be enhanced so that it displays a list of thumbnails of these images, rather than the paths to the images.</p>

<p>In order to let the site handle full-size images, there will need to be a compilation rule and a routing rule for full-size images. The compilation rule does not need to do anything; the image should simply be copied. Here‚Äôs what the rules look like:</p>

<pre title="Compilation and routing rules for the full-size representations"><code class="language-ruby">compile '/gallery/*/' do
end

route '/gallery/*/' do
  # Make sure that /gallery/some_image/ is routed to
  # /gallery/some_image.jpg or /gallery/some_image.png or so
  item.identifier.chop + '.' + item[:extension]
end
</code></pre>


<p>To generate the image thumbnails, a custom filter will be necessary. Depending on what OS you are on, and what software you have installed, you may need to use different filters. On Mac OS X, you can use <code>sips</code>, so place this in <code>lib/filters/thumbnailize.rb</code>:</p>

<pre title="Filter for generating thumbnails using sips"><code class="language-ruby">class Thumbnailize &lt; Nanoc::Filter

  identifier :thumbnailize
  type       :binary

  def run(filename, params={})
    system(
      'sips',
      '--resampleWidth',
      params[:width].to_s,
      '--out',
      output_filename,
      filename
    )
  end

end
</code></pre>


<p>On platforms that have <code>convert</code>, which is part of <a href="http://www.imagemagick.org/">ImageMagick</a> and <a href="http://www.graphicsmagick.org/">GraphicsMagick</a>, you can use the following filter instead:</p>

<pre title="Filter for generating thumbnails using convert"><code class="language-ruby">class Thumbnailize &lt; Nanoc::Filter

  identifier :thumbnailize
  type       :binary

  def run(filename, params={})
    system(
      'convert',
      '-resize',
      params[:width].to_s,
      filename,
      output_filename
    )
  end

end
</code></pre>


<p>To generate the actual thumbnails, the images will need a <code>:thumbnail</code> representation, and accompanying compilation/routing rules:</p>

<pre title="Compilation and routing rules for the thumbnail representations"><code class="language-ruby">compile '/gallery/*/', :rep => :thumbnail do
  filter :thumbnailize, :width => 200
end

route '/gallery/*/', :rep => :thumbnail do
  item.identifier.chop + '-thumbnail.' + item[:extension]
end
</code></pre>


<p>When the site is compiled now, you‚Äôll find both <code>output/gallery/some_image.jpg</code> as well as <code>output/gallery/some_image-thumbnail.jpg</code>, corresponding to the full-size image and its thumbnail. The gallery page can now be updated so that it displays these images:</p>

<pre title="Updated code for the gallery page"><code class="language-rhtml">&lt;ul>
&lt;% @item.children.each do |img| %>
  &lt;li>
    &lt;a href="&lt;%= img.path %>">
      &lt;img src="&lt;%= img.path(:rep => :thumbnail) %>">
    &lt;/a>
  &lt;/li>
&lt;% end %>
&lt;/ul>
</code></pre>


<p>If you want to give each thumbnail a bit of ALT text, you can do so by treating the ALT text as metadata that you want to assign to that item. To do so, create a metadata file for the item you want to give the ALT text; this file will have the same name as the image file itself, but a different extension (‚Äú.yaml‚Äù). For example, an image at <code>content/gallery/rick.jpg</code> would have a metadata file named <code>content/gallery/rick.yaml</code>. Inside the newly created YAML file, add the ALT text, like this:</p>

<pre title="Metadata for an item"><code class="language-yaml">alt: "A picture of a kitten that looks cute but is actually quite evil"
</code></pre>


<p>Writing the ALT text on the gallery page is now as simple as printing the <code>img[:alt]</code> text, like this:</p>

<pre title="Updated code for the gallery page with ALT text"><code class="language-rhtml">&lt;ul>
&lt;% @item.children.each do |img| %>
  &lt;li>
    &lt;a href="&lt;%= img.path %>">
      &lt;img src="&lt;%= img.path(:rep => :thumbnail) %>" alt="&lt;%= img[:alt] %>">
    &lt;/a>
  &lt;/li>
&lt;% end %>
&lt;/ul>
</code></pre>


<p>The resulting page will still not be very pretty, though. You‚Äôd definitely need to arrange the thumbnails properly, perhaps using some CSS floats. Properly styling this page with CSS, however, is left as an excercise for the reader. :)</p>

<h3>Preparing videos for HTML5</h3>

<p>Let‚Äôs see how a video file can be handled by nanoc. The video file that I‚Äôll use in this example is a H.264 file, which I would like to use in a HTML5 <code>&lt;video&gt;</code> element. Because Firefox does not support the H.264 format, we‚Äôll let nanoc convert this item into a Theora-encoded movie in an Ogg container.</p>

<p class="warning"><strong>Note:</strong> Because videos can take a long time to convert (several minutes or more), and because nanoc‚Äôs dependency resolution is not yet perfect, it is for the time being not recommended to let nanoc convert these items. It may be better to convert movies up front and copy them to the output directory at compile time (perhaps using a Rake task).</p>


<p>Let‚Äôs assume the source video file is stored in <code>content/movies/rick.mp4</code>. For the time being, let‚Äôs just copy this file to the output and not transform it yet. For this, a compilation and a routing rule will be necessary:</p>

<pre title="Compilation and routing rules for the default representation"><code class="language-ruby">compile '/movies/*/' do
  # Do nothing
end

route '/movies/*/' do
  # Make sure that "/movies/rick/" becomes "/movies/rick.mp4"
  item.identifier.chop + '.' + item[:extension]
end
</code></pre>


<p>We‚Äôll use the <a href="http://v2v.cc/~j/ffmpeg2theora/">ffmpeg2theora</a> commandline tool to convert videos from various source formats into Theora. Usually, <code>ffmpeg2theora</code> will be invoked like this:</p>

<pre title="Using ffmpeg2theora to convert a file to Theora"><kbd>ffmpeg2theora</kbd> <var>input.mp4</var> <kbd>--output</kbd> <var>output.ogg</var></pre>


<p>The conversion will be handled by a filter. The code for this filter is listed below. This filter should be stored somewhere in the <code>lib/</code> directory‚ÄîI recommend <code>lib/filters/ffmpeg2theora.rb</code>. Note how the filter writes the generated file to the filename returned by the <code>#output_filename</code> method; this is necessary for nanoc to find the generated file.</p>

<pre title="Filter that wraps ffmpeg2theora"><code class="language-ruby">class Ffmpeg2TheoraFilter &lt; Nanoc::Filter

  identifier :ffmpeg2theora
  type       :binary

  def run(filename, params={})
    system('ffmpeg2theora', filename, '--output', output_filename)
  end

end
</code></pre>


<p>Note that it is a good idea to add error checking to the <code>#run</code> method here: if the executed command exits with a non-zero exit status, indicating failure, or if no output file is written, the filter should raise an exception. For clarity, this error-handling code has been left out.</p>

<p>Creating the Theora representations of the original video is now done by adding a compilation rule and a routing rule for a new <code>:theora</code> representation, like this:</p>

<pre title="Compilation and routing rules for the Theora representation"><code class="language-ruby">compile '/movies/*/', :rep => :theora do
  filter :ffmpeg2theora
end

route '/movies/*/', :rep => :theora do
  # Make sure that "/movies/rick/" becomes "/movies/rick.ogg"
  item.identifier.chop + '.ogg'
end
</code></pre>


<p>When the site is compiled, you should find two new files the output directory: <code>output/movies/rick.mp4</code> and <code>output/movies/rick.ogg</code>, which you can now <a href="http://diveintohtml5.info/video.html">use in HTML5 video</a>!</p>

<h2>Creating multilingual sites</h2>

<p>Creating a site in multiple languages can be tedious, but nanoc can nonetheless be useful in making the management of multilingual sites a bit easier. The approach that I will be describing in this guide is fairly opinionated. It is not necessarily the best way, but it is an approach that worked quite well for me. This guide is inspired by the techniques I used for the <a href="http://mystonline.com/">Myst Online web site</a>. Feel free to check out the <a href="http://projects.stoneship.org/hg/sites-moul">source for the Myst Online web site</a> to see the details about how it is done.</p>

<p>A multilingual site is a site where each page is available in multiple languages. Each language forms some sort of sub-site. For example, the English translation could have pages ‚ÄúAbout‚Äù and ‚ÄúPlay,‚Äù while the Dutch translation could have matching ‚ÄúOver‚Äù and ‚ÄúSpeel‚Äù pages.</p>

<p>For the Myst Online site, I decided to organise the pages in different languages by creating a top-level directory containing the abbreviated language name (en for English, nl for Dutch, fr for French, etc). Inside the language-specific directory, each page has a path that is also translated (so no /nl/play, but rather /nl/speel). Here‚Äôs an example:</p>

<pre title="URL structure of a multilingual site">
/en
  /about
  /play
/nl
  /over
  /speel
/fr
  /informations
  /jouez
</pre>


<p>The way these pages are maintained is fairly standard: each page is an individual item in the content/ directory that is compiled to the output/ directory. You‚Äôd create these items just like you would in an  ordinary, monolingual site. Here‚Äôs what the content/ directory looks like:</p>

<pre title="Directory structure of a multilingual site">
content/
  en/
    about.html
    play.html
  nl/
    over.html
    speel.html
  fr/
    informations.html
    jouez.html
</pre>


<p>One useful function that will be necessary later on is <code>#language_code_of</code>, which returns the language code (e.g. <code>en</code> or <code>nl</code>) for a given item. This function is implemented like this:</p>

<pre title="Getting the language code of a given item"><code class="language-ruby">def language_code_of(item)
  # "/en/foo/" becomes "en"
  (item.identifier.match(/^\/([a-z]{2})\//) || [])[1]
 end
</code></pre>


<p>Once you have the basic content, you can improve the site to make it easier for switch languages. For this to work, each item needs a ‚Äúcanonical identifier‚Äù so that it is easy to find translations of a given page. The same items in different languages will all have the same canonical identifier. For the Myst Online web site, I chose the English identifier as the canonical identifier, but the choice you make here is fairly arbitrary. For example, the ‚Äú/en/about/‚Äù page has ‚Äú/about/‚Äù as its canonical identifier, and ‚Äú/nl/speel/‚Äù has ‚Äú/play/‚Äù as its canonical identifier. The canonical identifier is probably best stored in a <code>canonical_identifier</code> attribute.</p>

<p>Now, it is possible to find all translations of a given item simply by finding all items with the same canonical identifier. This is fairly simple:</p>

<pre title="Finding all translations of a given item"><code class="language-ruby">def translations_of(item)
  @items.select do |i| 
    i[:canonical_identifier] == item[:canonical_identifier]
  end
end
</code></pre>


<p>One more function is necessary: one that converts a language code into the language name (in the language itself, so it should not return ‚ÄúDutch‚Äù for ‚Äúnl‚Äù but it should return ‚ÄúNederlands‚Äù). Here‚Äôs now this function works:</p>

<pre title="Finding the language name for a given language code"><code class="language-ruby">LANGUAGE_CODE_TO_NAME_MAPPING = {
  'en' => 'English',
  'nl' => 'Nederlands'
}

def language_name_for_code(code)
  LANGUAGE_CODE_TO_NAME_MAPPING[code]
end
</code></pre>


<p>For completeness, let‚Äôs write a function that returns the language name for a given item as well:</p>

<pre title="Finding the language name of a given item"><code class="language-ruby">def language_name_of(item)
  language_name_for_code(
    language_code_of(item))
end
</code></pre>


<p>Now, it is possible to link to all translations from a given item. Here‚Äôs how it is done (in ERB):</p>

<pre title="Listing all translations of a given item"><code class="language-rhtml">&lt;ul&gt;
  &lt;% translations_of(@item).each do |t| %&gt;
    &lt;li&gt;
      &lt;a href=&quot;&lt;%= t.path %&gt;&quot;&gt;
        &lt;%= language_name_of(t) %&gt;
      &lt;/a&gt;
    &lt;/li&gt;
  &lt;% end %&gt;
&lt;/ul&gt;
</code></pre>


<p>It is best to prevent linking to the active page, so you should check whether the translation <code>t</code> is the same as <code>@item</code> and handle this situation differently. For example:</p>

<pre title="Listing all translations of a given item, improved implementation"><code class="language-rhtml">&lt;ul&gt;
  &lt;% translations_of(@item).each do |t| %&gt;
    &lt;li&gt;
      &lt;% if @item == t %&gt;
        &lt;span class=&quot;active&quot;&gt;
          &lt;%= language_name_of(t) %&gt;
        &lt;/span&gt;
      &lt;% else %&gt;
        &lt;a href=&quot;&lt;%= t.path %&gt;&quot;&gt;
          &lt;%= language_name_of(t) %&gt;
        &lt;/a&gt;
      &lt;% end %&gt;
    &lt;/li&gt;
  &lt;% end %&gt;
&lt;/ul&gt;
</code></pre>


<p>One extra enhancement would be to indicate the language of the link destinations as well as the language of the link text itself. For this, the <code>hreflang</code> resp. the <code>lang</code> attributes are used. Here‚Äôs what the code could look like:</p>

<pre title="Listing all translations of a given item, improved implementation bis"><code class="language-rhtml">&lt;ul>
  &lt;% translations_of(@item).each do |t| %>
    &lt;li>
      &lt;% if @item == t %>
        &lt;span class="active" lang="&lt;%= language_code_of(t) %>">
          &lt;%= language_name_of(t) %>
        &lt;/span>
      &lt;% else %>
        &lt;a href="&lt;%= t.path %>"
           lang="&lt;%= language_code_of(t) %>"
           hreflang="&lt;%= language_code_of(t) %>">
          &lt;%= language_name_of(t) %>
        &lt;/a>
      &lt;% end %>
    &lt;/li>
  &lt;% end %>
&lt;/ul>
</code></pre>


<p>The language of the links and the link destinations are now indicated, but the language of the document itself isn‚Äôt yet. The <code>html</code> element should get a <code>lang</code> attribute that contains the language code. Here‚Äôs what it could look like in the layout:</p>

<pre title="Setting the document‚Äôs language code"><code class="language-rhtml">&lt;html lang="&lt;%= language_code_of(@item) %>">
</code></pre>


<p>At this point, the site is already a lot friendlier for people from different languages. One thing is still missing , though: a landing page that redirects people to the language of their choice. This means that the landing page will require server-side scripting. For the Myst Online site, I used PHP as this is a widely available scripting language for creating web sites, but other languages such as Ruby would have worked as well. A good way of redirecting visitors is to check the contents of the <code>Accept-Language</code> HTTP header, find the preferred language, and then redirect them to the appropriate page.</p>

<p>Here‚Äôs the PHP code for parsing the header and returning a list of language codes requested by the user agent, sorted by decreasing preference (‚Äúqval‚Äù):</p>

<pre title="Parsing the Accept-Language header"><code class="language-php">// Parse the Accept-Language header
$langs = array();
if(isset($_SERVER['HTTP_ACCEPT_LANGUAGE']))
{
  // Parse language
  // e.g. en-ca,en;q=0.8,en-us;q=0.6,de-de;q=0.4,de;q=0.2
  preg_match_all(
    '/([a-z]{1,8}(-[a-z]{1,8})?)\s*(;\s*q\s*=\s*(1|0\.[0-9]+))?/i',
    $_SERVER['HTTP_ACCEPT_LANGUAGE'],
    $lang);

  if(count($lang[1]) > 0)
  {
    // Create key-value pair
    $langs = array_combine($lang[1], $lang[4]);

    // Use default q value of 1
    foreach ($langs as $lang => $val)
    {
      if ($val === '')
        $langs[$lang] = 1;
    }

    // Sort based on q value
    arsort($langs, SORT_NUMERIC);
  }
}
</code></pre>


<p>Once the list of requested language codes is constructed, we can iterate over this list and try to redirect. For each of the requested languages, check whether the site has a translation in this language, and if it does, redirect.</p>

<p>First, though, we need to build the list of codes of all languages the site is translated in. This involves generating PHP code using Ruby code, which is icky, but it does the trick. Here‚Äôs the code:</p>

<pre title="Building a PHP list of all language codes"><code class="language-rhtml">&lt;%# Find all language codes %&gt;
&lt;%
home         = @items.find { |i| i.identifier == &#x27;/en/&#x27; }
translations = translations_of(home)
codes        = translations.map { |t| language_code_of(t) }
%&gt;

&lt;%# Build PHP array of language codes %&gt;
$codes = array(&lt;%= codes.join(&#x27;, &#x27;) %&gt;);
</code></pre>


<p>The redirection code itself is given below. Note the redirection to the English version of the site s a fallback if no other languages could be satisfied.</p>

<pre title="Finding the correct language to redirect to"><code class="language-php">// Show correct site
foreach($langs as $request_lang => $qval)
{
  foreach($codes as $code)
  {
    if(strpos($request_lang, $code) === 0)
      redirect($code);
  }
}
redirect('en');
</code></pre>


<p>The PHP <code>redirect()</code> function still needs to be implemented. This function creates a HTTP redirect to the home page in the given language. The HTTP header is different based on whether HTTP 1.0 or 1.1 is used. Here is its implementation:</p>

<pre title="The redirect function"><code class="language-php">function redirect($lang)
{
  global $base_url;
  
  // Set HTTP status code
  if ($_SERVER['SERVER_PROTOCOL'] == 'HTTP/1.1')
    header('HTTP/1.1 303 See Other');
  else
    header('HTTP/1.0 302 Moved Temporarily');
  
  // Set location
  header('Location: ' . $base_url . '/' . $lang . '/');
  
  // Stop!
  exit();
}
</code></pre>


<p>The global <code>$base_url</code> variable contains the base URL for the web site. For the Myst Online web site, this is ‚Äúhttp://mystonline.com‚Äù. It is used to build the full redirection URL. You can either hardcode this in PHP, like this:</p>

<pre title="Setting the base URL"><code class="language-php">$base_url = 'http://mystonline.com';
</code></pre>


<p>‚Ä¶ or you can set the <code>base_url</code> confguration attribute in ‚Äúconfig.yaml‚Äù and generate the PHP code for setting it (a bit icky, but DRYer):</p>

<pre title="Setting the base URL (DRYer version)"><code class="language-php">$base_url = &#x27;&lt;%= @site.config[:base_url] %&gt;&#x27;;
</code></pre>


<p>That‚Äôs the end of this guide. Now, you have a web site in multiple languages where every language is given equal attention. For example, a German speaking person can arrive on the site and be redirected to the German version of the site, and even the URLs will be in German.</p>
;T;@9"/docs/1-introduction/{;{
;I"i<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<title>SeqWare ‚Ä∫ Introduction to SeqWare</title>
<meta content="nanoc 3.4.0" name="generator">
<link href="../../assets/style-v17.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://feeds.feedburner.com/seqware" rel="alternate" title="The SeqWare Blog" type="application/atom+xml">
<script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-34523087-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script>
</head>
<body>
<div class="wrapper">
<!-- ***** navigation ***** -->
<div class="nav">
<ol>
<li><a href="../../"><span>Home</span></a></li>
<li><a href="../../blog/"><span>News</span></a></li>
<li><a href="../"><span>Documentation</span></a></li>
<li><a href="../../community/"><span>Community</span></a></li>
<li><a href="../../partners/"><span>Partners</span></a></li>
<li><a href="../../about/"><span>About</span></a></li>
</ol>
</div>
<!-- ***** sidebar ***** -->
<div class="side">
<ol>
<li>
<span class="active" title="You're here."><span>Introduction to SeqWare</span></span><ol class="toc">
<li><a href="#what-is-seqware">What is SeqWare?</a></li>
<li><a href="#why-use-seqware">Why use SeqWare?</a></li>
<li><a href="#why-not-use-seqware">Why not use SeqWare?</a></li>
<li><a href="#who-uses-seqware">Who uses SeqWare?</a></li>
<li><a href="#how-to-use-seqware">How to use SeqWare?</a></li>
<li><a href="#similar-projects">Similar Projects</a></li>
</ol>
</li>
<li><a href="../2-installation/"><span>Installation</span></a></li>
<li><a href="../3-getting-started/"><span>Getting Started</span></a></li>
<li><a href="../4-metadb/"><span>SeqWare MetaDB</span></a></li>
<li><a href="../5-portal/"><span>SeqWare Portal</span></a></li>
<li><a href="../6-pipeline/"><span>SeqWare Pipeline</span></a></li>
<li><a href="../7-web-service/"><span>SeqWare Web Service</span></a></li>
<li><a href="../8-query-engine/"><span>SeqWare Query Engine</span></a></li>
<li><a href="../9-glossary/"><span>Glossary</span></a></li>
<li><a href="../10-faq/"><span>Frequently Asked Questions</span></a></li>
<li><a href="../11-api/"><span>APIs</span></a></li>
</ol>
</div>
<!-- ***** body ***** -->
<div class="body">
<div class="article">
<div class="header">
<h1>Introduction to SeqWare</h1>
</div>
<div class="section" id="what-is-seqware">
<h2>What is SeqWare?</h2>

<p>SeqWare is an open-source bioinformatics workflow deployment and management system. Its core features include:</p>

<ul>
<li>A centralized metadata database that tracks samples, annotations and analyses, and a web application to visualize it</li>
<li>A module specification and execution engine that lets you package computational tools and use them to build and run complex analytical workflows</li>
<li>Support for running workflows irrespective of the underlying cluster environment</li>
<li>An advanced query engine that allows you to store and search variants and annotations produced in your workflows using a highly-scalable, distributed database backend</li>
</ul>
</div>
<div class="section" id="why-use-seqware">
<h2>Why use SeqWare?</h2>

<p>You would want to use SeqWare in order to build workflows and processes that automate large volumes of NGS analysis, that track analytical events in a database (provenance), and that link analysis to wet lab entities like samples and studies. You would especially want to use SeqWare if you needed to do the above on both a local and cloud-based environments or if you have a lot of different types of clusters to submit jobs to.</p>

</div>
<div class="section" id="why-not-use-seqware">
<h2>Why not use SeqWare?</h2>

<p>You would not want to use SeqWare if you have a small number of NGS samples to analyze, if you need to interactively explore tools and settings for your project, or you want pre-built workflows that will analyze data &#8220;out-of-the-box&#8221;.  If this is you, we would instead recommend you look for commercial solutions such as Nimbus Informatics or DNAnexus for pre-built workflows ready to run on the cloud or Galaxy for interactive analysis either locally or on the cloud. Remember, SeqWare is an infrastructure toolkit not an analysis pipeline for particular NGS experimental designs.</p>

</div>
<div class="section" id="who-uses-seqware">
<h2>Who uses SeqWare?</h2>

<p>The type of users targeted by the SeqWare project are ones that have massive amounts of NGS data to analyze (TB to PB), have specific/custom analytical workflows in mind, that their workflows are typically more complex than the generic workflows offered by other projects, want to automate and track analysis of their data, and need to be able to run on a local cluster or the cloud.</p>

</div>
<div class="section" id="how-to-use-seqware">
<h2>How to use SeqWare?</h2>

<p>There are currently 3 different ways to work with SeqWare:</p>

<ul>
<li>a local VM (that may or may not be connected to a local cluster)</li>
<li>a VM on Amazon&#8217;s cloud</li>
<li>or a hosted SeqWare instance or cluster provided by Nimbus Informatics, our commercial partner</li>
</ul>
</div>
<div class="section" id="similar-projects">
<h2>Similar Projects</h2>

<p>There are several workflow engines which can be used for NGS data analysis: <a href="http://ergatis.sourceforge.net/">Ergatis</a>, <a href="http://galaxy.psu.edu/">Galaxy</a>, <a href="http://pegasus.isi.edu/">Pegasus</a> and <a href="http://www.taverna.org.uk/">Taverna</a>.
Each has their own strengths and weaknesses depending on how easy they are to
work with vs. how much data they can process.  Some of these provide ready-made
workflows for analyzing NGS data while others require you to build your own.
There are also commercial solutions available on the cloud that typically
provide a one-size-fits all model in which they have a collection of
standardized workflows that a user can choose from. Examples include <a href="http://basespace.illumina.com/">BaseSpace by Illumina</a>, <a href="http://dnanexus.com/">DNAnexus</a> and <a href="http://www.samsunggenome.com/">Samsung SDS Bioinformatics Service</a>. These commercial services attempt to accomplish similar things to a SeqWare
install but they offer the analysis itself as a service whereas SeqWare allows
you to create local or cloud-based infrastructure similar to what powers these commercial
offerings.</p>
</div>
</div>
</div>
</div>
<!-- ***** footer ***** -->
<div id="footer">
<p>SeqWare ¬© 2007‚Äì2012 Brian O&#8217;Connor. SeqWare is released under the a <a rel="license" href="http://www.gnu.org/licenses/licenses.html">GNU GPL v3</a>. This site is built using the excellent <a href="http://nanoc.stoneship.org/">nanoc</a> tool and example site along with the <a href="http://www.fonts.info/info/press/free-fonts-for-font-face-embedding.htm">Graublau</a> and <a href="http://scripts.sil.org/Gentium">Gentium</a> fonts.</p>
</div>
</body>
</html>
;T;	I",What is SeqWare?
--------------

SeqWare is an open-source bioinformatics workflow deployment and management system. Its core features include:

* A centralized metadata database that tracks samples, annotations and analyses, and a web application to visualize it
* A module specification and execution engine that lets you package computational tools and use them to build and run complex analytical workflows
* Support for running workflows irrespective of the underlying cluster environment
* An advanced query engine that allows you to store and search variants and annotations produced in your workflows using a highly-scalable, distributed database backend

Why use SeqWare?
--------------

You would want to use SeqWare in order to build workflows and processes that automate large volumes of NGS analysis, that track analytical events in a database (provenance), and that link analysis to wet lab entities like samples and studies. You would especially want to use SeqWare if you needed to do the above on both a local and cloud-based environments or if you have a lot of different types of clusters to submit jobs to.

Why not use SeqWare?
--------------

You would not want to use SeqWare if you have a small number of NGS samples to analyze, if you need to interactively explore tools and settings for your project, or you want pre-built workflows that will analyze data "out-of-the-box".  If this is you, we would instead recommend you look for commercial solutions such as Nimbus Informatics or DNAnexus for pre-built workflows ready to run on the cloud or Galaxy for interactive analysis either locally or on the cloud. Remember, SeqWare is an infrastructure toolkit not an analysis pipeline for particular NGS experimental designs.

Who uses SeqWare?
--------------

The type of users targeted by the SeqWare project are ones that have massive amounts of NGS data to analyze (TB to PB), have specific/custom analytical workflows in mind, that their workflows are typically more complex than the generic workflows offered by other projects, want to automate and track analysis of their data, and need to be able to run on a local cluster or the cloud. 

How to use SeqWare?
--------------

There are currently 3 different ways to work with SeqWare:

* a local VM (that may or may not be connected to a local cluster)
* a VM on Amazon's cloud
* or a hosted SeqWare instance or cluster provided by Nimbus Informatics, our commercial partner

Similar Projects
----------------

<%

similar_projects = [
  { :name => 'Galaxy',          :lang => 'XML', :url => 'http://galaxy.psu.edu/' },
  { :name => 'Taverna',       :lang => 'XML', :url => 'http://www.taverna.org.uk/' },
  { :name => 'Ergatis',       :lang => 'XML', :url => 'http://ergatis.sourceforge.net/' },
  { :name => 'Pegasus',       :lang => 'XML', :url => 'http://pegasus.isi.edu/' },
  { :name => 'DNAnexus',       :lang => 'private', :url => 'http://dnanexus.com/' },
  { :name => 'Samsung SDS Bioinformatics Service',       :lang => 'private', :url => 'http://www.samsunggenome.com/' },
  { :name => 'BaseSpace by Illumina',       :lang => 'private', :url => 'http://basespace.illumina.com/' },
]

def join_with_and(arr)
  if arr.size > 1
    arr[0..-2].join(', ') + ' and ' + arr[-1]
  else
    arr.join
  end
end

%>

There are several workflow engines which can be used for NGS data analysis: <%=
join_with_and(similar_projects.select { |p| p[:lang] == 'XML' }.sort_by { |p|
p[:name].downcase }.map { |p| %[<a href="#{p[:url]}">#{p[:name]}</a>] }) %>.
Each has their own strengths and weaknesses depending on how easy they are to
work with vs. how much data they can process.  Some of these provide ready-made
workflows for analyzing NGS data while others require you to build your own.
There are also commercial solutions available on the cloud that typically
provide a one-size-fits all model in which they have a collection of
standardized workflows that a user can choose from. Examples include <%=
join_with_and(similar_projects.select { |p| p[:lang] == 'private' }.sort_by {
|p| p[:name].downcase }.map { |p| %[<a href="#{p[:url]}">#{p[:name]}</a>] })
%>. These commercial services attempt to accomplish similar things to a SeqWare
install but they offer the analysis itself as a service whereas SeqWare allows
you to create local or cloud-based infrastructure similar to what powers these commercial
offerings.;T;
I"«<div class="section" id="what-is-seqware">
<h2>What is SeqWare?</h2>

<p>SeqWare is an open-source bioinformatics workflow deployment and management system. Its core features include:</p>

<ul>
<li>A centralized metadata database that tracks samples, annotations and analyses, and a web application to visualize it</li>
<li>A module specification and execution engine that lets you package computational tools and use them to build and run complex analytical workflows</li>
<li>Support for running workflows irrespective of the underlying cluster environment</li>
<li>An advanced query engine that allows you to store and search variants and annotations produced in your workflows using a highly-scalable, distributed database backend</li>
</ul>
</div><div class="section" id="why-use-seqware">
<h2>Why use SeqWare?</h2>

<p>You would want to use SeqWare in order to build workflows and processes that automate large volumes of NGS analysis, that track analytical events in a database (provenance), and that link analysis to wet lab entities like samples and studies. You would especially want to use SeqWare if you needed to do the above on both a local and cloud-based environments or if you have a lot of different types of clusters to submit jobs to.</p>

</div><div class="section" id="why-not-use-seqware">
<h2>Why not use SeqWare?</h2>

<p>You would not want to use SeqWare if you have a small number of NGS samples to analyze, if you need to interactively explore tools and settings for your project, or you want pre-built workflows that will analyze data "out-of-the-box".  If this is you, we would instead recommend you look for commercial solutions such as Nimbus Informatics or DNAnexus for pre-built workflows ready to run on the cloud or Galaxy for interactive analysis either locally or on the cloud. Remember, SeqWare is an infrastructure toolkit not an analysis pipeline for particular NGS experimental designs.</p>

</div><div class="section" id="who-uses-seqware">
<h2>Who uses SeqWare?</h2>

<p>The type of users targeted by the SeqWare project are ones that have massive amounts of NGS data to analyze (TB to PB), have specific/custom analytical workflows in mind, that their workflows are typically more complex than the generic workflows offered by other projects, want to automate and track analysis of their data, and need to be able to run on a local cluster or the cloud.</p>

</div><div class="section" id="how-to-use-seqware">
<h2>How to use SeqWare?</h2>

<p>There are currently 3 different ways to work with SeqWare:</p>

<ul>
<li>a local VM (that may or may not be connected to a local cluster)</li>
<li>a VM on Amazon's cloud</li>
<li>or a hosted SeqWare instance or cluster provided by Nimbus Informatics, our commercial partner</li>
</ul>
</div><div class="section" id="similar-projects">
<h2>Similar Projects</h2>

<p>There are several workflow engines which can be used for NGS data analysis: <a href="http://ergatis.sourceforge.net/">Ergatis</a>, <a href="http://galaxy.psu.edu/">Galaxy</a>, <a href="http://pegasus.isi.edu/">Pegasus</a> and <a href="http://www.taverna.org.uk/">Taverna</a>.
Each has their own strengths and weaknesses depending on how easy they are to
work with vs. how much data they can process.  Some of these provide ready-made
workflows for analyzing NGS data while others require you to build your own.
There are also commercial solutions available on the cloud that typically
provide a one-size-fits all model in which they have a collection of
standardized workflows that a user can choose from. Examples include <a href="http://basespace.illumina.com/">BaseSpace by Illumina</a>, <a href="http://dnanexus.com/">DNAnexus</a> and <a href="http://www.samsunggenome.com/">Samsung SDS Bioinformatics Service</a>. These commercial services attempt to accomplish similar things to a SeqWare
install but they offer the analysis itself as a service whereas SeqWare allows
you to create local or cloud-based infrastructure similar to what powers these commercial
offerings.</p>
</div>;T;I"ú<h2>What is SeqWare?</h2>

<p>SeqWare is an open-source bioinformatics workflow deployment and management system. Its core features include:</p>

<ul>
<li>A centralized metadata database that tracks samples, annotations and analyses, and a web application to visualize it</li>
<li>A module specification and execution engine that lets you package computational tools and use them to build and run complex analytical workflows</li>
<li>Support for running workflows irrespective of the underlying cluster environment</li>
<li>An advanced query engine that allows you to store and search variants and annotations produced in your workflows using a highly-scalable, distributed database backend</li>
</ul>


<h2>Why use SeqWare?</h2>

<p>You would want to use SeqWare in order to build workflows and processes that automate large volumes of NGS analysis, that track analytical events in a database (provenance), and that link analysis to wet lab entities like samples and studies. You would especially want to use SeqWare if you needed to do the above on both a local and cloud-based environments or if you have a lot of different types of clusters to submit jobs to.</p>

<h2>Why not use SeqWare?</h2>

<p>You would not want to use SeqWare if you have a small number of NGS samples to analyze, if you need to interactively explore tools and settings for your project, or you want pre-built workflows that will analyze data "out-of-the-box".  If this is you, we would instead recommend you look for commercial solutions such as Nimbus Informatics or DNAnexus for pre-built workflows ready to run on the cloud or Galaxy for interactive analysis either locally or on the cloud. Remember, SeqWare is an infrastructure toolkit not an analysis pipeline for particular NGS experimental designs.</p>

<h2>Who uses SeqWare?</h2>

<p>The type of users targeted by the SeqWare project are ones that have massive amounts of NGS data to analyze (TB to PB), have specific/custom analytical workflows in mind, that their workflows are typically more complex than the generic workflows offered by other projects, want to automate and track analysis of their data, and need to be able to run on a local cluster or the cloud.</p>

<h2>How to use SeqWare?</h2>

<p>There are currently 3 different ways to work with SeqWare:</p>

<ul>
<li>a local VM (that may or may not be connected to a local cluster)</li>
<li>a VM on Amazon's cloud</li>
<li>or a hosted SeqWare instance or cluster provided by Nimbus Informatics, our commercial partner</li>
</ul>


<h2>Similar Projects</h2>

<p>There are several workflow engines which can be used for NGS data analysis: <a href="http://ergatis.sourceforge.net/">Ergatis</a>, <a href="http://galaxy.psu.edu/">Galaxy</a>, <a href="http://pegasus.isi.edu/">Pegasus</a> and <a href="http://www.taverna.org.uk/">Taverna</a>.
Each has their own strengths and weaknesses depending on how easy they are to
work with vs. how much data they can process.  Some of these provide ready-made
workflows for analyzing NGS data while others require you to build your own.
There are also commercial solutions available on the cloud that typically
provide a one-size-fits all model in which they have a collection of
standardized workflows that a user can choose from. Examples include <a href="http://basespace.illumina.com/">BaseSpace by Illumina</a>, <a href="http://dnanexus.com/">DNAnexus</a> and <a href="http://www.samsunggenome.com/">Samsung SDS Bioinformatics Service</a>. These commercial services attempt to accomplish similar things to a SeqWare
install but they offer the analysis itself as a service whereas SeqWare allows
you to create local or cloud-based infrastructure similar to what powers these commercial
offerings.</p>
;T;@@"/docs/3-getting-started/{;{
;I"€<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<title>SeqWare ‚Ä∫ Getting Started</title>
<meta content="nanoc 3.4.0" name="generator">
<link href="../../assets/style-v17.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://feeds.feedburner.com/seqware" rel="alternate" title="The SeqWare Blog" type="application/atom+xml">
<script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-34523087-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script>
</head>
<body>
<div class="wrapper">
<!-- ***** navigation ***** -->
<div class="nav">
<ol>
<li><a href="../../"><span>Home</span></a></li>
<li><a href="../../blog/"><span>News</span></a></li>
<li><a href="../"><span>Documentation</span></a></li>
<li><a href="../../community/"><span>Community</span></a></li>
<li><a href="../../partners/"><span>Partners</span></a></li>
<li><a href="../../about/"><span>About</span></a></li>
</ol>
</div>
<!-- ***** sidebar ***** -->
<div class="side">
<ol>
<li><a href="../1-introduction/"><span>Introduction to SeqWare</span></a></li>
<li><a href="../2-installation/"><span>Installation</span></a></li>
<li>
<span class="active" title="You're here."><span>Getting Started</span></span><ol class="toc">
<li><a href="#by-the-end-of-these-tutorials">By the End of These Tutorials</a></li>
<li><a href="#user-tutorial">User Tutorial</a></li>
<li><a href="#developer-tutorial">Developer Tutorial</a></li>
<li><a href="#administrator-tutorial">Administrator Tutorial</a></li>
</ol>
</li>
<li><a href="../4-metadb/"><span>SeqWare MetaDB</span></a></li>
<li><a href="../5-portal/"><span>SeqWare Portal</span></a></li>
<li><a href="../6-pipeline/"><span>SeqWare Pipeline</span></a></li>
<li><a href="../7-web-service/"><span>SeqWare Web Service</span></a></li>
<li><a href="../8-query-engine/"><span>SeqWare Query Engine</span></a></li>
<li><a href="../9-glossary/"><span>Glossary</span></a></li>
<li><a href="../10-faq/"><span>Frequently Asked Questions</span></a></li>
<li><a href="../11-api/"><span>APIs</span></a></li>
</ol>
</div>
<!-- ***** body ***** -->
<div class="body">
<div class="article">
<div class="header">
<h1>Getting Started</h1>
</div>
<p>The majority of this guide is dedicated to walking users and developers through the basics of using SeqWare. We assume that people are most interested in the Pipeline sub-project and focus most of our time on that.  The examples below will all be based on a local VM but the environment on our cloud instance is almost identical, so most of the examples below</p>

<div class="section" id="by-the-end-of-these-tutorials">
<h2>By the End of These Tutorials</h2>

<p>By the end of these tutorials you will:</p>

<ul>
<li>create studies, experiments, and samples in the MetaDB</li>
  <li>run a HelloWorld workflow in Pipeline</li>
  <li>create a new workflow bundle in Pipeline</li>
  <li>install and schedule your new workflow bundle in Pipeline and MetaDB</li>
  <li>generate a report on the outputs of your workflows in Pipeline and Portal</li>
  <li>get an overview of the administration process for SeqWare</li>
  <li>be prepared to move on to more detailed documentation for each sub-project</li>
</ul>
<p>Please launch your local VM and log in as <kbd>seqware</kbd> at this time.</p>

</div>
<div class="section" id="user-tutorial">
<h2>User Tutorial</h2>

<p>The first step is to follow the <a href="user-tutorial/">User Tutorial</a> which will explain how you use the SeqWare system to launch workflows and analyze data.  It touches on almost every tool in the SeqWare project.</p>

</div>
<div class="section" id="developer-tutorial">
<h2>Developer Tutorial</h2>

<p>The <a href="developer-tutorial/">Developer Tutorial</a> picks up where the <a href="user-tutorial/">User Tutorial</a> left off and shows you how to create new workflow bundles and make those available to other users of the system. This guide also gives a very basic overview of developing on the SeqWare codebase for those interested in extending the system and contributing code back to the project.</p>

</div>
<div class="section" id="administrator-tutorial">
<h2>Administrator Tutorial</h2>

<p>Finally the last tutorial is the <a href="admin-tutorial/">Admin Tutorial</a> which gives a general overview of how the various SeqWare pieces fit together to automate NGS analysis within a large institution like <a href="http://oicr.on.ca">OICR</a>.</p>
</div>
</div>
</div>
</div>
<!-- ***** footer ***** -->
<div id="footer">
<p>SeqWare ¬© 2007‚Äì2012 Brian O&#8217;Connor. SeqWare is released under the a <a rel="license" href="http://www.gnu.org/licenses/licenses.html">GNU GPL v3</a>. This site is built using the excellent <a href="http://nanoc.stoneship.org/">nanoc</a> tool and example site along with the <a href="http://www.fonts.info/info/press/free-fonts-for-font-face-embedding.htm">Graublau</a> and <a href="http://scripts.sil.org/Gentium">Gentium</a> fonts.</p>
</div>
</body>
</html>
;T;	I"ÄThe majority of this guide is dedicated to walking users and developers through the basics of using SeqWare. We assume that people are most interested in the Pipeline sub-project and focus most of our time on that.  The examples below will all be based on a local VM but the environment on our cloud instance is almost identical, so most of the examples below

## By the End of These Tutorials

By the end of these tutorials you will:

* create studies, experiments, and samples in the MetaDB
* run a HelloWorld workflow in Pipeline
* create a new workflow bundle in Pipeline
* install and schedule your new workflow bundle in Pipeline and MetaDB
* generate a report on the outputs of your workflows in Pipeline and Portal
* get an overview of the administration process for SeqWare
* be prepared to move on to more detailed documentation for each sub-project

Please launch your local VM and log in as <kbd>seqware</kbd> at this time.

## User Tutorial

The first step is to follow the [User Tutorial](/docs/3-getting-started/user-tutorial/) which will explain how you use the SeqWare system to launch workflows and analyze data.  It touches on almost every tool in the SeqWare project.

## Developer Tutorial

The [Developer Tutorial](/docs/3-getting-started/developer-tutorial/) picks up where the [User Tutorial](/docs/3-getting-started/user-tutorial/) left off and shows you how to create new workflow bundles and make those available to other users of the system. This guide also gives a very basic overview of developing on the SeqWare codebase for those interested in extending the system and contributing code back to the project.

## Administrator Tutorial

Finally the last tutorial is the [Admin Tutorial](/docs/3-getting-started/admin-tutorial/) which gives a general overview of how the various SeqWare pieces fit together to automate NGS analysis within a large institution like [OICR](http://oicr.on.ca).;T;
I"	<p>The majority of this guide is dedicated to walking users and developers through the basics of using SeqWare. We assume that people are most interested in the Pipeline sub-project and focus most of our time on that.  The examples below will all be based on a local VM but the environment on our cloud instance is almost identical, so most of the examples below</p>

<div class="section" id="by-the-end-of-these-tutorials">
<h2>By the End of These Tutorials</h2>

<p>By the end of these tutorials you will:</p>

<ul>
<li>create studies, experiments, and samples in the MetaDB</li>
  <li>run a HelloWorld workflow in Pipeline</li>
  <li>create a new workflow bundle in Pipeline</li>
  <li>install and schedule your new workflow bundle in Pipeline and MetaDB</li>
  <li>generate a report on the outputs of your workflows in Pipeline and Portal</li>
  <li>get an overview of the administration process for SeqWare</li>
  <li>be prepared to move on to more detailed documentation for each sub-project</li>
</ul>
<p>Please launch your local VM and log in as <kbd>seqware</kbd> at this time.</p>

</div><div class="section" id="user-tutorial">
<h2>User Tutorial</h2>

<p>The first step is to follow the <a href="/docs/3-getting-started/user-tutorial/">User Tutorial</a> which will explain how you use the SeqWare system to launch workflows and analyze data.  It touches on almost every tool in the SeqWare project.</p>

</div><div class="section" id="developer-tutorial">
<h2>Developer Tutorial</h2>

<p>The <a href="/docs/3-getting-started/developer-tutorial/">Developer Tutorial</a> picks up where the <a href="/docs/3-getting-started/user-tutorial/">User Tutorial</a> left off and shows you how to create new workflow bundles and make those available to other users of the system. This guide also gives a very basic overview of developing on the SeqWare codebase for those interested in extending the system and contributing code back to the project.</p>

</div><div class="section" id="administrator-tutorial">
<h2>Administrator Tutorial</h2>

<p>Finally the last tutorial is the <a href="/docs/3-getting-started/admin-tutorial/">Admin Tutorial</a> which gives a general overview of how the various SeqWare pieces fit together to automate NGS analysis within a large institution like <a href="http://oicr.on.ca">OICR</a>.</p>
</div>;T;I"D<p>The majority of this guide is dedicated to walking users and developers through the basics of using SeqWare. We assume that people are most interested in the Pipeline sub-project and focus most of our time on that.  The examples below will all be based on a local VM but the environment on our cloud instance is almost identical, so most of the examples below</p>

<h2>By the End of These Tutorials</h2>

<p>By the end of these tutorials you will:</p>

<ul>
  <li>create studies, experiments, and samples in the MetaDB</li>
  <li>run a HelloWorld workflow in Pipeline</li>
  <li>create a new workflow bundle in Pipeline</li>
  <li>install and schedule your new workflow bundle in Pipeline and MetaDB</li>
  <li>generate a report on the outputs of your workflows in Pipeline and Portal</li>
  <li>get an overview of the administration process for SeqWare</li>
  <li>be prepared to move on to more detailed documentation for each sub-project</li>
</ul>

<p>Please launch your local VM and log in as <kbd>seqware</kbd> at this time.</p>

<h2>User Tutorial</h2>

<p>The first step is to follow the <a href="/docs/3-getting-started/user-tutorial/">User Tutorial</a> which will explain how you use the SeqWare system to launch workflows and analyze data.  It touches on almost every tool in the SeqWare project.</p>

<h2>Developer Tutorial</h2>

<p>The <a href="/docs/3-getting-started/developer-tutorial/">Developer Tutorial</a> picks up where the <a href="/docs/3-getting-started/user-tutorial/">User Tutorial</a> left off and shows you how to create new workflow bundles and make those available to other users of the system. This guide also gives a very basic overview of developing on the SeqWare codebase for those interested in extending the system and contributing code back to the project.</p>

<h2>Administrator Tutorial</h2>

<p>Finally the last tutorial is the <a href="/docs/3-getting-started/admin-tutorial/">Admin Tutorial</a> which gives a general overview of how the various SeqWare pieces fit together to automate NGS analysis within a large institution like <a href="http://oicr.on.ca">OICR</a>.</p>
;T;@G"/release-notes/{;{
;I")<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<title>SeqWare ‚Ä∫ Release Notes</title>
<meta content="nanoc 3.4.0" name="generator">
<link href="../assets/style-v17.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://feeds.feedburner.com/seqware" rel="alternate" title="The SeqWare Blog" type="application/atom+xml">
<script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-34523087-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script>
</head>
<body>
<div class="wrapper">
<!-- ***** navigation ***** -->
<div class="nav">
<ol>
<li><a href="../"><span>Home</span></a></li>
<li><a href="../blog/"><span>News</span></a></li>
<li><a href="../docs/"><span>Documentation</span></a></li>
<li><a href="../community/"><span>Community</span></a></li>
<li><a href="../partners/"><span>Partners</span></a></li>
<li><a href="../about/"><span>About</span></a></li>
</ol>
</div>
<!-- ***** sidebar ***** -->
<div class="side">
<div class="section odd">
<script charset="utf-8" src="http://widgets.twimg.com/j/2/widget.js"></script><script> new TWTR.Widget({   version: 2,   type: 'profile',   rpp: 4,   interval: 30000,   width: 250,   height: 370,   theme: {     shell: {       background: '#daebff',       color: '#153b66'     },     tweets: {       background: '#daebff',       color: '#000000',       links: '#153b66'     }   },   features: {     scrollbar: false,     loop: false,     live: true,     behavior: 'all'   } }).render().setUser('seqware').start(); </script>
</div>
</div>
<!-- ***** body ***** -->
<div class="body">
<div class="article">
<div class="header">
<h1>Release Notes</h1>
</div>
<div class="section" id="0-12-5-2012-08-06">
<h2>0.12.5 (2012-08-06)</h2>

<div class="section" id="improvement">
<h3>Improvement</h3>

<ul>
<li>SEQWARE-955 - hboot.res</li>
<li>SEQWARE-969 - Implement HighCapacity FeatureSets</li>
<li>SEQWARE-975 - Create and Tag Release</li>
<li>SEQWARE-1004 - Add guava dependencies to our artifactory</li>
</ul>
</div>
<div class="section" id="story">
<h3>Story</h3>

<ul>
<li>SEQWARE-555 - Design a Framework for Deciders</li>
<li>SEQWARE-804 - VM for SeqWare (Virtual Box)</li>
<li>SEQWARE-985 - ProvisionFiles needs better error checking</li>
</ul>
</div>
<div class="section" id="task">
<h3>Task</h3>

<ul>
<li>SEQWARE-1014 - workflow installation error</li>
</ul>
</div>
<div class="section" id="technical-task">
<h3>Technical task</h3>

<ul>
<li>SEQWARE-710 - Implement queries for: query by tags</li>
<li>SEQWARE-712 - Implement queries for: overlap queries</li>
<li>SEQWARE-713 - Implement queries for: intersect queries</li>
<li>SEQWARE-752 - Create in-memory back-end implementation and tests for plugin interface and FeatureStoreInterface</li>
<li>SEQWARE-941 - Fix headless workflow error with GATK and Variant annotation</li>
<li>SEQWARE-960 - Test error propagation in real workflows</li>
<li>SEQWARE-965 - Ensure correct dependencies for jar, runnable command-line tools</li>
<li>SEQWARE-966 - Refactoring for presentation</li>
<li>SEQWARE-967 - Complete Javadoc</li>
<li>SEQWARE-968 - Complete New Query Engine Developer Guide</li>
<li>SEQWARE-970 - Explicitly implement multiple Features in a location using the existing SGID</li>
<li>SEQWARE-971 - Implement tests for multiple Features in a location</li>
<li>SEQWARE-972 - Implement HighCapacityFeatureSet class</li>
<li>SEQWARE-973 - Optimize TableScanning calls to take advantage of new classes</li>
<li>SEQWARE-974 - Upgrade command-line utilities to new API</li>
<li>SEQWARE-1001 - Expose serialization versioning to the user-level</li>
<li>SEQWARE-1002 - Improve encrypt/decryption</li>
<li>SEQWARE-1003 - Improvements to ln -s error checking</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<!-- ***** footer ***** -->
<div id="footer">
<p>SeqWare ¬© 2007‚Äì2012 Brian O&#8217;Connor. SeqWare is released under the a <a rel="license" href="http://www.gnu.org/licenses/licenses.html">GNU GPL v3</a>. This site is built using the excellent <a href="http://nanoc.stoneship.org/">nanoc</a> tool and example site along with the <a href="http://www.fonts.info/info/press/free-fonts-for-font-face-embedding.htm">Graublau</a> and <a href="http://scripts.sil.org/Gentium">Gentium</a> fonts.</p>
</div>
</body>
</html>
;T;	I"<## 0.12.5 (2012-08-06)

###Improvement
* SEQWARE-955 - hboot.res
* SEQWARE-969 - Implement HighCapacity FeatureSets
* SEQWARE-975 - Create and Tag Release
* SEQWARE-1004 - Add guava dependencies to our artifactory

###Story
* SEQWARE-555 - Design a Framework for Deciders
* SEQWARE-804 - VM for SeqWare (Virtual Box)
* SEQWARE-985 - ProvisionFiles needs better error checking

###Task
* SEQWARE-1014 - workflow installation error

###Technical task

* SEQWARE-710 - Implement queries for: query by tags
* SEQWARE-712 - Implement queries for: overlap queries
* SEQWARE-713 - Implement queries for: intersect queries
* SEQWARE-752 - Create in-memory back-end implementation and tests for plugin interface and FeatureStoreInterface
* SEQWARE-941 - Fix headless workflow error with GATK and Variant annotation
* SEQWARE-960 - Test error propagation in real workflows
* SEQWARE-965 - Ensure correct dependencies for jar, runnable command-line tools
* SEQWARE-966 - Refactoring for presentation
* SEQWARE-967 - Complete Javadoc
* SEQWARE-968 - Complete New Query Engine Developer Guide
* SEQWARE-970 - Explicitly implement multiple Features in a location using the existing SGID
* SEQWARE-971 - Implement tests for multiple Features in a location
* SEQWARE-972 - Implement HighCapacityFeatureSet class
* SEQWARE-973 - Optimize TableScanning calls to take advantage of new classes
* SEQWARE-974 - Upgrade command-line utilities to new API
* SEQWARE-1001 - Expose serialization versioning to the user-level
* SEQWARE-1002 - Improve encrypt/decryption
* SEQWARE-1003 - Improvements to ln -s error checking;T;
I"<div class="section" id="0-12-5-2012-08-06">
<h2>0.12.5 (2012-08-06)</h2>

<div class="section" id="improvement">
<h3>Improvement</h3>

<ul>
<li>SEQWARE-955 - hboot.res</li>
<li>SEQWARE-969 - Implement HighCapacity FeatureSets</li>
<li>SEQWARE-975 - Create and Tag Release</li>
<li>SEQWARE-1004 - Add guava dependencies to our artifactory</li>
</ul>
</div>
<div class="section" id="story">
<h3>Story</h3>

<ul>
<li>SEQWARE-555 - Design a Framework for Deciders</li>
<li>SEQWARE-804 - VM for SeqWare (Virtual Box)</li>
<li>SEQWARE-985 - ProvisionFiles needs better error checking</li>
</ul>
</div>
<div class="section" id="task">
<h3>Task</h3>

<ul>
<li>SEQWARE-1014 - workflow installation error</li>
</ul>
</div>
<div class="section" id="technical-task">
<h3>Technical task</h3>

<ul>
<li>SEQWARE-710 - Implement queries for: query by tags</li>
<li>SEQWARE-712 - Implement queries for: overlap queries</li>
<li>SEQWARE-713 - Implement queries for: intersect queries</li>
<li>SEQWARE-752 - Create in-memory back-end implementation and tests for plugin interface and FeatureStoreInterface</li>
<li>SEQWARE-941 - Fix headless workflow error with GATK and Variant annotation</li>
<li>SEQWARE-960 - Test error propagation in real workflows</li>
<li>SEQWARE-965 - Ensure correct dependencies for jar, runnable command-line tools</li>
<li>SEQWARE-966 - Refactoring for presentation</li>
<li>SEQWARE-967 - Complete Javadoc</li>
<li>SEQWARE-968 - Complete New Query Engine Developer Guide</li>
<li>SEQWARE-970 - Explicitly implement multiple Features in a location using the existing SGID</li>
<li>SEQWARE-971 - Implement tests for multiple Features in a location</li>
<li>SEQWARE-972 - Implement HighCapacityFeatureSet class</li>
<li>SEQWARE-973 - Optimize TableScanning calls to take advantage of new classes</li>
<li>SEQWARE-974 - Upgrade command-line utilities to new API</li>
<li>SEQWARE-1001 - Expose serialization versioning to the user-level</li>
<li>SEQWARE-1002 - Improve encrypt/decryption</li>
<li>SEQWARE-1003 - Improvements to ln -s error checking</li>
</ul>
</div>
</div>;T;I"D<h2>0.12.5 (2012-08-06)</h2>

<h3>Improvement</h3>

<ul>
<li>SEQWARE-955 - hboot.res</li>
<li>SEQWARE-969 - Implement HighCapacity FeatureSets</li>
<li>SEQWARE-975 - Create and Tag Release</li>
<li>SEQWARE-1004 - Add guava dependencies to our artifactory</li>
</ul>


<h3>Story</h3>

<ul>
<li>SEQWARE-555 - Design a Framework for Deciders</li>
<li>SEQWARE-804 - VM for SeqWare (Virtual Box)</li>
<li>SEQWARE-985 - ProvisionFiles needs better error checking</li>
</ul>


<h3>Task</h3>

<ul>
<li>SEQWARE-1014 - workflow installation error</li>
</ul>


<h3>Technical task</h3>

<ul>
<li>SEQWARE-710 - Implement queries for: query by tags</li>
<li>SEQWARE-712 - Implement queries for: overlap queries</li>
<li>SEQWARE-713 - Implement queries for: intersect queries</li>
<li>SEQWARE-752 - Create in-memory back-end implementation and tests for plugin interface and FeatureStoreInterface</li>
<li>SEQWARE-941 - Fix headless workflow error with GATK and Variant annotation</li>
<li>SEQWARE-960 - Test error propagation in real workflows</li>
<li>SEQWARE-965 - Ensure correct dependencies for jar, runnable command-line tools</li>
<li>SEQWARE-966 - Refactoring for presentation</li>
<li>SEQWARE-967 - Complete Javadoc</li>
<li>SEQWARE-968 - Complete New Query Engine Developer Guide</li>
<li>SEQWARE-970 - Explicitly implement multiple Features in a location using the existing SGID</li>
<li>SEQWARE-971 - Implement tests for multiple Features in a location</li>
<li>SEQWARE-972 - Implement HighCapacityFeatureSet class</li>
<li>SEQWARE-973 - Optimize TableScanning calls to take advantage of new classes</li>
<li>SEQWARE-974 - Upgrade command-line utilities to new API</li>
<li>SEQWARE-1001 - Expose serialization versioning to the user-level</li>
<li>SEQWARE-1002 - Improve encrypt/decryption</li>
<li>SEQWARE-1003 - Improvements to ln -s error checking</li>
</ul>

;T;@N"/{;{	;I"U<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<title>SeqWare ¬ª Home</title>
<meta content="nanoc 3.4.0" name="generator">
<link href="assets/style-v17.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://feeds.feedburner.com/seqware" rel="alternate" title="The SeqWare Blog" type="application/atom+xml">
<script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-34523087-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script><a href="https://github.com/organizations/SeqWare"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_green_007200.png" alt="Fork me on GitHub"></a>
</head>
<body>
<div class="wrapper">
<!-- ***** navigation ***** -->
<div class="nav">
<ol>
<li><span class="active" title="You're here."><span>Home</span></span></li>
<li><a href="blog/"><span>News</span></a></li>
<li><a href="docs/"><span>Documentation</span></a></li>
<li><a href="community/"><span>Community</span></a></li>
<li><a href="partners/"><span>Partners</span></a></li>
<li><a href="about/"><span>About</span></a></li>
</ol>
</div>
<!-- ***** sidebar ***** -->
<div class="side">
<div class="section odd">
<script charset="utf-8" src="http://widgets.twimg.com/j/2/widget.js"></script><script> new TWTR.Widget({   version: 2,   type: 'profile',   rpp: 4,   interval: 30000,   width: 250,   height: 370,   theme: {     shell: {       background: '#daebff',       color: '#153b66'     },     tweets: {       background: '#daebff',       color: '#000000',       links: '#153b66'     }   },   features: {     scrollbar: false,     loop: false,     live: true,     behavior: 'all'   } }).render().setUser('seqware').start(); </script>
</div>
<div class="section even">
<p>The current version of SeqWare is 0.12.5, released on August 6th, 2012. See the <a href="release-notes/">release notes</a> for details.</p>
</div>
</div>
<!-- ***** body ***** -->
<div class="body">

<div id="intro">
	<h1><img src="assets/images/seqware_logo.png" alt="SeqWare Logo"></h1>
        <h1>Next-Generation Sequencing Analysis on the Grid and in the Cloud</h1>

	<p>The open source SeqWare project is a portable software infrastructure designed to analyze massive genomics datasets produced by contemporary and emerging technologies, in particular Next Generation Sequencing (NGS) platforms.  It consists of a comprehensive suite of infrastructure tools focused on enabling the end-to-end analysis of sequence data &#8211; from from raw base calling to analyzed variants ready for interpretation by users. See &#8221;<a href="about/">About SeqWare</a>&#8221; and our &#8221;<a href="docs/1-introduction/">Introduction to SeqWare</a>&#8221; for more details&#8230;</p>

<table>
<tr>
<th><h2><strong>Users</strong></h2></th>
<th><h2><strong>Administrators</strong></h2></th>
<th><h2><strong>Developers</strong></h2></th>
</tr>
<tr>
<td><a href="docs/3-getting-started/user-tutorial/"><img src="assets/images/genome-capable_ico.png"></a></td>
<td><a href="docs/3-getting-started/developer-tutorial/"><img src="assets/images/cloud-based_ico.png"></a></td>
<td><a href="docs/3-getting-started/admin-tutorial/"><img src="assets/images/open-source_ico.png"></a></td>
</tr>
</table>
</div>

</div>
</div>
<!-- ***** footer ***** -->
<div id="footer">
<p>SeqWare ¬© 2007‚Äì2012 Brian O&#8217;Connor. SeqWare is released under the a <a rel="license" href="http://www.gnu.org/licenses/licenses.html">GNU GPL v3</a>. This site is built using the excellent <a href="http://nanoc.stoneship.org/">nanoc</a> tool and example site along with the <a href="http://www.fonts.info/info/press/free-fonts-for-font-face-embedding.htm">Graublau</a> and <a href="http://scripts.sil.org/Gentium">Gentium</a> fonts.</p>
</div>
</body>
</html>
;T;	I"˚
<div id="intro">
	<h1><img src="/assets/images/seqware_logo.png" alt="SeqWare Logo"></h1>
        <h1>Next-Generation Sequencing Analysis on the Grid and in the Cloud</h1>

	<p>The open source SeqWare project is a portable software infrastructure designed to analyze massive genomics datasets produced by contemporary and emerging technologies, in particular Next Generation Sequencing (NGS) platforms.  It consists of a comprehensive suite of infrastructure tools focused on enabling the end-to-end analysis of sequence data -- from from raw base calling to analyzed variants ready for interpretation by users. See "<a href="/about/">About SeqWare</a>" and our "<a href="/docs/1-introduction/">Introduction to SeqWare</a>" for more details...</p>

<table>
<tr>
<th><h2><strong>Users</strong></h2></th>
<th><h2><strong>Administrators</strong></h2></th>
<th><h2><strong>Developers</strong></h2></th>
</tr>
<tr>
<td><a href="/docs/3-getting-started/user-tutorial/"><img src="/assets/images/genome-capable_ico.png"/></a></td>
<td><a href="/docs/3-getting-started/developer-tutorial/"><img src="/assets/images/cloud-based_ico.png"/></a></td>
<td><a href="/docs/3-getting-started/admin-tutorial/"><img src="/assets/images/open-source_ico.png"/></a></td>
</tr>
</table>



</div>
;T;
I"˚
<div id="intro">
	<h1><img src="/assets/images/seqware_logo.png" alt="SeqWare Logo"></h1>
        <h1>Next-Generation Sequencing Analysis on the Grid and in the Cloud</h1>

	<p>The open source SeqWare project is a portable software infrastructure designed to analyze massive genomics datasets produced by contemporary and emerging technologies, in particular Next Generation Sequencing (NGS) platforms.  It consists of a comprehensive suite of infrastructure tools focused on enabling the end-to-end analysis of sequence data -- from from raw base calling to analyzed variants ready for interpretation by users. See "<a href="/about/">About SeqWare</a>" and our "<a href="/docs/1-introduction/">Introduction to SeqWare</a>" for more details...</p>

<table>
<tr>
<th><h2><strong>Users</strong></h2></th>
<th><h2><strong>Administrators</strong></h2></th>
<th><h2><strong>Developers</strong></h2></th>
</tr>
<tr>
<td><a href="/docs/3-getting-started/user-tutorial/"><img src="/assets/images/genome-capable_ico.png"/></a></td>
<td><a href="/docs/3-getting-started/developer-tutorial/"><img src="/assets/images/cloud-based_ico.png"/></a></td>
<td><a href="/docs/3-getting-started/admin-tutorial/"><img src="/assets/images/open-source_ico.png"/></a></td>
</tr>
</table>



</div>
;T;@U"/blog/feed_private/{;{;I"£<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <id>http://nanoc.stoneship.org//</id>
  <title>The nanoc Blog</title>
  <updated>2012-08-06T04:00:00Z</updated>
  <link rel="alternate" href="http://nanoc.stoneship.org//"/>
  <link rel="self" href="http://feeds.feedburner.com/nanoc"/>
  <author>
    <name>Denis Defreyne</name>
    <uri>http://stoneship.org</uri>
  </author>
</feed>
;T;	I"<%= atom_feed %>;T;
@["/blog/34/2012-06-09/{;{
;I"º<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<title>nanoc ‚Ä∫ nanoc 3.4 released</title>
<meta content="nanoc 3.4.0" name="generator">
<link href="/assets/style-v17.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://feeds.feedburner.com/nanoc" rel="alternate" title="The nanoc Blog" type="application/atom+xml">
<script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-15639968-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script>
</head>
<body>
<div class="wrapper">
<!-- ***** navigation ***** -->
<div class="nav">
<ol>
<li><a href="/"><span>Home</span></a></li>
<li><a href="/blog/"><span>News</span></a></li>
<li><a href="/docs/"><span>Documentation</span></a></li>
<li><a href="/community/"><span>Community</span></a></li>
</ol>
</div>
<!-- ***** sidebar ***** -->
<div class="side">
<ol>
<li><a href="/blog/34/"><span>Articles about v3.4</span></a></li>
<li><a href="/blog/32/"><span>Articles about v3.2</span></a></li>
<li><a href="/blog/31/"><span>Articles about v3.1</span></a></li>
<li><a href="/blog/30/"><span>Articles about v3.0</span></a></li>
<li><a href="/blog/22/"><span>Articles about v2.2</span></a></li>
<li><a href="/blog/21/"><span>Articles about v2.1</span></a></li>
<li><a href="/blog/20/"><span>Articles about v2.0</span></a></li>
</ol>
</div>
<!-- ***** body ***** -->
<div class="body">
<div class="article">
<div class="header">
<h1>nanoc 3.4 released</h1>
</div>
<p>nanoc 3.4 is out! This release brings a few useful improvements to the user interface along with some new and improved filters and commands.</p>

<p>When nanoc crashes, it will now write a <code>crash.log</code> file that contains a lot of extra debugging information that can be useful for tracking down the cause of a crash. The extra information includes the contents of the Gemfile.lock, the list of all installed gems, the <code>$LOAD_PATH</code> and the environment variables.</p>

<p>There is a new <code>show-rules</code> command that prints the compilation steps taken for every item. This could come in handy when figuring out why an item isn‚Äôt filtered as you expected it to be, or when an item isn‚Äôt written while it should be, for instance.</p>

<p>Some other enhancements include new Handlebars and Pandoc filters. Check out the <a href="/release-notes/">full release notes</a> for details.</p>

<p>You can update your gems using <code>gem update</code> or, if you use Bundler, <code>bundle update</code>.</p>

<p>If you have any questions, be sure to ask them on <a href="http://groups.google.com/group/nanoc/">the mailinglist</a>. If you encounter issues, please do report them at <a href="https://github.com/ddfreyne/nanoc/issues">the issue tracker</a>‚Äîthanks! You can also find me (and others) on the <a href="irc://chat.freenode.net/#nanoc">nanoc IRC channel</a>.</p>

<p>Enjoy!</p>
</div>
</div>
</div>
<!-- ***** footer ***** -->
<div id="footer">
<p>SeqWare ¬© 2007‚Äì2012 Brian O&#8217;Connor. SeqWare is released under the a <a rel="license" href="http://www.gnu.org/licenses/licenses.html">GNU GPL v3</a>. This site is built using the excellent <a href="http://nanoc.stoneship.org/">nanoc</a> tool and examples with the <a href="http://www.fonts.info/info/press/free-fonts-for-font-face-embedding.htm">Graublau</a> and <a href="http://scripts.sil.org/Gentium">Gentium</a> fonts.</p>
</div>
</body>
</html>
;T;	I"nanoc 3.4 is out! This release brings a few useful improvements to the user interface along with some new and improved filters and commands.

When nanoc crashes, it will now write a `crash.log` file that contains a lot of extra debugging information that can be useful for tracking down the cause of a crash. The extra information includes the contents of the Gemfile.lock, the list of all installed gems, the `$LOAD_PATH` and the environment variables.

There is a new `show-rules` command that prints the compilation steps taken for every item. This could come in handy when figuring out why an item isn‚Äôt filtered as you expected it to be, or when an item isn‚Äôt written while it should be, for instance.

Some other enhancements include new Handlebars and Pandoc filters. Check out the [full release notes](/release-notes/) for details.

You can update your gems using `gem update` or, if you use Bundler, `bundle update`. 

If you have any questions, be sure to ask them on [the mailinglist](http://groups.google.com/group/nanoc/). If you encounter issues, please do report them at [the issue tracker](https://github.com/ddfreyne/nanoc/issues)‚Äîthanks! You can also find me (and others) on the [nanoc IRC channel](irc://chat.freenode.net/#nanoc).

Enjoy!
;T;
I"Ç<p>nanoc 3.4 is out! This release brings a few useful improvements to the user interface along with some new and improved filters and commands.</p>

<p>When nanoc crashes, it will now write a <code>crash.log</code> file that contains a lot of extra debugging information that can be useful for tracking down the cause of a crash. The extra information includes the contents of the Gemfile.lock, the list of all installed gems, the <code>$LOAD_PATH</code> and the environment variables.</p>

<p>There is a new <code>show-rules</code> command that prints the compilation steps taken for every item. This could come in handy when figuring out why an item isn‚Äôt filtered as you expected it to be, or when an item isn‚Äôt written while it should be, for instance.</p>

<p>Some other enhancements include new Handlebars and Pandoc filters. Check out the <a href="/release-notes/">full release notes</a> for details.</p>

<p>You can update your gems using <code>gem update</code> or, if you use Bundler, <code>bundle update</code>.</p>

<p>If you have any questions, be sure to ask them on <a href="http://groups.google.com/group/nanoc/">the mailinglist</a>. If you encounter issues, please do report them at <a href="https://github.com/ddfreyne/nanoc/issues">the issue tracker</a>‚Äîthanks! You can also find me (and others) on the <a href="irc://chat.freenode.net/#nanoc">nanoc IRC channel</a>.</p>

<p>Enjoy!</p>;T;I"É<p>nanoc 3.4 is out! This release brings a few useful improvements to the user interface along with some new and improved filters and commands.</p>

<p>When nanoc crashes, it will now write a <code>crash.log</code> file that contains a lot of extra debugging information that can be useful for tracking down the cause of a crash. The extra information includes the contents of the Gemfile.lock, the list of all installed gems, the <code>$LOAD_PATH</code> and the environment variables.</p>

<p>There is a new <code>show-rules</code> command that prints the compilation steps taken for every item. This could come in handy when figuring out why an item isn‚Äôt filtered as you expected it to be, or when an item isn‚Äôt written while it should be, for instance.</p>

<p>Some other enhancements include new Handlebars and Pandoc filters. Check out the <a href="/release-notes/">full release notes</a> for details.</p>

<p>You can update your gems using <code>gem update</code> or, if you use Bundler, <code>bundle update</code>.</p>

<p>If you have any questions, be sure to ask them on <a href="http://groups.google.com/group/nanoc/">the mailinglist</a>. If you encounter issues, please do report them at <a href="https://github.com/ddfreyne/nanoc/issues">the issue tracker</a>‚Äîthanks! You can also find me (and others) on the <a href="irc://chat.freenode.net/#nanoc">nanoc IRC channel</a>.</p>

<p>Enjoy!</p>
;T;@`"/blog/21/2008-07-21/{;{
;I"Ô<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<title>nanoc ‚Ä∫ WNin #3: improved data sources</title>
<meta content="nanoc 3.4.0" name="generator">
<link href="/assets/style-v17.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://feeds.feedburner.com/nanoc" rel="alternate" title="The nanoc Blog" type="application/atom+xml">
<script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-15639968-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script>
</head>
<body>
<div class="wrapper">
<!-- ***** navigation ***** -->
<div class="nav">
<ol>
<li><a href="/"><span>Home</span></a></li>
<li><a href="/blog/"><span>News</span></a></li>
<li><a href="/docs/"><span>Documentation</span></a></li>
<li><a href="/community/"><span>Community</span></a></li>
</ol>
</div>
<!-- ***** sidebar ***** -->
<div class="side">
<ol>
<li><a href="/blog/13/"><span>Articles about v3.4</span></a></li>
<li><a href="/blog/12/"><span>Articles about v0.12.x</span></a></li>
</ol>
</div>
<!-- ***** body ***** -->
<div class="body">
<div class="article">
<div class="header">
<h1>WNin #3: improved data sources</h1>
</div>
<div class="figure wnin21">
	<img src="/assets/images/whats-new-in-nanoc-21-small.png" alt="What‚Äôs New in nanoc 2.1">
</div>

<p>This is the third installment of <i>What‚Äôs New in nanoc 2.1</i>. This article discusses the new data sources, which have been improved a lot in nanoc 2.1.</p>

<p>To recap: data sources are classes that tell nanoc where to find site content. Even though you‚Äôll usually stick to storing your pages as files on the filesystem, you may want to store the in a database instead, or maybe simply store them in a different way on the filesystem.</p>

<p>For example, one big difference between nanoc and one of its competitors, webby, is that the latter stores its pages as single files, and not directories. Webby stores its metadata embedded inside pages. nanoc 2.1 comes with a new data source named <i>filesystem_combined</i> which, similar to webby, <strong>stores content and attributes in a single file</strong>. This can clean up the <span class="path">content</span> directory quite a bit.</p>

<p>Here‚Äôs what the default nanoc site looks like with a filesystem_combined data source:</p>

<pre><code class="language-yaml"><span class="head"><span class="head">---</span></span><span class="error">--</span>
<span class="comment"># Built-in</span>

<span class="comment"># Custom</span>
<span class="key">title</span>: <span class="string"><span class="content">Home</span></span>
<span class="head"><span class="head">---</span></span><span class="error">--</span>

<span class="error">&lt;h1&gt;A Brand New nanoc Site&lt;/h1&gt;</span>

<span class="error">‚Ä¶ rest of the content goes here ‚Ä¶</span></code></pre>

<p>Creating a new site with this new <i>filesystem_combined</i> data source is easy. Just do this (the <kbd>-d</kbd> switch specifies the name of the data source):</p>

<pre><kbd><span class="prompt">%</span> nanoc create_site -d filesystem_combined my_new_site</kbd></pre>

<p>If you want to switch your existing site over to <i>filesystem_combined</i>, you can do that with a <strong>brand new <kbd>switch</kbd> command</strong>, which you invoke like this:</p>

<pre><kbd><span class="prompt">%</span> nanoc switch -d filesystem_combined</kbd></pre>

<p>If your site is stored in a <abbr title="version control system">VCS</abbr> repository such as Subversion, git, Mercurial or Bazaar, you can  <strong>tell nanoc to use this VCS&#8217; commands</strong> using the <kbd>-c</kbd> switch. At the moment, nanoc supports svn, git, hg and bzr, but adding support for new VCSes is trivial. As an example, here‚Äôs how you‚Äôd switch to switch to new data source using git:</p>

<pre><kbd><span class="prompt">%</span> nanoc switch -d filesystem_combined -c git</kbd></pre>

<p>If you want to get a list of supported VCSes, use the <strong>new <kbd>info</kbd> command</strong> (which also gives information about available filters, data sources, and more), which outputs something like this:</p>

<pre><kbd><span class="prompt">%</span> nanoc info</kbd>

<samp>VCSes:

  builtin:
    bazaar, bzr         (Nanoc::Extra::VCSes::Bazaar)
    dummy               (Nanoc::Extra::VCSes::Dummy)
    git                 (Nanoc::Extra::VCSes::Git)
    mercurial, hg       (Nanoc::Extra::VCSes::Mercurial)
    subversion, svn     (Nanoc::Extra::VCSes::Subversion)
  custom:
    (none)

‚Ä¶ more stuff here ‚Ä¶</samp></pre>

<p>The original filesystem data source you‚Äôre all used to (which is simply called <i>filesystem</i>) has been updated a bit. <strong>Layouts are now stored as directories</strong> instead of files, and in the new meta file you can specify the name of the filter to use when rendering this layout. The filter used for compiling layouts is no longer dependent on the file extension.</p>

<p>There‚Äôs <strong>a new <kbd>update</kbd> command</strong> to make updating the site content (e.g. updating the way layouts are stored) easier. Here‚Äôs how you‚Äôd use it for a site versioned using Mercurial:</p>

<pre><kbd><span class="prompt">%</span> nanoc update -c hg</kbd></pre>

<p>The data sources now also <strong>allow creating, updating and deleting stored data</strong>. This is probably not very useful for the commandline interface‚Äîafter all, why have <kbd>delete_page</kbd> and <kbd>move_page</kbd> when there‚Äôs the standard unix commands <kbd>rm</kbd> and <kbd>mv</kbd>, respectively‚Äîbut for new frontends (GUI frontend, web-based frontend, ‚Ä¶) this may become quite useful later on.</p>

<p>A last important new feature is <strong>data sources now provide modification times</strong> for the data they read, which makes it possible for nanoc to only compile outdated pages, which creates a nice speed improvement.</p>

<p>So, that‚Äôs what data sources in nanoc 2.1 look like. Stay tuned for the third installment of <i>What‚Äôs New in nanoc 2.1</i>!</p>
</div>
</div>
</div>
<!-- ***** footer ***** -->
<div id="footer">
<p>SeqWare ¬© 2007‚Äì2012 Brian O&#8217;Connor. SeqWare is released under the a <a rel="license" href="http://www.gnu.org/licenses/licenses.html">GNU GPL v3</a>. This site is built using the excellent <a href="http://nanoc.stoneship.org/">nanoc</a> tool and examples with the <a href="http://www.fonts.info/info/press/free-fonts-for-font-face-embedding.htm">Graublau</a> and <a href="http://scripts.sil.org/Gentium">Gentium</a> fonts.</p>
</div>
</body>
</html>
;T;	I"á<div class="figure wnin21">
	<img src="/assets/images/whats-new-in-nanoc-21-small.png" alt="What‚Äôs New in nanoc 2.1">
</div>

<p>This is the third installment of <i>What‚Äôs New in nanoc 2.1</i>. This article discusses the new data sources, which have been improved a lot in nanoc 2.1.</p>

<p>To recap: data sources are classes that tell nanoc where to find site content. Even though you‚Äôll usually stick to storing your pages as files on the filesystem, you may want to store the in a database instead, or maybe simply store them in a different way on the filesystem.</p>

<p>For example, one big difference between nanoc and one of its competitors, webby, is that the latter stores its pages as single files, and not directories. Webby stores its metadata embedded inside pages. nanoc 2.1 comes with a new data source named <i>filesystem_combined</i> which, similar to webby, <strong>stores content and attributes in a single file</strong>. This can clean up the <span class="path">content</span> directory quite a bit.</p>

<p>Here‚Äôs what the default nanoc site looks like with a filesystem_combined data source:</p>

<pre><code class="language-yaml">-----
# Built-in

# Custom
title: Home
-----

&lt;h1&gt;A Brand New nanoc Site&lt;/h1&gt;

‚Ä¶ rest of the content goes here ‚Ä¶</code></pre>

<p>Creating a new site with this new <i>filesystem_combined</i> data source is easy. Just do this (the <kbd>-d</kbd> switch specifies the name of the data source):</p>

<pre><kbd><span class="prompt">%</span> nanoc create_site -d filesystem_combined my_new_site</kbd></pre>

<p>If you want to switch your existing site over to <i>filesystem_combined</i>, you can do that with a <strong>brand new <kbd>switch</kbd> command</strong>, which you invoke like this:</p>

<pre><kbd><span class="prompt">%</span> nanoc switch -d filesystem_combined</kbd></pre>

<p>If your site is stored in a <abbr title="version control system">VCS</abbr> repository such as Subversion, git, Mercurial or Bazaar, you can  <strong>tell nanoc to use this VCS' commands</strong> using the <kbd>-c</kbd> switch. At the moment, nanoc supports svn, git, hg and bzr, but adding support for new VCSes is trivial. As an example, here‚Äôs how you‚Äôd switch to switch to new data source using git:</p>

<pre><kbd><span class="prompt">%</span> nanoc switch -d filesystem_combined -c git</kbd></pre>

<p>If you want to get a list of supported VCSes, use the <strong>new <kbd>info</kbd> command</strong> (which also gives information about available filters, data sources, and more), which outputs something like this:</p>

<pre><kbd><span class="prompt">%</span> nanoc info</kbd>

<samp>VCSes:

  builtin:
    bazaar, bzr         (Nanoc::Extra::VCSes::Bazaar)
    dummy               (Nanoc::Extra::VCSes::Dummy)
    git                 (Nanoc::Extra::VCSes::Git)
    mercurial, hg       (Nanoc::Extra::VCSes::Mercurial)
    subversion, svn     (Nanoc::Extra::VCSes::Subversion)
  custom:
    (none)

‚Ä¶ more stuff here ‚Ä¶</samp></pre>

<p>The original filesystem data source you‚Äôre all used to (which is simply called <i>filesystem</i>) has been updated a bit. <strong>Layouts are now stored as directories</strong> instead of files, and in the new meta file you can specify the name of the filter to use when rendering this layout. The filter used for compiling layouts is no longer dependent on the file extension.</p>

<p>There‚Äôs <strong>a new <kbd>update</kbd> command</strong> to make updating the site content (e.g. updating the way layouts are stored) easier. Here‚Äôs how you‚Äôd use it for a site versioned using Mercurial:</p>

<pre><kbd><span class="prompt">%</span> nanoc update -c hg</kbd></pre>

<p>The data sources now also <strong>allow creating, updating and deleting stored data</strong>. This is probably not very useful for the commandline interface&mdash;after all, why have <kbd>delete_page</kbd> and <kbd>move_page</kbd> when there‚Äôs the standard unix commands <kbd>rm</kbd> and <kbd>mv</kbd>, respectively&mdash;but for new frontends (GUI frontend, web-based frontend, ‚Ä¶) this may become quite useful later on.</p>

<p>A last important new feature is <strong>data sources now provide modification times</strong> for the data they read, which makes it possible for nanoc to only compile outdated pages, which creates a nice speed improvement.</p>

<p>So, that‚Äôs what data sources in nanoc 2.1 look like. Stay tuned for the third installment of <i>What‚Äôs New in nanoc 2.1</i>!</p>
;T;
I"~<div class="figure wnin21">
	<img src="/assets/images/whats-new-in-nanoc-21-small.png" alt="What‚Äôs New in nanoc 2.1">
</div>

<p>This is the third installment of <i>What‚Äôs New in nanoc 2.1</i>. This article discusses the new data sources, which have been improved a lot in nanoc 2.1.</p>

<p>To recap: data sources are classes that tell nanoc where to find site content. Even though you‚Äôll usually stick to storing your pages as files on the filesystem, you may want to store the in a database instead, or maybe simply store them in a different way on the filesystem.</p>

<p>For example, one big difference between nanoc and one of its competitors, webby, is that the latter stores its pages as single files, and not directories. Webby stores its metadata embedded inside pages. nanoc 2.1 comes with a new data source named <i>filesystem_combined</i> which, similar to webby, <strong>stores content and attributes in a single file</strong>. This can clean up the <span class="path">content</span> directory quite a bit.</p>

<p>Here‚Äôs what the default nanoc site looks like with a filesystem_combined data source:</p>

<pre><code class="language-yaml">-----
# Built-in

# Custom
title: Home
-----

&lt;h1&gt;A Brand New nanoc Site&lt;/h1&gt;

‚Ä¶ rest of the content goes here ‚Ä¶</code></pre>

<p>Creating a new site with this new <i>filesystem_combined</i> data source is easy. Just do this (the <kbd>-d</kbd> switch specifies the name of the data source):</p>

<pre><kbd><span class="prompt">%</span> nanoc create_site -d filesystem_combined my_new_site</kbd></pre>

<p>If you want to switch your existing site over to <i>filesystem_combined</i>, you can do that with a <strong>brand new <kbd>switch</kbd> command</strong>, which you invoke like this:</p>

<pre><kbd><span class="prompt">%</span> nanoc switch -d filesystem_combined</kbd></pre>

<p>If your site is stored in a <abbr title="version control system">VCS</abbr> repository such as Subversion, git, Mercurial or Bazaar, you can  <strong>tell nanoc to use this VCS' commands</strong> using the <kbd>-c</kbd> switch. At the moment, nanoc supports svn, git, hg and bzr, but adding support for new VCSes is trivial. As an example, here‚Äôs how you‚Äôd switch to switch to new data source using git:</p>

<pre><kbd><span class="prompt">%</span> nanoc switch -d filesystem_combined -c git</kbd></pre>

<p>If you want to get a list of supported VCSes, use the <strong>new <kbd>info</kbd> command</strong> (which also gives information about available filters, data sources, and more), which outputs something like this:</p>

<pre><kbd><span class="prompt">%</span> nanoc info</kbd>

<samp>VCSes:

  builtin:
    bazaar, bzr         (Nanoc::Extra::VCSes::Bazaar)
    dummy               (Nanoc::Extra::VCSes::Dummy)
    git                 (Nanoc::Extra::VCSes::Git)
    mercurial, hg       (Nanoc::Extra::VCSes::Mercurial)
    subversion, svn     (Nanoc::Extra::VCSes::Subversion)
  custom:
    (none)

‚Ä¶ more stuff here ‚Ä¶</samp></pre>

<p>The original filesystem data source you‚Äôre all used to (which is simply called <i>filesystem</i>) has been updated a bit. <strong>Layouts are now stored as directories</strong> instead of files, and in the new meta file you can specify the name of the filter to use when rendering this layout. The filter used for compiling layouts is no longer dependent on the file extension.</p>

<p>There‚Äôs <strong>a new <kbd>update</kbd> command</strong> to make updating the site content (e.g. updating the way layouts are stored) easier. Here‚Äôs how you‚Äôd use it for a site versioned using Mercurial:</p>

<pre><kbd><span class="prompt">%</span> nanoc update -c hg</kbd></pre>

<p>The data sources now also <strong>allow creating, updating and deleting stored data</strong>. This is probably not very useful for the commandline interface‚Äîafter all, why have <kbd>delete_page</kbd> and <kbd>move_page</kbd> when there‚Äôs the standard unix commands <kbd>rm</kbd> and <kbd>mv</kbd>, respectively‚Äîbut for new frontends (GUI frontend, web-based frontend, ‚Ä¶) this may become quite useful later on.</p>

<p>A last important new feature is <strong>data sources now provide modification times</strong> for the data they read, which makes it possible for nanoc to only compile outdated pages, which creates a nice speed improvement.</p>

<p>So, that‚Äôs what data sources in nanoc 2.1 look like. Stay tuned for the third installment of <i>What‚Äôs New in nanoc 2.1</i>!</p>;T;I"á<div class="figure wnin21">
	<img src="/assets/images/whats-new-in-nanoc-21-small.png" alt="What‚Äôs New in nanoc 2.1">
</div>

<p>This is the third installment of <i>What‚Äôs New in nanoc 2.1</i>. This article discusses the new data sources, which have been improved a lot in nanoc 2.1.</p>

<p>To recap: data sources are classes that tell nanoc where to find site content. Even though you‚Äôll usually stick to storing your pages as files on the filesystem, you may want to store the in a database instead, or maybe simply store them in a different way on the filesystem.</p>

<p>For example, one big difference between nanoc and one of its competitors, webby, is that the latter stores its pages as single files, and not directories. Webby stores its metadata embedded inside pages. nanoc 2.1 comes with a new data source named <i>filesystem_combined</i> which, similar to webby, <strong>stores content and attributes in a single file</strong>. This can clean up the <span class="path">content</span> directory quite a bit.</p>

<p>Here‚Äôs what the default nanoc site looks like with a filesystem_combined data source:</p>

<pre><code class="language-yaml">-----
# Built-in

# Custom
title: Home
-----

&lt;h1&gt;A Brand New nanoc Site&lt;/h1&gt;

‚Ä¶ rest of the content goes here ‚Ä¶</code></pre>

<p>Creating a new site with this new <i>filesystem_combined</i> data source is easy. Just do this (the <kbd>-d</kbd> switch specifies the name of the data source):</p>

<pre><kbd><span class="prompt">%</span> nanoc create_site -d filesystem_combined my_new_site</kbd></pre>

<p>If you want to switch your existing site over to <i>filesystem_combined</i>, you can do that with a <strong>brand new <kbd>switch</kbd> command</strong>, which you invoke like this:</p>

<pre><kbd><span class="prompt">%</span> nanoc switch -d filesystem_combined</kbd></pre>

<p>If your site is stored in a <abbr title="version control system">VCS</abbr> repository such as Subversion, git, Mercurial or Bazaar, you can  <strong>tell nanoc to use this VCS' commands</strong> using the <kbd>-c</kbd> switch. At the moment, nanoc supports svn, git, hg and bzr, but adding support for new VCSes is trivial. As an example, here‚Äôs how you‚Äôd switch to switch to new data source using git:</p>

<pre><kbd><span class="prompt">%</span> nanoc switch -d filesystem_combined -c git</kbd></pre>

<p>If you want to get a list of supported VCSes, use the <strong>new <kbd>info</kbd> command</strong> (which also gives information about available filters, data sources, and more), which outputs something like this:</p>

<pre><kbd><span class="prompt">%</span> nanoc info</kbd>

<samp>VCSes:

  builtin:
    bazaar, bzr         (Nanoc::Extra::VCSes::Bazaar)
    dummy               (Nanoc::Extra::VCSes::Dummy)
    git                 (Nanoc::Extra::VCSes::Git)
    mercurial, hg       (Nanoc::Extra::VCSes::Mercurial)
    subversion, svn     (Nanoc::Extra::VCSes::Subversion)
  custom:
    (none)

‚Ä¶ more stuff here ‚Ä¶</samp></pre>

<p>The original filesystem data source you‚Äôre all used to (which is simply called <i>filesystem</i>) has been updated a bit. <strong>Layouts are now stored as directories</strong> instead of files, and in the new meta file you can specify the name of the filter to use when rendering this layout. The filter used for compiling layouts is no longer dependent on the file extension.</p>

<p>There‚Äôs <strong>a new <kbd>update</kbd> command</strong> to make updating the site content (e.g. updating the way layouts are stored) easier. Here‚Äôs how you‚Äôd use it for a site versioned using Mercurial:</p>

<pre><kbd><span class="prompt">%</span> nanoc update -c hg</kbd></pre>

<p>The data sources now also <strong>allow creating, updating and deleting stored data</strong>. This is probably not very useful for the commandline interface&mdash;after all, why have <kbd>delete_page</kbd> and <kbd>move_page</kbd> when there‚Äôs the standard unix commands <kbd>rm</kbd> and <kbd>mv</kbd>, respectively&mdash;but for new frontends (GUI frontend, web-based frontend, ‚Ä¶) this may become quite useful later on.</p>

<p>A last important new feature is <strong>data sources now provide modification times</strong> for the data they read, which makes it possible for nanoc to only compile outdated pages, which creates a nice speed improvement.</p>

<p>So, that‚Äôs what data sources in nanoc 2.1 look like. Stay tuned for the third installment of <i>What‚Äôs New in nanoc 2.1</i>!</p>
;T;@g"/blog/21/2008-08-11/{;{
;I"˛<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<title>nanoc ‚Ä∫ WNin #6: Miscellaneous</title>
<meta content="nanoc 3.4.0" name="generator">
<link href="/assets/style-v17.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://feeds.feedburner.com/nanoc" rel="alternate" title="The nanoc Blog" type="application/atom+xml">
<script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-15639968-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script>
</head>
<body>
<div class="wrapper">
<!-- ***** navigation ***** -->
<div class="nav">
<ol>
<li><a href="/"><span>Home</span></a></li>
<li><a href="/blog/"><span>News</span></a></li>
<li><a href="/docs/"><span>Documentation</span></a></li>
<li><a href="/community/"><span>Community</span></a></li>
</ol>
</div>
<!-- ***** sidebar ***** -->
<div class="side">
<ol>
<li><a href="/blog/13/"><span>Articles about v3.4</span></a></li>
<li><a href="/blog/12/"><span>Articles about v0.12.x</span></a></li>
</ol>
</div>
<!-- ***** body ***** -->
<div class="body">
<div class="article">
<div class="header">
<h1>WNin #6: Miscellaneous</h1>
</div>
<div class="figure wnin21">
	<img src="http://nanoc.stoneship.org/assets/images/whats-new-in-nanoc-21-small.png" alt="What‚Äôs New in nanoc 2.1">
</div>

<p>Welcome to the final installment of <i>What‚Äôs New in nanoc 2.1</i>. In this article I‚Äôll show you several miscellaneous improvements and features I couldn‚Äôt fit elsewhere.</p>

<p>The <strong>autocompiler now uses Rack</strong>, so this is good news if you don‚Äôt like WEBrick and would like to use something else instead. Thin, Mongrel, Ebb, ‚Ä¶ you name it.</p>

<p><strong>Layout processors are gone</strong> entirely. Instead, use filters. Layouts consist of metafiles and content files now, and the meta files determine the filter to be run. This means less code duplication, as there‚Äôs no need to have both e.g. a Haml filter <em>and</em> a Haml layout processor.</p>

<p>A layout only has one attribute, <code>filter</code>, which determines the filter to be run. Here‚Äôs what the meta file of the nanoc site‚Äôs default layout contains, to show you how this works:</p>

<pre><code class="language-yaml"><span class="key">filter</span>: <span class="string"><span class="content">'erb'</span></span></code></pre>

<p><strong>Layouts can be stored hierarchically</strong>. This is useful in case you want to e.g. create a &#8220;partials&#8221; directory in your layouts directory, in which you‚Äôd store partials you want to render. Or, you could have a directory named &#8220;sidebars&#8221; in which you store sidebars, in case you want to render different sidebars for different sections on the site.</p>

<p>Here‚Äôs an example that shows how you‚Äôd render the &#8220;header&#8221; layout, located inside the &#8220;partials&#8221; directory inside the &#8220;layouts&#8221; directory:</p>

<pre><code class="language-ruby">&lt;<span class="string"><span class="delimiter">%=</span><span class="content"> render 'partials/header' %&gt;</span></span></code></pre>

<p>Nothing really important, but the <code>nanoc_require</code> function is gone‚Äîsimply use the good old <code>require</code> function now.</p>

<p>nanoc is now bundled with <strong>three new filters</strong>: <a href="http://github.com/rtomayko/rdiscount/tree/master">rdiscount</a> (a fast implementation of Markdown), <a href="http://maruku.rubyforge.org/">maruku</a> (an implementation of a Markdown superset) and <a href="http://www.kuwata-lab.com/erubis/">erubis</a> (a fast implementation of eRuby). Because the filter used for processing layouts is no longer determined by the file extension, you can actually use Erubis instead of ERB for layouts now.</p>

<p>A lot of helpers have been bundled with nanoc. There‚Äôs helpers for <a href="http://nanoc.stoneship.org/docs/api/3.1/Nanoc3/Helpers/Blogging.html">blogging</a>, <a href="http://nanoc.stoneship.org/docs/api/3.1/Nanoc3/Helpers/Tagging.html">tagging</a>, <a href="http://nanoc.stoneship.org/docs/api/3.1/Nanoc3/Helpers/Capturing.html">capturing</a>, <a href="http://nanoc.stoneship.org/docs/api/3.1/Nanoc3/Helpers/HTMLEscape.html">HTML-escaping</a>, <a href="http://nanoc.stoneship.org/docs/api/3.1/Nanoc3/Helpers/Render.html">rendering</a>, building <a href="http://nanoc.stoneship.org/docs/api/3.1/Nanoc3/Helpers/XMLSitemap.html">XML sitemaps</a> and <a href="http://nanoc.stoneship.org/docs/api/3.1/Nanoc3/Helpers/LinkTo.html">linking</a>. All of these helpers are quite thoroughly documented so using them should be a breeze. These helpers will first need to be activated before they can be used (except the Render and HTMLEscape ones), which works like this:</p>

<pre><code class="language-ruby">include <span class="constant">Nanoc</span>::<span class="constant">Helpers</span>::<span class="constant">LinkTo</span></code></pre>

<p>These helpers were previously available as plugins on the <a href="http://nanoc.stoneship.org/trac">wiki</a>, but now they‚Äôre actually bundled so you don‚Äôt have to download them separately. More helpers (and filters) will be added to the standard nanoc distribution later on; contributions are always welcome.</p>

<p>I forgot to mention it before, but <strong>nanoc 2.1 is entirely backwards compatible</strong> with nanoc 2.0. This means that a site that can be compiled with nanoc 2.0 (and doesn‚Äôt show any deprecation warnings) should compile flawlessly using nanoc 2.1.</p>

<p>So, this is the end of the very last installment of <i>What‚Äôs New in nanoc 2.1</i>. I hope you enjoyed it! nanoc 2.1 itself is <em>nearly</em> ready, but still needs a tiny bit of work. With a bit of luck, there‚Äôll be a release at the end of the week. Stay tuned!</p>
</div>
</div>
</div>
<!-- ***** footer ***** -->
<div id="footer">
<p>SeqWare ¬© 2007‚Äì2012 Brian O&#8217;Connor. SeqWare is released under the a <a rel="license" href="http://www.gnu.org/licenses/licenses.html">GNU GPL v3</a>. This site is built using the excellent <a href="http://nanoc.stoneship.org/">nanoc</a> tool and examples with the <a href="http://www.fonts.info/info/press/free-fonts-for-font-face-embedding.htm">Graublau</a> and <a href="http://scripts.sil.org/Gentium">Gentium</a> fonts.</p>
</div>
</body>
</html>
;T;	I"Õ<div class="figure wnin21">
	<img src="http://nanoc.stoneship.org/assets/images/whats-new-in-nanoc-21-small.png" alt="What‚Äôs New in nanoc 2.1">
</div>

<p>Welcome to the final installment of <i>What‚Äôs New in nanoc 2.1</i>. In this article I‚Äôll show you several miscellaneous improvements and features I couldn‚Äôt fit elsewhere.</p>

<p>The <strong>autocompiler now uses Rack</strong>, so this is good news if you don‚Äôt like WEBrick and would like to use something else instead. Thin, Mongrel, Ebb, &hellip; you name it.</p>

<p><strong>Layout processors are gone</strong> entirely. Instead, use filters. Layouts consist of metafiles and content files now, and the meta files determine the filter to be run. This means less code duplication, as there‚Äôs no need to have both e.g. a Haml filter <em>and</em> a Haml layout processor.</p>

<p>A layout only has one attribute, <code>filter</code>, which determines the filter to be run. Here‚Äôs what the meta file of the nanoc site‚Äôs default layout contains, to show you how this works:</p>

<pre><code class="language-yaml">filter: 'erb'</code></pre>

<p><strong>Layouts can be stored hierarchically</strong>. This is useful in case you want to e.g. create a "partials" directory in your layouts directory, in which you‚Äôd store partials you want to render. Or, you could have a directory named "sidebars" in which you store sidebars, in case you want to render different sidebars for different sections on the site.</p>

<p>Here‚Äôs an example that shows how you‚Äôd render the "header" layout, located inside the "partials" directory inside the "layouts" directory:</p>

<pre><code class="language-ruby">&lt;%= render 'partials/header' %&gt;</code></pre>

<p>Nothing really important, but the <code>nanoc_require</code> function is gone&mdash;simply use the good old <code>require</code> function now.</p>

<p>nanoc is now bundled with <strong>three new filters</strong>: <a href="http://github.com/rtomayko/rdiscount/tree/master">rdiscount</a> (a fast implementation of Markdown), <a href="http://maruku.rubyforge.org/">maruku</a> (an implementation of a Markdown superset) and <a href="http://www.kuwata-lab.com/erubis/">erubis</a> (a fast implementation of eRuby). Because the filter used for processing layouts is no longer determined by the file extension, you can actually use Erubis instead of ERB for layouts now.</p>

<p>A lot of helpers have been bundled with nanoc. There‚Äôs helpers for <a href="http://nanoc.stoneship.org/docs/api/3.1/Nanoc3/Helpers/Blogging.html">blogging</a>, <a href="http://nanoc.stoneship.org/docs/api/3.1/Nanoc3/Helpers/Tagging.html">tagging</a>, <a href="http://nanoc.stoneship.org/docs/api/3.1/Nanoc3/Helpers/Capturing.html">capturing</a>, <a href="http://nanoc.stoneship.org/docs/api/3.1/Nanoc3/Helpers/HTMLEscape.html">HTML-escaping</a>, <a href="http://nanoc.stoneship.org/docs/api/3.1/Nanoc3/Helpers/Render.html">rendering</a>, building <a href="http://nanoc.stoneship.org/docs/api/3.1/Nanoc3/Helpers/XMLSitemap.html">XML sitemaps</a> and <a href="http://nanoc.stoneship.org/docs/api/3.1/Nanoc3/Helpers/LinkTo.html">linking</a>. All of these helpers are quite thoroughly documented so using them should be a breeze. These helpers will first need to be activated before they can be used (except the Render and HTMLEscape ones), which works like this:</p>

<pre><code class="language-ruby">include Nanoc::Helpers::LinkTo</code></pre>

<p>These helpers were previously available as plugins on the <a href="http://nanoc.stoneship.org/trac">wiki</a>, but now they‚Äôre actually bundled so you don‚Äôt have to download them separately. More helpers (and filters) will be added to the standard nanoc distribution later on; contributions are always welcome.</p>

<p>I forgot to mention it before, but <strong>nanoc 2.1 is entirely backwards compatible</strong> with nanoc 2.0. This means that a site that can be compiled with nanoc 2.0 (and doesn‚Äôt show any deprecation warnings) should compile flawlessly using nanoc 2.1.</p>

<p>So, this is the end of the very last installment of <i>What‚Äôs New in nanoc 2.1</i>. I hope you enjoyed it! nanoc 2.1 itself is <em>nearly</em> ready, but still needs a tiny bit of work. With a bit of luck, there‚Äôll be a release at the end of the week. Stay tuned!</p>
;T;
I"√<div class="figure wnin21">
	<img src="http://nanoc.stoneship.org/assets/images/whats-new-in-nanoc-21-small.png" alt="What‚Äôs New in nanoc 2.1">
</div>

<p>Welcome to the final installment of <i>What‚Äôs New in nanoc 2.1</i>. In this article I‚Äôll show you several miscellaneous improvements and features I couldn‚Äôt fit elsewhere.</p>

<p>The <strong>autocompiler now uses Rack</strong>, so this is good news if you don‚Äôt like WEBrick and would like to use something else instead. Thin, Mongrel, Ebb, ‚Ä¶ you name it.</p>

<p><strong>Layout processors are gone</strong> entirely. Instead, use filters. Layouts consist of metafiles and content files now, and the meta files determine the filter to be run. This means less code duplication, as there‚Äôs no need to have both e.g. a Haml filter <em>and</em> a Haml layout processor.</p>

<p>A layout only has one attribute, <code>filter</code>, which determines the filter to be run. Here‚Äôs what the meta file of the nanoc site‚Äôs default layout contains, to show you how this works:</p>

<pre><code class="language-yaml">filter: 'erb'</code></pre>

<p><strong>Layouts can be stored hierarchically</strong>. This is useful in case you want to e.g. create a "partials" directory in your layouts directory, in which you‚Äôd store partials you want to render. Or, you could have a directory named "sidebars" in which you store sidebars, in case you want to render different sidebars for different sections on the site.</p>

<p>Here‚Äôs an example that shows how you‚Äôd render the "header" layout, located inside the "partials" directory inside the "layouts" directory:</p>

<pre><code class="language-ruby">&lt;%= render 'partials/header' %&gt;</code></pre>

<p>Nothing really important, but the <code>nanoc_require</code> function is gone‚Äîsimply use the good old <code>require</code> function now.</p>

<p>nanoc is now bundled with <strong>three new filters</strong>: <a href="http://github.com/rtomayko/rdiscount/tree/master">rdiscount</a> (a fast implementation of Markdown), <a href="http://maruku.rubyforge.org/">maruku</a> (an implementation of a Markdown superset) and <a href="http://www.kuwata-lab.com/erubis/">erubis</a> (a fast implementation of eRuby). Because the filter used for processing layouts is no longer determined by the file extension, you can actually use Erubis instead of ERB for layouts now.</p>

<p>A lot of helpers have been bundled with nanoc. There‚Äôs helpers for <a href="http://nanoc.stoneship.org/docs/api/3.1/Nanoc3/Helpers/Blogging.html">blogging</a>, <a href="http://nanoc.stoneship.org/docs/api/3.1/Nanoc3/Helpers/Tagging.html">tagging</a>, <a href="http://nanoc.stoneship.org/docs/api/3.1/Nanoc3/Helpers/Capturing.html">capturing</a>, <a href="http://nanoc.stoneship.org/docs/api/3.1/Nanoc3/Helpers/HTMLEscape.html">HTML-escaping</a>, <a href="http://nanoc.stoneship.org/docs/api/3.1/Nanoc3/Helpers/Render.html">rendering</a>, building <a href="http://nanoc.stoneship.org/docs/api/3.1/Nanoc3/Helpers/XMLSitemap.html">XML sitemaps</a> and <a href="http://nanoc.stoneship.org/docs/api/3.1/Nanoc3/Helpers/LinkTo.html">linking</a>. All of these helpers are quite thoroughly documented so using them should be a breeze. These helpers will first need to be activated before they can be used (except the Render and HTMLEscape ones), which works like this:</p>

<pre><code class="language-ruby">include Nanoc::Helpers::LinkTo</code></pre>

<p>These helpers were previously available as plugins on the <a href="http://nanoc.stoneship.org/trac">wiki</a>, but now they‚Äôre actually bundled so you don‚Äôt have to download them separately. More helpers (and filters) will be added to the standard nanoc distribution later on; contributions are always welcome.</p>

<p>I forgot to mention it before, but <strong>nanoc 2.1 is entirely backwards compatible</strong> with nanoc 2.0. This means that a site that can be compiled with nanoc 2.0 (and doesn‚Äôt show any deprecation warnings) should compile flawlessly using nanoc 2.1.</p>

<p>So, this is the end of the very last installment of <i>What‚Äôs New in nanoc 2.1</i>. I hope you enjoyed it! nanoc 2.1 itself is <em>nearly</em> ready, but still needs a tiny bit of work. With a bit of luck, there‚Äôll be a release at the end of the week. Stay tuned!</p>;T;I"Õ<div class="figure wnin21">
	<img src="http://nanoc.stoneship.org/assets/images/whats-new-in-nanoc-21-small.png" alt="What‚Äôs New in nanoc 2.1">
</div>

<p>Welcome to the final installment of <i>What‚Äôs New in nanoc 2.1</i>. In this article I‚Äôll show you several miscellaneous improvements and features I couldn‚Äôt fit elsewhere.</p>

<p>The <strong>autocompiler now uses Rack</strong>, so this is good news if you don‚Äôt like WEBrick and would like to use something else instead. Thin, Mongrel, Ebb, &hellip; you name it.</p>

<p><strong>Layout processors are gone</strong> entirely. Instead, use filters. Layouts consist of metafiles and content files now, and the meta files determine the filter to be run. This means less code duplication, as there‚Äôs no need to have both e.g. a Haml filter <em>and</em> a Haml layout processor.</p>

<p>A layout only has one attribute, <code>filter</code>, which determines the filter to be run. Here‚Äôs what the meta file of the nanoc site‚Äôs default layout contains, to show you how this works:</p>

<pre><code class="language-yaml">filter: 'erb'</code></pre>

<p><strong>Layouts can be stored hierarchically</strong>. This is useful in case you want to e.g. create a "partials" directory in your layouts directory, in which you‚Äôd store partials you want to render. Or, you could have a directory named "sidebars" in which you store sidebars, in case you want to render different sidebars for different sections on the site.</p>

<p>Here‚Äôs an example that shows how you‚Äôd render the "header" layout, located inside the "partials" directory inside the "layouts" directory:</p>

<pre><code class="language-ruby">&lt;%= render 'partials/header' %&gt;</code></pre>

<p>Nothing really important, but the <code>nanoc_require</code> function is gone&mdash;simply use the good old <code>require</code> function now.</p>

<p>nanoc is now bundled with <strong>three new filters</strong>: <a href="http://github.com/rtomayko/rdiscount/tree/master">rdiscount</a> (a fast implementation of Markdown), <a href="http://maruku.rubyforge.org/">maruku</a> (an implementation of a Markdown superset) and <a href="http://www.kuwata-lab.com/erubis/">erubis</a> (a fast implementation of eRuby). Because the filter used for processing layouts is no longer determined by the file extension, you can actually use Erubis instead of ERB for layouts now.</p>

<p>A lot of helpers have been bundled with nanoc. There‚Äôs helpers for <a href="http://nanoc.stoneship.org/docs/api/3.1/Nanoc3/Helpers/Blogging.html">blogging</a>, <a href="http://nanoc.stoneship.org/docs/api/3.1/Nanoc3/Helpers/Tagging.html">tagging</a>, <a href="http://nanoc.stoneship.org/docs/api/3.1/Nanoc3/Helpers/Capturing.html">capturing</a>, <a href="http://nanoc.stoneship.org/docs/api/3.1/Nanoc3/Helpers/HTMLEscape.html">HTML-escaping</a>, <a href="http://nanoc.stoneship.org/docs/api/3.1/Nanoc3/Helpers/Render.html">rendering</a>, building <a href="http://nanoc.stoneship.org/docs/api/3.1/Nanoc3/Helpers/XMLSitemap.html">XML sitemaps</a> and <a href="http://nanoc.stoneship.org/docs/api/3.1/Nanoc3/Helpers/LinkTo.html">linking</a>. All of these helpers are quite thoroughly documented so using them should be a breeze. These helpers will first need to be activated before they can be used (except the Render and HTMLEscape ones), which works like this:</p>

<pre><code class="language-ruby">include Nanoc::Helpers::LinkTo</code></pre>

<p>These helpers were previously available as plugins on the <a href="http://nanoc.stoneship.org/trac">wiki</a>, but now they‚Äôre actually bundled so you don‚Äôt have to download them separately. More helpers (and filters) will be added to the standard nanoc distribution later on; contributions are always welcome.</p>

<p>I forgot to mention it before, but <strong>nanoc 2.1 is entirely backwards compatible</strong> with nanoc 2.0. This means that a site that can be compiled with nanoc 2.0 (and doesn‚Äôt show any deprecation warnings) should compile flawlessly using nanoc 2.1.</p>

<p>So, this is the end of the very last installment of <i>What‚Äôs New in nanoc 2.1</i>. I hope you enjoyed it! nanoc 2.1 itself is <em>nearly</em> ready, but still needs a tiny bit of work. With a bit of luck, there‚Äôll be a release at the end of the week. Stay tuned!</p>
;T;@n"/blog/21/2008-07-23/{;{
;I"‘ <!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<title>nanoc ‚Ä∫ WNin #4: routers</title>
<meta content="nanoc 3.4.0" name="generator">
<link href="/assets/style-v17.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://feeds.feedburner.com/nanoc" rel="alternate" title="The nanoc Blog" type="application/atom+xml">
<script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-15639968-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script>
</head>
<body>
<div class="wrapper">
<!-- ***** navigation ***** -->
<div class="nav">
<ol>
<li><a href="/"><span>Home</span></a></li>
<li><a href="/blog/"><span>News</span></a></li>
<li><a href="/docs/"><span>Documentation</span></a></li>
<li><a href="/community/"><span>Community</span></a></li>
</ol>
</div>
<!-- ***** sidebar ***** -->
<div class="side">
<ol>
<li><a href="/blog/13/"><span>Articles about v3.4</span></a></li>
<li><a href="/blog/12/"><span>Articles about v0.12.x</span></a></li>
</ol>
</div>
<!-- ***** body ***** -->
<div class="body">
<div class="article">
<div class="header">
<h1>WNin #4: routers</h1>
</div>
<div class="figure wnin21">
	<img src="/assets/images/whats-new-in-nanoc-21-small.png" alt="What‚Äôs New in nanoc 2.1">
</div>

<p>Welcome to the 4th installment of What‚Äôs New in nanoc 2.1. This article introduces a new feature in nanoc 2.1 named <em>Routers</em>.</p>

<p>First, a word about <em>paths</em>. Every page has a path starting and ending with a slash. The root and about page‚Äôs paths could be <span class="path">/</span> and <span class="path">/about/</span>, for example. A page‚Äôs path depends on the way it is stored; when using the <i>filesystem</i> or <i>filesystem_combined</i> data sources, the path is determined by the directory hierarchy in the <span class="path">content</span> directory.</p>

<p>Then there‚Äôs a page‚Äôs <em>output path</em> or <em>disk path</em>, which includes the terminating &#8220;index.html&#8221;. It is the path where the compiled page will be written to. The <em>web path</em> is the disk path without the trailing &#8220;index.html&#8221;, for pretty URLs. Unless you‚Äôre using <code>custom_path</code> to set a custom output path, the web path is the same as the page‚Äôs path.</p>

<p>Speaking of pretty URLs: it is now possible to tell nanoc about the <strong>list of index filenames</strong> you want to have stripped of paths. This is quite useful when you want to generate &#8220;default.htm&#8221; files instead of &#8220;index.html&#8221; because you‚Äôre running some weird web server. In the site‚Äôs configuration file, simply set <code>index_filenames</code> to the list of index filenames to strip. For example:</p>

<pre><code class="language-yaml"><span class="key">index_filenames</span>:
  - <span class="string"><span class="content">'index.htm'</span></span>
  - <span class="string"><span class="content">'index.html'</span></span>
  - <span class="string"><span class="content">'default.htm'</span></span></code></pre>

<p>If you want to generate &#8220;default.htm&#8221; instead of &#8220;index.html&#8221; files by default, simply set the filename and extension in the global metadata file. You could already do this with nanoc 2.0, but I‚Äôll repeat it because it‚Äôs relevant. Here‚Äôs an example of what the global <span class="path">meta.yaml</span> could look like:</p>

<pre><code class="language-yaml"><span class="comment"># Built-in</span>
<span class="key">filename</span>:  <span class="string"><span class="content">'default'</span></span>
<span class="key">extension</span>: <span class="string"><span class="content">'htm'</span></span>
<span class="error">‚Ä¶</span>

<span class="comment"># Custom</span>
<span class="error">‚Ä¶</span></code></pre>

<p>With the list of index filenames including &#8220;default.htm&#8221;, a page with path <span class="path">/foo/</span> will now have a web path <span class="path">/foo/</span> instead of <span class="path">/foo/default.htm</span>. Pretty.</p>

<p>So‚Ä¶ <em>routers</em>. Before 2.1, a page‚Äôs web path was always the same as the page path. A page with path <span class="path">/about/</span> would be written to <span class="path">/about/index.html</span>, for example. <strong>Routers allow paths to be rewritten</strong>; the hierarchy of pages in <span class="path">output</span> can, in fact, be entirely different.</p>

<p>I‚Äôd like to show you what a router looks like, but unfortunately that would require me to explain a new feature of nanoc 2.1 called <em>multiple representations</em>, which I‚Äôm going to discuss in a future installment. So, what I‚Äôm going to do is show fake, non-functional code which should never, ever be used. For illustrative purposes only, mkay?</p>

<p>The default router could, <em>hypothetically</em>, look like this:</p>

<pre><code class="language-ruby"><span class="keyword">class</span> <span class="class">Default</span> &lt; <span class="constant">Nanoc</span>::<span class="constant">Router</span>

  identifier <span class="symbol">:default</span>

  <span class="keyword">def</span> <span class="function">path_for_page</span>(page)
    <span class="comment"># Get data we need</span>
    filename   = page.attribute_named(<span class="symbol">:filename</span>)
    extension  = page.attribute_named(<span class="symbol">:extension</span>)
    path       = page.path

    <span class="comment"># Build path</span>
    path + filename + <span class="string"><span class="delimiter">'</span><span class="content">.</span><span class="delimiter">'</span></span> + extension
  <span class="keyword">end</span>

<span class="keyword">end</span></code></pre>

<p>What this router does, is quite straightforward. When asking the router for the (disk) path for a given page, it simply returns the path with the filename and extension appended to it. Nothing special. (<em>But remember that it‚Äôs a fake router and won‚Äôt work!</em>)</p>

<p>At this point, routers may not seem very useful yet, but they play a larger role with multiple representations. You‚Äôll see soon. There are a few useful things you can do with routers already, though:</p>

<ul>
<li><p>Write a router that changes the paths of journal articles to something like <span class="path">/blog/year/month/day/title</span>, without having to store pages this way (because storing pages hierarchically like this will require a lot of directories, which isn‚Äôt too pretty). Simply store articles like <span class="path">/blog/year/title</span> and have a router clean up those paths.</p></li>

	<li><p>When building a site in multiple languages, it‚Äôs best to keep a page‚Äôs different languages close together, e.g. <span class="path">/foo/bar/en/</span> and <span class="path">/foo/bar/fr/</span>. When changing a page in one language, it‚Äôs easy to change the page‚Äôs other languages because they‚Äôre close. With routers it‚Äôs easy to rewrite the paths so the language appears at the beginning, e.g. <span class="path">/en/foo/bar/</span> and <span class="path">/fr/foo/bar/</span>, respectively.</p></li>
</ul>
<p>Again, I do realise that not being able to show what a router <em>really</em> looks like (with example code) is annoying, but that‚Äôll all be fixed once I start talking about multiple representations. Don‚Äôt worry.</p>

<p>The next installment will discuss perhaps the two biggest new features new in 2.1, <em>asset compilation</em> and <em>multiple representations</em>. Stay tuned!</p>
</div>
</div>
</div>
<!-- ***** footer ***** -->
<div id="footer">
<p>SeqWare ¬© 2007‚Äì2012 Brian O&#8217;Connor. SeqWare is released under the a <a rel="license" href="http://www.gnu.org/licenses/licenses.html">GNU GPL v3</a>. This site is built using the excellent <a href="http://nanoc.stoneship.org/">nanoc</a> tool and examples with the <a href="http://www.fonts.info/info/press/free-fonts-for-font-face-embedding.htm">Graublau</a> and <a href="http://scripts.sil.org/Gentium">Gentium</a> fonts.</p>
</div>
</body>
</html>
;T;	I"”<div class="figure wnin21">
	<img src="/assets/images/whats-new-in-nanoc-21-small.png" alt="What‚Äôs New in nanoc 2.1">
</div>

<p>Welcome to the 4th installment of What‚Äôs New in nanoc 2.1. This article introduces a new feature in nanoc 2.1 named <em>Routers</em>.</p>

<p>First, a word about <em>paths</em>. Every page has a path starting and ending with a slash. The root and about page‚Äôs paths could be <span class="path">/</span> and <span class="path">/about/</span>, for example. A page‚Äôs path depends on the way it is stored; when using the <i>filesystem</i> or <i>filesystem_combined</i> data sources, the path is determined by the directory hierarchy in the <span class="path">content</span> directory.</p>

<p>Then there‚Äôs a page‚Äôs <em>output path</em> or <em>disk path</em>, which includes the terminating "index.html". It is the path where the compiled page will be written to. The <em>web path</em> is the disk path without the trailing "index.html", for pretty URLs. Unless you‚Äôre using <code>custom_path</code> to set a custom output path, the web path is the same as the page‚Äôs path.</p>

<p>Speaking of pretty URLs: it is now possible to tell nanoc about the <strong>list of index filenames</strong> you want to have stripped of paths. This is quite useful when you want to generate "default.htm" files instead of "index.html" because you‚Äôre running some weird web server. In the site‚Äôs configuration file, simply set <code>index_filenames</code> to the list of index filenames to strip. For example:</p>

<pre><code class="language-yaml">index_filenames:
  - 'index.htm'
  - 'index.html'
  - 'default.htm'</code></pre>

<p>If you want to generate "default.htm" instead of "index.html" files by default, simply set the filename and extension in the global metadata file. You could already do this with nanoc 2.0, but I‚Äôll repeat it because it‚Äôs relevant. Here‚Äôs an example of what the global <span class="path">meta.yaml</span> could look like:</p>

<pre><code class="language-yaml"># Built-in
filename:  'default'
extension: 'htm'
‚Ä¶

# Custom
‚Ä¶</code></pre>

<p>With the list of index filenames including "default.htm", a page with path <span class="path">/foo/</span> will now have a web path <span class="path">/foo/</span> instead of <span class="path">/foo/default.htm</span>. Pretty.</p>

<p>So&hellip; <em>routers</em>. Before 2.1, a page‚Äôs web path was always the same as the page path. A page with path <span class="path">/about/</span> would be written to <span class="path">/about/index.html</span>, for example. <strong>Routers allow paths to be rewritten</strong>; the hierarchy of pages in <span class="path">output</span> can, in fact, be entirely different.</p>

<p>I‚Äôd like to show you what a router looks like, but unfortunately that would require me to explain a new feature of nanoc 2.1 called <em>multiple representations</em>, which I‚Äôm going to discuss in a future installment. So, what I‚Äôm going to do is show fake, non-functional code which should never, ever be used. For illustrative purposes only, mkay?</p>

<p>The default router could, <em>hypothetically</em>, look like this:</p>

<pre><code class="language-ruby">class Default &lt; Nanoc::Router

  identifier :default

  def path_for_page(page)
    # Get data we need
    filename   = page.attribute_named(:filename)
    extension  = page.attribute_named(:extension)
    path       = page.path

    # Build path
    path + filename + '.' + extension
  end

end</code></pre>

<p>What this router does, is quite straightforward. When asking the router for the (disk) path for a given page, it simply returns the path with the filename and extension appended to it. Nothing special. (<em>But remember that it‚Äôs a fake router and won‚Äôt work!</em>)</p>

<p>At this point, routers may not seem very useful yet, but they play a larger role with multiple representations. You‚Äôll see soon. There are a few useful things you can do with routers already, though:</p>

<ul>
	<li><p>Write a router that changes the paths of journal articles to something like <span class="path">/blog/year/month/day/title</span>, without having to store pages this way (because storing pages hierarchically like this will require a lot of directories, which isn‚Äôt too pretty). Simply store articles like <span class="path">/blog/year/title</span> and have a router clean up those paths.</p></li>

	<li><p>When building a site in multiple languages, it‚Äôs best to keep a page‚Äôs different languages close together, e.g. <span class="path">/foo/bar/en/</span> and <span class="path">/foo/bar/fr/</span>. When changing a page in one language, it‚Äôs easy to change the page‚Äôs other languages because they‚Äôre close. With routers it‚Äôs easy to rewrite the paths so the language appears at the beginning, e.g. <span class="path">/en/foo/bar/</span> and <span class="path">/fr/foo/bar/</span>, respectively.</p></li>
</ul>

<p>Again, I do realise that not being able to show what a router <em>really</em> looks like (with example code) is annoying, but that‚Äôll all be fixed once I start talking about multiple representations. Don‚Äôt worry.</p>

<p>The next installment will discuss perhaps the two biggest new features new in 2.1, <em>asset compilation</em> and <em>multiple representations</em>. Stay tuned!</p>
;T;
I" <div class="figure wnin21">
	<img src="/assets/images/whats-new-in-nanoc-21-small.png" alt="What‚Äôs New in nanoc 2.1">
</div>

<p>Welcome to the 4th installment of What‚Äôs New in nanoc 2.1. This article introduces a new feature in nanoc 2.1 named <em>Routers</em>.</p>

<p>First, a word about <em>paths</em>. Every page has a path starting and ending with a slash. The root and about page‚Äôs paths could be <span class="path">/</span> and <span class="path">/about/</span>, for example. A page‚Äôs path depends on the way it is stored; when using the <i>filesystem</i> or <i>filesystem_combined</i> data sources, the path is determined by the directory hierarchy in the <span class="path">content</span> directory.</p>

<p>Then there‚Äôs a page‚Äôs <em>output path</em> or <em>disk path</em>, which includes the terminating "index.html". It is the path where the compiled page will be written to. The <em>web path</em> is the disk path without the trailing "index.html", for pretty URLs. Unless you‚Äôre using <code>custom_path</code> to set a custom output path, the web path is the same as the page‚Äôs path.</p>

<p>Speaking of pretty URLs: it is now possible to tell nanoc about the <strong>list of index filenames</strong> you want to have stripped of paths. This is quite useful when you want to generate "default.htm" files instead of "index.html" because you‚Äôre running some weird web server. In the site‚Äôs configuration file, simply set <code>index_filenames</code> to the list of index filenames to strip. For example:</p>

<pre><code class="language-yaml">index_filenames:
  - 'index.htm'
  - 'index.html'
  - 'default.htm'</code></pre>

<p>If you want to generate "default.htm" instead of "index.html" files by default, simply set the filename and extension in the global metadata file. You could already do this with nanoc 2.0, but I‚Äôll repeat it because it‚Äôs relevant. Here‚Äôs an example of what the global <span class="path">meta.yaml</span> could look like:</p>

<pre><code class="language-yaml"># Built-in
filename:  'default'
extension: 'htm'
‚Ä¶

# Custom
‚Ä¶</code></pre>

<p>With the list of index filenames including "default.htm", a page with path <span class="path">/foo/</span> will now have a web path <span class="path">/foo/</span> instead of <span class="path">/foo/default.htm</span>. Pretty.</p>

<p>So‚Ä¶ <em>routers</em>. Before 2.1, a page‚Äôs web path was always the same as the page path. A page with path <span class="path">/about/</span> would be written to <span class="path">/about/index.html</span>, for example. <strong>Routers allow paths to be rewritten</strong>; the hierarchy of pages in <span class="path">output</span> can, in fact, be entirely different.</p>

<p>I‚Äôd like to show you what a router looks like, but unfortunately that would require me to explain a new feature of nanoc 2.1 called <em>multiple representations</em>, which I‚Äôm going to discuss in a future installment. So, what I‚Äôm going to do is show fake, non-functional code which should never, ever be used. For illustrative purposes only, mkay?</p>

<p>The default router could, <em>hypothetically</em>, look like this:</p>

<pre><code class="language-ruby">class Default &lt; Nanoc::Router

  identifier :default

  def path_for_page(page)
    # Get data we need
    filename   = page.attribute_named(:filename)
    extension  = page.attribute_named(:extension)
    path       = page.path

    # Build path
    path + filename + '.' + extension
  end

end</code></pre>

<p>What this router does, is quite straightforward. When asking the router for the (disk) path for a given page, it simply returns the path with the filename and extension appended to it. Nothing special. (<em>But remember that it‚Äôs a fake router and won‚Äôt work!</em>)</p>

<p>At this point, routers may not seem very useful yet, but they play a larger role with multiple representations. You‚Äôll see soon. There are a few useful things you can do with routers already, though:</p>

<ul>
<li><p>Write a router that changes the paths of journal articles to something like <span class="path">/blog/year/month/day/title</span>, without having to store pages this way (because storing pages hierarchically like this will require a lot of directories, which isn‚Äôt too pretty). Simply store articles like <span class="path">/blog/year/title</span> and have a router clean up those paths.</p></li>

	<li><p>When building a site in multiple languages, it‚Äôs best to keep a page‚Äôs different languages close together, e.g. <span class="path">/foo/bar/en/</span> and <span class="path">/foo/bar/fr/</span>. When changing a page in one language, it‚Äôs easy to change the page‚Äôs other languages because they‚Äôre close. With routers it‚Äôs easy to rewrite the paths so the language appears at the beginning, e.g. <span class="path">/en/foo/bar/</span> and <span class="path">/fr/foo/bar/</span>, respectively.</p></li>
</ul><p>Again, I do realise that not being able to show what a router <em>really</em> looks like (with example code) is annoying, but that‚Äôll all be fixed once I start talking about multiple representations. Don‚Äôt worry.</p>

<p>The next installment will discuss perhaps the two biggest new features new in 2.1, <em>asset compilation</em> and <em>multiple representations</em>. Stay tuned!</p>;T;I"”<div class="figure wnin21">
	<img src="/assets/images/whats-new-in-nanoc-21-small.png" alt="What‚Äôs New in nanoc 2.1">
</div>

<p>Welcome to the 4th installment of What‚Äôs New in nanoc 2.1. This article introduces a new feature in nanoc 2.1 named <em>Routers</em>.</p>

<p>First, a word about <em>paths</em>. Every page has a path starting and ending with a slash. The root and about page‚Äôs paths could be <span class="path">/</span> and <span class="path">/about/</span>, for example. A page‚Äôs path depends on the way it is stored; when using the <i>filesystem</i> or <i>filesystem_combined</i> data sources, the path is determined by the directory hierarchy in the <span class="path">content</span> directory.</p>

<p>Then there‚Äôs a page‚Äôs <em>output path</em> or <em>disk path</em>, which includes the terminating "index.html". It is the path where the compiled page will be written to. The <em>web path</em> is the disk path without the trailing "index.html", for pretty URLs. Unless you‚Äôre using <code>custom_path</code> to set a custom output path, the web path is the same as the page‚Äôs path.</p>

<p>Speaking of pretty URLs: it is now possible to tell nanoc about the <strong>list of index filenames</strong> you want to have stripped of paths. This is quite useful when you want to generate "default.htm" files instead of "index.html" because you‚Äôre running some weird web server. In the site‚Äôs configuration file, simply set <code>index_filenames</code> to the list of index filenames to strip. For example:</p>

<pre><code class="language-yaml">index_filenames:
  - 'index.htm'
  - 'index.html'
  - 'default.htm'</code></pre>

<p>If you want to generate "default.htm" instead of "index.html" files by default, simply set the filename and extension in the global metadata file. You could already do this with nanoc 2.0, but I‚Äôll repeat it because it‚Äôs relevant. Here‚Äôs an example of what the global <span class="path">meta.yaml</span> could look like:</p>

<pre><code class="language-yaml"># Built-in
filename:  'default'
extension: 'htm'
‚Ä¶

# Custom
‚Ä¶</code></pre>

<p>With the list of index filenames including "default.htm", a page with path <span class="path">/foo/</span> will now have a web path <span class="path">/foo/</span> instead of <span class="path">/foo/default.htm</span>. Pretty.</p>

<p>So&hellip; <em>routers</em>. Before 2.1, a page‚Äôs web path was always the same as the page path. A page with path <span class="path">/about/</span> would be written to <span class="path">/about/index.html</span>, for example. <strong>Routers allow paths to be rewritten</strong>; the hierarchy of pages in <span class="path">output</span> can, in fact, be entirely different.</p>

<p>I‚Äôd like to show you what a router looks like, but unfortunately that would require me to explain a new feature of nanoc 2.1 called <em>multiple representations</em>, which I‚Äôm going to discuss in a future installment. So, what I‚Äôm going to do is show fake, non-functional code which should never, ever be used. For illustrative purposes only, mkay?</p>

<p>The default router could, <em>hypothetically</em>, look like this:</p>

<pre><code class="language-ruby">class Default &lt; Nanoc::Router

  identifier :default

  def path_for_page(page)
    # Get data we need
    filename   = page.attribute_named(:filename)
    extension  = page.attribute_named(:extension)
    path       = page.path

    # Build path
    path + filename + '.' + extension
  end

end</code></pre>

<p>What this router does, is quite straightforward. When asking the router for the (disk) path for a given page, it simply returns the path with the filename and extension appended to it. Nothing special. (<em>But remember that it‚Äôs a fake router and won‚Äôt work!</em>)</p>

<p>At this point, routers may not seem very useful yet, but they play a larger role with multiple representations. You‚Äôll see soon. There are a few useful things you can do with routers already, though:</p>

<ul>
	<li><p>Write a router that changes the paths of journal articles to something like <span class="path">/blog/year/month/day/title</span>, without having to store pages this way (because storing pages hierarchically like this will require a lot of directories, which isn‚Äôt too pretty). Simply store articles like <span class="path">/blog/year/title</span> and have a router clean up those paths.</p></li>

	<li><p>When building a site in multiple languages, it‚Äôs best to keep a page‚Äôs different languages close together, e.g. <span class="path">/foo/bar/en/</span> and <span class="path">/foo/bar/fr/</span>. When changing a page in one language, it‚Äôs easy to change the page‚Äôs other languages because they‚Äôre close. With routers it‚Äôs easy to rewrite the paths so the language appears at the beginning, e.g. <span class="path">/en/foo/bar/</span> and <span class="path">/fr/foo/bar/</span>, respectively.</p></li>
</ul>

<p>Again, I do realise that not being able to show what a router <em>really</em> looks like (with example code) is annoying, but that‚Äôll all be fixed once I start talking about multiple representations. Don‚Äôt worry.</p>

<p>The next installment will discuss perhaps the two biggest new features new in 2.1, <em>asset compilation</em> and <em>multiple representations</em>. Stay tuned!</p>
;T;@u"/blog/21/2008-07-12/{;{
;I"”(<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<title>nanoc ‚Ä∫ WNin #1: improved CLI tool</title>
<meta content="nanoc 3.4.0" name="generator">
<link href="/assets/style-v17.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://feeds.feedburner.com/nanoc" rel="alternate" title="The nanoc Blog" type="application/atom+xml">
<script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-15639968-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script>
</head>
<body>
<div class="wrapper">
<!-- ***** navigation ***** -->
<div class="nav">
<ol>
<li><a href="/"><span>Home</span></a></li>
<li><a href="/blog/"><span>News</span></a></li>
<li><a href="/docs/"><span>Documentation</span></a></li>
<li><a href="/community/"><span>Community</span></a></li>
</ol>
</div>
<!-- ***** sidebar ***** -->
<div class="side">
<ol>
<li><a href="/blog/13/"><span>Articles about v3.4</span></a></li>
<li><a href="/blog/12/"><span>Articles about v0.12.x</span></a></li>
</ol>
</div>
<!-- ***** body ***** -->
<div class="body">
<div class="article">
<div class="header">
<h1>WNin #1: improved CLI tool</h1>
</div>
<div class="figure wnin21">
	<img src="/assets/images/whats-new-in-nanoc-21-small.png" alt="What‚Äôs New in nanoc 2.1">
</div>

<p>Welcome to the first installment of <i>What‚Äôs New in nanoc 2.1</i>! This installment introduces the first new important feature of nanoc 2.1: the <strong>improved commandline interface</strong>, which is not only a lot prettier but offers a few new features as well.</p>

<p>The first of these new features includes <strong>built-in commandline help</strong> for every command. For example, the <kbd>compile</kbd> command has a help page that looks like this:</p>

<pre><samp>nanoc compile [options] [path]

compile pages and assets of this site

    Compile all pages and all assets of the current site. If a path is given,
    only the page or asset with the given path will be compiled. Additionally,
    only pages and assets that are outdated will be compiled, unless specified
    otherwise with the -a option.

options:

    -a --all        compile all pages and assets, even those that aren‚Äôt
                    outdated</samp></pre>

<p>As you can see, the <kbd>compile</kbd> command has grown up a bit and it‚Äôs now possible to tell nanoc only to compile a single page instead of the entire site. Note that nanoc also no longer compiles pages unless they‚Äôre considered &#8220;outdated&#8221;‚Äîa real time saver.</p>

<p>Also neat is that <strong>command abbreviations are detected automatically</strong>. The <kbd>co</kbd> command, for example, will be expanded to <kbd>compile</kbd> because there‚Äôs no other command starting with <kbd>co</kbd>. Additionally, if you type something ambiguous, you‚Äôll be notified:</p>

<pre><kbd><span class="prompt">%</span> nanoc c</kbd>
<samp>nanoc: &#8216;c&#8217; is ambiguous:
  create_template create_site create_page create_layout compile</samp></pre>

<p><strong>Error reporting has also been improved.</strong> If a compilation error occurs at some point, the stack of what was being compiled will be printed. The following example shows that something went wrong when compiling the &#8220;meta&#8221; layout, which was rendered from inside the &#8220;journal_archive&#8221; layout, which in turn was rendered from inside the &#8220;journal/2008&#8221; page:</p>

<pre><samp>Compilation stack:
  - [layout] /meta/
  - [layout] /journal_archive/
  - [page]   /journal/2008/ (rep default)</samp></pre>

<p>Of course, the actual error message and the Ruby stack trace will be printed as well, which should make debugging any accidental errors on your site quite a bit easier. (Ignore the &#8220;rep&#8221; thing for now. We‚Äôll talk about that later.)</p>

<p>When passing the <kbd>--verbose</kbd> switch to the <kbd>compile</kbd> command, a pretty table containing some <strong>profiling information</strong> will be printed. Very useful if you want to optimize some of your custom filters. For example, this is the output for my personal web site:</p>

<pre><samp>                        | count    min    avg    max     tot
------------------------+-----------------------------------
                    erb |    95  0.00s  0.01s  0.23s   0.74s
image_science_thumbnail |    69  0.22s  0.27s  0.35s  18.51s
              bluecloth |     2  0.06s  0.10s  0.15s   0.21s
      website_thumbnail |    12  0.25s  0.48s  0.97s   5.80s
            compile_css |     2  0.00s  0.00s  0.00s   0.00s
              rubypants |    53  0.01s  0.03s  0.09s   1.39s
              rdiscount |    11  0.00s  0.00s  0.01s   0.02s</samp></pre>

<p>This shows that the &#8220;compile_css&#8221; as well as &#8220;rdiscount&#8221; filters are extremely fast, while the &#8220;image_science_thumbnail&#8221; and especially the &#8220;website_thumbnail&#8221; filters are really slow. (Those thumbnail filters are filters that apply to image assets, not to pages‚Äîasset compilation is something that‚Äôll be discussed later).</p>

<p>Last but not least: it‚Äôs now possible to <strong>write your own commands</strong>. Even though <a href="http://rake.rubyforge.org/">rake</a> is sufficient for performing simple tasks, sometimes you need a more advanced tool that allows passing commandline arguments. Now you can write custom commands. Here‚Äôs a &#8220;Hello World&#8221; example:</p>

<pre><code class="language-ruby">require <span class="string"><span class="delimiter">'</span><span class="content">nanoc/cli</span><span class="delimiter">'</span></span>

<span class="keyword">class</span> <span class="class">HelloWorldCommand</span> &lt; <span class="constant">Nanoc</span>::<span class="constant">CLI</span>::<span class="constant">Command</span>

  <span class="keyword">def</span> <span class="function">name</span>
    <span class="string"><span class="delimiter">'</span><span class="content">hello_world</span><span class="delimiter">'</span></span>
  <span class="keyword">end</span>

  <span class="keyword">def</span> <span class="function">aliases</span>
    <span class="string"><span class="delimiter">%w(</span><span class="content"> hw </span><span class="delimiter">)</span></span>
  <span class="keyword">end</span>

  <span class="keyword">def</span> <span class="function">short_desc</span>
    <span class="string"><span class="delimiter">'</span><span class="content">print a simple greeting</span><span class="delimiter">'</span></span>
  <span class="keyword">end</span>

  <span class="keyword">def</span> <span class="function">long_desc</span>
    <span class="string"><span class="delimiter">'</span><span class="content">Print the "hello world" greeting on the screen, in either </span><span class="delimiter">'</span></span> +
    <span class="string"><span class="delimiter">'</span><span class="content">lowercase or uppercase. Can also print a custom text.</span><span class="delimiter">'</span></span>
  <span class="keyword">end</span>

  <span class="keyword">def</span> <span class="function">usage</span>
    <span class="string"><span class="delimiter">"</span><span class="content">nanoc hello_world [options] [custom_text]</span><span class="delimiter">"</span></span>
  <span class="keyword">end</span>

  <span class="keyword">def</span> <span class="function">option_definitions</span>
    [
      <span class="comment"># --uppercase</span>
      {
        <span class="symbol">:long</span> =&gt; <span class="string"><span class="delimiter">'</span><span class="content">uppercase</span><span class="delimiter">'</span></span>, <span class="symbol">:short</span> =&gt; <span class="string"><span class="delimiter">'</span><span class="content">u</span><span class="delimiter">'</span></span>, <span class="symbol">:argument</span> =&gt; <span class="symbol">:forbidden</span>,
        <span class="symbol">:desc</span> =&gt; <span class="string"><span class="delimiter">'</span><span class="content">print the text in uppercase instead of lowercase</span><span class="delimiter">'</span></span>
      }
    ]
  <span class="keyword">end</span>

  <span class="keyword">def</span> <span class="function">run</span>(options, arguments)
    <span class="comment"># Get text</span>
    text = (arguments[<span class="integer">0</span>] || <span class="string"><span class="delimiter">'</span><span class="content">hello world</span><span class="delimiter">'</span></span>)

    <span class="comment"># Print it</span>
    puts (options.has_key?(<span class="symbol">:uppercase</span>) ? text.upcase : text.downcase)
  <span class="keyword">end</span>

<span class="keyword">end</span></code></pre>

<p>Some example output:</p>

<pre><kbd><span class="prompt">%</span> nanoc hello_world blah</kbd>
<samp>blah</samp>
<kbd><span class="prompt">%</span> nanoc hw -u blah</kbd>
<samp>BLAH</samp>
<kbd><span class="prompt">%</span> nanoc hello -u</kbd>
<samp>HELLO WORLD</samp>
<kbd><span class="prompt">%</span> nanoc hw</kbd>
<samp>hello world</samp></pre>

<p>The auto-generated help page:</p>

<pre><samp>nanoc hello_world [options] [custom_text]

aliases: hw

print a simple greeting

    Print the "hello world" greeting on the screen, in either lowercase or
    uppercase. Can also print a custom text.

options:

    -u --uppercase  print the text in uppercase instead of lowercase</samp></pre>

<p>That‚Äôs it for now. Stay tuned for the second installment of <i>What‚Äôs New in nanoc 2.1</i>, which will discuss changes to the internals of nanoc and their implications.</p>
</div>
</div>
</div>
<!-- ***** footer ***** -->
<div id="footer">
<p>SeqWare ¬© 2007‚Äì2012 Brian O&#8217;Connor. SeqWare is released under the a <a rel="license" href="http://www.gnu.org/licenses/licenses.html">GNU GPL v3</a>. This site is built using the excellent <a href="http://nanoc.stoneship.org/">nanoc</a> tool and examples with the <a href="http://www.fonts.info/info/press/free-fonts-for-font-face-embedding.htm">Graublau</a> and <a href="http://scripts.sil.org/Gentium">Gentium</a> fonts.</p>
</div>
</body>
</html>
;T;	I"Ò<div class="figure wnin21">
	<img src="/assets/images/whats-new-in-nanoc-21-small.png" alt="What‚Äôs New in nanoc 2.1">
</div>

<p>Welcome to the first installment of <i>What‚Äôs New in nanoc 2.1</i>! This installment introduces the first new important feature of nanoc 2.1: the <strong>improved commandline interface</strong>, which is not only a lot prettier but offers a few new features as well.</p>

<p>The first of these new features includes <strong>built-in commandline help</strong> for every command. For example, the <kbd>compile</kbd> command has a help page that looks like this:</p>

<pre><samp>nanoc compile [options] [path]

compile pages and assets of this site

    Compile all pages and all assets of the current site. If a path is given,
    only the page or asset with the given path will be compiled. Additionally,
    only pages and assets that are outdated will be compiled, unless specified
    otherwise with the -a option.

options:

    -a --all        compile all pages and assets, even those that aren‚Äôt
                    outdated</samp></pre>

<p>As you can see, the <kbd>compile</kbd> command has grown up a bit and it‚Äôs now possible to tell nanoc only to compile a single page instead of the entire site. Note that nanoc also no longer compiles pages unless they‚Äôre considered "outdated"‚Äîa real time saver.</p>

<p>Also neat is that <strong>command abbreviations are detected automatically</strong>. The <kbd>co</kbd> command, for example, will be expanded to <kbd>compile</kbd> because there‚Äôs no other command starting with <kbd>co</kbd>. Additionally, if you type something ambiguous, you‚Äôll be notified:</p>

<pre><kbd><span class="prompt">%</span> nanoc c</kbd>
<samp>nanoc: 'c' is ambiguous:
  create_template create_site create_page create_layout compile</samp></pre>

<p><strong>Error reporting has also been improved.</strong> If a compilation error occurs at some point, the stack of what was being compiled will be printed. The following example shows that something went wrong when compiling the "meta" layout, which was rendered from inside the "journal_archive" layout, which in turn was rendered from inside the "journal/2008" page:</p>

<pre><samp>Compilation stack:
  - [layout] /meta/
  - [layout] /journal_archive/
  - [page]   /journal/2008/ (rep default)</samp></pre>

<p>Of course, the actual error message and the Ruby stack trace will be printed as well, which should make debugging any accidental errors on your site quite a bit easier. (Ignore the "rep" thing for now. We‚Äôll talk about that later.)</p>

<p>When passing the <kbd>--verbose</kbd> switch to the <kbd>compile</kbd> command, a pretty table containing some <strong>profiling information</strong> will be printed. Very useful if you want to optimize some of your custom filters. For example, this is the output for my personal web site:</p>

<pre><samp>                        | count    min    avg    max     tot
------------------------+-----------------------------------
                    erb |    95  0.00s  0.01s  0.23s   0.74s
image_science_thumbnail |    69  0.22s  0.27s  0.35s  18.51s
              bluecloth |     2  0.06s  0.10s  0.15s   0.21s
      website_thumbnail |    12  0.25s  0.48s  0.97s   5.80s
            compile_css |     2  0.00s  0.00s  0.00s   0.00s
              rubypants |    53  0.01s  0.03s  0.09s   1.39s
              rdiscount |    11  0.00s  0.00s  0.01s   0.02s</samp></pre>

<p>This shows that the "compile_css" as well as "rdiscount" filters are extremely fast, while the "image_science_thumbnail" and especially the "website_thumbnail" filters are really slow. (Those thumbnail filters are filters that apply to image assets, not to pages‚Äîasset compilation is something that‚Äôll be discussed later).</p>

<p>Last but not least: it‚Äôs now possible to <strong>write your own commands</strong>. Even though <a href="http://rake.rubyforge.org/">rake</a> is sufficient for performing simple tasks, sometimes you need a more advanced tool that allows passing commandline arguments. Now you can write custom commands. Here‚Äôs a "Hello World" example:</p>

<pre><code class="language-ruby">require 'nanoc/cli'

class HelloWorldCommand &lt; Nanoc::CLI::Command

  def name
    'hello_world'
  end

  def aliases
    %w( hw )
  end

  def short_desc
    'print a simple greeting'
  end

  def long_desc
    'Print the "hello world" greeting on the screen, in either ' +
    'lowercase or uppercase. Can also print a custom text.'
  end

  def usage
    "nanoc hello_world [options] [custom_text]"
  end

  def option_definitions
    [
      # --uppercase
      {
        :long => 'uppercase', :short => 'u', :argument => :forbidden,
        :desc => 'print the text in uppercase instead of lowercase'
      }
    ]
  end

  def run(options, arguments)
    # Get text
    text = (arguments[0] || 'hello world')

    # Print it
    puts (options.has_key?(:uppercase) ? text.upcase : text.downcase)
  end

end</code></pre>

<p>Some example output:</p>

<pre><kbd><span class="prompt">%</span> nanoc hello_world blah</kbd>
<samp>blah</samp>
<kbd><span class="prompt">%</span> nanoc hw -u blah</kbd>
<samp>BLAH</samp>
<kbd><span class="prompt">%</span> nanoc hello -u</kbd>
<samp>HELLO WORLD</samp>
<kbd><span class="prompt">%</span> nanoc hw</kbd>
<samp>hello world</samp></pre>

<p>The auto-generated help page:</p>

<pre><samp>nanoc hello_world [options] [custom_text]

aliases: hw

print a simple greeting

    Print the "hello world" greeting on the screen, in either lowercase or
    uppercase. Can also print a custom text.

options:

    -u --uppercase  print the text in uppercase instead of lowercase</samp></pre>

<p>That‚Äôs it for now. Stay tuned for the second installment of <i>What‚Äôs New in nanoc 2.1</i>, which will discuss changes to the internals of nanoc and their implications.</p>
;T;
I"¸<div class="figure wnin21">
	<img src="/assets/images/whats-new-in-nanoc-21-small.png" alt="What‚Äôs New in nanoc 2.1">
</div>

<p>Welcome to the first installment of <i>What‚Äôs New in nanoc 2.1</i>! This installment introduces the first new important feature of nanoc 2.1: the <strong>improved commandline interface</strong>, which is not only a lot prettier but offers a few new features as well.</p>

<p>The first of these new features includes <strong>built-in commandline help</strong> for every command. For example, the <kbd>compile</kbd> command has a help page that looks like this:</p>

<pre><samp>nanoc compile [options] [path]

compile pages and assets of this site

    Compile all pages and all assets of the current site. If a path is given,
    only the page or asset with the given path will be compiled. Additionally,
    only pages and assets that are outdated will be compiled, unless specified
    otherwise with the -a option.

options:

    -a --all        compile all pages and assets, even those that aren‚Äôt
                    outdated</samp></pre>

<p>As you can see, the <kbd>compile</kbd> command has grown up a bit and it‚Äôs now possible to tell nanoc only to compile a single page instead of the entire site. Note that nanoc also no longer compiles pages unless they‚Äôre considered "outdated"‚Äîa real time saver.</p>

<p>Also neat is that <strong>command abbreviations are detected automatically</strong>. The <kbd>co</kbd> command, for example, will be expanded to <kbd>compile</kbd> because there‚Äôs no other command starting with <kbd>co</kbd>. Additionally, if you type something ambiguous, you‚Äôll be notified:</p>

<pre><kbd><span class="prompt">%</span> nanoc c</kbd>
<samp>nanoc: 'c' is ambiguous:
  create_template create_site create_page create_layout compile</samp></pre>

<p><strong>Error reporting has also been improved.</strong> If a compilation error occurs at some point, the stack of what was being compiled will be printed. The following example shows that something went wrong when compiling the "meta" layout, which was rendered from inside the "journal_archive" layout, which in turn was rendered from inside the "journal/2008" page:</p>

<pre><samp>Compilation stack:
  - [layout] /meta/
  - [layout] /journal_archive/
  - [page]   /journal/2008/ (rep default)</samp></pre>

<p>Of course, the actual error message and the Ruby stack trace will be printed as well, which should make debugging any accidental errors on your site quite a bit easier. (Ignore the "rep" thing for now. We‚Äôll talk about that later.)</p>

<p>When passing the <kbd>--verbose</kbd> switch to the <kbd>compile</kbd> command, a pretty table containing some <strong>profiling information</strong> will be printed. Very useful if you want to optimize some of your custom filters. For example, this is the output for my personal web site:</p>

<pre><samp>                        | count    min    avg    max     tot
------------------------+-----------------------------------
                    erb |    95  0.00s  0.01s  0.23s   0.74s
image_science_thumbnail |    69  0.22s  0.27s  0.35s  18.51s
              bluecloth |     2  0.06s  0.10s  0.15s   0.21s
      website_thumbnail |    12  0.25s  0.48s  0.97s   5.80s
            compile_css |     2  0.00s  0.00s  0.00s   0.00s
              rubypants |    53  0.01s  0.03s  0.09s   1.39s
              rdiscount |    11  0.00s  0.00s  0.01s   0.02s</samp></pre>

<p>This shows that the "compile_css" as well as "rdiscount" filters are extremely fast, while the "image_science_thumbnail" and especially the "website_thumbnail" filters are really slow. (Those thumbnail filters are filters that apply to image assets, not to pages‚Äîasset compilation is something that‚Äôll be discussed later).</p>

<p>Last but not least: it‚Äôs now possible to <strong>write your own commands</strong>. Even though <a href="http://rake.rubyforge.org/">rake</a> is sufficient for performing simple tasks, sometimes you need a more advanced tool that allows passing commandline arguments. Now you can write custom commands. Here‚Äôs a "Hello World" example:</p>

<pre><code class="language-ruby">require 'nanoc/cli'

class HelloWorldCommand &lt; Nanoc::CLI::Command

  def name
    'hello_world'
  end

  def aliases
    %w( hw )
  end

  def short_desc
    'print a simple greeting'
  end

  def long_desc
    'Print the "hello world" greeting on the screen, in either ' +
    'lowercase or uppercase. Can also print a custom text.'
  end

  def usage
    "nanoc hello_world [options] [custom_text]"
  end

  def option_definitions
    [
      # --uppercase
      {
        :long =&gt; 'uppercase', :short =&gt; 'u', :argument =&gt; :forbidden,
        :desc =&gt; 'print the text in uppercase instead of lowercase'
      }
    ]
  end

  def run(options, arguments)
    # Get text
    text = (arguments[0] || 'hello world')

    # Print it
    puts (options.has_key?(:uppercase) ? text.upcase : text.downcase)
  end

end</code></pre>

<p>Some example output:</p>

<pre><kbd><span class="prompt">%</span> nanoc hello_world blah</kbd>
<samp>blah</samp>
<kbd><span class="prompt">%</span> nanoc hw -u blah</kbd>
<samp>BLAH</samp>
<kbd><span class="prompt">%</span> nanoc hello -u</kbd>
<samp>HELLO WORLD</samp>
<kbd><span class="prompt">%</span> nanoc hw</kbd>
<samp>hello world</samp></pre>

<p>The auto-generated help page:</p>

<pre><samp>nanoc hello_world [options] [custom_text]

aliases: hw

print a simple greeting

    Print the "hello world" greeting on the screen, in either lowercase or
    uppercase. Can also print a custom text.

options:

    -u --uppercase  print the text in uppercase instead of lowercase</samp></pre>

<p>That‚Äôs it for now. Stay tuned for the second installment of <i>What‚Äôs New in nanoc 2.1</i>, which will discuss changes to the internals of nanoc and their implications.</p>;T;I"Ò<div class="figure wnin21">
	<img src="/assets/images/whats-new-in-nanoc-21-small.png" alt="What‚Äôs New in nanoc 2.1">
</div>

<p>Welcome to the first installment of <i>What‚Äôs New in nanoc 2.1</i>! This installment introduces the first new important feature of nanoc 2.1: the <strong>improved commandline interface</strong>, which is not only a lot prettier but offers a few new features as well.</p>

<p>The first of these new features includes <strong>built-in commandline help</strong> for every command. For example, the <kbd>compile</kbd> command has a help page that looks like this:</p>

<pre><samp>nanoc compile [options] [path]

compile pages and assets of this site

    Compile all pages and all assets of the current site. If a path is given,
    only the page or asset with the given path will be compiled. Additionally,
    only pages and assets that are outdated will be compiled, unless specified
    otherwise with the -a option.

options:

    -a --all        compile all pages and assets, even those that aren‚Äôt
                    outdated</samp></pre>

<p>As you can see, the <kbd>compile</kbd> command has grown up a bit and it‚Äôs now possible to tell nanoc only to compile a single page instead of the entire site. Note that nanoc also no longer compiles pages unless they‚Äôre considered "outdated"‚Äîa real time saver.</p>

<p>Also neat is that <strong>command abbreviations are detected automatically</strong>. The <kbd>co</kbd> command, for example, will be expanded to <kbd>compile</kbd> because there‚Äôs no other command starting with <kbd>co</kbd>. Additionally, if you type something ambiguous, you‚Äôll be notified:</p>

<pre><kbd><span class="prompt">%</span> nanoc c</kbd>
<samp>nanoc: 'c' is ambiguous:
  create_template create_site create_page create_layout compile</samp></pre>

<p><strong>Error reporting has also been improved.</strong> If a compilation error occurs at some point, the stack of what was being compiled will be printed. The following example shows that something went wrong when compiling the "meta" layout, which was rendered from inside the "journal_archive" layout, which in turn was rendered from inside the "journal/2008" page:</p>

<pre><samp>Compilation stack:
  - [layout] /meta/
  - [layout] /journal_archive/
  - [page]   /journal/2008/ (rep default)</samp></pre>

<p>Of course, the actual error message and the Ruby stack trace will be printed as well, which should make debugging any accidental errors on your site quite a bit easier. (Ignore the "rep" thing for now. We‚Äôll talk about that later.)</p>

<p>When passing the <kbd>--verbose</kbd> switch to the <kbd>compile</kbd> command, a pretty table containing some <strong>profiling information</strong> will be printed. Very useful if you want to optimize some of your custom filters. For example, this is the output for my personal web site:</p>

<pre><samp>                        | count    min    avg    max     tot
------------------------+-----------------------------------
                    erb |    95  0.00s  0.01s  0.23s   0.74s
image_science_thumbnail |    69  0.22s  0.27s  0.35s  18.51s
              bluecloth |     2  0.06s  0.10s  0.15s   0.21s
      website_thumbnail |    12  0.25s  0.48s  0.97s   5.80s
            compile_css |     2  0.00s  0.00s  0.00s   0.00s
              rubypants |    53  0.01s  0.03s  0.09s   1.39s
              rdiscount |    11  0.00s  0.00s  0.01s   0.02s</samp></pre>

<p>This shows that the "compile_css" as well as "rdiscount" filters are extremely fast, while the "image_science_thumbnail" and especially the "website_thumbnail" filters are really slow. (Those thumbnail filters are filters that apply to image assets, not to pages‚Äîasset compilation is something that‚Äôll be discussed later).</p>

<p>Last but not least: it‚Äôs now possible to <strong>write your own commands</strong>. Even though <a href="http://rake.rubyforge.org/">rake</a> is sufficient for performing simple tasks, sometimes you need a more advanced tool that allows passing commandline arguments. Now you can write custom commands. Here‚Äôs a "Hello World" example:</p>

<pre><code class="language-ruby">require 'nanoc/cli'

class HelloWorldCommand &lt; Nanoc::CLI::Command

  def name
    'hello_world'
  end

  def aliases
    %w( hw )
  end

  def short_desc
    'print a simple greeting'
  end

  def long_desc
    'Print the "hello world" greeting on the screen, in either ' +
    'lowercase or uppercase. Can also print a custom text.'
  end

  def usage
    "nanoc hello_world [options] [custom_text]"
  end

  def option_definitions
    [
      # --uppercase
      {
        :long => 'uppercase', :short => 'u', :argument => :forbidden,
        :desc => 'print the text in uppercase instead of lowercase'
      }
    ]
  end

  def run(options, arguments)
    # Get text
    text = (arguments[0] || 'hello world')

    # Print it
    puts (options.has_key?(:uppercase) ? text.upcase : text.downcase)
  end

end</code></pre>

<p>Some example output:</p>

<pre><kbd><span class="prompt">%</span> nanoc hello_world blah</kbd>
<samp>blah</samp>
<kbd><span class="prompt">%</span> nanoc hw -u blah</kbd>
<samp>BLAH</samp>
<kbd><span class="prompt">%</span> nanoc hello -u</kbd>
<samp>HELLO WORLD</samp>
<kbd><span class="prompt">%</span> nanoc hw</kbd>
<samp>hello world</samp></pre>

<p>The auto-generated help page:</p>

<pre><samp>nanoc hello_world [options] [custom_text]

aliases: hw

print a simple greeting

    Print the "hello world" greeting on the screen, in either lowercase or
    uppercase. Can also print a custom text.

options:

    -u --uppercase  print the text in uppercase instead of lowercase</samp></pre>

<p>That‚Äôs it for now. Stay tuned for the second installment of <i>What‚Äôs New in nanoc 2.1</i>, which will discuss changes to the internals of nanoc and their implications.</p>
;T;@|"/blog/21/2008-08-17/{;{
;I"Ñ<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<title>nanoc ‚Ä∫ nanoc 2.1 released</title>
<meta content="nanoc 3.4.0" name="generator">
<link href="/assets/style-v17.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://feeds.feedburner.com/nanoc" rel="alternate" title="The nanoc Blog" type="application/atom+xml">
<script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-15639968-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script>
</head>
<body>
<div class="wrapper">
<!-- ***** navigation ***** -->
<div class="nav">
<ol>
<li><a href="/"><span>Home</span></a></li>
<li><a href="/blog/"><span>News</span></a></li>
<li><a href="/docs/"><span>Documentation</span></a></li>
<li><a href="/community/"><span>Community</span></a></li>
</ol>
</div>
<!-- ***** sidebar ***** -->
<div class="side">
<ol>
<li><a href="/blog/13/"><span>Articles about v3.4</span></a></li>
<li><a href="/blog/12/"><span>Articles about v0.12.x</span></a></li>
</ol>
</div>
<!-- ***** body ***** -->
<div class="body">
<div class="article">
<div class="header">
<h1>nanoc 2.1 released</h1>
</div>
<p>nanoc 2.1 is here! Update your nanoc version the usual way:</p>

<pre><kbd><span class="prompt">%</span> gem update nanoc</kbd></pre>

<p>There is no comprehensive changelog, but the &#8220;What‚Äôs New in nanoc 2.1&#8221; series on this news archive should give you a good idea of what is new (hence the name of the series). Here are the relevant posts:</p>

<ol>
<li><a href="#wnin-1-improved-cli-tool-july-12th-2008">improved CLI tool</a></li>
    <li><a href="#wnin-2-an-open-framework-july-20th-2008">an open framework</a></li>
    <li><a href="#wnin-3-improved-data-sources-july-1st-2008">improved data sources</a></li>
    <li><a href="#wnin-4-routers-july-23rd-2008">routers</a></li>
    <li><a href="#wnin-5-assets-august-9th-2008">assets</a></li>
    <li><a href="#wnin-6-miscellaneous-august-11th-2008">miscellaneous</a></li>
</ol>
<p>nanoc 2.1 is entirely backwards compatible with nanoc 2.0. This means that a site that can be compiled with nanoc 2.0 can be compiled without issues using nanoc 2.1.</p>

<p>A lot has changed between 2.0 and 2.1, so it is possible that you‚Äôll run into bugs. If something odd occurs, please do let me know either on the <a href="http://groups.google.com/group/nanoc/">mailinglist</a>, <a href="http://nanoc.stoneship.org/trac/newticket">on Trac</a> or <s>on Bitbucket</s>. I‚Äôll look into the issue as soon as possible and have it fixed in no time. Thanks for reporting!</p>
</div>
</div>
</div>
<!-- ***** footer ***** -->
<div id="footer">
<p>SeqWare ¬© 2007‚Äì2012 Brian O&#8217;Connor. SeqWare is released under the a <a rel="license" href="http://www.gnu.org/licenses/licenses.html">GNU GPL v3</a>. This site is built using the excellent <a href="http://nanoc.stoneship.org/">nanoc</a> tool and examples with the <a href="http://www.fonts.info/info/press/free-fonts-for-font-face-embedding.htm">Graublau</a> and <a href="http://scripts.sil.org/Gentium">Gentium</a> fonts.</p>
</div>
</body>
</html>
;T;	I"ã<p>nanoc 2.1 is here! Update your nanoc version the usual way:</p>

<pre><kbd><span class="prompt">%</span> gem update nanoc</kbd></pre>

<p>There is no comprehensive changelog, but the "What‚Äôs New in nanoc 2.1" series on this news archive should give you a good idea of what is new (hence the name of the series). Here are the relevant posts:</p>

<ol>
    <li><a href="#wnin-1-improved-cli-tool-july-12th-2008">improved CLI tool</a></li>
    <li><a href="#wnin-2-an-open-framework-july-20th-2008">an open framework</a></li>
    <li><a href="#wnin-3-improved-data-sources-july-1st-2008">improved data sources</a></li>
    <li><a href="#wnin-4-routers-july-23rd-2008">routers</a></li>
    <li><a href="#wnin-5-assets-august-9th-2008">assets</a></li>
    <li><a href="#wnin-6-miscellaneous-august-11th-2008">miscellaneous</a></li>
</ol>

<p>nanoc 2.1 is entirely backwards compatible with nanoc 2.0. This means that a site that can be compiled with nanoc 2.0 can be compiled without issues using nanoc 2.1.</p>

<p>A lot has changed between 2.0 and 2.1, so it is possible that you‚Äôll run into bugs. If something odd occurs, please do let me know either on the <a href="http://groups.google.com/group/nanoc/">mailinglist</a>, <a href="http://nanoc.stoneship.org/trac/newticket">on Trac</a> or <s>on Bitbucket</s>. I‚Äôll look into the issue as soon as possible and have it fixed in no time. Thanks for reporting!</p>
;T;
I"Ñ<p>nanoc 2.1 is here! Update your nanoc version the usual way:</p>

<pre><kbd><span class="prompt">%</span> gem update nanoc</kbd></pre>

<p>There is no comprehensive changelog, but the "What‚Äôs New in nanoc 2.1" series on this news archive should give you a good idea of what is new (hence the name of the series). Here are the relevant posts:</p>

<ol>
<li><a href="#wnin-1-improved-cli-tool-july-12th-2008">improved CLI tool</a></li>
    <li><a href="#wnin-2-an-open-framework-july-20th-2008">an open framework</a></li>
    <li><a href="#wnin-3-improved-data-sources-july-1st-2008">improved data sources</a></li>
    <li><a href="#wnin-4-routers-july-23rd-2008">routers</a></li>
    <li><a href="#wnin-5-assets-august-9th-2008">assets</a></li>
    <li><a href="#wnin-6-miscellaneous-august-11th-2008">miscellaneous</a></li>
</ol><p>nanoc 2.1 is entirely backwards compatible with nanoc 2.0. This means that a site that can be compiled with nanoc 2.0 can be compiled without issues using nanoc 2.1.</p>

<p>A lot has changed between 2.0 and 2.1, so it is possible that you‚Äôll run into bugs. If something odd occurs, please do let me know either on the <a href="http://groups.google.com/group/nanoc/">mailinglist</a>, <a href="http://nanoc.stoneship.org/trac/newticket">on Trac</a> or <s>on Bitbucket</s>. I‚Äôll look into the issue as soon as possible and have it fixed in no time. Thanks for reporting!</p>;T;I"ã<p>nanoc 2.1 is here! Update your nanoc version the usual way:</p>

<pre><kbd><span class="prompt">%</span> gem update nanoc</kbd></pre>

<p>There is no comprehensive changelog, but the "What‚Äôs New in nanoc 2.1" series on this news archive should give you a good idea of what is new (hence the name of the series). Here are the relevant posts:</p>

<ol>
    <li><a href="#wnin-1-improved-cli-tool-july-12th-2008">improved CLI tool</a></li>
    <li><a href="#wnin-2-an-open-framework-july-20th-2008">an open framework</a></li>
    <li><a href="#wnin-3-improved-data-sources-july-1st-2008">improved data sources</a></li>
    <li><a href="#wnin-4-routers-july-23rd-2008">routers</a></li>
    <li><a href="#wnin-5-assets-august-9th-2008">assets</a></li>
    <li><a href="#wnin-6-miscellaneous-august-11th-2008">miscellaneous</a></li>
</ol>

<p>nanoc 2.1 is entirely backwards compatible with nanoc 2.0. This means that a site that can be compiled with nanoc 2.0 can be compiled without issues using nanoc 2.1.</p>

<p>A lot has changed between 2.0 and 2.1, so it is possible that you‚Äôll run into bugs. If something odd occurs, please do let me know either on the <a href="http://groups.google.com/group/nanoc/">mailinglist</a>, <a href="http://nanoc.stoneship.org/trac/newticket">on Trac</a> or <s>on Bitbucket</s>. I‚Äôll look into the issue as soon as possible and have it fixed in no time. Thanks for reporting!</p>
;T;@~"/blog/21/2008-07-10/{;{
;I"â<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<title>nanoc ‚Ä∫ nanoc 2.1: coming soon!</title>
<meta content="nanoc 3.4.0" name="generator">
<link href="/assets/style-v17.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://feeds.feedburner.com/nanoc" rel="alternate" title="The nanoc Blog" type="application/atom+xml">
<script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-15639968-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script>
</head>
<body>
<div class="wrapper">
<!-- ***** navigation ***** -->
<div class="nav">
<ol>
<li><a href="/"><span>Home</span></a></li>
<li><a href="/blog/"><span>News</span></a></li>
<li><a href="/docs/"><span>Documentation</span></a></li>
<li><a href="/community/"><span>Community</span></a></li>
</ol>
</div>
<!-- ***** sidebar ***** -->
<div class="side">
<ol>
<li><a href="/blog/13/"><span>Articles about v3.4</span></a></li>
<li><a href="/blog/12/"><span>Articles about v0.12.x</span></a></li>
</ol>
</div>
<!-- ***** body ***** -->
<div class="body">
<div class="article">
<div class="header">
<h1>nanoc 2.1: coming soon!</h1>
</div>
<p>Good news! nanoc 2.1 is (almost) feature-complete. Testing and documentation still need a bit more work, but it‚Äôs well under way. My summer job is slowing down development a bit, so it‚Äôll take a few weeks before nanoc 2.1 is released.</p>

<p>Don‚Äôt worry though! Today is the start of a series of articles describing nanoc 2.1 exciting new features. I‚Äôm calling this appetite-whetting series &#8220;What‚Äôs New in nanoc 2.1&#8221; (which is <a href="http://ryandaigle.com/">not a ripoff at all</a>‚Äîhonestly!). It‚Äôs going to be so cool that I simply <em>had</em> to craft a shiny logo:</p>

<div class="figure wnin21">
	<img src="/assets/images/whats-new-in-nanoc-21.png" alt="What‚Äôs New in nanoc 2.1">
</div>

<p>Pretty. Maybe I should consider an art career. Anyway‚Ä¶ the first installment is probably going to be published this weekend, depending on how much time I have. Stay tuned!</p>
</div>
</div>
</div>
<!-- ***** footer ***** -->
<div id="footer">
<p>SeqWare ¬© 2007‚Äì2012 Brian O&#8217;Connor. SeqWare is released under the a <a rel="license" href="http://www.gnu.org/licenses/licenses.html">GNU GPL v3</a>. This site is built using the excellent <a href="http://nanoc.stoneship.org/">nanoc</a> tool and examples with the <a href="http://www.fonts.info/info/press/free-fonts-for-font-face-embedding.htm">Graublau</a> and <a href="http://scripts.sil.org/Gentium">Gentium</a> fonts.</p>
</div>
</body>
</html>
;T;	I"Ö<p>Good news! nanoc 2.1 is (almost) feature-complete. Testing and documentation still need a bit more work, but it‚Äôs well under way. My summer job is slowing down development a bit, so it‚Äôll take a few weeks before nanoc 2.1 is released.</p>

<p>Don‚Äôt worry though! Today is the start of a series of articles describing nanoc 2.1 exciting new features. I‚Äôm calling this appetite-whetting series "What‚Äôs New in nanoc 2.1" (which is <a href="http://ryandaigle.com/">not a ripoff at all</a>&mdash;honestly!). It‚Äôs going to be so cool that I simply <em>had</em> to craft a shiny logo:</p>

<div class="figure wnin21">
	<img src="/assets/images/whats-new-in-nanoc-21.png" alt="What‚Äôs New in nanoc 2.1">
</div>

<p>Pretty. Maybe I should consider an art career. Anyway‚Ä¶ the first installment is probably going to be published this weekend, depending on how much time I have. Stay tuned!</p>
;T;
I"Ä<p>Good news! nanoc 2.1 is (almost) feature-complete. Testing and documentation still need a bit more work, but it‚Äôs well under way. My summer job is slowing down development a bit, so it‚Äôll take a few weeks before nanoc 2.1 is released.</p>

<p>Don‚Äôt worry though! Today is the start of a series of articles describing nanoc 2.1 exciting new features. I‚Äôm calling this appetite-whetting series "What‚Äôs New in nanoc 2.1" (which is <a href="http://ryandaigle.com/">not a ripoff at all</a>‚Äîhonestly!). It‚Äôs going to be so cool that I simply <em>had</em> to craft a shiny logo:</p>

<div class="figure wnin21">
	<img src="/assets/images/whats-new-in-nanoc-21.png" alt="What‚Äôs New in nanoc 2.1">
</div>

<p>Pretty. Maybe I should consider an art career. Anyway‚Ä¶ the first installment is probably going to be published this weekend, depending on how much time I have. Stay tuned!</p>;T;I"Ö<p>Good news! nanoc 2.1 is (almost) feature-complete. Testing and documentation still need a bit more work, but it‚Äôs well under way. My summer job is slowing down development a bit, so it‚Äôll take a few weeks before nanoc 2.1 is released.</p>

<p>Don‚Äôt worry though! Today is the start of a series of articles describing nanoc 2.1 exciting new features. I‚Äôm calling this appetite-whetting series "What‚Äôs New in nanoc 2.1" (which is <a href="http://ryandaigle.com/">not a ripoff at all</a>&mdash;honestly!). It‚Äôs going to be so cool that I simply <em>had</em> to craft a shiny logo:</p>

<div class="figure wnin21">
	<img src="/assets/images/whats-new-in-nanoc-21.png" alt="What‚Äôs New in nanoc 2.1">
</div>

<p>Pretty. Maybe I should consider an art career. Anyway‚Ä¶ the first installment is probably going to be published this weekend, depending on how much time I have. Stay tuned!</p>
;T;@Ö"/blog/21/2008-08-09/{;{
;I"]-<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<title>nanoc ‚Ä∫ WNin #5: Assets</title>
<meta content="nanoc 3.4.0" name="generator">
<link href="/assets/style-v17.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://feeds.feedburner.com/nanoc" rel="alternate" title="The nanoc Blog" type="application/atom+xml">
<script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-15639968-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script>
</head>
<body>
<div class="wrapper">
<!-- ***** navigation ***** -->
<div class="nav">
<ol>
<li><a href="/"><span>Home</span></a></li>
<li><a href="/blog/"><span>News</span></a></li>
<li><a href="/docs/"><span>Documentation</span></a></li>
<li><a href="/community/"><span>Community</span></a></li>
</ol>
</div>
<!-- ***** sidebar ***** -->
<div class="side">
<ol>
<li><a href="/blog/13/"><span>Articles about v3.4</span></a></li>
<li><a href="/blog/12/"><span>Articles about v0.12.x</span></a></li>
</ol>
</div>
<!-- ***** body ***** -->
<div class="body">
<div class="article">
<div class="header">
<h1>WNin #5: Assets</h1>
</div>
<div class="figure wnin21">
	<img src="/assets/images/whats-new-in-nanoc-21-small.png" alt="What‚Äôs New in nanoc 2.1">
</div>

<p>Welcome to installment #5 of What‚Äôs New in nanoc 2.1. This article will show you two of the biggest new features of nanoc 2.1: <em>asset compilation</em> and <em>multiple representations</em>.</p>

<p>The new <strong>asset compilation</strong> feature allows a site to have assets, which can be run through filters. Assets can be anything‚ÄîSass stylesheets, images, MP3s, videos, and so on. Filters can then compile Sass, rescale images, make images grayscale, change the volume of a MP3 file, play a video backwards (so you get to see the end first), etc. The only limit is your imagination.</p>

<p>nanoc supports two different kinds of assets: <em>textual</em> and <em>binary</em> assets. Textual assets will be compiled by textual filters, which are the filters you already know. An example of a textual asset would be a Sass stylesheet. Binary assets are all assets that aren‚Äôt text. Examples of binary assets include images, sound and music files, videos, etc.</p>

<p>Binary assets require a <strong>new kind of filters called binary filters</strong>. Binary filters, unlike textual filters, do not load assets into memory. This means binary assets can be arbitrarily big.</p>

<p>So how does nanoc handle assets? If you are using the filesystem data source, you can create a directory aptly named <span class="path">assets</span> in your site directory, in which you put your assets. Assets are directories containing the actual asset file and a meta file, exactly like pages.</p>

<p>For example, the nanoc site has an asset named &#8220;style&#8221;, whose directory contains &#8220;style.css&#8221; and &#8220;style.yaml&#8221;. The attributes in the meta file look like this:</p>

<pre><code class="language-yaml"><span class="key">binary</span>:  <span class="string"><span class="content">false</span></span>
<span class="key">filters</span>: <span class="string"><span class="content">[]</span></span></code></pre>

<p>There are only two built-in asset attributes. <code>binary</code> indicates whether the asset is binary or not (in this case it is a textual asset, thus <code>false</code>) and <code>filters</code> is the list of filters to run (empty, in this case).</p>

<p>If the stylesheet had been a Sass one, the attributes would have looked like this:</p>

<pre><code class="language-yaml"><span class="key">binary</span>:  <span class="string"><span class="content">false</span></span>
<span class="key">filters</span>: <span class="string"><span class="content">[ 'sass' ]</span></span></code></pre>

<p>‚Ä¶ which should not be a big surprise.</p>

<p>Textual filters are exactly the same as the filters in nanoc 2.0, so there‚Äôs probably not much point in showing one, but I‚Äôll just do it anyway:</p>

<pre><code class="language-ruby"><span class="keyword">class</span> <span class="class">Sass</span> &lt; <span class="constant">Nanoc</span>::<span class="constant">Filter</span>

  identifier <span class="symbol">:sass</span>

  <span class="keyword">def</span> <span class="function">run</span>(content)
    require <span class="string"><span class="delimiter">'</span><span class="content">sass</span><span class="delimiter">'</span></span>

    ::<span class="constant">Sass</span>::<span class="constant">Engine</span>.new(content).render
  <span class="keyword">end</span>

<span class="keyword">end</span></code></pre>

<p>Binary assets are very similar to textual assets. Simply set <code>binary</code> to <code>true</code> in the meta file and make sure that the list of filters contains only binary filters.</p>

<p>Filters for binary assets are slightly different from textual filters. Firstly, binary filters inherit from <code>Nanoc::BinaryFilter</code> instead of <code>Nanoc::Filter</code>. Secondly, their <code>run</code> method takes a File object and not a string containing the asset content. Additionally, binary filters should return a File object representing the processed file. The original File argument should not be modified (otherwise you‚Äôd lose the original asset).</p>

<p>For example, a binary filter for generating a thumbnail of an image (using <a href="http://docs.seattlerb.org/image_science/">ImageScience</a>) could look like this (the code is non-functional, because the filter has a lot of irrelevant implementation details):</p>

<pre><code class="language-ruby"><span class="keyword">class</span> <span class="class">ImageScienceThumbnail</span> &lt; <span class="constant">Nanoc</span>::<span class="constant">BinaryFilter</span>

  identifier <span class="symbol">:image_science_thumbnail</span>

  <span class="keyword">def</span> <span class="function">run</span>(file)
    require <span class="string"><span class="delimiter">'</span><span class="content">image_science</span><span class="delimiter">'</span></span>

    <span class="comment"># Get temporary path</span>
    tmp_path = <span class="error">‚Ä¶</span>

    <span class="comment"># Create thumbnail and write it to the temp path</span>
    <span class="error">‚Ä¶</span>

    <span class="comment"># Return thumbnail file</span>
    <span class="constant">File</span>.open(tmp_path)
  <span class="keyword">end</span>

<span class="keyword">end</span></code></pre>

<p>The default router (see the <a href="#wnin-4-routers-july-23rd-2008">article on routers</a>) saves compiled assets in an <span class="path">assets</span> directory inside the output directory. It‚Äôs possible to set <var>assets_prefix</var> in the config file to something else such as &#8220;/media&#8221;, or even &#8220;&#8221; to save assets directly in the output directory.</p>

<p>Now you know how to compile assets.</p>

<p>There is one small issue, though. Generating thumbnails of images is fine, but what if you want to keep the full-size version? There‚Äôs not much point in only having a thumbnail, and not being able to show the full-size image.</p>

<p>This is where <strong>multiple representations</strong> come into play. A single asset can have different representations (or &#8220;reps&#8221;): a thumbnail rep, a grayscale rep, a full-size rep, ‚Ä¶ Even pages can have multiple reps.</p>

<p>Giving an asset multiple representations is quite easy. In the asset‚Äôs meta file, fill up the list of reps like in this example:</p>

<pre><code class="language-yaml"><span class="key">reps</span>:
  <span class="key">default</span>:
    <span class="key">filters</span>:        <span class="string"><span class="content">[]</span></span>
  <span class="key">thumbnail</span>:
    <span class="key">filters</span>:        <span class="string"><span class="content">[ 'image_science_thumbnail' ]</span></span>
    <span class="key">thumbnail_size</span>: <span class="string"><span class="content">100</span></span></code></pre>

<p>The asset in this example has two representations: a default one (which is unprocessed) and a thumbnail one (which is run through the <code>image_science_thumbnail</code> filter).</p>

<p>Each representation has its own output file. The name of the output file is determined by the router. The default router appends the representation name to the filename.</p>

<p><a href="#">Last time</a> I wasn‚Äôt able to show you what a real router looks like (because I didn‚Äôt explain multiple representations before), but now I can. Let me just show you the implementation for <code>path_for_asset_rep</code> real quick:</p>

<pre><code class="language-ruby"><span class="keyword">def</span> <span class="function">path_for_asset_rep</span>(asset_rep)
  <span class="comment"># Get data we need</span>
  extension     = asset_rep.attribute_named(<span class="symbol">:extension</span>)
  modified_path = asset_rep.asset.path[<span class="integer">0</span>..<span class="integer">-2</span>]
  version       = asset_rep.attribute_named(<span class="symbol">:version</span>)

  <span class="comment"># Initialize path</span>
  assets_prefix = <span class="instance-variable">@site</span>.config[<span class="symbol">:assets_prefix</span>] || <span class="string"><span class="delimiter">'</span><span class="content">/assets</span><span class="delimiter">'</span></span>
  path = assets_prefix + modified_path

  <span class="comment"># Add rep name if necessary</span>
  <span class="keyword">unless</span> asset_rep.name == <span class="symbol">:default</span>
    path += <span class="string"><span class="delimiter">'</span><span class="content">-</span><span class="delimiter">'</span></span> + asset_rep.name.to_s
  <span class="keyword">end</span>

  <span class="comment"># Add extension</span>
  path += <span class="string"><span class="delimiter">'</span><span class="content">.</span><span class="delimiter">'</span></span> + extension

  <span class="comment"># Done</span>
  path
<span class="keyword">end</span></code></pre>

<p>The implementation of <code>path_for_page_rep</code> is very similar, so I‚Äôm not showing it here.</p>

<p>The code should be fairly self-explanatory (the <code>[0..-2]</code> is used to strip off the trailing slash). The most important point is that routers determine paths of asset/page <em>representations</em> instead of paths of assets/pages.</p>

<p>So, that‚Äôs what asset compilation and multiple representations look like. The end of the <i>What‚Äôs New In nanoc 2.1</i> series is coming closer, but there is still one more installment to go. The last article in the series will discuss several minor new features and changes. Stay tuned!</p>
</div>
</div>
</div>
<!-- ***** footer ***** -->
<div id="footer">
<p>SeqWare ¬© 2007‚Äì2012 Brian O&#8217;Connor. SeqWare is released under the a <a rel="license" href="http://www.gnu.org/licenses/licenses.html">GNU GPL v3</a>. This site is built using the excellent <a href="http://nanoc.stoneship.org/">nanoc</a> tool and examples with the <a href="http://www.fonts.info/info/press/free-fonts-for-font-face-embedding.htm">Graublau</a> and <a href="http://scripts.sil.org/Gentium">Gentium</a> fonts.</p>
</div>
</body>
</html>
;T;	I"v<div class="figure wnin21">
	<img src="/assets/images/whats-new-in-nanoc-21-small.png" alt="What‚Äôs New in nanoc 2.1">
</div>

<p>Welcome to installment #5 of What‚Äôs New in nanoc 2.1. This article will show you two of the biggest new features of nanoc 2.1: <em>asset compilation</em> and <em>multiple representations</em>.</p>

<p>The new <strong>asset compilation</strong> feature allows a site to have assets, which can be run through filters. Assets can be anything&mdash;Sass stylesheets, images, MP3s, videos, and so on. Filters can then compile Sass, rescale images, make images grayscale, change the volume of a MP3 file, play a video backwards (so you get to see the end first), etc. The only limit is your imagination.</p>

<p>nanoc supports two different kinds of assets: <em>textual</em> and <em>binary</em> assets. Textual assets will be compiled by textual filters, which are the filters you already know. An example of a textual asset would be a Sass stylesheet. Binary assets are all assets that aren‚Äôt text. Examples of binary assets include images, sound and music files, videos, etc.</p>

<p>Binary assets require a <strong>new kind of filters called binary filters</strong>. Binary filters, unlike textual filters, do not load assets into memory. This means binary assets can be arbitrarily big.</p>

<p>So how does nanoc handle assets? If you are using the filesystem data source, you can create a directory aptly named <span class="path">assets</span> in your site directory, in which you put your assets. Assets are directories containing the actual asset file and a meta file, exactly like pages.</p>

<p>For example, the nanoc site has an asset named "style", whose directory contains "style.css" and "style.yaml". The attributes in the meta file look like this:</p>

<pre><code class="language-yaml">binary:  false
filters: []</code></pre>

<p>There are only two built-in asset attributes. <code>binary</code> indicates whether the asset is binary or not (in this case it is a textual asset, thus <code>false</code>) and <code>filters</code> is the list of filters to run (empty, in this case).</p>

<p>If the stylesheet had been a Sass one, the attributes would have looked like this:</p>

<pre><code class="language-yaml">binary:  false
filters: [ 'sass' ]</code></pre>

<p>&hellip; which should not be a big surprise.</p>

<p>Textual filters are exactly the same as the filters in nanoc 2.0, so there‚Äôs probably not much point in showing one, but I‚Äôll just do it anyway:</p>

<pre><code class="language-ruby">class Sass &lt; Nanoc::Filter

  identifier :sass

  def run(content)
    require 'sass'

    ::Sass::Engine.new(content).render
  end

end</code></pre>

<p>Binary assets are very similar to textual assets. Simply set <code>binary</code> to <code>true</code> in the meta file and make sure that the list of filters contains only binary filters.</p>

<p>Filters for binary assets are slightly different from textual filters. Firstly, binary filters inherit from <code>Nanoc::BinaryFilter</code> instead of <code>Nanoc::Filter</code>. Secondly, their <code>run</code> method takes a File object and not a string containing the asset content. Additionally, binary filters should return a File object representing the processed file. The original File argument should not be modified (otherwise you‚Äôd lose the original asset).</p>

<p>For example, a binary filter for generating a thumbnail of an image (using <a href="http://docs.seattlerb.org/image_science/">ImageScience</a>) could look like this (the code is non-functional, because the filter has a lot of irrelevant implementation details):</p>

<pre><code class="language-ruby">class ImageScienceThumbnail &lt; Nanoc::BinaryFilter

  identifier :image_science_thumbnail

  def run(file)
    require 'image_science'

    # Get temporary path
    tmp_path = ‚Ä¶

    # Create thumbnail and write it to the temp path
    ‚Ä¶

    # Return thumbnail file
    File.open(tmp_path)
  end

end</code></pre>

<p>The default router (see the <a href="#wnin-4-routers-july-23rd-2008">article on routers</a>) saves compiled assets in an <span class="path">assets</span> directory inside the output directory. It‚Äôs possible to set <var>assets_prefix</var> in the config file to something else such as "/media", or even "" to save assets directly in the output directory.</p>

<p>Now you know how to compile assets.</p>

<p>There is one small issue, though. Generating thumbnails of images is fine, but what if you want to keep the full-size version? There‚Äôs not much point in only having a thumbnail, and not being able to show the full-size image.</p>

<p>This is where <strong>multiple representations</strong> come into play. A single asset can have different representations (or "reps"): a thumbnail rep, a grayscale rep, a full-size rep, &hellip; Even pages can have multiple reps.</p>

<p>Giving an asset multiple representations is quite easy. In the asset‚Äôs meta file, fill up the list of reps like in this example:</p>

<pre><code class="language-yaml">reps:
  default:
    filters:        []
  thumbnail:
    filters:        [ 'image_science_thumbnail' ]
    thumbnail_size: 100</code></pre>

<p>The asset in this example has two representations: a default one (which is unprocessed) and a thumbnail one (which is run through the <code>image_science_thumbnail</code> filter).</p>

<p>Each representation has its own output file. The name of the output file is determined by the router. The default router appends the representation name to the filename.</p>

<p><a href="#">Last time</a> I wasn‚Äôt able to show you what a real router looks like (because I didn‚Äôt explain multiple representations before), but now I can. Let me just show you the implementation for <code>path_for_asset_rep</code> real quick:</p>

<pre><code class="language-ruby">def path_for_asset_rep(asset_rep)
  # Get data we need
  extension     = asset_rep.attribute_named(:extension)
  modified_path = asset_rep.asset.path[0..-2]
  version       = asset_rep.attribute_named(:version)

  # Initialize path
  assets_prefix = @site.config[:assets_prefix] || '/assets'
  path = assets_prefix + modified_path

  # Add rep name if necessary
  unless asset_rep.name == :default
    path += '-' + asset_rep.name.to_s
  end

  # Add extension
  path += '.' + extension

  # Done
  path
end</code></pre>

<p>The implementation of <code>path_for_page_rep</code> is very similar, so I‚Äôm not showing it here.</p>

<p>The code should be fairly self-explanatory (the <code>[0..-2]</code> is used to strip off the trailing slash). The most important point is that routers determine paths of asset/page <em>representations</em> instead of paths of assets/pages.</p>

<p>So, that‚Äôs what asset compilation and multiple representations look like. The end of the <i>What‚Äôs New In nanoc 2.1</i> series is coming closer, but there is still one more installment to go. The last article in the series will discuss several minor new features and changes. Stay tuned!</p>
;T;
I"g<div class="figure wnin21">
	<img src="/assets/images/whats-new-in-nanoc-21-small.png" alt="What‚Äôs New in nanoc 2.1">
</div>

<p>Welcome to installment #5 of What‚Äôs New in nanoc 2.1. This article will show you two of the biggest new features of nanoc 2.1: <em>asset compilation</em> and <em>multiple representations</em>.</p>

<p>The new <strong>asset compilation</strong> feature allows a site to have assets, which can be run through filters. Assets can be anything‚ÄîSass stylesheets, images, MP3s, videos, and so on. Filters can then compile Sass, rescale images, make images grayscale, change the volume of a MP3 file, play a video backwards (so you get to see the end first), etc. The only limit is your imagination.</p>

<p>nanoc supports two different kinds of assets: <em>textual</em> and <em>binary</em> assets. Textual assets will be compiled by textual filters, which are the filters you already know. An example of a textual asset would be a Sass stylesheet. Binary assets are all assets that aren‚Äôt text. Examples of binary assets include images, sound and music files, videos, etc.</p>

<p>Binary assets require a <strong>new kind of filters called binary filters</strong>. Binary filters, unlike textual filters, do not load assets into memory. This means binary assets can be arbitrarily big.</p>

<p>So how does nanoc handle assets? If you are using the filesystem data source, you can create a directory aptly named <span class="path">assets</span> in your site directory, in which you put your assets. Assets are directories containing the actual asset file and a meta file, exactly like pages.</p>

<p>For example, the nanoc site has an asset named "style", whose directory contains "style.css" and "style.yaml". The attributes in the meta file look like this:</p>

<pre><code class="language-yaml">binary:  false
filters: []</code></pre>

<p>There are only two built-in asset attributes. <code>binary</code> indicates whether the asset is binary or not (in this case it is a textual asset, thus <code>false</code>) and <code>filters</code> is the list of filters to run (empty, in this case).</p>

<p>If the stylesheet had been a Sass one, the attributes would have looked like this:</p>

<pre><code class="language-yaml">binary:  false
filters: [ 'sass' ]</code></pre>

<p>‚Ä¶ which should not be a big surprise.</p>

<p>Textual filters are exactly the same as the filters in nanoc 2.0, so there‚Äôs probably not much point in showing one, but I‚Äôll just do it anyway:</p>

<pre><code class="language-ruby">class Sass &lt; Nanoc::Filter

  identifier :sass

  def run(content)
    require 'sass'

    ::Sass::Engine.new(content).render
  end

end</code></pre>

<p>Binary assets are very similar to textual assets. Simply set <code>binary</code> to <code>true</code> in the meta file and make sure that the list of filters contains only binary filters.</p>

<p>Filters for binary assets are slightly different from textual filters. Firstly, binary filters inherit from <code>Nanoc::BinaryFilter</code> instead of <code>Nanoc::Filter</code>. Secondly, their <code>run</code> method takes a File object and not a string containing the asset content. Additionally, binary filters should return a File object representing the processed file. The original File argument should not be modified (otherwise you‚Äôd lose the original asset).</p>

<p>For example, a binary filter for generating a thumbnail of an image (using <a href="http://docs.seattlerb.org/image_science/">ImageScience</a>) could look like this (the code is non-functional, because the filter has a lot of irrelevant implementation details):</p>

<pre><code class="language-ruby">class ImageScienceThumbnail &lt; Nanoc::BinaryFilter

  identifier :image_science_thumbnail

  def run(file)
    require 'image_science'

    # Get temporary path
    tmp_path = ‚Ä¶

    # Create thumbnail and write it to the temp path
    ‚Ä¶

    # Return thumbnail file
    File.open(tmp_path)
  end

end</code></pre>

<p>The default router (see the <a href="#wnin-4-routers-july-23rd-2008">article on routers</a>) saves compiled assets in an <span class="path">assets</span> directory inside the output directory. It‚Äôs possible to set <var>assets_prefix</var> in the config file to something else such as "/media", or even "" to save assets directly in the output directory.</p>

<p>Now you know how to compile assets.</p>

<p>There is one small issue, though. Generating thumbnails of images is fine, but what if you want to keep the full-size version? There‚Äôs not much point in only having a thumbnail, and not being able to show the full-size image.</p>

<p>This is where <strong>multiple representations</strong> come into play. A single asset can have different representations (or "reps"): a thumbnail rep, a grayscale rep, a full-size rep, ‚Ä¶ Even pages can have multiple reps.</p>

<p>Giving an asset multiple representations is quite easy. In the asset‚Äôs meta file, fill up the list of reps like in this example:</p>

<pre><code class="language-yaml">reps:
  default:
    filters:        []
  thumbnail:
    filters:        [ 'image_science_thumbnail' ]
    thumbnail_size: 100</code></pre>

<p>The asset in this example has two representations: a default one (which is unprocessed) and a thumbnail one (which is run through the <code>image_science_thumbnail</code> filter).</p>

<p>Each representation has its own output file. The name of the output file is determined by the router. The default router appends the representation name to the filename.</p>

<p><a href="#">Last time</a> I wasn‚Äôt able to show you what a real router looks like (because I didn‚Äôt explain multiple representations before), but now I can. Let me just show you the implementation for <code>path_for_asset_rep</code> real quick:</p>

<pre><code class="language-ruby">def path_for_asset_rep(asset_rep)
  # Get data we need
  extension     = asset_rep.attribute_named(:extension)
  modified_path = asset_rep.asset.path[0..-2]
  version       = asset_rep.attribute_named(:version)

  # Initialize path
  assets_prefix = @site.config[:assets_prefix] || '/assets'
  path = assets_prefix + modified_path

  # Add rep name if necessary
  unless asset_rep.name == :default
    path += '-' + asset_rep.name.to_s
  end

  # Add extension
  path += '.' + extension

  # Done
  path
end</code></pre>

<p>The implementation of <code>path_for_page_rep</code> is very similar, so I‚Äôm not showing it here.</p>

<p>The code should be fairly self-explanatory (the <code>[0..-2]</code> is used to strip off the trailing slash). The most important point is that routers determine paths of asset/page <em>representations</em> instead of paths of assets/pages.</p>

<p>So, that‚Äôs what asset compilation and multiple representations look like. The end of the <i>What‚Äôs New In nanoc 2.1</i> series is coming closer, but there is still one more installment to go. The last article in the series will discuss several minor new features and changes. Stay tuned!</p>;T;I"v<div class="figure wnin21">
	<img src="/assets/images/whats-new-in-nanoc-21-small.png" alt="What‚Äôs New in nanoc 2.1">
</div>

<p>Welcome to installment #5 of What‚Äôs New in nanoc 2.1. This article will show you two of the biggest new features of nanoc 2.1: <em>asset compilation</em> and <em>multiple representations</em>.</p>

<p>The new <strong>asset compilation</strong> feature allows a site to have assets, which can be run through filters. Assets can be anything&mdash;Sass stylesheets, images, MP3s, videos, and so on. Filters can then compile Sass, rescale images, make images grayscale, change the volume of a MP3 file, play a video backwards (so you get to see the end first), etc. The only limit is your imagination.</p>

<p>nanoc supports two different kinds of assets: <em>textual</em> and <em>binary</em> assets. Textual assets will be compiled by textual filters, which are the filters you already know. An example of a textual asset would be a Sass stylesheet. Binary assets are all assets that aren‚Äôt text. Examples of binary assets include images, sound and music files, videos, etc.</p>

<p>Binary assets require a <strong>new kind of filters called binary filters</strong>. Binary filters, unlike textual filters, do not load assets into memory. This means binary assets can be arbitrarily big.</p>

<p>So how does nanoc handle assets? If you are using the filesystem data source, you can create a directory aptly named <span class="path">assets</span> in your site directory, in which you put your assets. Assets are directories containing the actual asset file and a meta file, exactly like pages.</p>

<p>For example, the nanoc site has an asset named "style", whose directory contains "style.css" and "style.yaml". The attributes in the meta file look like this:</p>

<pre><code class="language-yaml">binary:  false
filters: []</code></pre>

<p>There are only two built-in asset attributes. <code>binary</code> indicates whether the asset is binary or not (in this case it is a textual asset, thus <code>false</code>) and <code>filters</code> is the list of filters to run (empty, in this case).</p>

<p>If the stylesheet had been a Sass one, the attributes would have looked like this:</p>

<pre><code class="language-yaml">binary:  false
filters: [ 'sass' ]</code></pre>

<p>&hellip; which should not be a big surprise.</p>

<p>Textual filters are exactly the same as the filters in nanoc 2.0, so there‚Äôs probably not much point in showing one, but I‚Äôll just do it anyway:</p>

<pre><code class="language-ruby">class Sass &lt; Nanoc::Filter

  identifier :sass

  def run(content)
    require 'sass'

    ::Sass::Engine.new(content).render
  end

end</code></pre>

<p>Binary assets are very similar to textual assets. Simply set <code>binary</code> to <code>true</code> in the meta file and make sure that the list of filters contains only binary filters.</p>

<p>Filters for binary assets are slightly different from textual filters. Firstly, binary filters inherit from <code>Nanoc::BinaryFilter</code> instead of <code>Nanoc::Filter</code>. Secondly, their <code>run</code> method takes a File object and not a string containing the asset content. Additionally, binary filters should return a File object representing the processed file. The original File argument should not be modified (otherwise you‚Äôd lose the original asset).</p>

<p>For example, a binary filter for generating a thumbnail of an image (using <a href="http://docs.seattlerb.org/image_science/">ImageScience</a>) could look like this (the code is non-functional, because the filter has a lot of irrelevant implementation details):</p>

<pre><code class="language-ruby">class ImageScienceThumbnail &lt; Nanoc::BinaryFilter

  identifier :image_science_thumbnail

  def run(file)
    require 'image_science'

    # Get temporary path
    tmp_path = ‚Ä¶

    # Create thumbnail and write it to the temp path
    ‚Ä¶

    # Return thumbnail file
    File.open(tmp_path)
  end

end</code></pre>

<p>The default router (see the <a href="#wnin-4-routers-july-23rd-2008">article on routers</a>) saves compiled assets in an <span class="path">assets</span> directory inside the output directory. It‚Äôs possible to set <var>assets_prefix</var> in the config file to something else such as "/media", or even "" to save assets directly in the output directory.</p>

<p>Now you know how to compile assets.</p>

<p>There is one small issue, though. Generating thumbnails of images is fine, but what if you want to keep the full-size version? There‚Äôs not much point in only having a thumbnail, and not being able to show the full-size image.</p>

<p>This is where <strong>multiple representations</strong> come into play. A single asset can have different representations (or "reps"): a thumbnail rep, a grayscale rep, a full-size rep, &hellip; Even pages can have multiple reps.</p>

<p>Giving an asset multiple representations is quite easy. In the asset‚Äôs meta file, fill up the list of reps like in this example:</p>

<pre><code class="language-yaml">reps:
  default:
    filters:        []
  thumbnail:
    filters:        [ 'image_science_thumbnail' ]
    thumbnail_size: 100</code></pre>

<p>The asset in this example has two representations: a default one (which is unprocessed) and a thumbnail one (which is run through the <code>image_science_thumbnail</code> filter).</p>

<p>Each representation has its own output file. The name of the output file is determined by the router. The default router appends the representation name to the filename.</p>

<p><a href="#">Last time</a> I wasn‚Äôt able to show you what a real router looks like (because I didn‚Äôt explain multiple representations before), but now I can. Let me just show you the implementation for <code>path_for_asset_rep</code> real quick:</p>

<pre><code class="language-ruby">def path_for_asset_rep(asset_rep)
  # Get data we need
  extension     = asset_rep.attribute_named(:extension)
  modified_path = asset_rep.asset.path[0..-2]
  version       = asset_rep.attribute_named(:version)

  # Initialize path
  assets_prefix = @site.config[:assets_prefix] || '/assets'
  path = assets_prefix + modified_path

  # Add rep name if necessary
  unless asset_rep.name == :default
    path += '-' + asset_rep.name.to_s
  end

  # Add extension
  path += '.' + extension

  # Done
  path
end</code></pre>

<p>The implementation of <code>path_for_page_rep</code> is very similar, so I‚Äôm not showing it here.</p>

<p>The code should be fairly self-explanatory (the <code>[0..-2]</code> is used to strip off the trailing slash). The most important point is that routers determine paths of asset/page <em>representations</em> instead of paths of assets/pages.</p>

<p>So, that‚Äôs what asset compilation and multiple representations look like. The end of the <i>What‚Äôs New In nanoc 2.1</i> series is coming closer, but there is still one more installment to go. The last article in the series will discuss several minor new features and changes. Stay tuned!</p>
;T;@å"/blog/21/2008-07-20/{;{
;I"ù<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<title>nanoc ‚Ä∫ WNin #2: an open framework</title>
<meta content="nanoc 3.4.0" name="generator">
<link href="/assets/style-v17.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://feeds.feedburner.com/nanoc" rel="alternate" title="The nanoc Blog" type="application/atom+xml">
<script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-15639968-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script>
</head>
<body>
<div class="wrapper">
<!-- ***** navigation ***** -->
<div class="nav">
<ol>
<li><a href="/"><span>Home</span></a></li>
<li><a href="/blog/"><span>News</span></a></li>
<li><a href="/docs/"><span>Documentation</span></a></li>
<li><a href="/community/"><span>Community</span></a></li>
</ol>
</div>
<!-- ***** sidebar ***** -->
<div class="side">
<ol>
<li><a href="/blog/13/"><span>Articles about v3.4</span></a></li>
<li><a href="/blog/12/"><span>Articles about v0.12.x</span></a></li>
</ol>
</div>
<!-- ***** body ***** -->
<div class="body">
<div class="article">
<div class="header">
<h1>WNin #2: an open framework</h1>
</div>
<div class="figure wnin21">
	<img src="/assets/images/whats-new-in-nanoc-21-small.png" alt="What‚Äôs New in nanoc 2.1">
</div>

<p>Welcome to installment two of <i>What‚Äôs New in nanoc 2.1</i>! This installment discusses the technical, code-wise differences between this new version and the old 2.0 release.</p>

<p>The first big improvement is that nanoc <strong>is a lot more modular</strong> now. The commandline interface (which was discussed <a href="#wnin-1-improved-cli-tool-july-12th-2008">before</a>) is now very loosely coupled with the backend. This means that it should be fairly easy to rip out the commandline frontend and replace it with something else‚Äîa web frontend (based off Rails or something similar) jumps to mind.</p>

<p>Also important is that nanoc <strong>has a public API now</strong>, which makes manipulating sites a lot easier. For example, it‚Äôs now possible to programmatically generate pages. If you have a blog where all articles are tagged, you can generate tag index pages easily using something like this:</p>

<pre><code class="language-ruby"><span class="comment"># Load nanoc site</span>
site = <span class="constant">Nanoc</span>::<span class="constant">Site</span>.new(<span class="constant">YAML</span>.load_file(<span class="string"><span class="delimiter">'</span><span class="content">config.yaml</span><span class="delimiter">'</span></span>))
site.load_data
pages = site.pages

<span class="comment"># Get all tags used on the site</span>
all_tags = pages.map { |p| p.attribute_named(<span class="symbol">:tags</span>) }.flatten.compact.uniq

<span class="comment"># Get tags for which an index page exists</span>
tags_with_pages = pages.map { |p| p.attribute_named(<span class="symbol">:tag</span>) }

<span class="comment"># Get tags for which no index page exists</span>
tags_without_pages = all_tags - tags_with_pages

<span class="comment"># Build pages for each tag</span>
tags_without_pages.each <span class="keyword">do</span> |t|
  <span class="comment"># Buid page</span>
  page = <span class="constant">Nanoc</span>::<span class="constant">Page</span>.new(<span class="string"><span class="delimiter">"</span><span class="content">Tag: </span><span class="inline"><span class="inline-delimiter">#{</span>tag<span class="inline-delimiter">}</span></span><span class="delimiter">"</span></span>, { <span class="symbol">:tag</span> =&gt; t }, <span class="string"><span class="delimiter">"</span><span class="content">/blog/tags/</span><span class="inline"><span class="inline-delimiter">#{</span>t<span class="inline-delimiter">}</span></span><span class="delimiter">"</span></span>)
  page.site = site

  <span class="comment"># Store page</span>
  page.save
<span class="keyword">end</span></code></pre>

<p>If that example above confused you, don‚Äôt worry, because‚Ä¶</p>

<p>The nanoc <strong>source code is now really, really well-documented</strong>. Every class and every method now has thorough documentation. Check out the source documentation <a href="/docs/api/3.1/">over here</a>. It should now be a lot easier to tweak nanoc to your own liking (but be sure to submit patches!).</p>

<p>At least as important as the documentation is the <strong>greatly expanded test suite</strong>, which now features 319 unit tests and over 1200 assertions. Test coverage is about 85%. There are still a few tests missing, but once they have been implemented, the test suite will be really strong. The goal is to make sure nanoc is virtually bug free, and to make regression bugs a thing of the past.</p>

<p>Just because I like showing off, here‚Äôs what the test suite run looks like at the moment:</p>

<pre><samp>.......................................................................
.......................................................................
.......................................................................
.......................................................................
...................................
Finished in 9.640952 seconds.

319 tests, 1222 assertions, 0 failures, 0 errors</samp></pre>

<p>Sweet, is it not?</p>

<p>In unrelated (but still useful) news, the nanoc repository is now <s>mirrored over at Bitbucket</s>, which is github-like hosting for Mercurial instead of git. There‚Äôs also an issue tracker over there, which you can use in case you dislike Trac.</p>

<p>That‚Äôs it for installment two. The next installment will briefly describe the changes to the data source API. Stay tuned!</p>
</div>
</div>
</div>
<!-- ***** footer ***** -->
<div id="footer">
<p>SeqWare ¬© 2007‚Äì2012 Brian O&#8217;Connor. SeqWare is released under the a <a rel="license" href="http://www.gnu.org/licenses/licenses.html">GNU GPL v3</a>. This site is built using the excellent <a href="http://nanoc.stoneship.org/">nanoc</a> tool and examples with the <a href="http://www.fonts.info/info/press/free-fonts-for-font-face-embedding.htm">Graublau</a> and <a href="http://scripts.sil.org/Gentium">Gentium</a> fonts.</p>
</div>
</body>
</html>
;T;	I"}<div class="figure wnin21">
	<img src="/assets/images/whats-new-in-nanoc-21-small.png" alt="What‚Äôs New in nanoc 2.1">
</div>

<p>Welcome to installment two of <i>What‚Äôs New in nanoc 2.1</i>! This installment discusses the technical, code-wise differences between this new version and the old 2.0 release.</p>

<p>The first big improvement is that nanoc <strong>is a lot more modular</strong> now. The commandline interface (which was discussed <a href="#wnin-1-improved-cli-tool-july-12th-2008">before</a>) is now very loosely coupled with the backend. This means that it should be fairly easy to rip out the commandline frontend and replace it with something else&mdash;a web frontend (based off Rails or something similar) jumps to mind.</p>

<p>Also important is that nanoc <strong>has a public API now</strong>, which makes manipulating sites a lot easier. For example, it‚Äôs now possible to programmatically generate pages. If you have a blog where all articles are tagged, you can generate tag index pages easily using something like this:</p>

<pre><code class="language-ruby"># Load nanoc site
site = Nanoc::Site.new(YAML.load_file('config.yaml'))
site.load_data
pages = site.pages

# Get all tags used on the site
all_tags = pages.map { |p| p.attribute_named(:tags) }.flatten.compact.uniq

# Get tags for which an index page exists
tags_with_pages = pages.map { |p| p.attribute_named(:tag) }

# Get tags for which no index page exists
tags_without_pages = all_tags - tags_with_pages

# Build pages for each tag
tags_without_pages.each do |t|
  # Buid page
  page = Nanoc::Page.new("Tag: #{tag}", { :tag => t }, "/blog/tags/#{t}")
  page.site = site

  # Store page
  page.save
end</code></pre>

<p>If that example above confused you, don‚Äôt worry, because&hellip;</p>

<p>The nanoc <strong>source code is now really, really well-documented</strong>. Every class and every method now has thorough documentation. Check out the source documentation <a href="/docs/api/3.1/">over here</a>. It should now be a lot easier to tweak nanoc to your own liking (but be sure to submit patches!).</p>

<p>At least as important as the documentation is the <strong>greatly expanded test suite</strong>, which now features 319 unit tests and over 1200 assertions. Test coverage is about 85%. There are still a few tests missing, but once they have been implemented, the test suite will be really strong. The goal is to make sure nanoc is virtually bug free, and to make regression bugs a thing of the past.</p>

<p>Just because I like showing off, here‚Äôs what the test suite run looks like at the moment:</p>

<pre><samp>.......................................................................
.......................................................................
.......................................................................
.......................................................................
...................................
Finished in 9.640952 seconds.

319 tests, 1222 assertions, 0 failures, 0 errors</samp></pre>

<p>Sweet, is it not?</p>

<p>In unrelated (but still useful) news, the nanoc repository is now <s>mirrored over at Bitbucket</s>, which is github-like hosting for Mercurial instead of git. There‚Äôs also an issue tracker over there, which you can use in case you dislike Trac.</p>

<p>That‚Äôs it for installment two. The next installment will briefly describe the changes to the data source API. Stay tuned!</p>
;T;
I"v<div class="figure wnin21">
	<img src="/assets/images/whats-new-in-nanoc-21-small.png" alt="What‚Äôs New in nanoc 2.1">
</div>

<p>Welcome to installment two of <i>What‚Äôs New in nanoc 2.1</i>! This installment discusses the technical, code-wise differences between this new version and the old 2.0 release.</p>

<p>The first big improvement is that nanoc <strong>is a lot more modular</strong> now. The commandline interface (which was discussed <a href="#wnin-1-improved-cli-tool-july-12th-2008">before</a>) is now very loosely coupled with the backend. This means that it should be fairly easy to rip out the commandline frontend and replace it with something else‚Äîa web frontend (based off Rails or something similar) jumps to mind.</p>

<p>Also important is that nanoc <strong>has a public API now</strong>, which makes manipulating sites a lot easier. For example, it‚Äôs now possible to programmatically generate pages. If you have a blog where all articles are tagged, you can generate tag index pages easily using something like this:</p>

<pre><code class="language-ruby"># Load nanoc site
site = Nanoc::Site.new(YAML.load_file('config.yaml'))
site.load_data
pages = site.pages

# Get all tags used on the site
all_tags = pages.map { |p| p.attribute_named(:tags) }.flatten.compact.uniq

# Get tags for which an index page exists
tags_with_pages = pages.map { |p| p.attribute_named(:tag) }

# Get tags for which no index page exists
tags_without_pages = all_tags - tags_with_pages

# Build pages for each tag
tags_without_pages.each do |t|
  # Buid page
  page = Nanoc::Page.new("Tag: #{tag}", { :tag =&gt; t }, "/blog/tags/#{t}")
  page.site = site

  # Store page
  page.save
end</code></pre>

<p>If that example above confused you, don‚Äôt worry, because‚Ä¶</p>

<p>The nanoc <strong>source code is now really, really well-documented</strong>. Every class and every method now has thorough documentation. Check out the source documentation <a href="/docs/api/3.1/">over here</a>. It should now be a lot easier to tweak nanoc to your own liking (but be sure to submit patches!).</p>

<p>At least as important as the documentation is the <strong>greatly expanded test suite</strong>, which now features 319 unit tests and over 1200 assertions. Test coverage is about 85%. There are still a few tests missing, but once they have been implemented, the test suite will be really strong. The goal is to make sure nanoc is virtually bug free, and to make regression bugs a thing of the past.</p>

<p>Just because I like showing off, here‚Äôs what the test suite run looks like at the moment:</p>

<pre><samp>.......................................................................
.......................................................................
.......................................................................
.......................................................................
...................................
Finished in 9.640952 seconds.

319 tests, 1222 assertions, 0 failures, 0 errors</samp></pre>

<p>Sweet, is it not?</p>

<p>In unrelated (but still useful) news, the nanoc repository is now <s>mirrored over at Bitbucket</s>, which is github-like hosting for Mercurial instead of git. There‚Äôs also an issue tracker over there, which you can use in case you dislike Trac.</p>

<p>That‚Äôs it for installment two. The next installment will briefly describe the changes to the data source API. Stay tuned!</p>;T;I"}<div class="figure wnin21">
	<img src="/assets/images/whats-new-in-nanoc-21-small.png" alt="What‚Äôs New in nanoc 2.1">
</div>

<p>Welcome to installment two of <i>What‚Äôs New in nanoc 2.1</i>! This installment discusses the technical, code-wise differences between this new version and the old 2.0 release.</p>

<p>The first big improvement is that nanoc <strong>is a lot more modular</strong> now. The commandline interface (which was discussed <a href="#wnin-1-improved-cli-tool-july-12th-2008">before</a>) is now very loosely coupled with the backend. This means that it should be fairly easy to rip out the commandline frontend and replace it with something else&mdash;a web frontend (based off Rails or something similar) jumps to mind.</p>

<p>Also important is that nanoc <strong>has a public API now</strong>, which makes manipulating sites a lot easier. For example, it‚Äôs now possible to programmatically generate pages. If you have a blog where all articles are tagged, you can generate tag index pages easily using something like this:</p>

<pre><code class="language-ruby"># Load nanoc site
site = Nanoc::Site.new(YAML.load_file('config.yaml'))
site.load_data
pages = site.pages

# Get all tags used on the site
all_tags = pages.map { |p| p.attribute_named(:tags) }.flatten.compact.uniq

# Get tags for which an index page exists
tags_with_pages = pages.map { |p| p.attribute_named(:tag) }

# Get tags for which no index page exists
tags_without_pages = all_tags - tags_with_pages

# Build pages for each tag
tags_without_pages.each do |t|
  # Buid page
  page = Nanoc::Page.new("Tag: #{tag}", { :tag => t }, "/blog/tags/#{t}")
  page.site = site

  # Store page
  page.save
end</code></pre>

<p>If that example above confused you, don‚Äôt worry, because&hellip;</p>

<p>The nanoc <strong>source code is now really, really well-documented</strong>. Every class and every method now has thorough documentation. Check out the source documentation <a href="/docs/api/3.1/">over here</a>. It should now be a lot easier to tweak nanoc to your own liking (but be sure to submit patches!).</p>

<p>At least as important as the documentation is the <strong>greatly expanded test suite</strong>, which now features 319 unit tests and over 1200 assertions. Test coverage is about 85%. There are still a few tests missing, but once they have been implemented, the test suite will be really strong. The goal is to make sure nanoc is virtually bug free, and to make regression bugs a thing of the past.</p>

<p>Just because I like showing off, here‚Äôs what the test suite run looks like at the moment:</p>

<pre><samp>.......................................................................
.......................................................................
.......................................................................
.......................................................................
...................................
Finished in 9.640952 seconds.

319 tests, 1222 assertions, 0 failures, 0 errors</samp></pre>

<p>Sweet, is it not?</p>

<p>In unrelated (but still useful) news, the nanoc repository is now <s>mirrored over at Bitbucket</s>, which is github-like hosting for Mercurial instead of git. There‚Äôs also an issue tracker over there, which you can use in case you dislike Trac.</p>

<p>That‚Äôs it for installment two. The next installment will briefly describe the changes to the data source API. Stay tuned!</p>
;T;@ì"/blog/20/2007-12-25/{;{
;I"F<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<title>nanoc ‚Ä∫ nanoc 2.0 released</title>
<meta content="nanoc 3.4.0" name="generator">
<link href="/assets/style-v17.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://feeds.feedburner.com/nanoc" rel="alternate" title="The nanoc Blog" type="application/atom+xml">
<script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-15639968-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script>
</head>
<body>
<div class="wrapper">
<!-- ***** navigation ***** -->
<div class="nav">
<ol>
<li><a href="/"><span>Home</span></a></li>
<li><a href="/blog/"><span>News</span></a></li>
<li><a href="/docs/"><span>Documentation</span></a></li>
<li><a href="/community/"><span>Community</span></a></li>
</ol>
</div>
<!-- ***** sidebar ***** -->
<div class="side">
<ol>
<li><a href="/blog/13/"><span>Articles about v3.4</span></a></li>
<li><a href="/blog/12/"><span>Articles about v0.12.x</span></a></li>
</ol>
</div>
<!-- ***** body ***** -->
<div class="body">
<div class="article">
<div class="header">
<h1>nanoc 2.0 released</h1>
</div>
<p>nanoc 2.0 has arrived, right in time for christmas!</p>

<p>In addition to nanoc 2.0, I‚Äôm also proud to present a revamped nanoc site, featuring a much less amateurish look, and most importantly, a <a href="/docs/">brand new, completely rewritten manual</a>. There are quite a few other changes, but I‚Äôm sure you‚Äôll find those by yourself.</p>

<p>To update or install, simply:</p>

<pre><span class="prompt">%</span> <kbd>gem install nanoc</kbd></pre>

<p>Before upgrading, know that there have been quite a few changes, and that some of the changes may cause your site to break. Read carefully what I have to say.</p>

<div class="section" id="new-features">
<h3>New Features</h3>

<p>In addition to defining custom filters, it is now possible to define <strong>custom layout processors</strong>. This is very similar to the new way of defining filters (see below).</p>

<p>Another new feature involves <strong>custom data sources</strong>. Instead of letting nanoc read the data off flat files on the hard disk, you can tell it to read from a database instead, for example. This may not sound terribly exciting, but it opens the door for writing GUI applications that manage a nanoc site. (There a no such GUI applications yet, though. Want to give it a shot?)</p>

<p>Quite useful are <strong>parent and children links for page objects</strong>. You can now easily get the parent of a page like <code>@item.parent</code>, and you can get a page‚Äôs child pages by doing <code>@item.children</code>. Very useful for building site maps or breadcrumb navigation, for example.</p>

<p>The coolest (and perhaps oddest) feature is an <strong>auto-compiler</strong>. Instead of having to manually compile your site every time you make a change, you can now let nanoc compile it whenever necessary.</p>

</div>
<div class="section" id="important-differences-with-nanoc-1-x">
<h3>Important Differences with nanoc 1.x</h3>

<p><strong>The way custom filters are defined has changed.</strong> You can no longer use <code>register_filter</code>. Instead, you can write filters by subclassing <code>Nanoc::Filter</code>. For example, the Markdown filter looks like this now:</p>

<pre><code class="language-ruby"><span class="keyword">class</span> <span class="class">MarkdownFilter</span> &lt; <span class="constant">Nanoc</span>::<span class="constant">Filter</span>
  identifiers <span class="symbol">:markdown</span>, <span class="symbol">:bluecloth</span>

  <span class="keyword">def</span> <span class="function">run</span>(content)
    nanoc_require <span class="string"><span class="delimiter">'</span><span class="content">bluecloth</span><span class="delimiter">'</span></span>
    ::<span class="constant">BlueCloth</span>.new(content).to_html
  <span class="keyword">end</span>
<span class="keyword">end</span></code></pre>

<p><strong>The <code>filters</code> attribute is gone now.</strong> To define the list of filters to run before laying out a page, use the <code>filters_pre</code> attribute, which does exactly the same as <code>filters</code>.</p>

<p><strong>Support for Liquid has been dropped entirely.</strong> Liquid is a nice templating system, but it‚Äôs only really useful in situations where template writers should have restricted access to variables and functions, because of security issues. Such security issues can be a problem on a live web server, but they are completely irrelevant for a nanoc-powered site.</p>

<p><strong>The Erubis filter isn‚Äôt there anymore.</strong> The main reason for using Erubis is speed, but since speed is not really relevant for nanoc-powered sites, the filter has been removed.</p>

<p><strong>Identical files are no longer printed</strong> which makes nanoc‚Äôs output cleaner for sites with many pages. You can use <kbd>--verbose</kbd> or <kbd>-V</kbd> (uppercase V) to let nanoc print identical files.</p>

<p><strong>Templates are no longer run through ERB when creating a page.</strong> This <del>bug</del> <ins>feature</ins> was quite confusing, and it wasn‚Äôt really useful either.</p>

<p>It may not be useful to everybody, but I‚Äôd still like to mention that the nanoc source code has been completely restructured. Some parts were rewritten from scratch. The code is a lot cleaner now, so if you want to take a shot at hacking away at nanoc, now‚Äôs the time.</p>

</div>
<div class="section" id="compatibility-with-ruby-1-9">
<h3>Compatibility with Ruby 1.9</h3>

<p>nanoc is compatible with Ruby 1.9, which is being (or already has been) released today. (I admit I cheated a bit to make it compatible, though, but that‚Äôs not relevant.)</p>

<p>BlueCloth, however, does not appear to be compatible with Ruby 1.9. You‚Äôll get a &#8220;invalid mbstring sequence&#8221; error when trying to filter a page using the <code>markdown</code>/<code>bluecloth</code> filter. To resolve this, you can use RedCloth instead of BlueCloth, since RedCloth also supports Markdown. The RedCloth filter is identified using <code>redcloth</code> or <code>textile</code>.</p>

<p>The nanoc site, which is available as a sample from the <a href="/docs/1-introduction/#development">Mercurial repository</a>, cannot currently be compiled because of its dependency on Hpricot, and Hpricot does not compile on Ruby 1.9.</p>

<p>These are only small issues, and I‚Äôm convinced that these will be fixed soon. If you rely on BlueCloth, Hpricot, or anything else that is not currently compatible with Ruby 1.9, you can still use Ruby 1.8‚Äînanoc still works on 1.8, and it‚Äôll stay that way for a long time.</p>

</div>
<div class="section" id="last-words">
<h3>Last Words</h3>

<p>nanoc has been tested thorougly, but there‚Äôs always a chance that something goes wrong. If you are experiencing any issues, please do <a href="https://nanoc.stoneship.org/trac/newticket">do report them</a>. They‚Äôll be resolved in no time. Thanks a lot!</p>

<p>Enjoy nanoc 2.0. Merry christmas, and a happy new year.</p>
</div>
</div>
</div>
</div>
<!-- ***** footer ***** -->
<div id="footer">
<p>SeqWare ¬© 2007‚Äì2012 Brian O&#8217;Connor. SeqWare is released under the a <a rel="license" href="http://www.gnu.org/licenses/licenses.html">GNU GPL v3</a>. This site is built using the excellent <a href="http://nanoc.stoneship.org/">nanoc</a> tool and examples with the <a href="http://www.fonts.info/info/press/free-fonts-for-font-face-embedding.htm">Graublau</a> and <a href="http://scripts.sil.org/Gentium">Gentium</a> fonts.</p>
</div>
</body>
</html>
;T;	I"∂<p>nanoc 2.0 has arrived, right in time for christmas!</p>

<p>In addition to nanoc 2.0, I‚Äôm also proud to present a revamped nanoc site, featuring a much less amateurish look, and most importantly, a <a href="/docs/">brand new, completely rewritten manual</a>. There are quite a few other changes, but I‚Äôm sure you‚Äôll find those by yourself.</p>

<p>To update or install, simply:</p>

<pre><span class="prompt">%</span> <kbd>gem install nanoc</kbd></pre>

<p>Before upgrading, know that there have been quite a few changes, and that some of the changes may cause your site to break. Read carefully what I have to say.</p>

<h3>New Features</h3>

<p>In addition to defining custom filters, it is now possible to define <strong>custom layout processors</strong>. This is very similar to the new way of defining filters (see below).</p>

<p>Another new feature involves <strong>custom data sources</strong>. Instead of letting nanoc read the data off flat files on the hard disk, you can tell it to read from a database instead, for example. This may not sound terribly exciting, but it opens the door for writing GUI applications that manage a nanoc site. (There a no such GUI applications yet, though. Want to give it a shot?)</p>

<p>Quite useful are <strong>parent and children links for page objects</strong>. You can now easily get the parent of a page like <code>@item.parent</code>, and you can get a page‚Äôs child pages by doing <code>@item.children</code>. Very useful for building site maps or breadcrumb navigation, for example.</p>

<p>The coolest (and perhaps oddest) feature is an <strong>auto-compiler</strong>. Instead of having to manually compile your site every time you make a change, you can now let nanoc compile it whenever necessary.</p>

<h3>Important Differences with nanoc 1.x</h3>

<p><strong>The way custom filters are defined has changed.</strong> You can no longer use <code>register_filter</code>. Instead, you can write filters by subclassing <code>Nanoc::Filter</code>. For example, the Markdown filter looks like this now:</p>

<pre><code class="language-ruby">
class MarkdownFilter &lt; Nanoc::Filter
  identifiers :markdown, :bluecloth

  def run(content)
    nanoc_require 'bluecloth'
    ::BlueCloth.new(content).to_html
  end
end</code></pre>

<p><strong>The <code>filters</code> attribute is gone now.</strong> To define the list of filters to run before laying out a page, use the <code>filters_pre</code> attribute, which does exactly the same as <code>filters</code>.</p>

<p><strong>Support for Liquid has been dropped entirely.</strong> Liquid is a nice templating system, but it‚Äôs only really useful in situations where template writers should have restricted access to variables and functions, because of security issues. Such security issues can be a problem on a live web server, but they are completely irrelevant for a nanoc-powered site.</p>

<p><strong>The Erubis filter isn‚Äôt there anymore.</strong> The main reason for using Erubis is speed, but since speed is not really relevant for nanoc-powered sites, the filter has been removed.</p>

<p><strong>Identical files are no longer printed</strong> which makes nanoc‚Äôs output cleaner for sites with many pages. You can use <kbd>--verbose</kbd> or <kbd>-V</kbd> (uppercase V) to let nanoc print identical files.</p>

<p><strong>Templates are no longer run through ERB when creating a page.</strong> This <del>bug</del> <ins>feature</ins> was quite confusing, and it wasn‚Äôt really useful either.</p>

<p>It may not be useful to everybody, but I‚Äôd still like to mention that the nanoc source code has been completely restructured. Some parts were rewritten from scratch. The code is a lot cleaner now, so if you want to take a shot at hacking away at nanoc, now‚Äôs the time.</p>

<h3>Compatibility with Ruby 1.9</h3>

<p>nanoc is compatible with Ruby 1.9, which is being (or already has been) released today. (I admit I cheated a bit to make it compatible, though, but that‚Äôs not relevant.)</p>

<p>BlueCloth, however, does not appear to be compatible with Ruby 1.9. You‚Äôll get a "invalid mbstring sequence" error when trying to filter a page using the <code>markdown</code>/<code>bluecloth</code> filter. To resolve this, you can use RedCloth instead of BlueCloth, since RedCloth also supports Markdown. The RedCloth filter is identified using <code>redcloth</code> or <code>textile</code>.</p>

<p>The nanoc site, which is available as a sample from the <a href="/docs/1-introduction/#development">Mercurial repository</a>, cannot currently be compiled because of its dependency on Hpricot, and Hpricot does not compile on Ruby 1.9.</p>

<p>These are only small issues, and I‚Äôm convinced that these will be fixed soon. If you rely on BlueCloth, Hpricot, or anything else that is not currently compatible with Ruby 1.9, you can still use Ruby 1.8&mdash;nanoc still works on 1.8, and it‚Äôll stay that way for a long time.</p>

<h3>Last Words</h3>

<p>nanoc has been tested thorougly, but there‚Äôs always a chance that something goes wrong. If you are experiencing any issues, please do <a href="https://nanoc.stoneship.org/trac/newticket">do report them</a>. They‚Äôll be resolved in no time. Thanks a lot!</p>

<p>Enjoy nanoc 2.0. Merry christmas, and a happy new year.</p>
;T;
I"é<p>nanoc 2.0 has arrived, right in time for christmas!</p>

<p>In addition to nanoc 2.0, I‚Äôm also proud to present a revamped nanoc site, featuring a much less amateurish look, and most importantly, a <a href="/docs/">brand new, completely rewritten manual</a>. There are quite a few other changes, but I‚Äôm sure you‚Äôll find those by yourself.</p>

<p>To update or install, simply:</p>

<pre><span class="prompt">%</span> <kbd>gem install nanoc</kbd></pre>

<p>Before upgrading, know that there have been quite a few changes, and that some of the changes may cause your site to break. Read carefully what I have to say.</p>

<div class="section" id="new-features">
<h3>New Features</h3>

<p>In addition to defining custom filters, it is now possible to define <strong>custom layout processors</strong>. This is very similar to the new way of defining filters (see below).</p>

<p>Another new feature involves <strong>custom data sources</strong>. Instead of letting nanoc read the data off flat files on the hard disk, you can tell it to read from a database instead, for example. This may not sound terribly exciting, but it opens the door for writing GUI applications that manage a nanoc site. (There a no such GUI applications yet, though. Want to give it a shot?)</p>

<p>Quite useful are <strong>parent and children links for page objects</strong>. You can now easily get the parent of a page like <code>@item.parent</code>, and you can get a page‚Äôs child pages by doing <code>@item.children</code>. Very useful for building site maps or breadcrumb navigation, for example.</p>

<p>The coolest (and perhaps oddest) feature is an <strong>auto-compiler</strong>. Instead of having to manually compile your site every time you make a change, you can now let nanoc compile it whenever necessary.</p>

</div><div class="section" id="important-differences-with-nanoc-1-x">
<h3>Important Differences with nanoc 1.x</h3>

<p><strong>The way custom filters are defined has changed.</strong> You can no longer use <code>register_filter</code>. Instead, you can write filters by subclassing <code>Nanoc::Filter</code>. For example, the Markdown filter looks like this now:</p>

<pre><code class="language-ruby">class MarkdownFilter &lt; Nanoc::Filter
  identifiers :markdown, :bluecloth

  def run(content)
    nanoc_require 'bluecloth'
    ::BlueCloth.new(content).to_html
  end
end</code></pre>

<p><strong>The <code>filters</code> attribute is gone now.</strong> To define the list of filters to run before laying out a page, use the <code>filters_pre</code> attribute, which does exactly the same as <code>filters</code>.</p>

<p><strong>Support for Liquid has been dropped entirely.</strong> Liquid is a nice templating system, but it‚Äôs only really useful in situations where template writers should have restricted access to variables and functions, because of security issues. Such security issues can be a problem on a live web server, but they are completely irrelevant for a nanoc-powered site.</p>

<p><strong>The Erubis filter isn‚Äôt there anymore.</strong> The main reason for using Erubis is speed, but since speed is not really relevant for nanoc-powered sites, the filter has been removed.</p>

<p><strong>Identical files are no longer printed</strong> which makes nanoc‚Äôs output cleaner for sites with many pages. You can use <kbd>--verbose</kbd> or <kbd>-V</kbd> (uppercase V) to let nanoc print identical files.</p>

<p><strong>Templates are no longer run through ERB when creating a page.</strong> This <del>bug</del> <ins>feature</ins> was quite confusing, and it wasn‚Äôt really useful either.</p>

<p>It may not be useful to everybody, but I‚Äôd still like to mention that the nanoc source code has been completely restructured. Some parts were rewritten from scratch. The code is a lot cleaner now, so if you want to take a shot at hacking away at nanoc, now‚Äôs the time.</p>

</div><div class="section" id="compatibility-with-ruby-1-9">
<h3>Compatibility with Ruby 1.9</h3>

<p>nanoc is compatible with Ruby 1.9, which is being (or already has been) released today. (I admit I cheated a bit to make it compatible, though, but that‚Äôs not relevant.)</p>

<p>BlueCloth, however, does not appear to be compatible with Ruby 1.9. You‚Äôll get a "invalid mbstring sequence" error when trying to filter a page using the <code>markdown</code>/<code>bluecloth</code> filter. To resolve this, you can use RedCloth instead of BlueCloth, since RedCloth also supports Markdown. The RedCloth filter is identified using <code>redcloth</code> or <code>textile</code>.</p>

<p>The nanoc site, which is available as a sample from the <a href="/docs/1-introduction/#development">Mercurial repository</a>, cannot currently be compiled because of its dependency on Hpricot, and Hpricot does not compile on Ruby 1.9.</p>

<p>These are only small issues, and I‚Äôm convinced that these will be fixed soon. If you rely on BlueCloth, Hpricot, or anything else that is not currently compatible with Ruby 1.9, you can still use Ruby 1.8‚Äînanoc still works on 1.8, and it‚Äôll stay that way for a long time.</p>

</div><div class="section" id="last-words">
<h3>Last Words</h3>

<p>nanoc has been tested thorougly, but there‚Äôs always a chance that something goes wrong. If you are experiencing any issues, please do <a href="https://nanoc.stoneship.org/trac/newticket">do report them</a>. They‚Äôll be resolved in no time. Thanks a lot!</p>

<p>Enjoy nanoc 2.0. Merry christmas, and a happy new year.</p>
</div>;T;I"µ<p>nanoc 2.0 has arrived, right in time for christmas!</p>

<p>In addition to nanoc 2.0, I‚Äôm also proud to present a revamped nanoc site, featuring a much less amateurish look, and most importantly, a <a href="/docs/">brand new, completely rewritten manual</a>. There are quite a few other changes, but I‚Äôm sure you‚Äôll find those by yourself.</p>

<p>To update or install, simply:</p>

<pre><span class="prompt">%</span> <kbd>gem install nanoc</kbd></pre>

<p>Before upgrading, know that there have been quite a few changes, and that some of the changes may cause your site to break. Read carefully what I have to say.</p>

<h3>New Features</h3>

<p>In addition to defining custom filters, it is now possible to define <strong>custom layout processors</strong>. This is very similar to the new way of defining filters (see below).</p>

<p>Another new feature involves <strong>custom data sources</strong>. Instead of letting nanoc read the data off flat files on the hard disk, you can tell it to read from a database instead, for example. This may not sound terribly exciting, but it opens the door for writing GUI applications that manage a nanoc site. (There a no such GUI applications yet, though. Want to give it a shot?)</p>

<p>Quite useful are <strong>parent and children links for page objects</strong>. You can now easily get the parent of a page like <code>@item.parent</code>, and you can get a page‚Äôs child pages by doing <code>@item.children</code>. Very useful for building site maps or breadcrumb navigation, for example.</p>

<p>The coolest (and perhaps oddest) feature is an <strong>auto-compiler</strong>. Instead of having to manually compile your site every time you make a change, you can now let nanoc compile it whenever necessary.</p>

<h3>Important Differences with nanoc 1.x</h3>

<p><strong>The way custom filters are defined has changed.</strong> You can no longer use <code>register_filter</code>. Instead, you can write filters by subclassing <code>Nanoc::Filter</code>. For example, the Markdown filter looks like this now:</p>

<pre><code class="language-ruby">class MarkdownFilter &lt; Nanoc::Filter
  identifiers :markdown, :bluecloth

  def run(content)
    nanoc_require 'bluecloth'
    ::BlueCloth.new(content).to_html
  end
end</code></pre>

<p><strong>The <code>filters</code> attribute is gone now.</strong> To define the list of filters to run before laying out a page, use the <code>filters_pre</code> attribute, which does exactly the same as <code>filters</code>.</p>

<p><strong>Support for Liquid has been dropped entirely.</strong> Liquid is a nice templating system, but it‚Äôs only really useful in situations where template writers should have restricted access to variables and functions, because of security issues. Such security issues can be a problem on a live web server, but they are completely irrelevant for a nanoc-powered site.</p>

<p><strong>The Erubis filter isn‚Äôt there anymore.</strong> The main reason for using Erubis is speed, but since speed is not really relevant for nanoc-powered sites, the filter has been removed.</p>

<p><strong>Identical files are no longer printed</strong> which makes nanoc‚Äôs output cleaner for sites with many pages. You can use <kbd>--verbose</kbd> or <kbd>-V</kbd> (uppercase V) to let nanoc print identical files.</p>

<p><strong>Templates are no longer run through ERB when creating a page.</strong> This <del>bug</del> <ins>feature</ins> was quite confusing, and it wasn‚Äôt really useful either.</p>

<p>It may not be useful to everybody, but I‚Äôd still like to mention that the nanoc source code has been completely restructured. Some parts were rewritten from scratch. The code is a lot cleaner now, so if you want to take a shot at hacking away at nanoc, now‚Äôs the time.</p>

<h3>Compatibility with Ruby 1.9</h3>

<p>nanoc is compatible with Ruby 1.9, which is being (or already has been) released today. (I admit I cheated a bit to make it compatible, though, but that‚Äôs not relevant.)</p>

<p>BlueCloth, however, does not appear to be compatible with Ruby 1.9. You‚Äôll get a "invalid mbstring sequence" error when trying to filter a page using the <code>markdown</code>/<code>bluecloth</code> filter. To resolve this, you can use RedCloth instead of BlueCloth, since RedCloth also supports Markdown. The RedCloth filter is identified using <code>redcloth</code> or <code>textile</code>.</p>

<p>The nanoc site, which is available as a sample from the <a href="/docs/1-introduction/#development">Mercurial repository</a>, cannot currently be compiled because of its dependency on Hpricot, and Hpricot does not compile on Ruby 1.9.</p>

<p>These are only small issues, and I‚Äôm convinced that these will be fixed soon. If you rely on BlueCloth, Hpricot, or anything else that is not currently compatible with Ruby 1.9, you can still use Ruby 1.8&mdash;nanoc still works on 1.8, and it‚Äôll stay that way for a long time.</p>

<h3>Last Words</h3>

<p>nanoc has been tested thorougly, but there‚Äôs always a chance that something goes wrong. If you are experiencing any issues, please do <a href="https://nanoc.stoneship.org/trac/newticket">do report them</a>. They‚Äôll be resolved in no time. Thanks a lot!</p>

<p>Enjoy nanoc 2.0. Merry christmas, and a happy new year.</p>
;T;@ö"/blog/30/2010-02-25/{;{
;I"g
<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<title>nanoc ‚Ä∫ nanoc 3.0.9 released</title>
<meta content="nanoc 3.4.0" name="generator">
<link href="/assets/style-v17.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://feeds.feedburner.com/nanoc" rel="alternate" title="The nanoc Blog" type="application/atom+xml">
<script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-15639968-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script>
</head>
<body>
<div class="wrapper">
<!-- ***** navigation ***** -->
<div class="nav">
<ol>
<li><a href="/"><span>Home</span></a></li>
<li><a href="/blog/"><span>News</span></a></li>
<li><a href="/docs/"><span>Documentation</span></a></li>
<li><a href="/community/"><span>Community</span></a></li>
</ol>
</div>
<!-- ***** sidebar ***** -->
<div class="side">
<ol>
<li><a href="/blog/13/"><span>Articles about v3.4</span></a></li>
<li><a href="/blog/12/"><span>Articles about v0.12.x</span></a></li>
</ol>
</div>
<!-- ***** body ***** -->
<div class="body">
<div class="article">
<div class="header">
<h1>nanoc 3.0.9 released</h1>
</div>
<p>nanoc 3.0.9 is out. This tiny patch release fixes a bug in 3.0.8 that only occurs when using Ruby 1.8.x: some parentheses were lacking, and while the code parsed fine on 1.9.x, it did not on 1.8.x. See the <a href="/release-notes/">release notes</a> for details.</p>

<p>You can update nanoc3 the usual way, like this:</p>

<pre><kbd><span class="prompt">&gt;</span> sudo gem update nanoc3</kbd></pre>




<p>If you have any issues with this nanoc release, do let me know on the <a href="http://groups.google.com/group/nanoc/">mailinglist</a> or on the <a href="irc://chat.freenode.net/#nanoc">IRC channel</a>. Enjoy!</p>
</div>
</div>
</div>
<!-- ***** footer ***** -->
<div id="footer">
<p>SeqWare ¬© 2007‚Äì2012 Brian O&#8217;Connor. SeqWare is released under the a <a rel="license" href="http://www.gnu.org/licenses/licenses.html">GNU GPL v3</a>. This site is built using the excellent <a href="http://nanoc.stoneship.org/">nanoc</a> tool and examples with the <a href="http://www.fonts.info/info/press/free-fonts-for-font-face-embedding.htm">Graublau</a> and <a href="http://scripts.sil.org/Gentium">Gentium</a> fonts.</p>
</div>
</body>
</html>
;T;	I"]nanoc 3.0.9 is out. This tiny patch release fixes a bug in 3.0.8 that only occurs when using Ruby 1.8.x: some parentheses were lacking, and while the code parsed fine on 1.9.x, it did not on 1.8.x. See the <a href="/release-notes/">release notes</a> for details.

You can update nanoc3 the usual way, like this:

<pre><kbd><span class="prompt">></span> sudo gem update nanoc3</kbd></pre>

<p>If you have any issues with this nanoc release, do let me know on the <a href="http://groups.google.com/group/nanoc/">mailinglist</a> or on the <a href="irc://chat.freenode.net/#nanoc">IRC channel</a>. Enjoy!</p>
;T;
I"p<p>nanoc 3.0.9 is out. This tiny patch release fixes a bug in 3.0.8 that only occurs when using Ruby 1.8.x: some parentheses were lacking, and while the code parsed fine on 1.9.x, it did not on 1.8.x. See the <a href="/release-notes/">release notes</a> for details.</p>

<p>You can update nanoc3 the usual way, like this:</p>

<pre><kbd><span class="prompt">&gt;</span> sudo gem update nanoc3</kbd></pre>




<p>If you have any issues with this nanoc release, do let me know on the <a href="http://groups.google.com/group/nanoc/">mailinglist</a> or on the <a href="irc://chat.freenode.net/#nanoc">IRC channel</a>. Enjoy!</p>;T;I"o<p>nanoc 3.0.9 is out. This tiny patch release fixes a bug in 3.0.8 that only occurs when using Ruby 1.8.x: some parentheses were lacking, and while the code parsed fine on 1.9.x, it did not on 1.8.x. See the <a href="/release-notes/">release notes</a> for details.</p>

<p>You can update nanoc3 the usual way, like this:</p>

<pre><kbd><span class="prompt">></span> sudo gem update nanoc3</kbd></pre>




<p>If you have any issues with this nanoc release, do let me know on the <a href="http://groups.google.com/group/nanoc/">mailinglist</a> or on the <a href="irc://chat.freenode.net/#nanoc">IRC channel</a>. Enjoy!</p>

;T;@°"/blog/30/2010-03-23/{;{
;I"π<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<title>nanoc ‚Ä∫ An Important Note About nanoc 2</title>
<meta content="nanoc 3.4.0" name="generator">
<link href="/assets/style-v17.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://feeds.feedburner.com/nanoc" rel="alternate" title="The nanoc Blog" type="application/atom+xml">
<script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-15639968-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script>
</head>
<body>
<div class="wrapper">
<!-- ***** navigation ***** -->
<div class="nav">
<ol>
<li><a href="/"><span>Home</span></a></li>
<li><a href="/blog/"><span>News</span></a></li>
<li><a href="/docs/"><span>Documentation</span></a></li>
<li><a href="/community/"><span>Community</span></a></li>
</ol>
</div>
<!-- ***** sidebar ***** -->
<div class="side">
<ol>
<li><a href="/blog/13/"><span>Articles about v3.4</span></a></li>
<li><a href="/blog/12/"><span>Articles about v0.12.x</span></a></li>
</ol>
</div>
<!-- ***** body ***** -->
<div class="body">
<div class="article">
<div class="header">
<h1>An Important Note About nanoc 2</h1>
</div>
<p class="warning"><strong>Important:</strong> This information is no longer accurate. As of nanoc 3.3, the nanoc executable is called <code>nanoc</code> and the namespace is <code>Nanoc</code>. <code>nanoc-switch</code> no longer exists. If you want to use different versions at the same time, consider using <a href="http://gembundler.com/">Bundler</a>.</p>

<p>nanoc 2 is, as of today, no longer maintained. Its successor, nanoc 3, was released more than seven months ago, and if you are still using nanoc 2 you should considering updating your sites to work with nanoc 3. The <s>migration guide</s> will be very useful for you when upgrading.</p>

<p>I‚Äôve also taken the time to resolve some issues with gem and executable names. From now on, installing nanoc 2 is done using <code>gem install nanoc2</code>. Invoking nanoc 2 is done using <code>nanoc2</code> now. Finally, the namespace (module) for nanoc 2 is now called <code>Nanoc2</code> instead of <code>Nanoc</code>.</p>

<p>The <code>nanoc</code> gem is now an alias for the <code>nanoc3</code> gem and the <code>nanoc</code> executable is can now be used instead of <code>nanoc3</code>. In other words, if the gem or executable name does not end with an explicit version, it is an alias for the most recent version.</p>

<p><strong>How does this change affect you?</strong> If you use nanoc 3, nothing changes. If you use nanoc 2, however, you‚Äôll need to <code>gem install nanoc2</code> and use the <code>nanoc2</code> executable instead of <code>nanoc</code>. In addition to that, any custom code that uses the <code>Nanoc</code> module will need to use the <code>Nanoc2</code> module instead.</p>

<p>Here‚Äôs a summary:</p>

<table>
<tr class="head">
<th></th>
		<th>nanoc 2.x</th>
		<th>nanoc 3.x</th>
		<th>latest (currently 3.x)</th>
	</tr>
<tr>
<th class="row">gem name</th>
		<td>nanoc2</td>
		<td>nanoc3</td>
		<td>nanoc</td>
	</tr>
<tr>
<th class="row">executable name</th>
		<td>nanoc2</td>
		<td>nanoc3</td>
		<td>nanoc</td>
	</tr>
<tr>
<th class="row">module name</th>
		<td>Nanoc2</td>
		<td>Nanoc3</td>
		<td>-</td>
	</tr>
</table>
<p>Now, go ahead and install the <code>nanoc</code> gem:</p>

<pre><span class="prompt">&gt;</span> <kbd>gem install nanoc</kbd></pre>

<p>‚Ä¶ and you‚Äôll once again be able to type just <code>nanoc</code> instead of <code>nanoc3</code> to manage and compile your web site. Ahh, much better.</p>

<p>You can use the <code>nanoc-select</code> executable to select a different version of nanoc that will be executed when <code>nanoc</code> is run. This is how it works:</p>

<pre>
‚ñ∏ <kbd>nanoc-select 2</kbd>
Switched to nanoc version 2.

‚ñ∏ <kbd>nanoc --version</kbd>
nanoc 2.2.3 (c) 2007-2010 Denis Defreyne.
Ruby 1.9.1 (2010-01-10) running on i386-darwin10.2.0

‚ñ∏ <kbd>nanoc-select 3</kbd>
Switched to nanoc version 3.

‚ñ∏ <kbd>nanoc --version</kbd>
nanoc 3.0.9 (c) 2007-2010 Denis Defreyne.
Ruby 1.9.1 (2010-01-10) running on i386-darwin10.2.0
</pre>

<p>If you have any questions about this change, of if you have problems getting it to work correctly, do let me know on the <a href="http://groups.google.com/group/nanoc/">mailinglist</a> or on the <a href="irc://chat.freenode.net/#nanoc%22">IRC channel</a>. Enjoy!</p>
</div>
</div>
</div>
<!-- ***** footer ***** -->
<div id="footer">
<p>SeqWare ¬© 2007‚Äì2012 Brian O&#8217;Connor. SeqWare is released under the a <a rel="license" href="http://www.gnu.org/licenses/licenses.html">GNU GPL v3</a>. This site is built using the excellent <a href="http://nanoc.stoneship.org/">nanoc</a> tool and examples with the <a href="http://www.fonts.info/info/press/free-fonts-for-font-face-embedding.htm">Graublau</a> and <a href="http://scripts.sil.org/Gentium">Gentium</a> fonts.</p>
</div>
</body>
</html>
;T;	I"ç<p class="warning"><strong>Important:</strong> This information is no longer accurate. As of nanoc 3.3, the nanoc executable is called <code>nanoc</code> and the namespace is <code>Nanoc</code>. <code>nanoc-switch</code> no longer exists. If you want to use different versions at the same time, consider using <a href="http://gembundler.com/">Bundler</a>.</p>

nanoc 2 is, as of today, no longer maintained. Its successor, nanoc 3, was released more than seven months ago, and if you are still using nanoc 2 you should considering updating your sites to work with nanoc 3. The <s>migration guide</s> will be very useful for you when upgrading.

I‚Äôve also taken the time to resolve some issues with gem and executable names. From now on, installing nanoc 2 is done using `gem install nanoc2`. Invoking nanoc 2 is done using `nanoc2` now. Finally, the namespace (module) for nanoc 2 is now called `Nanoc2` instead of `Nanoc`.

The `nanoc` gem is now an alias for the `nanoc3` gem and the `nanoc` executable is can now be used instead of `nanoc3`. In other words, if the gem or executable name does not end with an explicit version, it is an alias for the most recent version.

**How does this change affect you?** If you use nanoc 3, nothing changes. If you use nanoc 2, however, you‚Äôll need to `gem install nanoc2` and use the `nanoc2` executable instead of `nanoc`. In addition to that, any custom code that uses the `Nanoc` module will need to use the `Nanoc2` module instead.

Here‚Äôs a summary:

<table>
	<tr class="head">
		<th></th>
		<th>nanoc 2.x</th>
		<th>nanoc 3.x</th>
		<th>latest (currently 3.x)</th>
	</tr>
	<tr>
		<th class="row">gem name</th>
		<td>nanoc2</td>
		<td>nanoc3</td>
		<td>nanoc</td>
	</tr>
	<tr>
		<th class="row">executable name</th>
		<td>nanoc2</td>
		<td>nanoc3</td>
		<td>nanoc</td>
	</tr>
	<tr>
		<th class="row">module name</th>
		<td>Nanoc2</td>
		<td>Nanoc3</td>
		<td>-</td>
	</tr>
</table>

Now, go ahead and install the `nanoc` gem:

<pre><span class="prompt">></span> <kbd>gem install nanoc</kbd></pre>

‚Ä¶ and you‚Äôll once again be able to type just `nanoc` instead of `nanoc3` to manage and compile your web site. Ahh, much better.

You can use the `nanoc-select` executable to select a different version of nanoc that will be executed when `nanoc` is run. This is how it works:

<pre>
‚ñ∏ <kbd>nanoc-select 2</kbd>
Switched to nanoc version 2.

‚ñ∏ <kbd>nanoc --version</kbd>
nanoc 2.2.3 (c) 2007-2010 Denis Defreyne.
Ruby 1.9.1 (2010-01-10) running on i386-darwin10.2.0

‚ñ∏ <kbd>nanoc-select 3</kbd>
Switched to nanoc version 3.

‚ñ∏ <kbd>nanoc --version</kbd>
nanoc 3.0.9 (c) 2007-2010 Denis Defreyne.
Ruby 1.9.1 (2010-01-10) running on i386-darwin10.2.0
</pre>

If you have any questions about this change, of if you have problems getting it to work correctly, do let me know on the [mailinglist](http://groups.google.com/group/nanoc/) or on the [IRC channel](irc://chat.freenode.net/#nanoc"). Enjoy!
;T;
I"´<p class="warning"><strong>Important:</strong> This information is no longer accurate. As of nanoc 3.3, the nanoc executable is called <code>nanoc</code> and the namespace is <code>Nanoc</code>. <code>nanoc-switch</code> no longer exists. If you want to use different versions at the same time, consider using <a href="http://gembundler.com/">Bundler</a>.</p>

<p>nanoc 2 is, as of today, no longer maintained. Its successor, nanoc 3, was released more than seven months ago, and if you are still using nanoc 2 you should considering updating your sites to work with nanoc 3. The <s>migration guide</s> will be very useful for you when upgrading.</p>

<p>I‚Äôve also taken the time to resolve some issues with gem and executable names. From now on, installing nanoc 2 is done using <code>gem install nanoc2</code>. Invoking nanoc 2 is done using <code>nanoc2</code> now. Finally, the namespace (module) for nanoc 2 is now called <code>Nanoc2</code> instead of <code>Nanoc</code>.</p>

<p>The <code>nanoc</code> gem is now an alias for the <code>nanoc3</code> gem and the <code>nanoc</code> executable is can now be used instead of <code>nanoc3</code>. In other words, if the gem or executable name does not end with an explicit version, it is an alias for the most recent version.</p>

<p><strong>How does this change affect you?</strong> If you use nanoc 3, nothing changes. If you use nanoc 2, however, you‚Äôll need to <code>gem install nanoc2</code> and use the <code>nanoc2</code> executable instead of <code>nanoc</code>. In addition to that, any custom code that uses the <code>Nanoc</code> module will need to use the <code>Nanoc2</code> module instead.</p>

<p>Here‚Äôs a summary:</p>

<table>
<tr class="head">
<th></th>
		<th>nanoc 2.x</th>
		<th>nanoc 3.x</th>
		<th>latest (currently 3.x)</th>
	</tr>
<tr>
<th class="row">gem name</th>
		<td>nanoc2</td>
		<td>nanoc3</td>
		<td>nanoc</td>
	</tr>
<tr>
<th class="row">executable name</th>
		<td>nanoc2</td>
		<td>nanoc3</td>
		<td>nanoc</td>
	</tr>
<tr>
<th class="row">module name</th>
		<td>Nanoc2</td>
		<td>Nanoc3</td>
		<td>-</td>
	</tr>
</table><p>Now, go ahead and install the <code>nanoc</code> gem:</p>

<pre><span class="prompt">&gt;</span> <kbd>gem install nanoc</kbd></pre>

<p>‚Ä¶ and you‚Äôll once again be able to type just <code>nanoc</code> instead of <code>nanoc3</code> to manage and compile your web site. Ahh, much better.</p>

<p>You can use the <code>nanoc-select</code> executable to select a different version of nanoc that will be executed when <code>nanoc</code> is run. This is how it works:</p>

<pre>
‚ñ∏ <kbd>nanoc-select 2</kbd>
Switched to nanoc version 2.

‚ñ∏ <kbd>nanoc --version</kbd>
nanoc 2.2.3 (c) 2007-2010 Denis Defreyne.
Ruby 1.9.1 (2010-01-10) running on i386-darwin10.2.0

‚ñ∏ <kbd>nanoc-select 3</kbd>
Switched to nanoc version 3.

‚ñ∏ <kbd>nanoc --version</kbd>
nanoc 3.0.9 (c) 2007-2010 Denis Defreyne.
Ruby 1.9.1 (2010-01-10) running on i386-darwin10.2.0
</pre>

<p>If you have any questions about this change, of if you have problems getting it to work correctly, do let me know on the <a href="http://groups.google.com/group/nanoc/">mailinglist</a> or on the <a href="irc://chat.freenode.net/#nanoc%22">IRC channel</a>. Enjoy!</p>;T;I"∫<p class="warning"><strong>Important:</strong> This information is no longer accurate. As of nanoc 3.3, the nanoc executable is called <code>nanoc</code> and the namespace is <code>Nanoc</code>. <code>nanoc-switch</code> no longer exists. If you want to use different versions at the same time, consider using <a href="http://gembundler.com/">Bundler</a>.</p>

<p>nanoc 2 is, as of today, no longer maintained. Its successor, nanoc 3, was released more than seven months ago, and if you are still using nanoc 2 you should considering updating your sites to work with nanoc 3. The <s>migration guide</s> will be very useful for you when upgrading.</p>

<p>I‚Äôve also taken the time to resolve some issues with gem and executable names. From now on, installing nanoc 2 is done using <code>gem install nanoc2</code>. Invoking nanoc 2 is done using <code>nanoc2</code> now. Finally, the namespace (module) for nanoc 2 is now called <code>Nanoc2</code> instead of <code>Nanoc</code>.</p>

<p>The <code>nanoc</code> gem is now an alias for the <code>nanoc3</code> gem and the <code>nanoc</code> executable is can now be used instead of <code>nanoc3</code>. In other words, if the gem or executable name does not end with an explicit version, it is an alias for the most recent version.</p>

<p><strong>How does this change affect you?</strong> If you use nanoc 3, nothing changes. If you use nanoc 2, however, you‚Äôll need to <code>gem install nanoc2</code> and use the <code>nanoc2</code> executable instead of <code>nanoc</code>. In addition to that, any custom code that uses the <code>Nanoc</code> module will need to use the <code>Nanoc2</code> module instead.</p>

<p>Here‚Äôs a summary:</p>

<table>
	<tr class="head">
		<th />
		<th>nanoc 2.x</th>
		<th>nanoc 3.x</th>
		<th>latest (currently 3.x)</th>
	</tr>
	<tr>
		<th class="row">gem name</th>
		<td>nanoc2</td>
		<td>nanoc3</td>
		<td>nanoc</td>
	</tr>
	<tr>
		<th class="row">executable name</th>
		<td>nanoc2</td>
		<td>nanoc3</td>
		<td>nanoc</td>
	</tr>
	<tr>
		<th class="row">module name</th>
		<td>Nanoc2</td>
		<td>Nanoc3</td>
		<td>-</td>
	</tr>
</table>

<p>Now, go ahead and install the <code>nanoc</code> gem:</p>

<pre><span class="prompt">&gt;</span> <kbd>gem install nanoc</kbd></pre>

<p>‚Ä¶ and you‚Äôll once again be able to type just <code>nanoc</code> instead of <code>nanoc3</code> to manage and compile your web site. Ahh, much better.</p>

<p>You can use the <code>nanoc-select</code> executable to select a different version of nanoc that will be executed when <code>nanoc</code> is run. This is how it works:</p>

<pre>
‚ñ∏ <kbd>nanoc-select 2</kbd>
Switched to nanoc version 2.

‚ñ∏ <kbd>nanoc --version</kbd>
nanoc 2.2.3 (c) 2007-2010 Denis Defreyne.
Ruby 1.9.1 (2010-01-10) running on i386-darwin10.2.0

‚ñ∏ <kbd>nanoc-select 3</kbd>
Switched to nanoc version 3.

‚ñ∏ <kbd>nanoc --version</kbd>
nanoc 3.0.9 (c) 2007-2010 Denis Defreyne.
Ruby 1.9.1 (2010-01-10) running on i386-darwin10.2.0
</pre>

<p>If you have any questions about this change, of if you have problems getting it to work correctly, do let me know on the <a href="http://groups.google.com/group/nanoc/">mailinglist</a> or on the <a href="irc://chat.freenode.net/#nanoc&quot;">IRC channel</a>. Enjoy!</p>
;T;@®"/blog/30/2009-08-14/{;{
;I"Ñ<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<title>nanoc ‚Ä∫ nanoc 3.0 released</title>
<meta content="nanoc 3.4.0" name="generator">
<link href="/assets/style-v17.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://feeds.feedburner.com/nanoc" rel="alternate" title="The nanoc Blog" type="application/atom+xml">
<script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-15639968-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script>
</head>
<body>
<div class="wrapper">
<!-- ***** navigation ***** -->
<div class="nav">
<ol>
<li><a href="/"><span>Home</span></a></li>
<li><a href="/blog/"><span>News</span></a></li>
<li><a href="/docs/"><span>Documentation</span></a></li>
<li><a href="/community/"><span>Community</span></a></li>
</ol>
</div>
<!-- ***** sidebar ***** -->
<div class="side">
<ol>
<li><a href="/blog/13/"><span>Articles about v3.4</span></a></li>
<li><a href="/blog/12/"><span>Articles about v0.12.x</span></a></li>
</ol>
</div>
<!-- ***** body ***** -->
<div class="body">
<div class="article">
<div class="header">
<h1>nanoc 3.0 released</h1>
</div>
<p>nanoc 3.0 has landed. This release brings many improvements which will be revealed in just a bit, but first, here‚Äôs how to install it:</p>

<pre><span class="prompt">%</span> <kbd>gem install nanoc3</kbd></pre>


<p><strong>nanoc 3.0 is incompatible with previous versions of nanoc</strong> which means that you cannot use nanoc 3.0 with existing nanoc 2.x sites. Check out the <s>migrating from nanoc 2.2 to nanoc 3.0</s> guide for details on how to upgrade our existing sites.</p>

<p>Fortunately, nanoc 3.0 and 2.2 can coexist; the commandline tool for nanoc 3.0 is named <code>nanoc3</code> (not <code>nanoc</code>) and the namespace is <code>Nanoc3</code>, not <code>Nanoc</code>.  You can easily use nanoc 2.2 and nanoc 3.0 side by side.</p>

<p>So, on to what‚Äôs new in nanoc 3.0. There are too many changes to mention them all, but here‚Äôs a tiny list of useful new features that I like most:</p>

<ul>
<li><p><strong>Multiple data sources</strong> so you can load data from multiple locations‚Äîfor example, Twitter, Delicious and Last.fm.</p></li>
<li><p><strong>Filter arguments</strong> so you can pass extra arguments when executing a filter. For example, you can now pass Haml options when executing filters, like this: <code>filter :haml, :format =&gt; :html5</code>.</p></li>
<li><p><strong>A more compact filesystem-based data source</strong> called <code>filesystem_combined</code> that doesn‚Äôt require tons of directories in the <code>content</code> and <code>layout</code> directories. Cleaner and less verbose.</p></li>
<li><p>An all-new <strong>dependency tracking system</strong> that ensures that all modified items and their dependent items are recompiled when the site is compiled. This speeds up site compilation by preventing non-modified pages from being recompiled.</p></li>
<li><p><strong>A rules file</strong> which allows processing instructions (filtering pages, laying out pages) to be specified in a much more DRY way. In addition, the rules file is much more powerful than specifying processing instructions using item/layout attributes.</p></li>
</ul>
<p>For more information, check out the <s>migration guide</s>, as well as the updated <a href="/docs/3-getting-started/">tutorial</a> and <a href="/docs/4-basic-concepts/">manual</a>. There is also the <a href="/docs/api/3.1/">source code documentation for 3.0.0</a> in case you want to take a peek at the internals.</p>

<p>As you can see, a lot has changed in nanoc 3.0. If you experience any problems with this nanoc 3.0, let me know on the <a href="http://groups.google.com/group/nanoc/">nanoc mailinglist</a> or on the <a href="irc://chat.freenode.net/#nanoc">nanoc IRC channel</a>.</p>

<p>Enjoy!</p>
</div>
</div>
</div>
<!-- ***** footer ***** -->
<div id="footer">
<p>SeqWare ¬© 2007‚Äì2012 Brian O&#8217;Connor. SeqWare is released under the a <a rel="license" href="http://www.gnu.org/licenses/licenses.html">GNU GPL v3</a>. This site is built using the excellent <a href="http://nanoc.stoneship.org/">nanoc</a> tool and examples with the <a href="http://www.fonts.info/info/press/free-fonts-for-font-face-embedding.htm">Graublau</a> and <a href="http://scripts.sil.org/Gentium">Gentium</a> fonts.</p>
</div>
</body>
</html>
;T;	I"4	nanoc 3.0 has landed. This release brings many improvements which will be revealed in just a bit, but first, here‚Äôs how to install it:

<pre><span class="prompt">%</span> <kbd>gem install nanoc3</kbd></pre>

**nanoc 3.0 is incompatible with previous versions of nanoc** which means that you cannot use nanoc 3.0 with existing nanoc 2.x sites. Check out the <s>migrating from nanoc 2.2 to nanoc 3.0</s> guide for details on how to upgrade our existing sites.

Fortunately, nanoc 3.0 and 2.2 can coexist; the commandline tool for nanoc 3.0 is named `nanoc3` (not `nanoc`) and the namespace is `Nanoc3`, not `Nanoc`.  You can easily use nanoc 2.2 and nanoc 3.0 side by side.

So, on to what‚Äôs new in nanoc 3.0. There are too many changes to mention them all, but here‚Äôs a tiny list of useful new features that I like most:

* **Multiple data sources** so you can load data from multiple locations‚Äîfor example, Twitter, Delicious and Last.fm.

* **Filter arguments** so you can pass extra arguments when executing a filter. For example, you can now pass Haml options when executing filters, like this: `filter :haml, :format => :html5`.

* **A more compact filesystem-based data source** called `filesystem_combined` that doesn‚Äôt require tons of directories in the `content` and `layout` directories. Cleaner and less verbose.

* An all-new **dependency tracking system** that ensures that all modified items and their dependent items are recompiled when the site is compiled. This speeds up site compilation by preventing non-modified pages from being recompiled.

* **A rules file** which allows processing instructions (filtering pages, laying out pages) to be specified in a much more DRY way. In addition, the rules file is much more powerful than specifying processing instructions using item/layout attributes.

For more information, check out the <s>migration guide</s>, as well as the updated [tutorial](/docs/3-getting-started/) and [manual](/docs/4-basic-concepts/). There is also the [source code documentation for 3.0.0](/docs/api/3.1/) in case you want to take a peek at the internals.

As you can see, a lot has changed in nanoc 3.0. If you experience any problems with this nanoc 3.0, let me know on the [nanoc mailinglist](http://groups.google.com/group/nanoc/) or on the [nanoc IRC channel](irc://chat.freenode.net/#nanoc).

Enjoy!
;T;
I"ê
<p>nanoc 3.0 has landed. This release brings many improvements which will be revealed in just a bit, but first, here‚Äôs how to install it:</p>

<pre><span class="prompt">%</span> <kbd>gem install nanoc3</kbd></pre>


<p><strong>nanoc 3.0 is incompatible with previous versions of nanoc</strong> which means that you cannot use nanoc 3.0 with existing nanoc 2.x sites. Check out the <s>migrating from nanoc 2.2 to nanoc 3.0</s> guide for details on how to upgrade our existing sites.</p>

<p>Fortunately, nanoc 3.0 and 2.2 can coexist; the commandline tool for nanoc 3.0 is named <code>nanoc3</code> (not <code>nanoc</code>) and the namespace is <code>Nanoc3</code>, not <code>Nanoc</code>.  You can easily use nanoc 2.2 and nanoc 3.0 side by side.</p>

<p>So, on to what‚Äôs new in nanoc 3.0. There are too many changes to mention them all, but here‚Äôs a tiny list of useful new features that I like most:</p>

<ul>
<li><p><strong>Multiple data sources</strong> so you can load data from multiple locations‚Äîfor example, Twitter, Delicious and Last.fm.</p></li>
<li><p><strong>Filter arguments</strong> so you can pass extra arguments when executing a filter. For example, you can now pass Haml options when executing filters, like this: <code>filter :haml, :format =&gt; :html5</code>.</p></li>
<li><p><strong>A more compact filesystem-based data source</strong> called <code>filesystem_combined</code> that doesn‚Äôt require tons of directories in the <code>content</code> and <code>layout</code> directories. Cleaner and less verbose.</p></li>
<li><p>An all-new <strong>dependency tracking system</strong> that ensures that all modified items and their dependent items are recompiled when the site is compiled. This speeds up site compilation by preventing non-modified pages from being recompiled.</p></li>
<li><p><strong>A rules file</strong> which allows processing instructions (filtering pages, laying out pages) to be specified in a much more DRY way. In addition, the rules file is much more powerful than specifying processing instructions using item/layout attributes.</p></li>
</ul><p>For more information, check out the <s>migration guide</s>, as well as the updated <a href="/docs/3-getting-started/">tutorial</a> and <a href="/docs/4-basic-concepts/">manual</a>. There is also the <a href="/docs/api/3.1/">source code documentation for 3.0.0</a> in case you want to take a peek at the internals.</p>

<p>As you can see, a lot has changed in nanoc 3.0. If you experience any problems with this nanoc 3.0, let me know on the <a href="http://groups.google.com/group/nanoc/">nanoc mailinglist</a> or on the <a href="irc://chat.freenode.net/#nanoc">nanoc IRC channel</a>.</p>

<p>Enjoy!</p>;T;I"î
<p>nanoc 3.0 has landed. This release brings many improvements which will be revealed in just a bit, but first, here‚Äôs how to install it:</p>

<pre><span class="prompt">%</span> <kbd>gem install nanoc3</kbd></pre>


<p><strong>nanoc 3.0 is incompatible with previous versions of nanoc</strong> which means that you cannot use nanoc 3.0 with existing nanoc 2.x sites. Check out the <s>migrating from nanoc 2.2 to nanoc 3.0</s> guide for details on how to upgrade our existing sites.</p>

<p>Fortunately, nanoc 3.0 and 2.2 can coexist; the commandline tool for nanoc 3.0 is named <code>nanoc3</code> (not <code>nanoc</code>) and the namespace is <code>Nanoc3</code>, not <code>Nanoc</code>.  You can easily use nanoc 2.2 and nanoc 3.0 side by side.</p>

<p>So, on to what‚Äôs new in nanoc 3.0. There are too many changes to mention them all, but here‚Äôs a tiny list of useful new features that I like most:</p>

<ul>
<li><p><strong>Multiple data sources</strong> so you can load data from multiple locations‚Äîfor example, Twitter, Delicious and Last.fm.</p></li>
<li><p><strong>Filter arguments</strong> so you can pass extra arguments when executing a filter. For example, you can now pass Haml options when executing filters, like this: <code>filter :haml, :format =&gt; :html5</code>.</p></li>
<li><p><strong>A more compact filesystem-based data source</strong> called <code>filesystem_combined</code> that doesn‚Äôt require tons of directories in the <code>content</code> and <code>layout</code> directories. Cleaner and less verbose.</p></li>
<li><p>An all-new <strong>dependency tracking system</strong> that ensures that all modified items and their dependent items are recompiled when the site is compiled. This speeds up site compilation by preventing non-modified pages from being recompiled.</p></li>
<li><p><strong>A rules file</strong> which allows processing instructions (filtering pages, laying out pages) to be specified in a much more DRY way. In addition, the rules file is much more powerful than specifying processing instructions using item/layout attributes.</p></li>
</ul>


<p>For more information, check out the <s>migration guide</s>, as well as the updated <a href="/docs/3-getting-started/">tutorial</a> and <a href="/docs/4-basic-concepts/">manual</a>. There is also the <a href="/docs/api/3.1/">source code documentation for 3.0.0</a> in case you want to take a peek at the internals.</p>

<p>As you can see, a lot has changed in nanoc 3.0. If you experience any problems with this nanoc 3.0, let me know on the <a href="http://groups.google.com/group/nanoc/">nanoc mailinglist</a> or on the <a href="irc://chat.freenode.net/#nanoc">nanoc IRC channel</a>.</p>

<p>Enjoy!</p>
;T;@Ø"/blog/30/2010-02-24/{;{
;I"L
<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<title>nanoc ‚Ä∫ nanoc 3.0.8 released</title>
<meta content="nanoc 3.4.0" name="generator">
<link href="/assets/style-v17.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://feeds.feedburner.com/nanoc" rel="alternate" title="The nanoc Blog" type="application/atom+xml">
<script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-15639968-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script>
</head>
<body>
<div class="wrapper">
<!-- ***** navigation ***** -->
<div class="nav">
<ol>
<li><a href="/"><span>Home</span></a></li>
<li><a href="/blog/"><span>News</span></a></li>
<li><a href="/docs/"><span>Documentation</span></a></li>
<li><a href="/community/"><span>Community</span></a></li>
</ol>
</div>
<!-- ***** sidebar ***** -->
<div class="side">
<ol>
<li><a href="/blog/13/"><span>Articles about v3.4</span></a></li>
<li><a href="/blog/12/"><span>Articles about v0.12.x</span></a></li>
</ol>
</div>
<!-- ***** body ***** -->
<div class="body">
<div class="article">
<div class="header">
<h1>nanoc 3.0.8 released</h1>
</div>
<p>nanoc 3.0.8 is out. This patch release fixes a couple of issues with the Blogging helper, and makes the autocompiler serve up-to-date pages when requesting an index file. See the <a href="/release-notes/">release notes</a> for details.</p>

<p>You can update nanoc3 the usual way, like this:</p>

<pre><kbd><span class="prompt">&gt;</span> sudo gem update nanoc3</kbd></pre>




<p>If you have any issues with this nanoc release, do let me know on the <a href="http://groups.google.com/group/nanoc/">mailinglist</a> or on the <a href="irc://chat.freenode.net/#nanoc">IRC channel</a>. Enjoy!</p>
</div>
</div>
</div>
<!-- ***** footer ***** -->
<div id="footer">
<p>SeqWare ¬© 2007‚Äì2012 Brian O&#8217;Connor. SeqWare is released under the a <a rel="license" href="http://www.gnu.org/licenses/licenses.html">GNU GPL v3</a>. This site is built using the excellent <a href="http://nanoc.stoneship.org/">nanoc</a> tool and examples with the <a href="http://www.fonts.info/info/press/free-fonts-for-font-face-embedding.htm">Graublau</a> and <a href="http://scripts.sil.org/Gentium">Gentium</a> fonts.</p>
</div>
</body>
</html>
;T;	I"Bnanoc 3.0.8 is out. This patch release fixes a couple of issues with the Blogging helper, and makes the autocompiler serve up-to-date pages when requesting an index file. See the <a href="/release-notes/">release notes</a> for details.

You can update nanoc3 the usual way, like this:

<pre><kbd><span class="prompt">></span> sudo gem update nanoc3</kbd></pre>

<p>If you have any issues with this nanoc release, do let me know on the <a href="http://groups.google.com/group/nanoc/">mailinglist</a> or on the <a href="irc://chat.freenode.net/#nanoc">IRC channel</a>. Enjoy!</p>
;T;
I"U<p>nanoc 3.0.8 is out. This patch release fixes a couple of issues with the Blogging helper, and makes the autocompiler serve up-to-date pages when requesting an index file. See the <a href="/release-notes/">release notes</a> for details.</p>

<p>You can update nanoc3 the usual way, like this:</p>

<pre><kbd><span class="prompt">&gt;</span> sudo gem update nanoc3</kbd></pre>




<p>If you have any issues with this nanoc release, do let me know on the <a href="http://groups.google.com/group/nanoc/">mailinglist</a> or on the <a href="irc://chat.freenode.net/#nanoc">IRC channel</a>. Enjoy!</p>;T;I"T<p>nanoc 3.0.8 is out. This patch release fixes a couple of issues with the Blogging helper, and makes the autocompiler serve up-to-date pages when requesting an index file. See the <a href="/release-notes/">release notes</a> for details.</p>

<p>You can update nanoc3 the usual way, like this:</p>

<pre><kbd><span class="prompt">></span> sudo gem update nanoc3</kbd></pre>




<p>If you have any issues with this nanoc release, do let me know on the <a href="http://groups.google.com/group/nanoc/">mailinglist</a> or on the <a href="irc://chat.freenode.net/#nanoc">IRC channel</a>. Enjoy!</p>

;T;@∂"/blog/34/{;{
;I"h<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<title>nanoc ‚Ä∫ Articles about v3.4</title>
<meta content="nanoc 3.4.0" name="generator">
<link href="../../assets/style-v17.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://feeds.feedburner.com/nanoc" rel="alternate" title="The nanoc Blog" type="application/atom+xml">
<script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-15639968-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script>
</head>
<body>
<div class="wrapper">
<!-- ***** navigation ***** -->
<div class="nav">
<ol>
<li><a href="../../"><span>Home</span></a></li>
<li><a href="../"><span>News</span></a></li>
<li><a href="../../docs/"><span>Documentation</span></a></li>
<li><a href="../../community/"><span>Community</span></a></li>
</ol>
</div>
<!-- ***** sidebar ***** -->
<div class="side">
<ol>
<li><span class="active" title="You're here."><span>Articles about v3.4</span></span></li>
<li><a href="../32/"><span>Articles about v3.2</span></a></li>
<li><a href="../31/"><span>Articles about v3.1</span></a></li>
<li><a href="../30/"><span>Articles about v3.0</span></a></li>
<li><a href="../22/"><span>Articles about v2.2</span></a></li>
<li><a href="../21/"><span>Articles about v2.1</span></a></li>
<li><a href="../20/"><span>Articles about v2.0</span></a></li>
</ol>
</div>
<!-- ***** body ***** -->
<div class="body">
<div class="article">
<div class="header">
<h1>Articles about v3.4</h1>
</div>

	<div class="section" id="nanoc-3-4-released-june-9th-2012">
<h2>nanoc 3.4 released <span class="date">(June 9th, 2012)</span>
</h2>
<p>nanoc 3.4 is out! This release brings a few useful improvements to the user interface along with some new and improved filters and commands.</p>

<p>When nanoc crashes, it will now write a <code>crash.log</code> file that contains a lot of extra debugging information that can be useful for tracking down the cause of a crash. The extra information includes the contents of the Gemfile.lock, the list of all installed gems, the <code>$LOAD_PATH</code> and the environment variables.</p>

<p>There is a new <code>show-rules</code> command that prints the compilation steps taken for every item. This could come in handy when figuring out why an item isn‚Äôt filtered as you expected it to be, or when an item isn‚Äôt written while it should be, for instance.</p>

<p>Some other enhancements include new Handlebars and Pandoc filters. Check out the <a href="../../release-notes/">full release notes</a> for details.</p>

<p>You can update your gems using <code>gem update</code> or, if you use Bundler, <code>bundle update</code>.</p>

<p>If you have any questions, be sure to ask them on <a href="http://groups.google.com/group/nanoc/">the mailinglist</a>. If you encounter issues, please do report them at <a href="https://github.com/ddfreyne/nanoc/issues">the issue tracker</a>‚Äîthanks! You can also find me (and others) on the <a href="irc://chat.freenode.net/#nanoc">nanoc IRC channel</a>.</p>

<p>Enjoy!</p>
</div>
</div>
</div>
</div>
<!-- ***** footer ***** -->
<div id="footer">
<p>SeqWare ¬© 2007‚Äì2012 Brian O&#8217;Connor. SeqWare is released under the a <a rel="license" href="http://www.gnu.org/licenses/licenses.html">GNU GPL v3</a>. This site is built using the excellent <a href="http://nanoc.stoneship.org/">nanoc</a> tool and examples with the <a href="http://www.fonts.info/info/press/free-fonts-for-font-face-embedding.htm">Graublau</a> and <a href="http://scripts.sil.org/Gentium">Gentium</a> fonts.</p>
</div>
</body>
</html>
;T;	I"<%= render 'articles' %>;T;
I"
	<div class="section" id="nanoc-3-4-released-june-9th-2012">
<h2>nanoc 3.4 released <span class="date">(June 9th, 2012)</span>
</h2>
<p>nanoc 3.4 is out! This release brings a few useful improvements to the user interface along with some new and improved filters and commands.</p>

<p>When nanoc crashes, it will now write a <code>crash.log</code> file that contains a lot of extra debugging information that can be useful for tracking down the cause of a crash. The extra information includes the contents of the Gemfile.lock, the list of all installed gems, the <code>$LOAD_PATH</code> and the environment variables.</p>

<p>There is a new <code>show-rules</code> command that prints the compilation steps taken for every item. This could come in handy when figuring out why an item isn‚Äôt filtered as you expected it to be, or when an item isn‚Äôt written while it should be, for instance.</p>

<p>Some other enhancements include new Handlebars and Pandoc filters. Check out the <a href="/release-notes/">full release notes</a> for details.</p>

<p>You can update your gems using <code>gem update</code> or, if you use Bundler, <code>bundle update</code>.</p>

<p>If you have any questions, be sure to ask them on <a href="http://groups.google.com/group/nanoc/">the mailinglist</a>. If you encounter issues, please do report them at <a href="https://github.com/ddfreyne/nanoc/issues">the issue tracker</a>‚Äîthanks! You can also find me (and others) on the <a href="irc://chat.freenode.net/#nanoc">nanoc IRC channel</a>.</p>

<p>Enjoy!</p>
</div>;T;I"œ
	<h2>nanoc 3.4 released <span class="date">(June 9th, 2012)</span></h2>
<p>nanoc 3.4 is out! This release brings a few useful improvements to the user interface along with some new and improved filters and commands.</p>

<p>When nanoc crashes, it will now write a <code>crash.log</code> file that contains a lot of extra debugging information that can be useful for tracking down the cause of a crash. The extra information includes the contents of the Gemfile.lock, the list of all installed gems, the <code>$LOAD_PATH</code> and the environment variables.</p>

<p>There is a new <code>show-rules</code> command that prints the compilation steps taken for every item. This could come in handy when figuring out why an item isn‚Äôt filtered as you expected it to be, or when an item isn‚Äôt written while it should be, for instance.</p>

<p>Some other enhancements include new Handlebars and Pandoc filters. Check out the <a href="/release-notes/">full release notes</a> for details.</p>

<p>You can update your gems using <code>gem update</code> or, if you use Bundler, <code>bundle update</code>.</p>

<p>If you have any questions, be sure to ask them on <a href="http://groups.google.com/group/nanoc/">the mailinglist</a>. If you encounter issues, please do report them at <a href="https://github.com/ddfreyne/nanoc/issues">the issue tracker</a>‚Äîthanks! You can also find me (and others) on the <a href="irc://chat.freenode.net/#nanoc">nanoc IRC channel</a>.</p>

<p>Enjoy!</p>



;T;@Ω"/blog/30/{;{
;I"ö&<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<title>nanoc ‚Ä∫ Articles about v3.0</title>
<meta content="nanoc 3.4.0" name="generator">
<link href="../../assets/style-v17.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://feeds.feedburner.com/nanoc" rel="alternate" title="The nanoc Blog" type="application/atom+xml">
<script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-15639968-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script>
</head>
<body>
<div class="wrapper">
<!-- ***** navigation ***** -->
<div class="nav">
<ol>
<li><a href="../../"><span>Home</span></a></li>
<li><a href="../"><span>News</span></a></li>
<li><a href="../../docs/"><span>Documentation</span></a></li>
<li><a href="../../community/"><span>Community</span></a></li>
</ol>
</div>
<!-- ***** sidebar ***** -->
<div class="side">
<ol>
<li><a href="../13/"><span>Articles about v3.4</span></a></li>
<li><a href="../12/"><span>Articles about v0.12.x</span></a></li>
</ol>
</div>
<!-- ***** body ***** -->
<div class="body">
<div class="article">
<div class="header">
<h1>Articles about v3.0</h1>
</div>

	<div class="section" id="an-important-note-about-nanoc-2-march-23rd-2010">
<h2>An Important Note About nanoc 2 <span class="date">(March 23rd, 2010)</span>
</h2>
<p class="warning"><strong>Important:</strong> This information is no longer accurate. As of nanoc 3.3, the nanoc executable is called <code>nanoc</code> and the namespace is <code>Nanoc</code>. <code>nanoc-switch</code> no longer exists. If you want to use different versions at the same time, consider using <a href="http://gembundler.com/">Bundler</a>.</p>

<p>nanoc 2 is, as of today, no longer maintained. Its successor, nanoc 3, was released more than seven months ago, and if you are still using nanoc 2 you should considering updating your sites to work with nanoc 3. The <s>migration guide</s> will be very useful for you when upgrading.</p>

<p>I‚Äôve also taken the time to resolve some issues with gem and executable names. From now on, installing nanoc 2 is done using <code>gem install nanoc2</code>. Invoking nanoc 2 is done using <code>nanoc2</code> now. Finally, the namespace (module) for nanoc 2 is now called <code>Nanoc2</code> instead of <code>Nanoc</code>.</p>

<p>The <code>nanoc</code> gem is now an alias for the <code>nanoc3</code> gem and the <code>nanoc</code> executable is can now be used instead of <code>nanoc3</code>. In other words, if the gem or executable name does not end with an explicit version, it is an alias for the most recent version.</p>

<p><strong>How does this change affect you?</strong> If you use nanoc 3, nothing changes. If you use nanoc 2, however, you‚Äôll need to <code>gem install nanoc2</code> and use the <code>nanoc2</code> executable instead of <code>nanoc</code>. In addition to that, any custom code that uses the <code>Nanoc</code> module will need to use the <code>Nanoc2</code> module instead.</p>

<p>Here‚Äôs a summary:</p>

<table>
<tr class="head">
<th></th>
		<th>nanoc 2.x</th>
		<th>nanoc 3.x</th>
		<th>latest (currently 3.x)</th>
	</tr>
<tr>
<th class="row">gem name</th>
		<td>nanoc2</td>
		<td>nanoc3</td>
		<td>nanoc</td>
	</tr>
<tr>
<th class="row">executable name</th>
		<td>nanoc2</td>
		<td>nanoc3</td>
		<td>nanoc</td>
	</tr>
<tr>
<th class="row">module name</th>
		<td>Nanoc2</td>
		<td>Nanoc3</td>
		<td>-</td>
	</tr>
</table>
<p>Now, go ahead and install the <code>nanoc</code> gem:</p>

<pre><span class="prompt">&gt;</span> <kbd>gem install nanoc</kbd></pre>

<p>‚Ä¶ and you‚Äôll once again be able to type just <code>nanoc</code> instead of <code>nanoc3</code> to manage and compile your web site. Ahh, much better.</p>

<p>You can use the <code>nanoc-select</code> executable to select a different version of nanoc that will be executed when <code>nanoc</code> is run. This is how it works:</p>

<pre>
‚ñ∏ <kbd>nanoc-select 2</kbd>
Switched to nanoc version 2.

‚ñ∏ <kbd>nanoc --version</kbd>
nanoc 2.2.3 (c) 2007-2010 Denis Defreyne.
Ruby 1.9.1 (2010-01-10) running on i386-darwin10.2.0

‚ñ∏ <kbd>nanoc-select 3</kbd>
Switched to nanoc version 3.

‚ñ∏ <kbd>nanoc --version</kbd>
nanoc 3.0.9 (c) 2007-2010 Denis Defreyne.
Ruby 1.9.1 (2010-01-10) running on i386-darwin10.2.0
</pre>

<p>If you have any questions about this change, of if you have problems getting it to work correctly, do let me know on the <a href="http://groups.google.com/group/nanoc/">mailinglist</a> or on the <a href="irc://chat.freenode.net/#nanoc%22">IRC channel</a>. Enjoy!</p>



	</div>
<div class="section" id="nanoc-3-0-9-released-february-25th-2010">
<h2>nanoc 3.0.9 released <span class="date">(February 25th, 2010)</span>
</h2>
<p>nanoc 3.0.9 is out. This tiny patch release fixes a bug in 3.0.8 that only occurs when using Ruby 1.8.x: some parentheses were lacking, and while the code parsed fine on 1.9.x, it did not on 1.8.x. See the <a href="../../release-notes/">release notes</a> for details.</p>

<p>You can update nanoc3 the usual way, like this:</p>

<pre><kbd><span class="prompt">&gt;</span> sudo gem update nanoc3</kbd></pre>




<p>If you have any issues with this nanoc release, do let me know on the <a href="http://groups.google.com/group/nanoc/">mailinglist</a> or on the <a href="irc://chat.freenode.net/#nanoc">IRC channel</a>. Enjoy!</p>




	</div>
<div class="section" id="nanoc-3-0-8-released-february-24th-2010">
<h2>nanoc 3.0.8 released <span class="date">(February 24th, 2010)</span>
</h2>
<p>nanoc 3.0.8 is out. This patch release fixes a couple of issues with the Blogging helper, and makes the autocompiler serve up-to-date pages when requesting an index file. See the <a href="../../release-notes/">release notes</a> for details.</p>

<p>You can update nanoc3 the usual way, like this:</p>

<pre><kbd><span class="prompt">&gt;</span> sudo gem update nanoc3</kbd></pre>




<p>If you have any issues with this nanoc release, do let me know on the <a href="http://groups.google.com/group/nanoc/">mailinglist</a> or on the <a href="irc://chat.freenode.net/#nanoc">IRC channel</a>. Enjoy!</p>




	</div>
<div class="section" id="nanoc-3-0-released-august-14th-2009">
<h2>nanoc 3.0 released <span class="date">(August 14th, 2009)</span>
</h2>
<p>nanoc 3.0 has landed. This release brings many improvements which will be revealed in just a bit, but first, here‚Äôs how to install it:</p>

<pre><span class="prompt">%</span> <kbd>gem install nanoc3</kbd></pre>


<p><strong>nanoc 3.0 is incompatible with previous versions of nanoc</strong> which means that you cannot use nanoc 3.0 with existing nanoc 2.x sites. Check out the <s>migrating from nanoc 2.2 to nanoc 3.0</s> guide for details on how to upgrade our existing sites.</p>

<p>Fortunately, nanoc 3.0 and 2.2 can coexist; the commandline tool for nanoc 3.0 is named <code>nanoc3</code> (not <code>nanoc</code>) and the namespace is <code>Nanoc3</code>, not <code>Nanoc</code>.  You can easily use nanoc 2.2 and nanoc 3.0 side by side.</p>

<p>So, on to what‚Äôs new in nanoc 3.0. There are too many changes to mention them all, but here‚Äôs a tiny list of useful new features that I like most:</p>

<ul>
<li><p><strong>Multiple data sources</strong> so you can load data from multiple locations‚Äîfor example, Twitter, Delicious and Last.fm.</p></li>
<li><p><strong>Filter arguments</strong> so you can pass extra arguments when executing a filter. For example, you can now pass Haml options when executing filters, like this: <code>filter :haml, :format =&gt; :html5</code>.</p></li>
<li><p><strong>A more compact filesystem-based data source</strong> called <code>filesystem_combined</code> that doesn‚Äôt require tons of directories in the <code>content</code> and <code>layout</code> directories. Cleaner and less verbose.</p></li>
<li><p>An all-new <strong>dependency tracking system</strong> that ensures that all modified items and their dependent items are recompiled when the site is compiled. This speeds up site compilation by preventing non-modified pages from being recompiled.</p></li>
<li><p><strong>A rules file</strong> which allows processing instructions (filtering pages, laying out pages) to be specified in a much more DRY way. In addition, the rules file is much more powerful than specifying processing instructions using item/layout attributes.</p></li>
</ul>
<p>For more information, check out the <s>migration guide</s>, as well as the updated <a href="../../docs/3-getting-started/">tutorial</a> and <a href="../../docs/4-basic-concepts/">manual</a>. There is also the <a href="../../docs/api/3.1/">source code documentation for 3.0.0</a> in case you want to take a peek at the internals.</p>

<p>As you can see, a lot has changed in nanoc 3.0. If you experience any problems with this nanoc 3.0, let me know on the <a href="http://groups.google.com/group/nanoc/">nanoc mailinglist</a> or on the <a href="irc://chat.freenode.net/#nanoc">nanoc IRC channel</a>.</p>

<p>Enjoy!</p>
</div>
</div>
</div>
</div>
<!-- ***** footer ***** -->
<div id="footer">
<p>SeqWare ¬© 2007‚Äì2012 Brian O&#8217;Connor. SeqWare is released under the a <a rel="license" href="http://www.gnu.org/licenses/licenses.html">GNU GPL v3</a>. This site is built using the excellent <a href="http://nanoc.stoneship.org/">nanoc</a> tool and examples with the <a href="http://www.fonts.info/info/press/free-fonts-for-font-face-embedding.htm">Graublau</a> and <a href="http://scripts.sil.org/Gentium">Gentium</a> fonts.</p>
</div>
</body>
</html>
;T;	I"<%= render 'articles' %>;T;
I"~
	<div class="section" id="an-important-note-about-nanoc-2-march-23rd-2010">
<h2>An Important Note About nanoc 2 <span class="date">(March 23rd, 2010)</span>
</h2>
<p class="warning"><strong>Important:</strong> This information is no longer accurate. As of nanoc 3.3, the nanoc executable is called <code>nanoc</code> and the namespace is <code>Nanoc</code>. <code>nanoc-switch</code> no longer exists. If you want to use different versions at the same time, consider using <a href="http://gembundler.com/">Bundler</a>.</p>

<p>nanoc 2 is, as of today, no longer maintained. Its successor, nanoc 3, was released more than seven months ago, and if you are still using nanoc 2 you should considering updating your sites to work with nanoc 3. The <s>migration guide</s> will be very useful for you when upgrading.</p>

<p>I‚Äôve also taken the time to resolve some issues with gem and executable names. From now on, installing nanoc 2 is done using <code>gem install nanoc2</code>. Invoking nanoc 2 is done using <code>nanoc2</code> now. Finally, the namespace (module) for nanoc 2 is now called <code>Nanoc2</code> instead of <code>Nanoc</code>.</p>

<p>The <code>nanoc</code> gem is now an alias for the <code>nanoc3</code> gem and the <code>nanoc</code> executable is can now be used instead of <code>nanoc3</code>. In other words, if the gem or executable name does not end with an explicit version, it is an alias for the most recent version.</p>

<p><strong>How does this change affect you?</strong> If you use nanoc 3, nothing changes. If you use nanoc 2, however, you‚Äôll need to <code>gem install nanoc2</code> and use the <code>nanoc2</code> executable instead of <code>nanoc</code>. In addition to that, any custom code that uses the <code>Nanoc</code> module will need to use the <code>Nanoc2</code> module instead.</p>

<p>Here‚Äôs a summary:</p>

<table>
<tr class="head">
<th></th>
		<th>nanoc 2.x</th>
		<th>nanoc 3.x</th>
		<th>latest (currently 3.x)</th>
	</tr>
<tr>
<th class="row">gem name</th>
		<td>nanoc2</td>
		<td>nanoc3</td>
		<td>nanoc</td>
	</tr>
<tr>
<th class="row">executable name</th>
		<td>nanoc2</td>
		<td>nanoc3</td>
		<td>nanoc</td>
	</tr>
<tr>
<th class="row">module name</th>
		<td>Nanoc2</td>
		<td>Nanoc3</td>
		<td>-</td>
	</tr>
</table>
<p>Now, go ahead and install the <code>nanoc</code> gem:</p>

<pre><span class="prompt">&gt;</span> <kbd>gem install nanoc</kbd></pre>

<p>‚Ä¶ and you‚Äôll once again be able to type just <code>nanoc</code> instead of <code>nanoc3</code> to manage and compile your web site. Ahh, much better.</p>

<p>You can use the <code>nanoc-select</code> executable to select a different version of nanoc that will be executed when <code>nanoc</code> is run. This is how it works:</p>

<pre>
‚ñ∏ <kbd>nanoc-select 2</kbd>
Switched to nanoc version 2.

‚ñ∏ <kbd>nanoc --version</kbd>
nanoc 2.2.3 (c) 2007-2010 Denis Defreyne.
Ruby 1.9.1 (2010-01-10) running on i386-darwin10.2.0

‚ñ∏ <kbd>nanoc-select 3</kbd>
Switched to nanoc version 3.

‚ñ∏ <kbd>nanoc --version</kbd>
nanoc 3.0.9 (c) 2007-2010 Denis Defreyne.
Ruby 1.9.1 (2010-01-10) running on i386-darwin10.2.0
</pre>

<p>If you have any questions about this change, of if you have problems getting it to work correctly, do let me know on the <a href="http://groups.google.com/group/nanoc/">mailinglist</a> or on the <a href="irc://chat.freenode.net/#nanoc%22">IRC channel</a>. Enjoy!</p>



	</div><div class="section" id="nanoc-3-0-9-released-february-25th-2010">
<h2>nanoc 3.0.9 released <span class="date">(February 25th, 2010)</span>
</h2>
<p>nanoc 3.0.9 is out. This tiny patch release fixes a bug in 3.0.8 that only occurs when using Ruby 1.8.x: some parentheses were lacking, and while the code parsed fine on 1.9.x, it did not on 1.8.x. See the <a href="/release-notes/">release notes</a> for details.</p>

<p>You can update nanoc3 the usual way, like this:</p>

<pre><kbd><span class="prompt">&gt;</span> sudo gem update nanoc3</kbd></pre>




<p>If you have any issues with this nanoc release, do let me know on the <a href="http://groups.google.com/group/nanoc/">mailinglist</a> or on the <a href="irc://chat.freenode.net/#nanoc">IRC channel</a>. Enjoy!</p>




	</div><div class="section" id="nanoc-3-0-8-released-february-24th-2010">
<h2>nanoc 3.0.8 released <span class="date">(February 24th, 2010)</span>
</h2>
<p>nanoc 3.0.8 is out. This patch release fixes a couple of issues with the Blogging helper, and makes the autocompiler serve up-to-date pages when requesting an index file. See the <a href="/release-notes/">release notes</a> for details.</p>

<p>You can update nanoc3 the usual way, like this:</p>

<pre><kbd><span class="prompt">&gt;</span> sudo gem update nanoc3</kbd></pre>




<p>If you have any issues with this nanoc release, do let me know on the <a href="http://groups.google.com/group/nanoc/">mailinglist</a> or on the <a href="irc://chat.freenode.net/#nanoc">IRC channel</a>. Enjoy!</p>




	</div><div class="section" id="nanoc-3-0-released-august-14th-2009">
<h2>nanoc 3.0 released <span class="date">(August 14th, 2009)</span>
</h2>
<p>nanoc 3.0 has landed. This release brings many improvements which will be revealed in just a bit, but first, here‚Äôs how to install it:</p>

<pre><span class="prompt">%</span> <kbd>gem install nanoc3</kbd></pre>


<p><strong>nanoc 3.0 is incompatible with previous versions of nanoc</strong> which means that you cannot use nanoc 3.0 with existing nanoc 2.x sites. Check out the <s>migrating from nanoc 2.2 to nanoc 3.0</s> guide for details on how to upgrade our existing sites.</p>

<p>Fortunately, nanoc 3.0 and 2.2 can coexist; the commandline tool for nanoc 3.0 is named <code>nanoc3</code> (not <code>nanoc</code>) and the namespace is <code>Nanoc3</code>, not <code>Nanoc</code>.  You can easily use nanoc 2.2 and nanoc 3.0 side by side.</p>

<p>So, on to what‚Äôs new in nanoc 3.0. There are too many changes to mention them all, but here‚Äôs a tiny list of useful new features that I like most:</p>

<ul>
<li><p><strong>Multiple data sources</strong> so you can load data from multiple locations‚Äîfor example, Twitter, Delicious and Last.fm.</p></li>
<li><p><strong>Filter arguments</strong> so you can pass extra arguments when executing a filter. For example, you can now pass Haml options when executing filters, like this: <code>filter :haml, :format =&gt; :html5</code>.</p></li>
<li><p><strong>A more compact filesystem-based data source</strong> called <code>filesystem_combined</code> that doesn‚Äôt require tons of directories in the <code>content</code> and <code>layout</code> directories. Cleaner and less verbose.</p></li>
<li><p>An all-new <strong>dependency tracking system</strong> that ensures that all modified items and their dependent items are recompiled when the site is compiled. This speeds up site compilation by preventing non-modified pages from being recompiled.</p></li>
<li><p><strong>A rules file</strong> which allows processing instructions (filtering pages, laying out pages) to be specified in a much more DRY way. In addition, the rules file is much more powerful than specifying processing instructions using item/layout attributes.</p></li>
</ul>
<p>For more information, check out the <s>migration guide</s>, as well as the updated <a href="/docs/3-getting-started/">tutorial</a> and <a href="/docs/4-basic-concepts/">manual</a>. There is also the <a href="/docs/api/3.1/">source code documentation for 3.0.0</a> in case you want to take a peek at the internals.</p>

<p>As you can see, a lot has changed in nanoc 3.0. If you experience any problems with this nanoc 3.0, let me know on the <a href="http://groups.google.com/group/nanoc/">nanoc mailinglist</a> or on the <a href="irc://chat.freenode.net/#nanoc">nanoc IRC channel</a>.</p>

<p>Enjoy!</p>
</div>;T;I"^
	<h2>An Important Note About nanoc 2 <span class="date">(March 23rd, 2010)</span></h2>
<p class="warning"><strong>Important:</strong> This information is no longer accurate. As of nanoc 3.3, the nanoc executable is called <code>nanoc</code> and the namespace is <code>Nanoc</code>. <code>nanoc-switch</code> no longer exists. If you want to use different versions at the same time, consider using <a href="http://gembundler.com/">Bundler</a>.</p>

<p>nanoc 2 is, as of today, no longer maintained. Its successor, nanoc 3, was released more than seven months ago, and if you are still using nanoc 2 you should considering updating your sites to work with nanoc 3. The <s>migration guide</s> will be very useful for you when upgrading.</p>

<p>I‚Äôve also taken the time to resolve some issues with gem and executable names. From now on, installing nanoc 2 is done using <code>gem install nanoc2</code>. Invoking nanoc 2 is done using <code>nanoc2</code> now. Finally, the namespace (module) for nanoc 2 is now called <code>Nanoc2</code> instead of <code>Nanoc</code>.</p>

<p>The <code>nanoc</code> gem is now an alias for the <code>nanoc3</code> gem and the <code>nanoc</code> executable is can now be used instead of <code>nanoc3</code>. In other words, if the gem or executable name does not end with an explicit version, it is an alias for the most recent version.</p>

<p><strong>How does this change affect you?</strong> If you use nanoc 3, nothing changes. If you use nanoc 2, however, you‚Äôll need to <code>gem install nanoc2</code> and use the <code>nanoc2</code> executable instead of <code>nanoc</code>. In addition to that, any custom code that uses the <code>Nanoc</code> module will need to use the <code>Nanoc2</code> module instead.</p>

<p>Here‚Äôs a summary:</p>

<table>
	<tr class="head">
		<th />
		<th>nanoc 2.x</th>
		<th>nanoc 3.x</th>
		<th>latest (currently 3.x)</th>
	</tr>
	<tr>
		<th class="row">gem name</th>
		<td>nanoc2</td>
		<td>nanoc3</td>
		<td>nanoc</td>
	</tr>
	<tr>
		<th class="row">executable name</th>
		<td>nanoc2</td>
		<td>nanoc3</td>
		<td>nanoc</td>
	</tr>
	<tr>
		<th class="row">module name</th>
		<td>Nanoc2</td>
		<td>Nanoc3</td>
		<td>-</td>
	</tr>
</table>

<p>Now, go ahead and install the <code>nanoc</code> gem:</p>

<pre><span class="prompt">&gt;</span> <kbd>gem install nanoc</kbd></pre>

<p>‚Ä¶ and you‚Äôll once again be able to type just <code>nanoc</code> instead of <code>nanoc3</code> to manage and compile your web site. Ahh, much better.</p>

<p>You can use the <code>nanoc-select</code> executable to select a different version of nanoc that will be executed when <code>nanoc</code> is run. This is how it works:</p>

<pre>
‚ñ∏ <kbd>nanoc-select 2</kbd>
Switched to nanoc version 2.

‚ñ∏ <kbd>nanoc --version</kbd>
nanoc 2.2.3 (c) 2007-2010 Denis Defreyne.
Ruby 1.9.1 (2010-01-10) running on i386-darwin10.2.0

‚ñ∏ <kbd>nanoc-select 3</kbd>
Switched to nanoc version 3.

‚ñ∏ <kbd>nanoc --version</kbd>
nanoc 3.0.9 (c) 2007-2010 Denis Defreyne.
Ruby 1.9.1 (2010-01-10) running on i386-darwin10.2.0
</pre>

<p>If you have any questions about this change, of if you have problems getting it to work correctly, do let me know on the <a href="http://groups.google.com/group/nanoc/">mailinglist</a> or on the <a href="irc://chat.freenode.net/#nanoc&quot;">IRC channel</a>. Enjoy!</p>



	<h2>nanoc 3.0.9 released <span class="date">(February 25th, 2010)</span></h2>
<p>nanoc 3.0.9 is out. This tiny patch release fixes a bug in 3.0.8 that only occurs when using Ruby 1.8.x: some parentheses were lacking, and while the code parsed fine on 1.9.x, it did not on 1.8.x. See the <a href="/release-notes/">release notes</a> for details.</p>

<p>You can update nanoc3 the usual way, like this:</p>

<pre><kbd><span class="prompt">></span> sudo gem update nanoc3</kbd></pre>




<p>If you have any issues with this nanoc release, do let me know on the <a href="http://groups.google.com/group/nanoc/">mailinglist</a> or on the <a href="irc://chat.freenode.net/#nanoc">IRC channel</a>. Enjoy!</p>




	<h2>nanoc 3.0.8 released <span class="date">(February 24th, 2010)</span></h2>
<p>nanoc 3.0.8 is out. This patch release fixes a couple of issues with the Blogging helper, and makes the autocompiler serve up-to-date pages when requesting an index file. See the <a href="/release-notes/">release notes</a> for details.</p>

<p>You can update nanoc3 the usual way, like this:</p>

<pre><kbd><span class="prompt">></span> sudo gem update nanoc3</kbd></pre>




<p>If you have any issues with this nanoc release, do let me know on the <a href="http://groups.google.com/group/nanoc/">mailinglist</a> or on the <a href="irc://chat.freenode.net/#nanoc">IRC channel</a>. Enjoy!</p>




	<h2>nanoc 3.0 released <span class="date">(August 14th, 2009)</span></h2>
<p>nanoc 3.0 has landed. This release brings many improvements which will be revealed in just a bit, but first, here‚Äôs how to install it:</p>

<pre><span class="prompt">%</span> <kbd>gem install nanoc3</kbd></pre>


<p><strong>nanoc 3.0 is incompatible with previous versions of nanoc</strong> which means that you cannot use nanoc 3.0 with existing nanoc 2.x sites. Check out the <s>migrating from nanoc 2.2 to nanoc 3.0</s> guide for details on how to upgrade our existing sites.</p>

<p>Fortunately, nanoc 3.0 and 2.2 can coexist; the commandline tool for nanoc 3.0 is named <code>nanoc3</code> (not <code>nanoc</code>) and the namespace is <code>Nanoc3</code>, not <code>Nanoc</code>.  You can easily use nanoc 2.2 and nanoc 3.0 side by side.</p>

<p>So, on to what‚Äôs new in nanoc 3.0. There are too many changes to mention them all, but here‚Äôs a tiny list of useful new features that I like most:</p>

<ul>
<li><p><strong>Multiple data sources</strong> so you can load data from multiple locations‚Äîfor example, Twitter, Delicious and Last.fm.</p></li>
<li><p><strong>Filter arguments</strong> so you can pass extra arguments when executing a filter. For example, you can now pass Haml options when executing filters, like this: <code>filter :haml, :format =&gt; :html5</code>.</p></li>
<li><p><strong>A more compact filesystem-based data source</strong> called <code>filesystem_combined</code> that doesn‚Äôt require tons of directories in the <code>content</code> and <code>layout</code> directories. Cleaner and less verbose.</p></li>
<li><p>An all-new <strong>dependency tracking system</strong> that ensures that all modified items and their dependent items are recompiled when the site is compiled. This speeds up site compilation by preventing non-modified pages from being recompiled.</p></li>
<li><p><strong>A rules file</strong> which allows processing instructions (filtering pages, laying out pages) to be specified in a much more DRY way. In addition, the rules file is much more powerful than specifying processing instructions using item/layout attributes.</p></li>
</ul>


<p>For more information, check out the <s>migration guide</s>, as well as the updated <a href="/docs/3-getting-started/">tutorial</a> and <a href="/docs/4-basic-concepts/">manual</a>. There is also the <a href="/docs/api/3.1/">source code documentation for 3.0.0</a> in case you want to take a peek at the internals.</p>

<p>As you can see, a lot has changed in nanoc 3.0. If you experience any problems with this nanoc 3.0, let me know on the <a href="http://groups.google.com/group/nanoc/">nanoc mailinglist</a> or on the <a href="irc://chat.freenode.net/#nanoc">nanoc IRC channel</a>.</p>

<p>Enjoy!</p>



;T;@ƒ"/blog/22/2009-04-06/{;{
;I"p<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<title>nanoc ‚Ä∫ nanoc 2.2 released</title>
<meta content="nanoc 3.4.0" name="generator">
<link href="/assets/style-v17.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://feeds.feedburner.com/nanoc" rel="alternate" title="The nanoc Blog" type="application/atom+xml">
<script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-15639968-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script>
</head>
<body>
<div class="wrapper">
<!-- ***** navigation ***** -->
<div class="nav">
<ol>
<li><a href="/"><span>Home</span></a></li>
<li><a href="/blog/"><span>News</span></a></li>
<li><a href="/docs/"><span>Documentation</span></a></li>
<li><a href="/community/"><span>Community</span></a></li>
</ol>
</div>
<!-- ***** sidebar ***** -->
<div class="side">
<ol>
<li><a href="/blog/13/"><span>Articles about v3.4</span></a></li>
<li><a href="/blog/12/"><span>Articles about v0.12.x</span></a></li>
</ol>
</div>
<!-- ***** body ***** -->
<div class="body">
<div class="article">
<div class="header">
<h1>nanoc 2.2 released</h1>
</div>
<p>nanoc 2.2 has arrived. This release contains a handful of new features. nanoc 2.2 is not quite as big as 2.1 was, and it is mostly backward compatible.</p>

<p>nanoc <strong>commands now inherit from <code>Cri::Command</code> instead of <code>Nanoc::CLI::Command</code></strong>. Cri (Commandline Ruby Interface or something) is a library for building commandline applications that was derived from nanoc‚Äôs commandline interface. If you have custom commands defined in your site, you will need to update them to inherit from <code>Cri::Command</code> instead.</p>

<p>The <kbd>compile</kbd> command now takes <strong><kbd>--pages</kbd> and <kbd>--assets</kbd> commandline switches</strong> which tell the compiler to only compile pages or assets (very useful if you have a lot of assets and only want to recompile some pages).</p>

<p>Windows users may find the <strong>new <kbd>--no-color</kbd> commandline switch</strong> useful. This switch disables ANSI color codes, which should make nanoc‚Äôs terminal output a lot nicer to read.</p>

<p>The compiler now <strong>compiles <em>all</em> pages and assets by default</strong>‚Äînot just outdated ones. In other words, the <kbd>--all</kbd> switch is on by default. To compile only outdated pages, use <kbd>--only-outdated</kbd>. nanoc‚Äôs algorithm for finding out which pages/assets are outdated simply isn‚Äôt smart enough (yet).</p>

<p><strong>Stack traces are a lot more informative now</strong>. When an exception occurs, the stack trace will show the exact page/asset/layout and line number where the error happened.</p>

<p>When laying out a page, the current layout is accessible through the <strong>new <code>@layout</code> variable</strong>.</p>

<p>The Blogging helper‚Äôs <code>atom_feed</code> method now takes <strong>new <code>:content_proc</code>, <code>:excerpt_proc</code> and <code>:articles</code> parameters</strong>. This allows atom feeds to be constructed with a custom set of articles, or atom feeds where the excerpt is automatically generated based on the content, etc. See the <a href="http://nanoc.stoneship.org/docs/api/3.1/Nanoc3/Helpers/Blogging.html">Blogging helper documentation</a> for more information.</p>

<p>There is a <strong>new Rainpress filter</strong>, which compresses CSS using the <a href="http://code.google.com/p/rainpress/">Rainpress</a> library.</p>

<p>The LinkTo helper has a <strong>new <code>relative_path_to</code> function</strong>, which generates a relative path to the given page/asset or path. This may not be very useful by itself, but the <strong>new RelativizePaths filter</strong>, which makes all paths in all HTML and CSS files relative, should be quite useful for those who want to deploy their site in subdirectory instead of at the root of a web site.</p>

<p>Last, but not least, the <strong>new Filtering helper</strong> allows parts of a page to be filtered. Check out the <a href="http://nanoc.stoneship.org/docs/api/3.1/Nanoc3/Helpers/Filtering.html">Filtering helper documentation</a> for details. Here‚Äôs an example of how it could be used:</p>

<pre><code class="language-html"><span class="error">&lt;</span>% filter :rubypants do %<span class="error">&gt;</span>
  Here‚Äôs some text‚Ä¶
<span class="error">&lt;</span>% end %<span class="error">&gt;</span></code></pre>

<p>You can, as always, update your copy of nanoc by issuing the &#8220;gem update&#8221; command, like this:</p>

<pre><span class="prompt">%</span> <kbd>gem update nanoc</kbd></pre>

<p>If you have any issues with this nanoc release, do let me know on the <a href="http://groups.google.com/group/nanoc/">mailinglist</a> or on the <a href="irc://chat.freenode.net/#nanoc">IRC channel</a>. Enjoy!</p>
</div>
</div>
</div>
<!-- ***** footer ***** -->
<div id="footer">
<p>SeqWare ¬© 2007‚Äì2012 Brian O&#8217;Connor. SeqWare is released under the a <a rel="license" href="http://www.gnu.org/licenses/licenses.html">GNU GPL v3</a>. This site is built using the excellent <a href="http://nanoc.stoneship.org/">nanoc</a> tool and examples with the <a href="http://www.fonts.info/info/press/free-fonts-for-font-face-embedding.htm">Graublau</a> and <a href="http://scripts.sil.org/Gentium">Gentium</a> fonts.</p>
</div>
</body>
</html>
;T;	I"<p>nanoc 2.2 has arrived. This release contains a handful of new features. nanoc 2.2 is not quite as big as 2.1 was, and it is mostly backward compatible.</p>

<p>nanoc <strong>commands now inherit from <code>Cri::Command</code> instead of <code>Nanoc::CLI::Command</code></strong>. Cri (Commandline Ruby Interface or something) is a library for building commandline applications that was derived from nanoc‚Äôs commandline interface. If you have custom commands defined in your site, you will need to update them to inherit from <code>Cri::Command</code> instead.</p>

<p>The <kbd>compile</kbd> command now takes <strong><kbd>--pages</kbd> and <kbd>--assets</kbd> commandline switches</strong> which tell the compiler to only compile pages or assets (very useful if you have a lot of assets and only want to recompile some pages).</p>

<p>Windows users may find the <strong>new <kbd>--no-color</kbd> commandline switch</strong> useful. This switch disables ANSI color codes, which should make nanoc‚Äôs terminal output a lot nicer to read.</p>

<p>The compiler now <strong>compiles <em>all</em> pages and assets by default</strong>&mdash;not just outdated ones. In other words, the <kbd>--all</kbd> switch is on by default. To compile only outdated pages, use <kbd>--only-outdated</kbd>. nanoc‚Äôs algorithm for finding out which pages/assets are outdated simply isn‚Äôt smart enough (yet).</p>

<p><strong>Stack traces are a lot more informative now</strong>. When an exception occurs, the stack trace will show the exact page/asset/layout and line number where the error happened.</p>

<p>When laying out a page, the current layout is accessible through the <strong>new <code>@layout</code> variable</strong>.</p>

<p>The Blogging helper‚Äôs <code>atom_feed</code> method now takes <strong>new <code>:content_proc</code>, <code>:excerpt_proc</code> and <code>:articles</code> parameters</strong>. This allows atom feeds to be constructed with a custom set of articles, or atom feeds where the excerpt is automatically generated based on the content, etc. See the <a href="http://nanoc.stoneship.org/docs/api/3.1/Nanoc3/Helpers/Blogging.html">Blogging helper documentation</a> for more information.</p>

<p>There is a <strong>new Rainpress filter</strong>, which compresses CSS using the <a href="http://code.google.com/p/rainpress/">Rainpress</a> library.</p>

<p>The LinkTo helper has a <strong>new <code>relative_path_to</code> function</strong>, which generates a relative path to the given page/asset or path. This may not be very useful by itself, but the <strong>new RelativizePaths filter</strong>, which makes all paths in all HTML and CSS files relative, should be quite useful for those who want to deploy their site in subdirectory instead of at the root of a web site.</p>

<p>Last, but not least, the <strong>new Filtering helper</strong> allows parts of a page to be filtered. Check out the <a href="http://nanoc.stoneship.org/docs/api/3.1/Nanoc3/Helpers/Filtering.html">Filtering helper documentation</a> for details. Here‚Äôs an example of how it could be used:</p>

<pre><code class="language-html">&lt;% filter :rubypants do %>
  Here‚Äôs some text‚Ä¶
&lt;% end %></code></pre>

<p>You can, as always, update your copy of nanoc by issuing the "gem update" command, like this:</p>

<pre><span class="prompt">%</span> <kbd>gem update nanoc</kbd></pre>

<p>If you have any issues with this nanoc release, do let me know on the <a href="http://groups.google.com/group/nanoc/">mailinglist</a> or on the <a href="irc://chat.freenode.net/#nanoc">IRC channel</a>. Enjoy!</p>
;T;
I"<p>nanoc 2.2 has arrived. This release contains a handful of new features. nanoc 2.2 is not quite as big as 2.1 was, and it is mostly backward compatible.</p>

<p>nanoc <strong>commands now inherit from <code>Cri::Command</code> instead of <code>Nanoc::CLI::Command</code></strong>. Cri (Commandline Ruby Interface or something) is a library for building commandline applications that was derived from nanoc‚Äôs commandline interface. If you have custom commands defined in your site, you will need to update them to inherit from <code>Cri::Command</code> instead.</p>

<p>The <kbd>compile</kbd> command now takes <strong><kbd>--pages</kbd> and <kbd>--assets</kbd> commandline switches</strong> which tell the compiler to only compile pages or assets (very useful if you have a lot of assets and only want to recompile some pages).</p>

<p>Windows users may find the <strong>new <kbd>--no-color</kbd> commandline switch</strong> useful. This switch disables ANSI color codes, which should make nanoc‚Äôs terminal output a lot nicer to read.</p>

<p>The compiler now <strong>compiles <em>all</em> pages and assets by default</strong>‚Äînot just outdated ones. In other words, the <kbd>--all</kbd> switch is on by default. To compile only outdated pages, use <kbd>--only-outdated</kbd>. nanoc‚Äôs algorithm for finding out which pages/assets are outdated simply isn‚Äôt smart enough (yet).</p>

<p><strong>Stack traces are a lot more informative now</strong>. When an exception occurs, the stack trace will show the exact page/asset/layout and line number where the error happened.</p>

<p>When laying out a page, the current layout is accessible through the <strong>new <code>@layout</code> variable</strong>.</p>

<p>The Blogging helper‚Äôs <code>atom_feed</code> method now takes <strong>new <code>:content_proc</code>, <code>:excerpt_proc</code> and <code>:articles</code> parameters</strong>. This allows atom feeds to be constructed with a custom set of articles, or atom feeds where the excerpt is automatically generated based on the content, etc. See the <a href="http://nanoc.stoneship.org/docs/api/3.1/Nanoc3/Helpers/Blogging.html">Blogging helper documentation</a> for more information.</p>

<p>There is a <strong>new Rainpress filter</strong>, which compresses CSS using the <a href="http://code.google.com/p/rainpress/">Rainpress</a> library.</p>

<p>The LinkTo helper has a <strong>new <code>relative_path_to</code> function</strong>, which generates a relative path to the given page/asset or path. This may not be very useful by itself, but the <strong>new RelativizePaths filter</strong>, which makes all paths in all HTML and CSS files relative, should be quite useful for those who want to deploy their site in subdirectory instead of at the root of a web site.</p>

<p>Last, but not least, the <strong>new Filtering helper</strong> allows parts of a page to be filtered. Check out the <a href="http://nanoc.stoneship.org/docs/api/3.1/Nanoc3/Helpers/Filtering.html">Filtering helper documentation</a> for details. Here‚Äôs an example of how it could be used:</p>

<pre><code class="language-html">&lt;% filter :rubypants do %&gt;
  Here‚Äôs some text‚Ä¶
&lt;% end %&gt;</code></pre>

<p>You can, as always, update your copy of nanoc by issuing the "gem update" command, like this:</p>

<pre><span class="prompt">%</span> <kbd>gem update nanoc</kbd></pre>

<p>If you have any issues with this nanoc release, do let me know on the <a href="http://groups.google.com/group/nanoc/">mailinglist</a> or on the <a href="irc://chat.freenode.net/#nanoc">IRC channel</a>. Enjoy!</p>;T;I"<p>nanoc 2.2 has arrived. This release contains a handful of new features. nanoc 2.2 is not quite as big as 2.1 was, and it is mostly backward compatible.</p>

<p>nanoc <strong>commands now inherit from <code>Cri::Command</code> instead of <code>Nanoc::CLI::Command</code></strong>. Cri (Commandline Ruby Interface or something) is a library for building commandline applications that was derived from nanoc‚Äôs commandline interface. If you have custom commands defined in your site, you will need to update them to inherit from <code>Cri::Command</code> instead.</p>

<p>The <kbd>compile</kbd> command now takes <strong><kbd>--pages</kbd> and <kbd>--assets</kbd> commandline switches</strong> which tell the compiler to only compile pages or assets (very useful if you have a lot of assets and only want to recompile some pages).</p>

<p>Windows users may find the <strong>new <kbd>--no-color</kbd> commandline switch</strong> useful. This switch disables ANSI color codes, which should make nanoc‚Äôs terminal output a lot nicer to read.</p>

<p>The compiler now <strong>compiles <em>all</em> pages and assets by default</strong>&mdash;not just outdated ones. In other words, the <kbd>--all</kbd> switch is on by default. To compile only outdated pages, use <kbd>--only-outdated</kbd>. nanoc‚Äôs algorithm for finding out which pages/assets are outdated simply isn‚Äôt smart enough (yet).</p>

<p><strong>Stack traces are a lot more informative now</strong>. When an exception occurs, the stack trace will show the exact page/asset/layout and line number where the error happened.</p>

<p>When laying out a page, the current layout is accessible through the <strong>new <code>@layout</code> variable</strong>.</p>

<p>The Blogging helper‚Äôs <code>atom_feed</code> method now takes <strong>new <code>:content_proc</code>, <code>:excerpt_proc</code> and <code>:articles</code> parameters</strong>. This allows atom feeds to be constructed with a custom set of articles, or atom feeds where the excerpt is automatically generated based on the content, etc. See the <a href="http://nanoc.stoneship.org/docs/api/3.1/Nanoc3/Helpers/Blogging.html">Blogging helper documentation</a> for more information.</p>

<p>There is a <strong>new Rainpress filter</strong>, which compresses CSS using the <a href="http://code.google.com/p/rainpress/">Rainpress</a> library.</p>

<p>The LinkTo helper has a <strong>new <code>relative_path_to</code> function</strong>, which generates a relative path to the given page/asset or path. This may not be very useful by itself, but the <strong>new RelativizePaths filter</strong>, which makes all paths in all HTML and CSS files relative, should be quite useful for those who want to deploy their site in subdirectory instead of at the root of a web site.</p>

<p>Last, but not least, the <strong>new Filtering helper</strong> allows parts of a page to be filtered. Check out the <a href="http://nanoc.stoneship.org/docs/api/3.1/Nanoc3/Helpers/Filtering.html">Filtering helper documentation</a> for details. Here‚Äôs an example of how it could be used:</p>

<pre><code class="language-html">&lt;% filter :rubypants do %>
  Here‚Äôs some text‚Ä¶
&lt;% end %></code></pre>

<p>You can, as always, update your copy of nanoc by issuing the "gem update" command, like this:</p>

<pre><span class="prompt">%</span> <kbd>gem update nanoc</kbd></pre>

<p>If you have any issues with this nanoc release, do let me know on the <a href="http://groups.google.com/group/nanoc/">mailinglist</a> or on the <a href="irc://chat.freenode.net/#nanoc">IRC channel</a>. Enjoy!</p>
;T;@À"/blog/31/2010-04-04/{;{
;I"'<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<title>nanoc ‚Ä∫ nanoc 3.1 released</title>
<meta content="nanoc 3.4.0" name="generator">
<link href="/assets/style-v17.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://feeds.feedburner.com/nanoc" rel="alternate" title="The nanoc Blog" type="application/atom+xml">
<script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-15639968-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script>
</head>
<body>
<div class="wrapper">
<!-- ***** navigation ***** -->
<div class="nav">
<ol>
<li><a href="/"><span>Home</span></a></li>
<li><a href="/blog/"><span>News</span></a></li>
<li><a href="/docs/"><span>Documentation</span></a></li>
<li><a href="/community/"><span>Community</span></a></li>
</ol>
</div>
<!-- ***** sidebar ***** -->
<div class="side">
<ol>
<li><a href="/blog/13/"><span>Articles about v3.4</span></a></li>
<li><a href="/blog/12/"><span>Articles about v0.12.x</span></a></li>
</ol>
</div>
<!-- ***** body ***** -->
<div class="body">
<div class="article">
<div class="header">
<h1>nanoc 3.1 released</h1>
</div>
<p>nanoc 3.1 is out now. This release introduces quite a few useful features, including API improvements and support for binary assets. Check the <a href="/release-notes/">full release notes</a> for details. Here‚Äôs how to install nanoc 3.1:</p>

<pre><span class="prompt">%</span> <kbd>gem install nanoc</kbd></pre>


<p>nanoc 3.1 is backwards compatible with nanoc 3.0.x. All sites built with nanoc 3.0.x should compile without issues on nanoc 3.1.</p>

<p>The biggest new feature is support for binary assets. Files such as images, audio files and movies can now easily be managed by nanoc. They behave just like textual items; you can drop them in the content/ directory and they can have metadata as well. Filtering binary items is easy as well; here‚Äôs an example of a <code>:rotate</code> filter that uses the <code>sips</code> command, built into Mac OS X, for rotating images:</p>

<pre><code class="language-ruby"><span class="keyword">class</span> <span class="class">RotateFilter</span> &lt; <span class="constant">Nanoc3</span>::<span class="constant">Filter</span>

  identifier <span class="symbol">:rotate</span>
  type       <span class="symbol">:binary</span>

  <span class="keyword">def</span> <span class="function">run</span>(filename, params={})
    system(
      <span class="string"><span class="delimiter">'</span><span class="content">sips</span><span class="delimiter">'</span></span>,
      <span class="string"><span class="delimiter">'</span><span class="content">--rotate</span><span class="delimiter">'</span></span>, params[<span class="symbol">:angle</span>].to_s,
      <span class="string"><span class="delimiter">'</span><span class="content">--out</span><span class="delimiter">'</span></span>,    output_filename,
      filename
    )
  <span class="keyword">end</span>

<span class="keyword">end</span></code></pre>


<p>This filter can now be invoked like any other filter. For example, suppose you have a <code>content/images/tree.jpg</code> image, you can write the following rules for creating a rotated version:</p>

<pre><code class="language-ruby">compile <span class="string"><span class="delimiter">'</span><span class="content">/images/tree/</span><span class="delimiter">'</span></span> <span class="keyword">do</span>
  filter <span class="symbol">:rotate</span>, <span class="symbol">:angle</span> =&gt; <span class="float">5.0</span>
<span class="keyword">end</span>

route <span class="string"><span class="delimiter">'</span><span class="content">/images/tree/</span><span class="delimiter">'</span></span> <span class="keyword">do</span>
  <span class="string"><span class="delimiter">'</span><span class="content">/assets/images/tree-rotated.jpg</span><span class="delimiter">'</span></span>
<span class="keyword">end</span></code></pre>


<p>Filters can also convert textual content to binary content and vice versa. For example, here‚Äôs a text-to-speech filter that uses Mac OS X‚Äôs <code>say</code> command:</p>

<pre><code class="language-ruby"><span class="keyword">class</span> <span class="class">SynthesiseAudio</span> &lt; <span class="constant">Nanoc3</span>::<span class="constant">Filter</span>

  identifier <span class="symbol">:synthesise_audio</span>
  type       <span class="symbol">:text</span> =&gt; <span class="symbol">:binary</span>

  <span class="keyword">def</span> <span class="function">run</span>(content, params={})
    system(<span class="string"><span class="delimiter">'</span><span class="content">say</span><span class="delimiter">'</span></span>, content, <span class="string"><span class="delimiter">'</span><span class="content">-o</span><span class="delimiter">'</span></span>, output_filename)
  <span class="keyword">end</span>

<span class="keyword">end</span></code></pre>


<p>Check out the <a href="/docs/5-advanced-concepts/#writing-filters">writing filters</a> section of the manual for details.</p>

<p>Binary items behave like textual items, with the exception that you cannot request their compiled content. Binary assets can have metadata too, just like normal items. This can be quite useful in some cases. For example, if you have a screenshot with the following metadata:</p>

<pre><code class="language-yaml"><span class="key">alt</span>: <span class="string"><span class="delimiter">"</span><span class="content">A screenshot of my desktop.</span><span class="delimiter">"</span></span></code></pre>


<p>‚Ä¶ then you can output the path to that screenshot as well as its ‚Äúalt‚Äù attribute like this (assuming that the <code>screenshot</code> object points to that very screenshot item):</p>

<pre><code class="language-html"><span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">"</span><span class="content">&lt;%= screenshot.path %</span></span><span class="error">&gt;</span>" alt="<span class="error">&lt;</span>%= screenshot[:alt] %<span class="error">&gt;</span>"<span class="error">&gt;</span></code></pre>


<p>‚Ä¶ and you‚Äôll get this output:</p>

<pre><code class="language-html"><span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">"</span><span class="content">/assets/images/screenshot.png</span><span class="delimiter">"</span></span> <span class="attribute-name">alt</span>=<span class="string"><span class="delimiter">"</span><span class="content">A screenshot of my desktop.</span><span class="delimiter">"</span></span><span class="tag">&gt;</span></code></pre>


<p>The site configuration has a <code>text_extensions</code> array containing a list of extensions; when the site is loaded, files with an extension in that list will be considered as being textual instead of binary. If you use textual items with custom extensions, be sure to add their extension to the <code>text_extensions</code> list. The default list is defined like this:</p>

<pre><code class="language-yaml"><span class="key">text_extensions</span>: <span class="string"><span class="content">[ 'css', 'erb', 'haml', 'htm', 'html', 'js', 'less', 'markdown', 'md', 'php', 'rb', 'sass', 'txt' ]</span></span></code></pre>


<p>Accessing compiled content and paths of compiled items is easier in 3.1. To get the compiled content of an item, use <code>item.compiled_content</code>; this will get the compiled content at the <code>:pre</code> snapshot of the default representation. You can customize this behaviour with parameters; for example, to get the content at the <code>:clean</code> snapshot of the <code>:xml</code> representation, use <code>item.compiled_content(:rep =&gt; :xml, :snapshot =&gt; :clean)</code>. Getting paths is easier too: <code>item.path</code>‚Äîand this method takes parameters to, so you can say <code>item.path(:rep =&gt; :xml)</code> to get the path of the <code>:xml</code> representation.</p>

<p>The old way:</p>

<pre><code class="language-ruby">item.reps.find { |r| r.name == <span class="symbol">:default</span> }.path
item.reps.find { |r| r.name == <span class="symbol">:default</span> }.content_at_snapshot(<span class="symbol">:pre</span>)
item.reps.find { |r| r.name == <span class="symbol">:pretty</span> }.content_at_snapshot(<span class="symbol">:pre</span>)
item.reps.find { |r| r.name == <span class="symbol">:default</span> }.content_at_snapshot(<span class="symbol">:clean</span>)</code></pre>


<p>The new way:</p>

<pre><code class="language-ruby">item.path
item.compiled_content
item.compiled_content(<span class="symbol">:rep</span> =&gt; <span class="symbol">:pretty</span>)
item.compiled_content(<span class="symbol">:snapshot</span> =&gt; <span class="symbol">:clean</span>)</code></pre>


<p>So, install nanoc 3.1 and give it a try. If you have questions or are experiencing issues, let me know on the <a href="http://groups.google.com/group/nanoc/">nanoc mailinglist</a> or on the <a href="irc://chat.freenode.net/#nanoc">nanoc IRC channel</a>. Enjoy!</p>
</div>
</div>
</div>
<!-- ***** footer ***** -->
<div id="footer">
<p>SeqWare ¬© 2007‚Äì2012 Brian O&#8217;Connor. SeqWare is released under the a <a rel="license" href="http://www.gnu.org/licenses/licenses.html">GNU GPL v3</a>. This site is built using the excellent <a href="http://nanoc.stoneship.org/">nanoc</a> tool and examples with the <a href="http://www.fonts.info/info/press/free-fonts-for-font-face-embedding.htm">Graublau</a> and <a href="http://scripts.sil.org/Gentium">Gentium</a> fonts.</p>
</div>
</body>
</html>
;T;	I"Nnanoc 3.1 is out now. This release introduces quite a few useful features, including API improvements and support for binary assets. Check the [full release notes](/release-notes/) for details. Here‚Äôs how to install nanoc 3.1:

<pre><span class="prompt">%</span> <kbd>gem install nanoc</kbd></pre>

nanoc 3.1 is backwards compatible with nanoc 3.0.x. All sites built with nanoc 3.0.x should compile without issues on nanoc 3.1.

The biggest new feature is support for binary assets. Files such as images, audio files and movies can now easily be managed by nanoc. They behave just like textual items; you can drop them in the content/ directory and they can have metadata as well. Filtering binary items is easy as well; here‚Äôs an example of a `:rotate` filter that uses the `sips` command, built into Mac OS X, for rotating images:

<pre><code class="language-ruby">
class RotateFilter &lt; Nanoc3::Filter

  identifier :rotate
  type       :binary

  def run(filename, params={})
    system(
      'sips',
      '--rotate', params[:angle].to_s,
      '--out',    output_filename,
      filename
    )
  end

end
</code></pre>

This filter can now be invoked like any other filter. For example, suppose you have a `content/images/tree.jpg` image, you can write the following rules for creating a rotated version:

<pre><code class="language-ruby">
compile '/images/tree/' do
  filter :rotate, :angle => 5.0
end

route '/images/tree/' do
  '/assets/images/tree-rotated.jpg'
end
</code></pre>

Filters can also convert textual content to binary content and vice versa. For example, here‚Äôs a text-to-speech filter that uses Mac OS X‚Äôs `say` command:

<pre><code class="language-ruby">
class SynthesiseAudio &lt; Nanoc3::Filter

  identifier :synthesise_audio
  type       :text => :binary

  def run(content, params={})
    system('say', content, '-o', output_filename)
  end

end
</code></pre>

Check out the [writing filters](/docs/5-advanced-concepts/#writing-filters) section of the manual for details.

Binary items behave like textual items, with the exception that you cannot request their compiled content. Binary assets can have metadata too, just like normal items. This can be quite useful in some cases. For example, if you have a screenshot with the following metadata:

<pre><code class="language-yaml">
alt: "A screenshot of my desktop."
</code></pre>

‚Ä¶ then you can output the path to that screenshot as well as its ‚Äúalt‚Äù attribute like this (assuming that the `screenshot` object points to that very screenshot item):

<pre><code class="language-html">
&lt;img src="&lt;%= screenshot.path %>" alt="&lt;%= screenshot[:alt] %>">
</code></pre>

‚Ä¶ and you‚Äôll get this output:

<pre><code class="language-html">
&lt;img src="/assets/images/screenshot.png" alt="A screenshot of my desktop.">
</code></pre>

The site configuration has a `text_extensions` array containing a list of extensions; when the site is loaded, files with an extension in that list will be considered as being textual instead of binary. If you use textual items with custom extensions, be sure to add their extension to the `text_extensions` list. The default list is defined like this:

<pre><code class="language-yaml">
text_extensions: [ 'css', 'erb', 'haml', 'htm', 'html', 'js', 'less', 'markdown', 'md', 'php', 'rb', 'sass', 'txt' ]
</code></pre>

Accessing compiled content and paths of compiled items is easier in 3.1. To get the compiled content of an item, use `item.compiled_content`; this will get the compiled content at the `:pre` snapshot of the default representation. You can customize this behaviour with parameters; for example, to get the content at the `:clean` snapshot of the `:xml` representation, use `item.compiled_content(:rep => :xml, :snapshot => :clean)`. Getting paths is easier too: `item.path`‚Äîand this method takes parameters to, so you can say `item.path(:rep => :xml)` to get the path of the `:xml` representation.

The old way:

<pre><code class="language-ruby">
item.reps.find { |r| r.name == :default }.path
item.reps.find { |r| r.name == :default }.content_at_snapshot(:pre)
item.reps.find { |r| r.name == :pretty }.content_at_snapshot(:pre)
item.reps.find { |r| r.name == :default }.content_at_snapshot(:clean)
</code></pre>

The new way:

<pre><code class="language-ruby">
item.path
item.compiled_content
item.compiled_content(:rep => :pretty)
item.compiled_content(:snapshot => :clean)
</code></pre>

So, install nanoc 3.1 and give it a try. If you have questions or are experiencing issues, let me know on the [nanoc mailinglist](http://groups.google.com/group/nanoc/) or on the [nanoc IRC channel](irc://chat.freenode.net/#nanoc). Enjoy!
;T;
I"¢<p>nanoc 3.1 is out now. This release introduces quite a few useful features, including API improvements and support for binary assets. Check the <a href="/release-notes/">full release notes</a> for details. Here‚Äôs how to install nanoc 3.1:</p>

<pre><span class="prompt">%</span> <kbd>gem install nanoc</kbd></pre>


<p>nanoc 3.1 is backwards compatible with nanoc 3.0.x. All sites built with nanoc 3.0.x should compile without issues on nanoc 3.1.</p>

<p>The biggest new feature is support for binary assets. Files such as images, audio files and movies can now easily be managed by nanoc. They behave just like textual items; you can drop them in the content/ directory and they can have metadata as well. Filtering binary items is easy as well; here‚Äôs an example of a <code>:rotate</code> filter that uses the <code>sips</code> command, built into Mac OS X, for rotating images:</p>

<pre><code class="language-ruby">class RotateFilter &lt; Nanoc3::Filter

  identifier :rotate
  type       :binary

  def run(filename, params={})
    system(
      'sips',
      '--rotate', params[:angle].to_s,
      '--out',    output_filename,
      filename
    )
  end

end
</code></pre>


<p>This filter can now be invoked like any other filter. For example, suppose you have a <code>content/images/tree.jpg</code> image, you can write the following rules for creating a rotated version:</p>

<pre><code class="language-ruby">compile '/images/tree/' do
  filter :rotate, :angle =&gt; 5.0
end

route '/images/tree/' do
  '/assets/images/tree-rotated.jpg'
end
</code></pre>


<p>Filters can also convert textual content to binary content and vice versa. For example, here‚Äôs a text-to-speech filter that uses Mac OS X‚Äôs <code>say</code> command:</p>

<pre><code class="language-ruby">class SynthesiseAudio &lt; Nanoc3::Filter

  identifier :synthesise_audio
  type       :text =&gt; :binary

  def run(content, params={})
    system('say', content, '-o', output_filename)
  end

end
</code></pre>


<p>Check out the <a href="/docs/5-advanced-concepts/#writing-filters">writing filters</a> section of the manual for details.</p>

<p>Binary items behave like textual items, with the exception that you cannot request their compiled content. Binary assets can have metadata too, just like normal items. This can be quite useful in some cases. For example, if you have a screenshot with the following metadata:</p>

<pre><code class="language-yaml">alt: "A screenshot of my desktop."
</code></pre>


<p>‚Ä¶ then you can output the path to that screenshot as well as its ‚Äúalt‚Äù attribute like this (assuming that the <code>screenshot</code> object points to that very screenshot item):</p>

<pre><code class="language-html">&lt;img src="&lt;%= screenshot.path %&gt;" alt="&lt;%= screenshot[:alt] %&gt;"&gt;
</code></pre>


<p>‚Ä¶ and you‚Äôll get this output:</p>

<pre><code class="language-html">&lt;img src="/assets/images/screenshot.png" alt="A screenshot of my desktop."&gt;
</code></pre>


<p>The site configuration has a <code>text_extensions</code> array containing a list of extensions; when the site is loaded, files with an extension in that list will be considered as being textual instead of binary. If you use textual items with custom extensions, be sure to add their extension to the <code>text_extensions</code> list. The default list is defined like this:</p>

<pre><code class="language-yaml">text_extensions: [ 'css', 'erb', 'haml', 'htm', 'html', 'js', 'less', 'markdown', 'md', 'php', 'rb', 'sass', 'txt' ]
</code></pre>


<p>Accessing compiled content and paths of compiled items is easier in 3.1. To get the compiled content of an item, use <code>item.compiled_content</code>; this will get the compiled content at the <code>:pre</code> snapshot of the default representation. You can customize this behaviour with parameters; for example, to get the content at the <code>:clean</code> snapshot of the <code>:xml</code> representation, use <code>item.compiled_content(:rep =&gt; :xml, :snapshot =&gt; :clean)</code>. Getting paths is easier too: <code>item.path</code>‚Äîand this method takes parameters to, so you can say <code>item.path(:rep =&gt; :xml)</code> to get the path of the <code>:xml</code> representation.</p>

<p>The old way:</p>

<pre><code class="language-ruby">item.reps.find { |r| r.name == :default }.path
item.reps.find { |r| r.name == :default }.content_at_snapshot(:pre)
item.reps.find { |r| r.name == :pretty }.content_at_snapshot(:pre)
item.reps.find { |r| r.name == :default }.content_at_snapshot(:clean)
</code></pre>


<p>The new way:</p>

<pre><code class="language-ruby">item.path
item.compiled_content
item.compiled_content(:rep =&gt; :pretty)
item.compiled_content(:snapshot =&gt; :clean)
</code></pre>


<p>So, install nanoc 3.1 and give it a try. If you have questions or are experiencing issues, let me know on the <a href="http://groups.google.com/group/nanoc/">nanoc mailinglist</a> or on the <a href="irc://chat.freenode.net/#nanoc">nanoc IRC channel</a>. Enjoy!</p>;T;I"ã<p>nanoc 3.1 is out now. This release introduces quite a few useful features, including API improvements and support for binary assets. Check the <a href="/release-notes/">full release notes</a> for details. Here‚Äôs how to install nanoc 3.1:</p>

<pre><span class="prompt">%</span> <kbd>gem install nanoc</kbd></pre>


<p>nanoc 3.1 is backwards compatible with nanoc 3.0.x. All sites built with nanoc 3.0.x should compile without issues on nanoc 3.1.</p>

<p>The biggest new feature is support for binary assets. Files such as images, audio files and movies can now easily be managed by nanoc. They behave just like textual items; you can drop them in the content/ directory and they can have metadata as well. Filtering binary items is easy as well; here‚Äôs an example of a <code>:rotate</code> filter that uses the <code>sips</code> command, built into Mac OS X, for rotating images:</p>

<pre><code class="language-ruby">class RotateFilter &lt; Nanoc3::Filter

  identifier :rotate
  type       :binary

  def run(filename, params={})
    system(
      'sips',
      '--rotate', params[:angle].to_s,
      '--out',    output_filename,
      filename
    )
  end

end
</code></pre>


<p>This filter can now be invoked like any other filter. For example, suppose you have a <code>content/images/tree.jpg</code> image, you can write the following rules for creating a rotated version:</p>

<pre><code class="language-ruby">compile '/images/tree/' do
  filter :rotate, :angle => 5.0
end

route '/images/tree/' do
  '/assets/images/tree-rotated.jpg'
end
</code></pre>


<p>Filters can also convert textual content to binary content and vice versa. For example, here‚Äôs a text-to-speech filter that uses Mac OS X‚Äôs <code>say</code> command:</p>

<pre><code class="language-ruby">class SynthesiseAudio &lt; Nanoc3::Filter

  identifier :synthesise_audio
  type       :text => :binary

  def run(content, params={})
    system('say', content, '-o', output_filename)
  end

end
</code></pre>


<p>Check out the <a href="/docs/5-advanced-concepts/#writing-filters">writing filters</a> section of the manual for details.</p>

<p>Binary items behave like textual items, with the exception that you cannot request their compiled content. Binary assets can have metadata too, just like normal items. This can be quite useful in some cases. For example, if you have a screenshot with the following metadata:</p>

<pre><code class="language-yaml">alt: "A screenshot of my desktop."
</code></pre>


<p>‚Ä¶ then you can output the path to that screenshot as well as its ‚Äúalt‚Äù attribute like this (assuming that the <code>screenshot</code> object points to that very screenshot item):</p>

<pre><code class="language-html">&lt;img src="&lt;%= screenshot.path %>" alt="&lt;%= screenshot[:alt] %>">
</code></pre>


<p>‚Ä¶ and you‚Äôll get this output:</p>

<pre><code class="language-html">&lt;img src="/assets/images/screenshot.png" alt="A screenshot of my desktop.">
</code></pre>


<p>The site configuration has a <code>text_extensions</code> array containing a list of extensions; when the site is loaded, files with an extension in that list will be considered as being textual instead of binary. If you use textual items with custom extensions, be sure to add their extension to the <code>text_extensions</code> list. The default list is defined like this:</p>

<pre><code class="language-yaml">text_extensions: [ 'css', 'erb', 'haml', 'htm', 'html', 'js', 'less', 'markdown', 'md', 'php', 'rb', 'sass', 'txt' ]
</code></pre>


<p>Accessing compiled content and paths of compiled items is easier in 3.1. To get the compiled content of an item, use <code>item.compiled_content</code>; this will get the compiled content at the <code>:pre</code> snapshot of the default representation. You can customize this behaviour with parameters; for example, to get the content at the <code>:clean</code> snapshot of the <code>:xml</code> representation, use <code>item.compiled_content(:rep =&gt; :xml, :snapshot =&gt; :clean)</code>. Getting paths is easier too: <code>item.path</code>‚Äîand this method takes parameters to, so you can say <code>item.path(:rep =&gt; :xml)</code> to get the path of the <code>:xml</code> representation.</p>

<p>The old way:</p>

<pre><code class="language-ruby">item.reps.find { |r| r.name == :default }.path
item.reps.find { |r| r.name == :default }.content_at_snapshot(:pre)
item.reps.find { |r| r.name == :pretty }.content_at_snapshot(:pre)
item.reps.find { |r| r.name == :default }.content_at_snapshot(:clean)
</code></pre>


<p>The new way:</p>

<pre><code class="language-ruby">item.path
item.compiled_content
item.compiled_content(:rep => :pretty)
item.compiled_content(:snapshot => :clean)
</code></pre>


<p>So, install nanoc 3.1 and give it a try. If you have questions or are experiencing issues, let me know on the <a href="http://groups.google.com/group/nanoc/">nanoc mailinglist</a> or on the <a href="irc://chat.freenode.net/#nanoc">nanoc IRC channel</a>. Enjoy!</p>
;T;@“"/blog/32/2011-07-24/{;{
;I"K<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<title>nanoc ‚Ä∫ nanoc 3.2 released</title>
<meta content="nanoc 3.4.0" name="generator">
<link href="/assets/style-v17.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://feeds.feedburner.com/nanoc" rel="alternate" title="The nanoc Blog" type="application/atom+xml">
<script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-15639968-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script>
</head>
<body>
<div class="wrapper">
<!-- ***** navigation ***** -->
<div class="nav">
<ol>
<li><a href="/"><span>Home</span></a></li>
<li><a href="/blog/"><span>News</span></a></li>
<li><a href="/docs/"><span>Documentation</span></a></li>
<li><a href="/community/"><span>Community</span></a></li>
</ol>
</div>
<!-- ***** sidebar ***** -->
<div class="side">
<ol>
<li><a href="/blog/34/"><span>Articles about v3.4</span></a></li>
<li><a href="/blog/32/"><span>Articles about v3.2</span></a></li>
<li><a href="/blog/31/"><span>Articles about v3.1</span></a></li>
<li><a href="/blog/30/"><span>Articles about v3.0</span></a></li>
<li><a href="/blog/22/"><span>Articles about v2.2</span></a></li>
<li><a href="/blog/21/"><span>Articles about v2.1</span></a></li>
<li><a href="/blog/20/"><span>Articles about v2.0</span></a></li>
</ol>
</div>
<!-- ***** body ***** -->
<div class="body">
<div class="article">
<div class="header">
<h1>nanoc 3.2 released</h1>
</div>
<p>After a long wait, nanoc 3.2 has been released. Major new points in this release include speed improvements, custom commands and a handful of new and updated filters. Check the <a href="/release-notes/">full release notes</a> for details.</p>

<p>To update your nanoc install, simply</p>

<pre><span class="prompt">%</span> <kbd>gem install nanoc</kbd></pre>


<p>Below is an example of how to write custom commands for nanoc. You can use this to create your own HTML/CSS validation commands, deploy commands, blog maintenance commands and more. Read the <a href="/docs/5-advanced-concepts/#writing-commands">writing commands</a> section of the manual for details.</p>

<pre><code class="language-ruby">usage       <span class="string"><span class="delimiter">'</span><span class="content">dostuff [options]</span><span class="delimiter">'</span></span>
aliases     <span class="symbol">:ds</span>, <span class="symbol">:stuff</span>
summary     <span class="string"><span class="delimiter">'</span><span class="content">does stuff</span><span class="delimiter">'</span></span>
description <span class="string"><span class="delimiter">'</span><span class="content">This command does a lot of stuff. I really mean a lot.</span><span class="delimiter">'</span></span>

flag   <span class="symbol">:h</span>, <span class="symbol">:help</span>,  <span class="string"><span class="delimiter">'</span><span class="content">show help for this command</span><span class="delimiter">'</span></span> <span class="keyword">do</span> |value, cmd|
  puts cmd.help
  exit <span class="integer">0</span>
<span class="keyword">end</span>
flag   <span class="symbol">:m</span>, <span class="symbol">:more</span>,  <span class="string"><span class="delimiter">'</span><span class="content">do even more stuff</span><span class="delimiter">'</span></span>
option <span class="symbol">:s</span>, <span class="symbol">:stuff</span>, <span class="string"><span class="delimiter">'</span><span class="content">specify stuff to do</span><span class="delimiter">'</span></span>, <span class="symbol">:argument</span> =&gt; <span class="symbol">:optional</span>

run <span class="keyword">do</span> |opts, args, cmd|
  stuff = opts[<span class="symbol">:stuff</span>] || <span class="string"><span class="delimiter">'</span><span class="content">generic stuff</span><span class="delimiter">'</span></span>
  puts <span class="string"><span class="delimiter">"</span><span class="content">Doing </span><span class="inline"><span class="inline-delimiter">#{</span>stuff<span class="inline-delimiter">}</span></span><span class="content">!</span><span class="delimiter">"</span></span>

  <span class="keyword">if</span> opts[<span class="symbol">:more</span>]
    puts <span class="string"><span class="delimiter">'</span><span class="content">Doing it even more!</span><span class="delimiter">'</span></span>
  <span class="keyword">end</span>
<span class="keyword">end</span></code></pre>

<p>If you have any questions, be sure to ask them on <a href="http://groups.google.com/group/nanoc/">the mailinglist</a>. If you encounter issues, please do report them at <a href="https://github.com/ddfreyne/nanoc/issues">the issue tracker</a>‚Äîthanks! You can also find me (and others) on the <a href="irc://chat.freenode.net/#nanoc">nanoc IRC channel</a>.</p>

<p>Enjoy!</p>
</div>
</div>
</div>
<!-- ***** footer ***** -->
<div id="footer">
<p>SeqWare ¬© 2007‚Äì2012 Brian O&#8217;Connor. SeqWare is released under the a <a rel="license" href="http://www.gnu.org/licenses/licenses.html">GNU GPL v3</a>. This site is built using the excellent <a href="http://nanoc.stoneship.org/">nanoc</a> tool and examples with the <a href="http://www.fonts.info/info/press/free-fonts-for-font-face-embedding.htm">Graublau</a> and <a href="http://scripts.sil.org/Gentium">Gentium</a> fonts.</p>
</div>
</body>
</html>
;T;	I"‹After a long wait, nanoc 3.2 has been released. Major new points in this release include speed improvements, custom commands and a handful of new and updated filters. Check the [full release notes](/release-notes/) for details.

To update your nanoc install, simply

<pre><span class="prompt">%</span> <kbd>gem install nanoc</kbd></pre>

Below is an example of how to write custom commands for nanoc. You can use this to create your own HTML/CSS validation commands, deploy commands, blog maintenance commands and more. Read the [writing commands](/docs/5-advanced-concepts/#writing-commands) section of the manual for details.

	#!ruby
	usage       'dostuff [options]'
	aliases     :ds, :stuff
	summary     'does stuff'
	description 'This command does a lot of stuff. I really mean a lot.'
    
	flag   :h, :help,  'show help for this command' do |value, cmd|
	  puts cmd.help
	  exit 0
	end
	flag   :m, :more,  'do even more stuff'
	option :s, :stuff, 'specify stuff to do', :argument => :optional
    
	run do |opts, args, cmd|
	  stuff = opts[:stuff] || 'generic stuff'
	  puts "Doing #{stuff}!"
    
	  if opts[:more]
	    puts 'Doing it even more!'
	  end
	end

If you have any questions, be sure to ask them on [the mailinglist](http://groups.google.com/group/nanoc/). If you encounter issues, please do report them at [the issue tracker](https://github.com/ddfreyne/nanoc/issues)‚Äîthanks! You can also find me (and others) on the [nanoc IRC channel](irc://chat.freenode.net/#nanoc).

Enjoy!
;T;
I"4<p>After a long wait, nanoc 3.2 has been released. Major new points in this release include speed improvements, custom commands and a handful of new and updated filters. Check the <a href="/release-notes/">full release notes</a> for details.</p>

<p>To update your nanoc install, simply</p>

<pre><span class="prompt">%</span> <kbd>gem install nanoc</kbd></pre>


<p>Below is an example of how to write custom commands for nanoc. You can use this to create your own HTML/CSS validation commands, deploy commands, blog maintenance commands and more. Read the <a href="/docs/5-advanced-concepts/#writing-commands">writing commands</a> section of the manual for details.</p>

<pre><code>#!ruby
usage       'dostuff [options]'
aliases     :ds, :stuff
summary     'does stuff'
description 'This command does a lot of stuff. I really mean a lot.'

flag   :h, :help,  'show help for this command' do |value, cmd|
  puts cmd.help
  exit 0
end
flag   :m, :more,  'do even more stuff'
option :s, :stuff, 'specify stuff to do', :argument =&gt; :optional

run do |opts, args, cmd|
  stuff = opts[:stuff] || 'generic stuff'
  puts "Doing #{stuff}!"

  if opts[:more]
    puts 'Doing it even more!'
  end
end
</code></pre>

<p>If you have any questions, be sure to ask them on <a href="http://groups.google.com/group/nanoc/">the mailinglist</a>. If you encounter issues, please do report them at <a href="https://github.com/ddfreyne/nanoc/issues">the issue tracker</a>‚Äîthanks! You can also find me (and others) on the <a href="irc://chat.freenode.net/#nanoc">nanoc IRC channel</a>.</p>

<p>Enjoy!</p>;T;I"5<p>After a long wait, nanoc 3.2 has been released. Major new points in this release include speed improvements, custom commands and a handful of new and updated filters. Check the <a href="/release-notes/">full release notes</a> for details.</p>

<p>To update your nanoc install, simply</p>

<pre><span class="prompt">%</span> <kbd>gem install nanoc</kbd></pre>


<p>Below is an example of how to write custom commands for nanoc. You can use this to create your own HTML/CSS validation commands, deploy commands, blog maintenance commands and more. Read the <a href="/docs/5-advanced-concepts/#writing-commands">writing commands</a> section of the manual for details.</p>

<pre><code>#!ruby
usage       'dostuff [options]'
aliases     :ds, :stuff
summary     'does stuff'
description 'This command does a lot of stuff. I really mean a lot.'

flag   :h, :help,  'show help for this command' do |value, cmd|
  puts cmd.help
  exit 0
end
flag   :m, :more,  'do even more stuff'
option :s, :stuff, 'specify stuff to do', :argument =&gt; :optional

run do |opts, args, cmd|
  stuff = opts[:stuff] || 'generic stuff'
  puts "Doing #{stuff}!"

  if opts[:more]
    puts 'Doing it even more!'
  end
end
</code></pre>

<p>If you have any questions, be sure to ask them on <a href="http://groups.google.com/group/nanoc/">the mailinglist</a>. If you encounter issues, please do report them at <a href="https://github.com/ddfreyne/nanoc/issues">the issue tracker</a>‚Äîthanks! You can also find me (and others) on the <a href="irc://chat.freenode.net/#nanoc">nanoc IRC channel</a>.</p>

<p>Enjoy!</p>
;T;@Ÿ"/blog/21/{;{
;I"Ø´<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<title>nanoc ‚Ä∫ Articles about v2.1</title>
<meta content="nanoc 3.4.0" name="generator">
<link href="../../assets/style-v17.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://feeds.feedburner.com/nanoc" rel="alternate" title="The nanoc Blog" type="application/atom+xml">
<script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-15639968-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script>
</head>
<body>
<div class="wrapper">
<!-- ***** navigation ***** -->
<div class="nav">
<ol>
<li><a href="../../"><span>Home</span></a></li>
<li><a href="../"><span>News</span></a></li>
<li><a href="../../docs/"><span>Documentation</span></a></li>
<li><a href="../../community/"><span>Community</span></a></li>
</ol>
</div>
<!-- ***** sidebar ***** -->
<div class="side">
<ol>
<li><a href="../13/"><span>Articles about v3.4</span></a></li>
<li><a href="../12/"><span>Articles about v0.12.x</span></a></li>
</ol>
</div>
<!-- ***** body ***** -->
<div class="body">
<div class="article">
<div class="header">
<h1>Articles about v2.1</h1>
</div>

	<div class="section" id="nanoc-2-1-released-august-17th-2008">
<h2>nanoc 2.1 released <span class="date">(August 17th, 2008)</span>
</h2>
<p>nanoc 2.1 is here! Update your nanoc version the usual way:</p>

<pre><kbd><span class="prompt">%</span> gem update nanoc</kbd></pre>

<p>There is no comprehensive changelog, but the &#8220;What‚Äôs New in nanoc 2.1&#8221; series on this news archive should give you a good idea of what is new (hence the name of the series). Here are the relevant posts:</p>

<ol>
<li><a href="#wnin-1-improved-cli-tool-july-12th-2008">improved CLI tool</a></li>
    <li><a href="#wnin-2-an-open-framework-july-20th-2008">an open framework</a></li>
    <li><a href="#wnin-3-improved-data-sources-july-1st-2008">improved data sources</a></li>
    <li><a href="#wnin-4-routers-july-23rd-2008">routers</a></li>
    <li><a href="#wnin-5-assets-august-9th-2008">assets</a></li>
    <li><a href="#wnin-6-miscellaneous-august-11th-2008">miscellaneous</a></li>
</ol>
<p>nanoc 2.1 is entirely backwards compatible with nanoc 2.0. This means that a site that can be compiled with nanoc 2.0 can be compiled without issues using nanoc 2.1.</p>

<p>A lot has changed between 2.0 and 2.1, so it is possible that you‚Äôll run into bugs. If something odd occurs, please do let me know either on the <a href="http://groups.google.com/group/nanoc/">mailinglist</a>, <a href="http://nanoc.stoneship.org/trac/newticket">on Trac</a> or <s>on Bitbucket</s>. I‚Äôll look into the issue as soon as possible and have it fixed in no time. Thanks for reporting!</p>



	</div>
<div class="section" id="wnin-6-miscellaneous-august-11th-2008">
<h2>WNin #6: Miscellaneous <span class="date">(August 11th, 2008)</span>
</h2>
<div class="figure wnin21">
	<img src="http://nanoc.stoneship.org/assets/images/whats-new-in-nanoc-21-small.png" alt="What‚Äôs New in nanoc 2.1">
</div>

<p>Welcome to the final installment of <i>What‚Äôs New in nanoc 2.1</i>. In this article I‚Äôll show you several miscellaneous improvements and features I couldn‚Äôt fit elsewhere.</p>

<p>The <strong>autocompiler now uses Rack</strong>, so this is good news if you don‚Äôt like WEBrick and would like to use something else instead. Thin, Mongrel, Ebb, ‚Ä¶ you name it.</p>

<p><strong>Layout processors are gone</strong> entirely. Instead, use filters. Layouts consist of metafiles and content files now, and the meta files determine the filter to be run. This means less code duplication, as there‚Äôs no need to have both e.g. a Haml filter <em>and</em> a Haml layout processor.</p>

<p>A layout only has one attribute, <code>filter</code>, which determines the filter to be run. Here‚Äôs what the meta file of the nanoc site‚Äôs default layout contains, to show you how this works:</p>

<pre><code class="language-yaml"><span class="key">filter</span>: <span class="string"><span class="content">'erb'</span></span></code></pre>

<p><strong>Layouts can be stored hierarchically</strong>. This is useful in case you want to e.g. create a &#8220;partials&#8221; directory in your layouts directory, in which you‚Äôd store partials you want to render. Or, you could have a directory named &#8220;sidebars&#8221; in which you store sidebars, in case you want to render different sidebars for different sections on the site.</p>

<p>Here‚Äôs an example that shows how you‚Äôd render the &#8220;header&#8221; layout, located inside the &#8220;partials&#8221; directory inside the &#8220;layouts&#8221; directory:</p>

<pre><code class="language-ruby">&lt;<span class="string"><span class="delimiter">%=</span><span class="content"> render 'partials/header' %&gt;</span></span></code></pre>

<p>Nothing really important, but the <code>nanoc_require</code> function is gone‚Äîsimply use the good old <code>require</code> function now.</p>

<p>nanoc is now bundled with <strong>three new filters</strong>: <a href="http://github.com/rtomayko/rdiscount/tree/master">rdiscount</a> (a fast implementation of Markdown), <a href="http://maruku.rubyforge.org/">maruku</a> (an implementation of a Markdown superset) and <a href="http://www.kuwata-lab.com/erubis/">erubis</a> (a fast implementation of eRuby). Because the filter used for processing layouts is no longer determined by the file extension, you can actually use Erubis instead of ERB for layouts now.</p>

<p>A lot of helpers have been bundled with nanoc. There‚Äôs helpers for <a href="http://nanoc.stoneship.org/docs/api/3.1/Nanoc3/Helpers/Blogging.html">blogging</a>, <a href="http://nanoc.stoneship.org/docs/api/3.1/Nanoc3/Helpers/Tagging.html">tagging</a>, <a href="http://nanoc.stoneship.org/docs/api/3.1/Nanoc3/Helpers/Capturing.html">capturing</a>, <a href="http://nanoc.stoneship.org/docs/api/3.1/Nanoc3/Helpers/HTMLEscape.html">HTML-escaping</a>, <a href="http://nanoc.stoneship.org/docs/api/3.1/Nanoc3/Helpers/Render.html">rendering</a>, building <a href="http://nanoc.stoneship.org/docs/api/3.1/Nanoc3/Helpers/XMLSitemap.html">XML sitemaps</a> and <a href="http://nanoc.stoneship.org/docs/api/3.1/Nanoc3/Helpers/LinkTo.html">linking</a>. All of these helpers are quite thoroughly documented so using them should be a breeze. These helpers will first need to be activated before they can be used (except the Render and HTMLEscape ones), which works like this:</p>

<pre><code class="language-ruby">include <span class="constant">Nanoc</span>::<span class="constant">Helpers</span>::<span class="constant">LinkTo</span></code></pre>

<p>These helpers were previously available as plugins on the <a href="http://nanoc.stoneship.org/trac">wiki</a>, but now they‚Äôre actually bundled so you don‚Äôt have to download them separately. More helpers (and filters) will be added to the standard nanoc distribution later on; contributions are always welcome.</p>

<p>I forgot to mention it before, but <strong>nanoc 2.1 is entirely backwards compatible</strong> with nanoc 2.0. This means that a site that can be compiled with nanoc 2.0 (and doesn‚Äôt show any deprecation warnings) should compile flawlessly using nanoc 2.1.</p>

<p>So, this is the end of the very last installment of <i>What‚Äôs New in nanoc 2.1</i>. I hope you enjoyed it! nanoc 2.1 itself is <em>nearly</em> ready, but still needs a tiny bit of work. With a bit of luck, there‚Äôll be a release at the end of the week. Stay tuned!</p>



	</div>
<div class="section" id="wnin-5-assets-august-9th-2008">
<h2>WNin #5: Assets <span class="date">(August 9th, 2008)</span>
</h2>
<div class="figure wnin21">
	<img src="../../assets/images/whats-new-in-nanoc-21-small.png" alt="What‚Äôs New in nanoc 2.1">
</div>

<p>Welcome to installment #5 of What‚Äôs New in nanoc 2.1. This article will show you two of the biggest new features of nanoc 2.1: <em>asset compilation</em> and <em>multiple representations</em>.</p>

<p>The new <strong>asset compilation</strong> feature allows a site to have assets, which can be run through filters. Assets can be anything‚ÄîSass stylesheets, images, MP3s, videos, and so on. Filters can then compile Sass, rescale images, make images grayscale, change the volume of a MP3 file, play a video backwards (so you get to see the end first), etc. The only limit is your imagination.</p>

<p>nanoc supports two different kinds of assets: <em>textual</em> and <em>binary</em> assets. Textual assets will be compiled by textual filters, which are the filters you already know. An example of a textual asset would be a Sass stylesheet. Binary assets are all assets that aren‚Äôt text. Examples of binary assets include images, sound and music files, videos, etc.</p>

<p>Binary assets require a <strong>new kind of filters called binary filters</strong>. Binary filters, unlike textual filters, do not load assets into memory. This means binary assets can be arbitrarily big.</p>

<p>So how does nanoc handle assets? If you are using the filesystem data source, you can create a directory aptly named <span class="path">assets</span> in your site directory, in which you put your assets. Assets are directories containing the actual asset file and a meta file, exactly like pages.</p>

<p>For example, the nanoc site has an asset named &#8220;style&#8221;, whose directory contains &#8220;style.css&#8221; and &#8220;style.yaml&#8221;. The attributes in the meta file look like this:</p>

<pre><code class="language-yaml"><span class="key">binary</span>:  <span class="string"><span class="content">false</span></span>
<span class="key">filters</span>: <span class="string"><span class="content">[]</span></span></code></pre>

<p>There are only two built-in asset attributes. <code>binary</code> indicates whether the asset is binary or not (in this case it is a textual asset, thus <code>false</code>) and <code>filters</code> is the list of filters to run (empty, in this case).</p>

<p>If the stylesheet had been a Sass one, the attributes would have looked like this:</p>

<pre><code class="language-yaml"><span class="key">binary</span>:  <span class="string"><span class="content">false</span></span>
<span class="key">filters</span>: <span class="string"><span class="content">[ 'sass' ]</span></span></code></pre>

<p>‚Ä¶ which should not be a big surprise.</p>

<p>Textual filters are exactly the same as the filters in nanoc 2.0, so there‚Äôs probably not much point in showing one, but I‚Äôll just do it anyway:</p>

<pre><code class="language-ruby"><span class="keyword">class</span> <span class="class">Sass</span> &lt; <span class="constant">Nanoc</span>::<span class="constant">Filter</span>

  identifier <span class="symbol">:sass</span>

  <span class="keyword">def</span> <span class="function">run</span>(content)
    require <span class="string"><span class="delimiter">'</span><span class="content">sass</span><span class="delimiter">'</span></span>

    ::<span class="constant">Sass</span>::<span class="constant">Engine</span>.new(content).render
  <span class="keyword">end</span>

<span class="keyword">end</span></code></pre>

<p>Binary assets are very similar to textual assets. Simply set <code>binary</code> to <code>true</code> in the meta file and make sure that the list of filters contains only binary filters.</p>

<p>Filters for binary assets are slightly different from textual filters. Firstly, binary filters inherit from <code>Nanoc::BinaryFilter</code> instead of <code>Nanoc::Filter</code>. Secondly, their <code>run</code> method takes a File object and not a string containing the asset content. Additionally, binary filters should return a File object representing the processed file. The original File argument should not be modified (otherwise you‚Äôd lose the original asset).</p>

<p>For example, a binary filter for generating a thumbnail of an image (using <a href="http://docs.seattlerb.org/image_science/">ImageScience</a>) could look like this (the code is non-functional, because the filter has a lot of irrelevant implementation details):</p>

<pre><code class="language-ruby"><span class="keyword">class</span> <span class="class">ImageScienceThumbnail</span> &lt; <span class="constant">Nanoc</span>::<span class="constant">BinaryFilter</span>

  identifier <span class="symbol">:image_science_thumbnail</span>

  <span class="keyword">def</span> <span class="function">run</span>(file)
    require <span class="string"><span class="delimiter">'</span><span class="content">image_science</span><span class="delimiter">'</span></span>

    <span class="comment"># Get temporary path</span>
    tmp_path = <span class="error">‚Ä¶</span>

    <span class="comment"># Create thumbnail and write it to the temp path</span>
    <span class="error">‚Ä¶</span>

    <span class="comment"># Return thumbnail file</span>
    <span class="constant">File</span>.open(tmp_path)
  <span class="keyword">end</span>

<span class="keyword">end</span></code></pre>

<p>The default router (see the <a href="#wnin-4-routers-july-23rd-2008">article on routers</a>) saves compiled assets in an <span class="path">assets</span> directory inside the output directory. It‚Äôs possible to set <var>assets_prefix</var> in the config file to something else such as &#8220;/media&#8221;, or even &#8220;&#8221; to save assets directly in the output directory.</p>

<p>Now you know how to compile assets.</p>

<p>There is one small issue, though. Generating thumbnails of images is fine, but what if you want to keep the full-size version? There‚Äôs not much point in only having a thumbnail, and not being able to show the full-size image.</p>

<p>This is where <strong>multiple representations</strong> come into play. A single asset can have different representations (or &#8220;reps&#8221;): a thumbnail rep, a grayscale rep, a full-size rep, ‚Ä¶ Even pages can have multiple reps.</p>

<p>Giving an asset multiple representations is quite easy. In the asset‚Äôs meta file, fill up the list of reps like in this example:</p>

<pre><code class="language-yaml"><span class="key">reps</span>:
  <span class="key">default</span>:
    <span class="key">filters</span>:        <span class="string"><span class="content">[]</span></span>
  <span class="key">thumbnail</span>:
    <span class="key">filters</span>:        <span class="string"><span class="content">[ 'image_science_thumbnail' ]</span></span>
    <span class="key">thumbnail_size</span>: <span class="string"><span class="content">100</span></span></code></pre>

<p>The asset in this example has two representations: a default one (which is unprocessed) and a thumbnail one (which is run through the <code>image_science_thumbnail</code> filter).</p>

<p>Each representation has its own output file. The name of the output file is determined by the router. The default router appends the representation name to the filename.</p>

<p><a href="#">Last time</a> I wasn‚Äôt able to show you what a real router looks like (because I didn‚Äôt explain multiple representations before), but now I can. Let me just show you the implementation for <code>path_for_asset_rep</code> real quick:</p>

<pre><code class="language-ruby"><span class="keyword">def</span> <span class="function">path_for_asset_rep</span>(asset_rep)
  <span class="comment"># Get data we need</span>
  extension     = asset_rep.attribute_named(<span class="symbol">:extension</span>)
  modified_path = asset_rep.asset.path[<span class="integer">0</span>..<span class="integer">-2</span>]
  version       = asset_rep.attribute_named(<span class="symbol">:version</span>)

  <span class="comment"># Initialize path</span>
  assets_prefix = <span class="instance-variable">@site</span>.config[<span class="symbol">:assets_prefix</span>] || <span class="string"><span class="delimiter">'</span><span class="content">/assets</span><span class="delimiter">'</span></span>
  path = assets_prefix + modified_path

  <span class="comment"># Add rep name if necessary</span>
  <span class="keyword">unless</span> asset_rep.name == <span class="symbol">:default</span>
    path += <span class="string"><span class="delimiter">'</span><span class="content">-</span><span class="delimiter">'</span></span> + asset_rep.name.to_s
  <span class="keyword">end</span>

  <span class="comment"># Add extension</span>
  path += <span class="string"><span class="delimiter">'</span><span class="content">.</span><span class="delimiter">'</span></span> + extension

  <span class="comment"># Done</span>
  path
<span class="keyword">end</span></code></pre>

<p>The implementation of <code>path_for_page_rep</code> is very similar, so I‚Äôm not showing it here.</p>

<p>The code should be fairly self-explanatory (the <code>[0..-2]</code> is used to strip off the trailing slash). The most important point is that routers determine paths of asset/page <em>representations</em> instead of paths of assets/pages.</p>

<p>So, that‚Äôs what asset compilation and multiple representations look like. The end of the <i>What‚Äôs New In nanoc 2.1</i> series is coming closer, but there is still one more installment to go. The last article in the series will discuss several minor new features and changes. Stay tuned!</p>



	</div>
<div class="section" id="wnin-4-routers-july-23rd-2008">
<h2>WNin #4: routers <span class="date">(July 23rd, 2008)</span>
</h2>
<div class="figure wnin21">
	<img src="../../assets/images/whats-new-in-nanoc-21-small.png" alt="What‚Äôs New in nanoc 2.1">
</div>

<p>Welcome to the 4th installment of What‚Äôs New in nanoc 2.1. This article introduces a new feature in nanoc 2.1 named <em>Routers</em>.</p>

<p>First, a word about <em>paths</em>. Every page has a path starting and ending with a slash. The root and about page‚Äôs paths could be <span class="path">/</span> and <span class="path">/about/</span>, for example. A page‚Äôs path depends on the way it is stored; when using the <i>filesystem</i> or <i>filesystem_combined</i> data sources, the path is determined by the directory hierarchy in the <span class="path">content</span> directory.</p>

<p>Then there‚Äôs a page‚Äôs <em>output path</em> or <em>disk path</em>, which includes the terminating &#8220;index.html&#8221;. It is the path where the compiled page will be written to. The <em>web path</em> is the disk path without the trailing &#8220;index.html&#8221;, for pretty URLs. Unless you‚Äôre using <code>custom_path</code> to set a custom output path, the web path is the same as the page‚Äôs path.</p>

<p>Speaking of pretty URLs: it is now possible to tell nanoc about the <strong>list of index filenames</strong> you want to have stripped of paths. This is quite useful when you want to generate &#8220;default.htm&#8221; files instead of &#8220;index.html&#8221; because you‚Äôre running some weird web server. In the site‚Äôs configuration file, simply set <code>index_filenames</code> to the list of index filenames to strip. For example:</p>

<pre><code class="language-yaml"><span class="key">index_filenames</span>:
  - <span class="string"><span class="content">'index.htm'</span></span>
  - <span class="string"><span class="content">'index.html'</span></span>
  - <span class="string"><span class="content">'default.htm'</span></span></code></pre>

<p>If you want to generate &#8220;default.htm&#8221; instead of &#8220;index.html&#8221; files by default, simply set the filename and extension in the global metadata file. You could already do this with nanoc 2.0, but I‚Äôll repeat it because it‚Äôs relevant. Here‚Äôs an example of what the global <span class="path">meta.yaml</span> could look like:</p>

<pre><code class="language-yaml"><span class="comment"># Built-in</span>
<span class="key">filename</span>:  <span class="string"><span class="content">'default'</span></span>
<span class="key">extension</span>: <span class="string"><span class="content">'htm'</span></span>
<span class="error">‚Ä¶</span>

<span class="comment"># Custom</span>
<span class="error">‚Ä¶</span></code></pre>

<p>With the list of index filenames including &#8220;default.htm&#8221;, a page with path <span class="path">/foo/</span> will now have a web path <span class="path">/foo/</span> instead of <span class="path">/foo/default.htm</span>. Pretty.</p>

<p>So‚Ä¶ <em>routers</em>. Before 2.1, a page‚Äôs web path was always the same as the page path. A page with path <span class="path">/about/</span> would be written to <span class="path">/about/index.html</span>, for example. <strong>Routers allow paths to be rewritten</strong>; the hierarchy of pages in <span class="path">output</span> can, in fact, be entirely different.</p>

<p>I‚Äôd like to show you what a router looks like, but unfortunately that would require me to explain a new feature of nanoc 2.1 called <em>multiple representations</em>, which I‚Äôm going to discuss in a future installment. So, what I‚Äôm going to do is show fake, non-functional code which should never, ever be used. For illustrative purposes only, mkay?</p>

<p>The default router could, <em>hypothetically</em>, look like this:</p>

<pre><code class="language-ruby"><span class="keyword">class</span> <span class="class">Default</span> &lt; <span class="constant">Nanoc</span>::<span class="constant">Router</span>

  identifier <span class="symbol">:default</span>

  <span class="keyword">def</span> <span class="function">path_for_page</span>(page)
    <span class="comment"># Get data we need</span>
    filename   = page.attribute_named(<span class="symbol">:filename</span>)
    extension  = page.attribute_named(<span class="symbol">:extension</span>)
    path       = page.path

    <span class="comment"># Build path</span>
    path + filename + <span class="string"><span class="delimiter">'</span><span class="content">.</span><span class="delimiter">'</span></span> + extension
  <span class="keyword">end</span>

<span class="keyword">end</span></code></pre>

<p>What this router does, is quite straightforward. When asking the router for the (disk) path for a given page, it simply returns the path with the filename and extension appended to it. Nothing special. (<em>But remember that it‚Äôs a fake router and won‚Äôt work!</em>)</p>

<p>At this point, routers may not seem very useful yet, but they play a larger role with multiple representations. You‚Äôll see soon. There are a few useful things you can do with routers already, though:</p>

<ul>
<li><p>Write a router that changes the paths of journal articles to something like <span class="path">/blog/year/month/day/title</span>, without having to store pages this way (because storing pages hierarchically like this will require a lot of directories, which isn‚Äôt too pretty). Simply store articles like <span class="path">/blog/year/title</span> and have a router clean up those paths.</p></li>

	<li><p>When building a site in multiple languages, it‚Äôs best to keep a page‚Äôs different languages close together, e.g. <span class="path">/foo/bar/en/</span> and <span class="path">/foo/bar/fr/</span>. When changing a page in one language, it‚Äôs easy to change the page‚Äôs other languages because they‚Äôre close. With routers it‚Äôs easy to rewrite the paths so the language appears at the beginning, e.g. <span class="path">/en/foo/bar/</span> and <span class="path">/fr/foo/bar/</span>, respectively.</p></li>
</ul>
<p>Again, I do realise that not being able to show what a router <em>really</em> looks like (with example code) is annoying, but that‚Äôll all be fixed once I start talking about multiple representations. Don‚Äôt worry.</p>

<p>The next installment will discuss perhaps the two biggest new features new in 2.1, <em>asset compilation</em> and <em>multiple representations</em>. Stay tuned!</p>



	</div>
<div class="section" id="wnin-3-improved-data-sources-july-21st-2008">
<h2>WNin #3: improved data sources <span class="date">(July 21st, 2008)</span>
</h2>
<div class="figure wnin21">
	<img src="../../assets/images/whats-new-in-nanoc-21-small.png" alt="What‚Äôs New in nanoc 2.1">
</div>

<p>This is the third installment of <i>What‚Äôs New in nanoc 2.1</i>. This article discusses the new data sources, which have been improved a lot in nanoc 2.1.</p>

<p>To recap: data sources are classes that tell nanoc where to find site content. Even though you‚Äôll usually stick to storing your pages as files on the filesystem, you may want to store the in a database instead, or maybe simply store them in a different way on the filesystem.</p>

<p>For example, one big difference between nanoc and one of its competitors, webby, is that the latter stores its pages as single files, and not directories. Webby stores its metadata embedded inside pages. nanoc 2.1 comes with a new data source named <i>filesystem_combined</i> which, similar to webby, <strong>stores content and attributes in a single file</strong>. This can clean up the <span class="path">content</span> directory quite a bit.</p>

<p>Here‚Äôs what the default nanoc site looks like with a filesystem_combined data source:</p>

<pre><code class="language-yaml"><span class="head"><span class="head">---</span></span><span class="error">--</span>
<span class="comment"># Built-in</span>

<span class="comment"># Custom</span>
<span class="key">title</span>: <span class="string"><span class="content">Home</span></span>
<span class="head"><span class="head">---</span></span><span class="error">--</span>

<span class="error">&lt;h1&gt;A Brand New nanoc Site&lt;/h1&gt;</span>

<span class="error">‚Ä¶ rest of the content goes here ‚Ä¶</span></code></pre>

<p>Creating a new site with this new <i>filesystem_combined</i> data source is easy. Just do this (the <kbd>-d</kbd> switch specifies the name of the data source):</p>

<pre><kbd><span class="prompt">%</span> nanoc create_site -d filesystem_combined my_new_site</kbd></pre>

<p>If you want to switch your existing site over to <i>filesystem_combined</i>, you can do that with a <strong>brand new <kbd>switch</kbd> command</strong>, which you invoke like this:</p>

<pre><kbd><span class="prompt">%</span> nanoc switch -d filesystem_combined</kbd></pre>

<p>If your site is stored in a <abbr title="version control system">VCS</abbr> repository such as Subversion, git, Mercurial or Bazaar, you can  <strong>tell nanoc to use this VCS&#8217; commands</strong> using the <kbd>-c</kbd> switch. At the moment, nanoc supports svn, git, hg and bzr, but adding support for new VCSes is trivial. As an example, here‚Äôs how you‚Äôd switch to switch to new data source using git:</p>

<pre><kbd><span class="prompt">%</span> nanoc switch -d filesystem_combined -c git</kbd></pre>

<p>If you want to get a list of supported VCSes, use the <strong>new <kbd>info</kbd> command</strong> (which also gives information about available filters, data sources, and more), which outputs something like this:</p>

<pre><kbd><span class="prompt">%</span> nanoc info</kbd>

<samp>VCSes:

  builtin:
    bazaar, bzr         (Nanoc::Extra::VCSes::Bazaar)
    dummy               (Nanoc::Extra::VCSes::Dummy)
    git                 (Nanoc::Extra::VCSes::Git)
    mercurial, hg       (Nanoc::Extra::VCSes::Mercurial)
    subversion, svn     (Nanoc::Extra::VCSes::Subversion)
  custom:
    (none)

‚Ä¶ more stuff here ‚Ä¶</samp></pre>

<p>The original filesystem data source you‚Äôre all used to (which is simply called <i>filesystem</i>) has been updated a bit. <strong>Layouts are now stored as directories</strong> instead of files, and in the new meta file you can specify the name of the filter to use when rendering this layout. The filter used for compiling layouts is no longer dependent on the file extension.</p>

<p>There‚Äôs <strong>a new <kbd>update</kbd> command</strong> to make updating the site content (e.g. updating the way layouts are stored) easier. Here‚Äôs how you‚Äôd use it for a site versioned using Mercurial:</p>

<pre><kbd><span class="prompt">%</span> nanoc update -c hg</kbd></pre>

<p>The data sources now also <strong>allow creating, updating and deleting stored data</strong>. This is probably not very useful for the commandline interface‚Äîafter all, why have <kbd>delete_page</kbd> and <kbd>move_page</kbd> when there‚Äôs the standard unix commands <kbd>rm</kbd> and <kbd>mv</kbd>, respectively‚Äîbut for new frontends (GUI frontend, web-based frontend, ‚Ä¶) this may become quite useful later on.</p>

<p>A last important new feature is <strong>data sources now provide modification times</strong> for the data they read, which makes it possible for nanoc to only compile outdated pages, which creates a nice speed improvement.</p>

<p>So, that‚Äôs what data sources in nanoc 2.1 look like. Stay tuned for the third installment of <i>What‚Äôs New in nanoc 2.1</i>!</p>



	</div>
<div class="section" id="wnin-2-an-open-framework-july-20th-2008">
<h2>WNin #2: an open framework <span class="date">(July 20th, 2008)</span>
</h2>
<div class="figure wnin21">
	<img src="../../assets/images/whats-new-in-nanoc-21-small.png" alt="What‚Äôs New in nanoc 2.1">
</div>

<p>Welcome to installment two of <i>What‚Äôs New in nanoc 2.1</i>! This installment discusses the technical, code-wise differences between this new version and the old 2.0 release.</p>

<p>The first big improvement is that nanoc <strong>is a lot more modular</strong> now. The commandline interface (which was discussed <a href="#wnin-1-improved-cli-tool-july-12th-2008">before</a>) is now very loosely coupled with the backend. This means that it should be fairly easy to rip out the commandline frontend and replace it with something else‚Äîa web frontend (based off Rails or something similar) jumps to mind.</p>

<p>Also important is that nanoc <strong>has a public API now</strong>, which makes manipulating sites a lot easier. For example, it‚Äôs now possible to programmatically generate pages. If you have a blog where all articles are tagged, you can generate tag index pages easily using something like this:</p>

<pre><code class="language-ruby"><span class="comment"># Load nanoc site</span>
site = <span class="constant">Nanoc</span>::<span class="constant">Site</span>.new(<span class="constant">YAML</span>.load_file(<span class="string"><span class="delimiter">'</span><span class="content">config.yaml</span><span class="delimiter">'</span></span>))
site.load_data
pages = site.pages

<span class="comment"># Get all tags used on the site</span>
all_tags = pages.map { |p| p.attribute_named(<span class="symbol">:tags</span>) }.flatten.compact.uniq

<span class="comment"># Get tags for which an index page exists</span>
tags_with_pages = pages.map { |p| p.attribute_named(<span class="symbol">:tag</span>) }

<span class="comment"># Get tags for which no index page exists</span>
tags_without_pages = all_tags - tags_with_pages

<span class="comment"># Build pages for each tag</span>
tags_without_pages.each <span class="keyword">do</span> |t|
  <span class="comment"># Buid page</span>
  page = <span class="constant">Nanoc</span>::<span class="constant">Page</span>.new(<span class="string"><span class="delimiter">"</span><span class="content">Tag: </span><span class="inline"><span class="inline-delimiter">#{</span>tag<span class="inline-delimiter">}</span></span><span class="delimiter">"</span></span>, { <span class="symbol">:tag</span> =&gt; t }, <span class="string"><span class="delimiter">"</span><span class="content">/blog/tags/</span><span class="inline"><span class="inline-delimiter">#{</span>t<span class="inline-delimiter">}</span></span><span class="delimiter">"</span></span>)
  page.site = site

  <span class="comment"># Store page</span>
  page.save
<span class="keyword">end</span></code></pre>

<p>If that example above confused you, don‚Äôt worry, because‚Ä¶</p>

<p>The nanoc <strong>source code is now really, really well-documented</strong>. Every class and every method now has thorough documentation. Check out the source documentation <a href="../../docs/api/3.1/">over here</a>. It should now be a lot easier to tweak nanoc to your own liking (but be sure to submit patches!).</p>

<p>At least as important as the documentation is the <strong>greatly expanded test suite</strong>, which now features 319 unit tests and over 1200 assertions. Test coverage is about 85%. There are still a few tests missing, but once they have been implemented, the test suite will be really strong. The goal is to make sure nanoc is virtually bug free, and to make regression bugs a thing of the past.</p>

<p>Just because I like showing off, here‚Äôs what the test suite run looks like at the moment:</p>

<pre><samp>.......................................................................
.......................................................................
.......................................................................
.......................................................................
...................................
Finished in 9.640952 seconds.

319 tests, 1222 assertions, 0 failures, 0 errors</samp></pre>

<p>Sweet, is it not?</p>

<p>In unrelated (but still useful) news, the nanoc repository is now <s>mirrored over at Bitbucket</s>, which is github-like hosting for Mercurial instead of git. There‚Äôs also an issue tracker over there, which you can use in case you dislike Trac.</p>

<p>That‚Äôs it for installment two. The next installment will briefly describe the changes to the data source API. Stay tuned!</p>



	</div>
<div class="section" id="wnin-1-improved-cli-tool-july-12th-2008">
<h2>WNin #1: improved CLI tool <span class="date">(July 12th, 2008)</span>
</h2>
<div class="figure wnin21">
	<img src="../../assets/images/whats-new-in-nanoc-21-small.png" alt="What‚Äôs New in nanoc 2.1">
</div>

<p>Welcome to the first installment of <i>What‚Äôs New in nanoc 2.1</i>! This installment introduces the first new important feature of nanoc 2.1: the <strong>improved commandline interface</strong>, which is not only a lot prettier but offers a few new features as well.</p>

<p>The first of these new features includes <strong>built-in commandline help</strong> for every command. For example, the <kbd>compile</kbd> command has a help page that looks like this:</p>

<pre><samp>nanoc compile [options] [path]

compile pages and assets of this site

    Compile all pages and all assets of the current site. If a path is given,
    only the page or asset with the given path will be compiled. Additionally,
    only pages and assets that are outdated will be compiled, unless specified
    otherwise with the -a option.

options:

    -a --all        compile all pages and assets, even those that aren‚Äôt
                    outdated</samp></pre>

<p>As you can see, the <kbd>compile</kbd> command has grown up a bit and it‚Äôs now possible to tell nanoc only to compile a single page instead of the entire site. Note that nanoc also no longer compiles pages unless they‚Äôre considered &#8220;outdated&#8221;‚Äîa real time saver.</p>

<p>Also neat is that <strong>command abbreviations are detected automatically</strong>. The <kbd>co</kbd> command, for example, will be expanded to <kbd>compile</kbd> because there‚Äôs no other command starting with <kbd>co</kbd>. Additionally, if you type something ambiguous, you‚Äôll be notified:</p>

<pre><kbd><span class="prompt">%</span> nanoc c</kbd>
<samp>nanoc: &#8216;c&#8217; is ambiguous:
  create_template create_site create_page create_layout compile</samp></pre>

<p><strong>Error reporting has also been improved.</strong> If a compilation error occurs at some point, the stack of what was being compiled will be printed. The following example shows that something went wrong when compiling the &#8220;meta&#8221; layout, which was rendered from inside the &#8220;journal_archive&#8221; layout, which in turn was rendered from inside the &#8220;journal/2008&#8221; page:</p>

<pre><samp>Compilation stack:
  - [layout] /meta/
  - [layout] /journal_archive/
  - [page]   /journal/2008/ (rep default)</samp></pre>

<p>Of course, the actual error message and the Ruby stack trace will be printed as well, which should make debugging any accidental errors on your site quite a bit easier. (Ignore the &#8220;rep&#8221; thing for now. We‚Äôll talk about that later.)</p>

<p>When passing the <kbd>--verbose</kbd> switch to the <kbd>compile</kbd> command, a pretty table containing some <strong>profiling information</strong> will be printed. Very useful if you want to optimize some of your custom filters. For example, this is the output for my personal web site:</p>

<pre><samp>                        | count    min    avg    max     tot
------------------------+-----------------------------------
                    erb |    95  0.00s  0.01s  0.23s   0.74s
image_science_thumbnail |    69  0.22s  0.27s  0.35s  18.51s
              bluecloth |     2  0.06s  0.10s  0.15s   0.21s
      website_thumbnail |    12  0.25s  0.48s  0.97s   5.80s
            compile_css |     2  0.00s  0.00s  0.00s   0.00s
              rubypants |    53  0.01s  0.03s  0.09s   1.39s
              rdiscount |    11  0.00s  0.00s  0.01s   0.02s</samp></pre>

<p>This shows that the &#8220;compile_css&#8221; as well as &#8220;rdiscount&#8221; filters are extremely fast, while the &#8220;image_science_thumbnail&#8221; and especially the &#8220;website_thumbnail&#8221; filters are really slow. (Those thumbnail filters are filters that apply to image assets, not to pages‚Äîasset compilation is something that‚Äôll be discussed later).</p>

<p>Last but not least: it‚Äôs now possible to <strong>write your own commands</strong>. Even though <a href="http://rake.rubyforge.org/">rake</a> is sufficient for performing simple tasks, sometimes you need a more advanced tool that allows passing commandline arguments. Now you can write custom commands. Here‚Äôs a &#8220;Hello World&#8221; example:</p>

<pre><code class="language-ruby">require <span class="string"><span class="delimiter">'</span><span class="content">nanoc/cli</span><span class="delimiter">'</span></span>

<span class="keyword">class</span> <span class="class">HelloWorldCommand</span> &lt; <span class="constant">Nanoc</span>::<span class="constant">CLI</span>::<span class="constant">Command</span>

  <span class="keyword">def</span> <span class="function">name</span>
    <span class="string"><span class="delimiter">'</span><span class="content">hello_world</span><span class="delimiter">'</span></span>
  <span class="keyword">end</span>

  <span class="keyword">def</span> <span class="function">aliases</span>
    <span class="string"><span class="delimiter">%w(</span><span class="content"> hw </span><span class="delimiter">)</span></span>
  <span class="keyword">end</span>

  <span class="keyword">def</span> <span class="function">short_desc</span>
    <span class="string"><span class="delimiter">'</span><span class="content">print a simple greeting</span><span class="delimiter">'</span></span>
  <span class="keyword">end</span>

  <span class="keyword">def</span> <span class="function">long_desc</span>
    <span class="string"><span class="delimiter">'</span><span class="content">Print the "hello world" greeting on the screen, in either </span><span class="delimiter">'</span></span> +
    <span class="string"><span class="delimiter">'</span><span class="content">lowercase or uppercase. Can also print a custom text.</span><span class="delimiter">'</span></span>
  <span class="keyword">end</span>

  <span class="keyword">def</span> <span class="function">usage</span>
    <span class="string"><span class="delimiter">"</span><span class="content">nanoc hello_world [options] [custom_text]</span><span class="delimiter">"</span></span>
  <span class="keyword">end</span>

  <span class="keyword">def</span> <span class="function">option_definitions</span>
    [
      <span class="comment"># --uppercase</span>
      {
        <span class="symbol">:long</span> =&gt; <span class="string"><span class="delimiter">'</span><span class="content">uppercase</span><span class="delimiter">'</span></span>, <span class="symbol">:short</span> =&gt; <span class="string"><span class="delimiter">'</span><span class="content">u</span><span class="delimiter">'</span></span>, <span class="symbol">:argument</span> =&gt; <span class="symbol">:forbidden</span>,
        <span class="symbol">:desc</span> =&gt; <span class="string"><span class="delimiter">'</span><span class="content">print the text in uppercase instead of lowercase</span><span class="delimiter">'</span></span>
      }
    ]
  <span class="keyword">end</span>

  <span class="keyword">def</span> <span class="function">run</span>(options, arguments)
    <span class="comment"># Get text</span>
    text = (arguments[<span class="integer">0</span>] || <span class="string"><span class="delimiter">'</span><span class="content">hello world</span><span class="delimiter">'</span></span>)

    <span class="comment"># Print it</span>
    puts (options.has_key?(<span class="symbol">:uppercase</span>) ? text.upcase : text.downcase)
  <span class="keyword">end</span>

<span class="keyword">end</span></code></pre>

<p>Some example output:</p>

<pre><kbd><span class="prompt">%</span> nanoc hello_world blah</kbd>
<samp>blah</samp>
<kbd><span class="prompt">%</span> nanoc hw -u blah</kbd>
<samp>BLAH</samp>
<kbd><span class="prompt">%</span> nanoc hello -u</kbd>
<samp>HELLO WORLD</samp>
<kbd><span class="prompt">%</span> nanoc hw</kbd>
<samp>hello world</samp></pre>

<p>The auto-generated help page:</p>

<pre><samp>nanoc hello_world [options] [custom_text]

aliases: hw

print a simple greeting

    Print the "hello world" greeting on the screen, in either lowercase or
    uppercase. Can also print a custom text.

options:

    -u --uppercase  print the text in uppercase instead of lowercase</samp></pre>

<p>That‚Äôs it for now. Stay tuned for the second installment of <i>What‚Äôs New in nanoc 2.1</i>, which will discuss changes to the internals of nanoc and their implications.</p>



	</div>
<div class="section" id="nanoc-2-1-coming-soon-july-10th-2008">
<h2>nanoc 2.1: coming soon! <span class="date">(July 10th, 2008)</span>
</h2>
<p>Good news! nanoc 2.1 is (almost) feature-complete. Testing and documentation still need a bit more work, but it‚Äôs well under way. My summer job is slowing down development a bit, so it‚Äôll take a few weeks before nanoc 2.1 is released.</p>

<p>Don‚Äôt worry though! Today is the start of a series of articles describing nanoc 2.1 exciting new features. I‚Äôm calling this appetite-whetting series &#8220;What‚Äôs New in nanoc 2.1&#8221; (which is <a href="http://ryandaigle.com/">not a ripoff at all</a>‚Äîhonestly!). It‚Äôs going to be so cool that I simply <em>had</em> to craft a shiny logo:</p>

<div class="figure wnin21">
	<img src="../../assets/images/whats-new-in-nanoc-21.png" alt="What‚Äôs New in nanoc 2.1">
</div>

<p>Pretty. Maybe I should consider an art career. Anyway‚Ä¶ the first installment is probably going to be published this weekend, depending on how much time I have. Stay tuned!</p>
</div>
</div>
</div>
</div>
<!-- ***** footer ***** -->
<div id="footer">
<p>SeqWare ¬© 2007‚Äì2012 Brian O&#8217;Connor. SeqWare is released under the a <a rel="license" href="http://www.gnu.org/licenses/licenses.html">GNU GPL v3</a>. This site is built using the excellent <a href="http://nanoc.stoneship.org/">nanoc</a> tool and examples with the <a href="http://www.fonts.info/info/press/free-fonts-for-font-face-embedding.htm">Graublau</a> and <a href="http://scripts.sil.org/Gentium">Gentium</a> fonts.</p>
</div>
</body>
</html>
;T;	I"<%= render 'articles' %>;T;
I"¨Ñ
	<div class="section" id="nanoc-2-1-released-august-17th-2008">
<h2>nanoc 2.1 released <span class="date">(August 17th, 2008)</span>
</h2>
<p>nanoc 2.1 is here! Update your nanoc version the usual way:</p>

<pre><kbd><span class="prompt">%</span> gem update nanoc</kbd></pre>

<p>There is no comprehensive changelog, but the "What‚Äôs New in nanoc 2.1" series on this news archive should give you a good idea of what is new (hence the name of the series). Here are the relevant posts:</p>

<ol>
<li><a href="#wnin-1-improved-cli-tool-july-12th-2008">improved CLI tool</a></li>
    <li><a href="#wnin-2-an-open-framework-july-20th-2008">an open framework</a></li>
    <li><a href="#wnin-3-improved-data-sources-july-1st-2008">improved data sources</a></li>
    <li><a href="#wnin-4-routers-july-23rd-2008">routers</a></li>
    <li><a href="#wnin-5-assets-august-9th-2008">assets</a></li>
    <li><a href="#wnin-6-miscellaneous-august-11th-2008">miscellaneous</a></li>
</ol>
<p>nanoc 2.1 is entirely backwards compatible with nanoc 2.0. This means that a site that can be compiled with nanoc 2.0 can be compiled without issues using nanoc 2.1.</p>

<p>A lot has changed between 2.0 and 2.1, so it is possible that you‚Äôll run into bugs. If something odd occurs, please do let me know either on the <a href="http://groups.google.com/group/nanoc/">mailinglist</a>, <a href="http://nanoc.stoneship.org/trac/newticket">on Trac</a> or <s>on Bitbucket</s>. I‚Äôll look into the issue as soon as possible and have it fixed in no time. Thanks for reporting!</p>



	</div><div class="section" id="wnin-6-miscellaneous-august-11th-2008">
<h2>WNin #6: Miscellaneous <span class="date">(August 11th, 2008)</span>
</h2>
<div class="figure wnin21">
	<img src="http://nanoc.stoneship.org/assets/images/whats-new-in-nanoc-21-small.png" alt="What‚Äôs New in nanoc 2.1">
</div>

<p>Welcome to the final installment of <i>What‚Äôs New in nanoc 2.1</i>. In this article I‚Äôll show you several miscellaneous improvements and features I couldn‚Äôt fit elsewhere.</p>

<p>The <strong>autocompiler now uses Rack</strong>, so this is good news if you don‚Äôt like WEBrick and would like to use something else instead. Thin, Mongrel, Ebb, ‚Ä¶ you name it.</p>

<p><strong>Layout processors are gone</strong> entirely. Instead, use filters. Layouts consist of metafiles and content files now, and the meta files determine the filter to be run. This means less code duplication, as there‚Äôs no need to have both e.g. a Haml filter <em>and</em> a Haml layout processor.</p>

<p>A layout only has one attribute, <code>filter</code>, which determines the filter to be run. Here‚Äôs what the meta file of the nanoc site‚Äôs default layout contains, to show you how this works:</p>

<pre><code class="language-yaml">filter: 'erb'</code></pre>

<p><strong>Layouts can be stored hierarchically</strong>. This is useful in case you want to e.g. create a "partials" directory in your layouts directory, in which you‚Äôd store partials you want to render. Or, you could have a directory named "sidebars" in which you store sidebars, in case you want to render different sidebars for different sections on the site.</p>

<p>Here‚Äôs an example that shows how you‚Äôd render the "header" layout, located inside the "partials" directory inside the "layouts" directory:</p>

<pre><code class="language-ruby">&lt;%= render 'partials/header' %&gt;</code></pre>

<p>Nothing really important, but the <code>nanoc_require</code> function is gone‚Äîsimply use the good old <code>require</code> function now.</p>

<p>nanoc is now bundled with <strong>three new filters</strong>: <a href="http://github.com/rtomayko/rdiscount/tree/master">rdiscount</a> (a fast implementation of Markdown), <a href="http://maruku.rubyforge.org/">maruku</a> (an implementation of a Markdown superset) and <a href="http://www.kuwata-lab.com/erubis/">erubis</a> (a fast implementation of eRuby). Because the filter used for processing layouts is no longer determined by the file extension, you can actually use Erubis instead of ERB for layouts now.</p>

<p>A lot of helpers have been bundled with nanoc. There‚Äôs helpers for <a href="http://nanoc.stoneship.org/docs/api/3.1/Nanoc3/Helpers/Blogging.html">blogging</a>, <a href="http://nanoc.stoneship.org/docs/api/3.1/Nanoc3/Helpers/Tagging.html">tagging</a>, <a href="http://nanoc.stoneship.org/docs/api/3.1/Nanoc3/Helpers/Capturing.html">capturing</a>, <a href="http://nanoc.stoneship.org/docs/api/3.1/Nanoc3/Helpers/HTMLEscape.html">HTML-escaping</a>, <a href="http://nanoc.stoneship.org/docs/api/3.1/Nanoc3/Helpers/Render.html">rendering</a>, building <a href="http://nanoc.stoneship.org/docs/api/3.1/Nanoc3/Helpers/XMLSitemap.html">XML sitemaps</a> and <a href="http://nanoc.stoneship.org/docs/api/3.1/Nanoc3/Helpers/LinkTo.html">linking</a>. All of these helpers are quite thoroughly documented so using them should be a breeze. These helpers will first need to be activated before they can be used (except the Render and HTMLEscape ones), which works like this:</p>

<pre><code class="language-ruby">include Nanoc::Helpers::LinkTo</code></pre>

<p>These helpers were previously available as plugins on the <a href="http://nanoc.stoneship.org/trac">wiki</a>, but now they‚Äôre actually bundled so you don‚Äôt have to download them separately. More helpers (and filters) will be added to the standard nanoc distribution later on; contributions are always welcome.</p>

<p>I forgot to mention it before, but <strong>nanoc 2.1 is entirely backwards compatible</strong> with nanoc 2.0. This means that a site that can be compiled with nanoc 2.0 (and doesn‚Äôt show any deprecation warnings) should compile flawlessly using nanoc 2.1.</p>

<p>So, this is the end of the very last installment of <i>What‚Äôs New in nanoc 2.1</i>. I hope you enjoyed it! nanoc 2.1 itself is <em>nearly</em> ready, but still needs a tiny bit of work. With a bit of luck, there‚Äôll be a release at the end of the week. Stay tuned!</p>



	</div><div class="section" id="wnin-5-assets-august-9th-2008">
<h2>WNin #5: Assets <span class="date">(August 9th, 2008)</span>
</h2>
<div class="figure wnin21">
	<img src="/assets/images/whats-new-in-nanoc-21-small.png" alt="What‚Äôs New in nanoc 2.1">
</div>

<p>Welcome to installment #5 of What‚Äôs New in nanoc 2.1. This article will show you two of the biggest new features of nanoc 2.1: <em>asset compilation</em> and <em>multiple representations</em>.</p>

<p>The new <strong>asset compilation</strong> feature allows a site to have assets, which can be run through filters. Assets can be anything‚ÄîSass stylesheets, images, MP3s, videos, and so on. Filters can then compile Sass, rescale images, make images grayscale, change the volume of a MP3 file, play a video backwards (so you get to see the end first), etc. The only limit is your imagination.</p>

<p>nanoc supports two different kinds of assets: <em>textual</em> and <em>binary</em> assets. Textual assets will be compiled by textual filters, which are the filters you already know. An example of a textual asset would be a Sass stylesheet. Binary assets are all assets that aren‚Äôt text. Examples of binary assets include images, sound and music files, videos, etc.</p>

<p>Binary assets require a <strong>new kind of filters called binary filters</strong>. Binary filters, unlike textual filters, do not load assets into memory. This means binary assets can be arbitrarily big.</p>

<p>So how does nanoc handle assets? If you are using the filesystem data source, you can create a directory aptly named <span class="path">assets</span> in your site directory, in which you put your assets. Assets are directories containing the actual asset file and a meta file, exactly like pages.</p>

<p>For example, the nanoc site has an asset named "style", whose directory contains "style.css" and "style.yaml". The attributes in the meta file look like this:</p>

<pre><code class="language-yaml">binary:  false
filters: []</code></pre>

<p>There are only two built-in asset attributes. <code>binary</code> indicates whether the asset is binary or not (in this case it is a textual asset, thus <code>false</code>) and <code>filters</code> is the list of filters to run (empty, in this case).</p>

<p>If the stylesheet had been a Sass one, the attributes would have looked like this:</p>

<pre><code class="language-yaml">binary:  false
filters: [ 'sass' ]</code></pre>

<p>‚Ä¶ which should not be a big surprise.</p>

<p>Textual filters are exactly the same as the filters in nanoc 2.0, so there‚Äôs probably not much point in showing one, but I‚Äôll just do it anyway:</p>

<pre><code class="language-ruby">class Sass &lt; Nanoc::Filter

  identifier :sass

  def run(content)
    require 'sass'

    ::Sass::Engine.new(content).render
  end

end</code></pre>

<p>Binary assets are very similar to textual assets. Simply set <code>binary</code> to <code>true</code> in the meta file and make sure that the list of filters contains only binary filters.</p>

<p>Filters for binary assets are slightly different from textual filters. Firstly, binary filters inherit from <code>Nanoc::BinaryFilter</code> instead of <code>Nanoc::Filter</code>. Secondly, their <code>run</code> method takes a File object and not a string containing the asset content. Additionally, binary filters should return a File object representing the processed file. The original File argument should not be modified (otherwise you‚Äôd lose the original asset).</p>

<p>For example, a binary filter for generating a thumbnail of an image (using <a href="http://docs.seattlerb.org/image_science/">ImageScience</a>) could look like this (the code is non-functional, because the filter has a lot of irrelevant implementation details):</p>

<pre><code class="language-ruby">class ImageScienceThumbnail &lt; Nanoc::BinaryFilter

  identifier :image_science_thumbnail

  def run(file)
    require 'image_science'

    # Get temporary path
    tmp_path = ‚Ä¶

    # Create thumbnail and write it to the temp path
    ‚Ä¶

    # Return thumbnail file
    File.open(tmp_path)
  end

end</code></pre>

<p>The default router (see the <a href="#wnin-4-routers-july-23rd-2008">article on routers</a>) saves compiled assets in an <span class="path">assets</span> directory inside the output directory. It‚Äôs possible to set <var>assets_prefix</var> in the config file to something else such as "/media", or even "" to save assets directly in the output directory.</p>

<p>Now you know how to compile assets.</p>

<p>There is one small issue, though. Generating thumbnails of images is fine, but what if you want to keep the full-size version? There‚Äôs not much point in only having a thumbnail, and not being able to show the full-size image.</p>

<p>This is where <strong>multiple representations</strong> come into play. A single asset can have different representations (or "reps"): a thumbnail rep, a grayscale rep, a full-size rep, ‚Ä¶ Even pages can have multiple reps.</p>

<p>Giving an asset multiple representations is quite easy. In the asset‚Äôs meta file, fill up the list of reps like in this example:</p>

<pre><code class="language-yaml">reps:
  default:
    filters:        []
  thumbnail:
    filters:        [ 'image_science_thumbnail' ]
    thumbnail_size: 100</code></pre>

<p>The asset in this example has two representations: a default one (which is unprocessed) and a thumbnail one (which is run through the <code>image_science_thumbnail</code> filter).</p>

<p>Each representation has its own output file. The name of the output file is determined by the router. The default router appends the representation name to the filename.</p>

<p><a href="#">Last time</a> I wasn‚Äôt able to show you what a real router looks like (because I didn‚Äôt explain multiple representations before), but now I can. Let me just show you the implementation for <code>path_for_asset_rep</code> real quick:</p>

<pre><code class="language-ruby">def path_for_asset_rep(asset_rep)
  # Get data we need
  extension     = asset_rep.attribute_named(:extension)
  modified_path = asset_rep.asset.path[0..-2]
  version       = asset_rep.attribute_named(:version)

  # Initialize path
  assets_prefix = @site.config[:assets_prefix] || '/assets'
  path = assets_prefix + modified_path

  # Add rep name if necessary
  unless asset_rep.name == :default
    path += '-' + asset_rep.name.to_s
  end

  # Add extension
  path += '.' + extension

  # Done
  path
end</code></pre>

<p>The implementation of <code>path_for_page_rep</code> is very similar, so I‚Äôm not showing it here.</p>

<p>The code should be fairly self-explanatory (the <code>[0..-2]</code> is used to strip off the trailing slash). The most important point is that routers determine paths of asset/page <em>representations</em> instead of paths of assets/pages.</p>

<p>So, that‚Äôs what asset compilation and multiple representations look like. The end of the <i>What‚Äôs New In nanoc 2.1</i> series is coming closer, but there is still one more installment to go. The last article in the series will discuss several minor new features and changes. Stay tuned!</p>



	</div><div class="section" id="wnin-4-routers-july-23rd-2008">
<h2>WNin #4: routers <span class="date">(July 23rd, 2008)</span>
</h2>
<div class="figure wnin21">
	<img src="/assets/images/whats-new-in-nanoc-21-small.png" alt="What‚Äôs New in nanoc 2.1">
</div>

<p>Welcome to the 4th installment of What‚Äôs New in nanoc 2.1. This article introduces a new feature in nanoc 2.1 named <em>Routers</em>.</p>

<p>First, a word about <em>paths</em>. Every page has a path starting and ending with a slash. The root and about page‚Äôs paths could be <span class="path">/</span> and <span class="path">/about/</span>, for example. A page‚Äôs path depends on the way it is stored; when using the <i>filesystem</i> or <i>filesystem_combined</i> data sources, the path is determined by the directory hierarchy in the <span class="path">content</span> directory.</p>

<p>Then there‚Äôs a page‚Äôs <em>output path</em> or <em>disk path</em>, which includes the terminating "index.html". It is the path where the compiled page will be written to. The <em>web path</em> is the disk path without the trailing "index.html", for pretty URLs. Unless you‚Äôre using <code>custom_path</code> to set a custom output path, the web path is the same as the page‚Äôs path.</p>

<p>Speaking of pretty URLs: it is now possible to tell nanoc about the <strong>list of index filenames</strong> you want to have stripped of paths. This is quite useful when you want to generate "default.htm" files instead of "index.html" because you‚Äôre running some weird web server. In the site‚Äôs configuration file, simply set <code>index_filenames</code> to the list of index filenames to strip. For example:</p>

<pre><code class="language-yaml">index_filenames:
  - 'index.htm'
  - 'index.html'
  - 'default.htm'</code></pre>

<p>If you want to generate "default.htm" instead of "index.html" files by default, simply set the filename and extension in the global metadata file. You could already do this with nanoc 2.0, but I‚Äôll repeat it because it‚Äôs relevant. Here‚Äôs an example of what the global <span class="path">meta.yaml</span> could look like:</p>

<pre><code class="language-yaml"># Built-in
filename:  'default'
extension: 'htm'
‚Ä¶

# Custom
‚Ä¶</code></pre>

<p>With the list of index filenames including "default.htm", a page with path <span class="path">/foo/</span> will now have a web path <span class="path">/foo/</span> instead of <span class="path">/foo/default.htm</span>. Pretty.</p>

<p>So‚Ä¶ <em>routers</em>. Before 2.1, a page‚Äôs web path was always the same as the page path. A page with path <span class="path">/about/</span> would be written to <span class="path">/about/index.html</span>, for example. <strong>Routers allow paths to be rewritten</strong>; the hierarchy of pages in <span class="path">output</span> can, in fact, be entirely different.</p>

<p>I‚Äôd like to show you what a router looks like, but unfortunately that would require me to explain a new feature of nanoc 2.1 called <em>multiple representations</em>, which I‚Äôm going to discuss in a future installment. So, what I‚Äôm going to do is show fake, non-functional code which should never, ever be used. For illustrative purposes only, mkay?</p>

<p>The default router could, <em>hypothetically</em>, look like this:</p>

<pre><code class="language-ruby">class Default &lt; Nanoc::Router

  identifier :default

  def path_for_page(page)
    # Get data we need
    filename   = page.attribute_named(:filename)
    extension  = page.attribute_named(:extension)
    path       = page.path

    # Build path
    path + filename + '.' + extension
  end

end</code></pre>

<p>What this router does, is quite straightforward. When asking the router for the (disk) path for a given page, it simply returns the path with the filename and extension appended to it. Nothing special. (<em>But remember that it‚Äôs a fake router and won‚Äôt work!</em>)</p>

<p>At this point, routers may not seem very useful yet, but they play a larger role with multiple representations. You‚Äôll see soon. There are a few useful things you can do with routers already, though:</p>

<ul>
<li><p>Write a router that changes the paths of journal articles to something like <span class="path">/blog/year/month/day/title</span>, without having to store pages this way (because storing pages hierarchically like this will require a lot of directories, which isn‚Äôt too pretty). Simply store articles like <span class="path">/blog/year/title</span> and have a router clean up those paths.</p></li>

	<li><p>When building a site in multiple languages, it‚Äôs best to keep a page‚Äôs different languages close together, e.g. <span class="path">/foo/bar/en/</span> and <span class="path">/foo/bar/fr/</span>. When changing a page in one language, it‚Äôs easy to change the page‚Äôs other languages because they‚Äôre close. With routers it‚Äôs easy to rewrite the paths so the language appears at the beginning, e.g. <span class="path">/en/foo/bar/</span> and <span class="path">/fr/foo/bar/</span>, respectively.</p></li>
</ul>
<p>Again, I do realise that not being able to show what a router <em>really</em> looks like (with example code) is annoying, but that‚Äôll all be fixed once I start talking about multiple representations. Don‚Äôt worry.</p>

<p>The next installment will discuss perhaps the two biggest new features new in 2.1, <em>asset compilation</em> and <em>multiple representations</em>. Stay tuned!</p>



	</div><div class="section" id="wnin-3-improved-data-sources-july-21st-2008">
<h2>WNin #3: improved data sources <span class="date">(July 21st, 2008)</span>
</h2>
<div class="figure wnin21">
	<img src="/assets/images/whats-new-in-nanoc-21-small.png" alt="What‚Äôs New in nanoc 2.1">
</div>

<p>This is the third installment of <i>What‚Äôs New in nanoc 2.1</i>. This article discusses the new data sources, which have been improved a lot in nanoc 2.1.</p>

<p>To recap: data sources are classes that tell nanoc where to find site content. Even though you‚Äôll usually stick to storing your pages as files on the filesystem, you may want to store the in a database instead, or maybe simply store them in a different way on the filesystem.</p>

<p>For example, one big difference between nanoc and one of its competitors, webby, is that the latter stores its pages as single files, and not directories. Webby stores its metadata embedded inside pages. nanoc 2.1 comes with a new data source named <i>filesystem_combined</i> which, similar to webby, <strong>stores content and attributes in a single file</strong>. This can clean up the <span class="path">content</span> directory quite a bit.</p>

<p>Here‚Äôs what the default nanoc site looks like with a filesystem_combined data source:</p>

<pre><code class="language-yaml">-----
# Built-in

# Custom
title: Home
-----

&lt;h1&gt;A Brand New nanoc Site&lt;/h1&gt;

‚Ä¶ rest of the content goes here ‚Ä¶</code></pre>

<p>Creating a new site with this new <i>filesystem_combined</i> data source is easy. Just do this (the <kbd>-d</kbd> switch specifies the name of the data source):</p>

<pre><kbd><span class="prompt">%</span> nanoc create_site -d filesystem_combined my_new_site</kbd></pre>

<p>If you want to switch your existing site over to <i>filesystem_combined</i>, you can do that with a <strong>brand new <kbd>switch</kbd> command</strong>, which you invoke like this:</p>

<pre><kbd><span class="prompt">%</span> nanoc switch -d filesystem_combined</kbd></pre>

<p>If your site is stored in a <abbr title="version control system">VCS</abbr> repository such as Subversion, git, Mercurial or Bazaar, you can  <strong>tell nanoc to use this VCS' commands</strong> using the <kbd>-c</kbd> switch. At the moment, nanoc supports svn, git, hg and bzr, but adding support for new VCSes is trivial. As an example, here‚Äôs how you‚Äôd switch to switch to new data source using git:</p>

<pre><kbd><span class="prompt">%</span> nanoc switch -d filesystem_combined -c git</kbd></pre>

<p>If you want to get a list of supported VCSes, use the <strong>new <kbd>info</kbd> command</strong> (which also gives information about available filters, data sources, and more), which outputs something like this:</p>

<pre><kbd><span class="prompt">%</span> nanoc info</kbd>

<samp>VCSes:

  builtin:
    bazaar, bzr         (Nanoc::Extra::VCSes::Bazaar)
    dummy               (Nanoc::Extra::VCSes::Dummy)
    git                 (Nanoc::Extra::VCSes::Git)
    mercurial, hg       (Nanoc::Extra::VCSes::Mercurial)
    subversion, svn     (Nanoc::Extra::VCSes::Subversion)
  custom:
    (none)

‚Ä¶ more stuff here ‚Ä¶</samp></pre>

<p>The original filesystem data source you‚Äôre all used to (which is simply called <i>filesystem</i>) has been updated a bit. <strong>Layouts are now stored as directories</strong> instead of files, and in the new meta file you can specify the name of the filter to use when rendering this layout. The filter used for compiling layouts is no longer dependent on the file extension.</p>

<p>There‚Äôs <strong>a new <kbd>update</kbd> command</strong> to make updating the site content (e.g. updating the way layouts are stored) easier. Here‚Äôs how you‚Äôd use it for a site versioned using Mercurial:</p>

<pre><kbd><span class="prompt">%</span> nanoc update -c hg</kbd></pre>

<p>The data sources now also <strong>allow creating, updating and deleting stored data</strong>. This is probably not very useful for the commandline interface‚Äîafter all, why have <kbd>delete_page</kbd> and <kbd>move_page</kbd> when there‚Äôs the standard unix commands <kbd>rm</kbd> and <kbd>mv</kbd>, respectively‚Äîbut for new frontends (GUI frontend, web-based frontend, ‚Ä¶) this may become quite useful later on.</p>

<p>A last important new feature is <strong>data sources now provide modification times</strong> for the data they read, which makes it possible for nanoc to only compile outdated pages, which creates a nice speed improvement.</p>

<p>So, that‚Äôs what data sources in nanoc 2.1 look like. Stay tuned for the third installment of <i>What‚Äôs New in nanoc 2.1</i>!</p>



	</div><div class="section" id="wnin-2-an-open-framework-july-20th-2008">
<h2>WNin #2: an open framework <span class="date">(July 20th, 2008)</span>
</h2>
<div class="figure wnin21">
	<img src="/assets/images/whats-new-in-nanoc-21-small.png" alt="What‚Äôs New in nanoc 2.1">
</div>

<p>Welcome to installment two of <i>What‚Äôs New in nanoc 2.1</i>! This installment discusses the technical, code-wise differences between this new version and the old 2.0 release.</p>

<p>The first big improvement is that nanoc <strong>is a lot more modular</strong> now. The commandline interface (which was discussed <a href="#wnin-1-improved-cli-tool-july-12th-2008">before</a>) is now very loosely coupled with the backend. This means that it should be fairly easy to rip out the commandline frontend and replace it with something else‚Äîa web frontend (based off Rails or something similar) jumps to mind.</p>

<p>Also important is that nanoc <strong>has a public API now</strong>, which makes manipulating sites a lot easier. For example, it‚Äôs now possible to programmatically generate pages. If you have a blog where all articles are tagged, you can generate tag index pages easily using something like this:</p>

<pre><code class="language-ruby"># Load nanoc site
site = Nanoc::Site.new(YAML.load_file('config.yaml'))
site.load_data
pages = site.pages

# Get all tags used on the site
all_tags = pages.map { |p| p.attribute_named(:tags) }.flatten.compact.uniq

# Get tags for which an index page exists
tags_with_pages = pages.map { |p| p.attribute_named(:tag) }

# Get tags for which no index page exists
tags_without_pages = all_tags - tags_with_pages

# Build pages for each tag
tags_without_pages.each do |t|
  # Buid page
  page = Nanoc::Page.new("Tag: #{tag}", { :tag =&gt; t }, "/blog/tags/#{t}")
  page.site = site

  # Store page
  page.save
end</code></pre>

<p>If that example above confused you, don‚Äôt worry, because‚Ä¶</p>

<p>The nanoc <strong>source code is now really, really well-documented</strong>. Every class and every method now has thorough documentation. Check out the source documentation <a href="/docs/api/3.1/">over here</a>. It should now be a lot easier to tweak nanoc to your own liking (but be sure to submit patches!).</p>

<p>At least as important as the documentation is the <strong>greatly expanded test suite</strong>, which now features 319 unit tests and over 1200 assertions. Test coverage is about 85%. There are still a few tests missing, but once they have been implemented, the test suite will be really strong. The goal is to make sure nanoc is virtually bug free, and to make regression bugs a thing of the past.</p>

<p>Just because I like showing off, here‚Äôs what the test suite run looks like at the moment:</p>

<pre><samp>.......................................................................
.......................................................................
.......................................................................
.......................................................................
...................................
Finished in 9.640952 seconds.

319 tests, 1222 assertions, 0 failures, 0 errors</samp></pre>

<p>Sweet, is it not?</p>

<p>In unrelated (but still useful) news, the nanoc repository is now <s>mirrored over at Bitbucket</s>, which is github-like hosting for Mercurial instead of git. There‚Äôs also an issue tracker over there, which you can use in case you dislike Trac.</p>

<p>That‚Äôs it for installment two. The next installment will briefly describe the changes to the data source API. Stay tuned!</p>



	</div><div class="section" id="wnin-1-improved-cli-tool-july-12th-2008">
<h2>WNin #1: improved CLI tool <span class="date">(July 12th, 2008)</span>
</h2>
<div class="figure wnin21">
	<img src="/assets/images/whats-new-in-nanoc-21-small.png" alt="What‚Äôs New in nanoc 2.1">
</div>

<p>Welcome to the first installment of <i>What‚Äôs New in nanoc 2.1</i>! This installment introduces the first new important feature of nanoc 2.1: the <strong>improved commandline interface</strong>, which is not only a lot prettier but offers a few new features as well.</p>

<p>The first of these new features includes <strong>built-in commandline help</strong> for every command. For example, the <kbd>compile</kbd> command has a help page that looks like this:</p>

<pre><samp>nanoc compile [options] [path]

compile pages and assets of this site

    Compile all pages and all assets of the current site. If a path is given,
    only the page or asset with the given path will be compiled. Additionally,
    only pages and assets that are outdated will be compiled, unless specified
    otherwise with the -a option.

options:

    -a --all        compile all pages and assets, even those that aren‚Äôt
                    outdated</samp></pre>

<p>As you can see, the <kbd>compile</kbd> command has grown up a bit and it‚Äôs now possible to tell nanoc only to compile a single page instead of the entire site. Note that nanoc also no longer compiles pages unless they‚Äôre considered "outdated"‚Äîa real time saver.</p>

<p>Also neat is that <strong>command abbreviations are detected automatically</strong>. The <kbd>co</kbd> command, for example, will be expanded to <kbd>compile</kbd> because there‚Äôs no other command starting with <kbd>co</kbd>. Additionally, if you type something ambiguous, you‚Äôll be notified:</p>

<pre><kbd><span class="prompt">%</span> nanoc c</kbd>
<samp>nanoc: 'c' is ambiguous:
  create_template create_site create_page create_layout compile</samp></pre>

<p><strong>Error reporting has also been improved.</strong> If a compilation error occurs at some point, the stack of what was being compiled will be printed. The following example shows that something went wrong when compiling the "meta" layout, which was rendered from inside the "journal_archive" layout, which in turn was rendered from inside the "journal/2008" page:</p>

<pre><samp>Compilation stack:
  - [layout] /meta/
  - [layout] /journal_archive/
  - [page]   /journal/2008/ (rep default)</samp></pre>

<p>Of course, the actual error message and the Ruby stack trace will be printed as well, which should make debugging any accidental errors on your site quite a bit easier. (Ignore the "rep" thing for now. We‚Äôll talk about that later.)</p>

<p>When passing the <kbd>--verbose</kbd> switch to the <kbd>compile</kbd> command, a pretty table containing some <strong>profiling information</strong> will be printed. Very useful if you want to optimize some of your custom filters. For example, this is the output for my personal web site:</p>

<pre><samp>                        | count    min    avg    max     tot
------------------------+-----------------------------------
                    erb |    95  0.00s  0.01s  0.23s   0.74s
image_science_thumbnail |    69  0.22s  0.27s  0.35s  18.51s
              bluecloth |     2  0.06s  0.10s  0.15s   0.21s
      website_thumbnail |    12  0.25s  0.48s  0.97s   5.80s
            compile_css |     2  0.00s  0.00s  0.00s   0.00s
              rubypants |    53  0.01s  0.03s  0.09s   1.39s
              rdiscount |    11  0.00s  0.00s  0.01s   0.02s</samp></pre>

<p>This shows that the "compile_css" as well as "rdiscount" filters are extremely fast, while the "image_science_thumbnail" and especially the "website_thumbnail" filters are really slow. (Those thumbnail filters are filters that apply to image assets, not to pages‚Äîasset compilation is something that‚Äôll be discussed later).</p>

<p>Last but not least: it‚Äôs now possible to <strong>write your own commands</strong>. Even though <a href="http://rake.rubyforge.org/">rake</a> is sufficient for performing simple tasks, sometimes you need a more advanced tool that allows passing commandline arguments. Now you can write custom commands. Here‚Äôs a "Hello World" example:</p>

<pre><code class="language-ruby">require 'nanoc/cli'

class HelloWorldCommand &lt; Nanoc::CLI::Command

  def name
    'hello_world'
  end

  def aliases
    %w( hw )
  end

  def short_desc
    'print a simple greeting'
  end

  def long_desc
    'Print the "hello world" greeting on the screen, in either ' +
    'lowercase or uppercase. Can also print a custom text.'
  end

  def usage
    "nanoc hello_world [options] [custom_text]"
  end

  def option_definitions
    [
      # --uppercase
      {
        :long =&gt; 'uppercase', :short =&gt; 'u', :argument =&gt; :forbidden,
        :desc =&gt; 'print the text in uppercase instead of lowercase'
      }
    ]
  end

  def run(options, arguments)
    # Get text
    text = (arguments[0] || 'hello world')

    # Print it
    puts (options.has_key?(:uppercase) ? text.upcase : text.downcase)
  end

end</code></pre>

<p>Some example output:</p>

<pre><kbd><span class="prompt">%</span> nanoc hello_world blah</kbd>
<samp>blah</samp>
<kbd><span class="prompt">%</span> nanoc hw -u blah</kbd>
<samp>BLAH</samp>
<kbd><span class="prompt">%</span> nanoc hello -u</kbd>
<samp>HELLO WORLD</samp>
<kbd><span class="prompt">%</span> nanoc hw</kbd>
<samp>hello world</samp></pre>

<p>The auto-generated help page:</p>

<pre><samp>nanoc hello_world [options] [custom_text]

aliases: hw

print a simple greeting

    Print the "hello world" greeting on the screen, in either lowercase or
    uppercase. Can also print a custom text.

options:

    -u --uppercase  print the text in uppercase instead of lowercase</samp></pre>

<p>That‚Äôs it for now. Stay tuned for the second installment of <i>What‚Äôs New in nanoc 2.1</i>, which will discuss changes to the internals of nanoc and their implications.</p>



	</div><div class="section" id="nanoc-2-1-coming-soon-july-10th-2008">
<h2>nanoc 2.1: coming soon! <span class="date">(July 10th, 2008)</span>
</h2>
<p>Good news! nanoc 2.1 is (almost) feature-complete. Testing and documentation still need a bit more work, but it‚Äôs well under way. My summer job is slowing down development a bit, so it‚Äôll take a few weeks before nanoc 2.1 is released.</p>

<p>Don‚Äôt worry though! Today is the start of a series of articles describing nanoc 2.1 exciting new features. I‚Äôm calling this appetite-whetting series "What‚Äôs New in nanoc 2.1" (which is <a href="http://ryandaigle.com/">not a ripoff at all</a>‚Äîhonestly!). It‚Äôs going to be so cool that I simply <em>had</em> to craft a shiny logo:</p>

<div class="figure wnin21">
	<img src="/assets/images/whats-new-in-nanoc-21.png" alt="What‚Äôs New in nanoc 2.1">
</div>

<p>Pretty. Maybe I should consider an art career. Anyway‚Ä¶ the first installment is probably going to be published this weekend, depending on how much time I have. Stay tuned!</p>
</div>;T;I"°Ç
	<h2>nanoc 2.1 released <span class="date">(August 17th, 2008)</span></h2>
<p>nanoc 2.1 is here! Update your nanoc version the usual way:</p>

<pre><kbd><span class="prompt">%</span> gem update nanoc</kbd></pre>

<p>There is no comprehensive changelog, but the "What‚Äôs New in nanoc 2.1" series on this news archive should give you a good idea of what is new (hence the name of the series). Here are the relevant posts:</p>

<ol>
    <li><a href="#wnin-1-improved-cli-tool-july-12th-2008">improved CLI tool</a></li>
    <li><a href="#wnin-2-an-open-framework-july-20th-2008">an open framework</a></li>
    <li><a href="#wnin-3-improved-data-sources-july-1st-2008">improved data sources</a></li>
    <li><a href="#wnin-4-routers-july-23rd-2008">routers</a></li>
    <li><a href="#wnin-5-assets-august-9th-2008">assets</a></li>
    <li><a href="#wnin-6-miscellaneous-august-11th-2008">miscellaneous</a></li>
</ol>

<p>nanoc 2.1 is entirely backwards compatible with nanoc 2.0. This means that a site that can be compiled with nanoc 2.0 can be compiled without issues using nanoc 2.1.</p>

<p>A lot has changed between 2.0 and 2.1, so it is possible that you‚Äôll run into bugs. If something odd occurs, please do let me know either on the <a href="http://groups.google.com/group/nanoc/">mailinglist</a>, <a href="http://nanoc.stoneship.org/trac/newticket">on Trac</a> or <s>on Bitbucket</s>. I‚Äôll look into the issue as soon as possible and have it fixed in no time. Thanks for reporting!</p>



	<h2>WNin #6: Miscellaneous <span class="date">(August 11th, 2008)</span></h2>
<div class="figure wnin21">
	<img src="http://nanoc.stoneship.org/assets/images/whats-new-in-nanoc-21-small.png" alt="What‚Äôs New in nanoc 2.1">
</div>

<p>Welcome to the final installment of <i>What‚Äôs New in nanoc 2.1</i>. In this article I‚Äôll show you several miscellaneous improvements and features I couldn‚Äôt fit elsewhere.</p>

<p>The <strong>autocompiler now uses Rack</strong>, so this is good news if you don‚Äôt like WEBrick and would like to use something else instead. Thin, Mongrel, Ebb, &hellip; you name it.</p>

<p><strong>Layout processors are gone</strong> entirely. Instead, use filters. Layouts consist of metafiles and content files now, and the meta files determine the filter to be run. This means less code duplication, as there‚Äôs no need to have both e.g. a Haml filter <em>and</em> a Haml layout processor.</p>

<p>A layout only has one attribute, <code>filter</code>, which determines the filter to be run. Here‚Äôs what the meta file of the nanoc site‚Äôs default layout contains, to show you how this works:</p>

<pre><code class="language-yaml">filter: 'erb'</code></pre>

<p><strong>Layouts can be stored hierarchically</strong>. This is useful in case you want to e.g. create a "partials" directory in your layouts directory, in which you‚Äôd store partials you want to render. Or, you could have a directory named "sidebars" in which you store sidebars, in case you want to render different sidebars for different sections on the site.</p>

<p>Here‚Äôs an example that shows how you‚Äôd render the "header" layout, located inside the "partials" directory inside the "layouts" directory:</p>

<pre><code class="language-ruby">&lt;%= render 'partials/header' %&gt;</code></pre>

<p>Nothing really important, but the <code>nanoc_require</code> function is gone&mdash;simply use the good old <code>require</code> function now.</p>

<p>nanoc is now bundled with <strong>three new filters</strong>: <a href="http://github.com/rtomayko/rdiscount/tree/master">rdiscount</a> (a fast implementation of Markdown), <a href="http://maruku.rubyforge.org/">maruku</a> (an implementation of a Markdown superset) and <a href="http://www.kuwata-lab.com/erubis/">erubis</a> (a fast implementation of eRuby). Because the filter used for processing layouts is no longer determined by the file extension, you can actually use Erubis instead of ERB for layouts now.</p>

<p>A lot of helpers have been bundled with nanoc. There‚Äôs helpers for <a href="http://nanoc.stoneship.org/docs/api/3.1/Nanoc3/Helpers/Blogging.html">blogging</a>, <a href="http://nanoc.stoneship.org/docs/api/3.1/Nanoc3/Helpers/Tagging.html">tagging</a>, <a href="http://nanoc.stoneship.org/docs/api/3.1/Nanoc3/Helpers/Capturing.html">capturing</a>, <a href="http://nanoc.stoneship.org/docs/api/3.1/Nanoc3/Helpers/HTMLEscape.html">HTML-escaping</a>, <a href="http://nanoc.stoneship.org/docs/api/3.1/Nanoc3/Helpers/Render.html">rendering</a>, building <a href="http://nanoc.stoneship.org/docs/api/3.1/Nanoc3/Helpers/XMLSitemap.html">XML sitemaps</a> and <a href="http://nanoc.stoneship.org/docs/api/3.1/Nanoc3/Helpers/LinkTo.html">linking</a>. All of these helpers are quite thoroughly documented so using them should be a breeze. These helpers will first need to be activated before they can be used (except the Render and HTMLEscape ones), which works like this:</p>

<pre><code class="language-ruby">include Nanoc::Helpers::LinkTo</code></pre>

<p>These helpers were previously available as plugins on the <a href="http://nanoc.stoneship.org/trac">wiki</a>, but now they‚Äôre actually bundled so you don‚Äôt have to download them separately. More helpers (and filters) will be added to the standard nanoc distribution later on; contributions are always welcome.</p>

<p>I forgot to mention it before, but <strong>nanoc 2.1 is entirely backwards compatible</strong> with nanoc 2.0. This means that a site that can be compiled with nanoc 2.0 (and doesn‚Äôt show any deprecation warnings) should compile flawlessly using nanoc 2.1.</p>

<p>So, this is the end of the very last installment of <i>What‚Äôs New in nanoc 2.1</i>. I hope you enjoyed it! nanoc 2.1 itself is <em>nearly</em> ready, but still needs a tiny bit of work. With a bit of luck, there‚Äôll be a release at the end of the week. Stay tuned!</p>



	<h2>WNin #5: Assets <span class="date">(August 9th, 2008)</span></h2>
<div class="figure wnin21">
	<img src="/assets/images/whats-new-in-nanoc-21-small.png" alt="What‚Äôs New in nanoc 2.1">
</div>

<p>Welcome to installment #5 of What‚Äôs New in nanoc 2.1. This article will show you two of the biggest new features of nanoc 2.1: <em>asset compilation</em> and <em>multiple representations</em>.</p>

<p>The new <strong>asset compilation</strong> feature allows a site to have assets, which can be run through filters. Assets can be anything&mdash;Sass stylesheets, images, MP3s, videos, and so on. Filters can then compile Sass, rescale images, make images grayscale, change the volume of a MP3 file, play a video backwards (so you get to see the end first), etc. The only limit is your imagination.</p>

<p>nanoc supports two different kinds of assets: <em>textual</em> and <em>binary</em> assets. Textual assets will be compiled by textual filters, which are the filters you already know. An example of a textual asset would be a Sass stylesheet. Binary assets are all assets that aren‚Äôt text. Examples of binary assets include images, sound and music files, videos, etc.</p>

<p>Binary assets require a <strong>new kind of filters called binary filters</strong>. Binary filters, unlike textual filters, do not load assets into memory. This means binary assets can be arbitrarily big.</p>

<p>So how does nanoc handle assets? If you are using the filesystem data source, you can create a directory aptly named <span class="path">assets</span> in your site directory, in which you put your assets. Assets are directories containing the actual asset file and a meta file, exactly like pages.</p>

<p>For example, the nanoc site has an asset named "style", whose directory contains "style.css" and "style.yaml". The attributes in the meta file look like this:</p>

<pre><code class="language-yaml">binary:  false
filters: []</code></pre>

<p>There are only two built-in asset attributes. <code>binary</code> indicates whether the asset is binary or not (in this case it is a textual asset, thus <code>false</code>) and <code>filters</code> is the list of filters to run (empty, in this case).</p>

<p>If the stylesheet had been a Sass one, the attributes would have looked like this:</p>

<pre><code class="language-yaml">binary:  false
filters: [ 'sass' ]</code></pre>

<p>&hellip; which should not be a big surprise.</p>

<p>Textual filters are exactly the same as the filters in nanoc 2.0, so there‚Äôs probably not much point in showing one, but I‚Äôll just do it anyway:</p>

<pre><code class="language-ruby">class Sass &lt; Nanoc::Filter

  identifier :sass

  def run(content)
    require 'sass'

    ::Sass::Engine.new(content).render
  end

end</code></pre>

<p>Binary assets are very similar to textual assets. Simply set <code>binary</code> to <code>true</code> in the meta file and make sure that the list of filters contains only binary filters.</p>

<p>Filters for binary assets are slightly different from textual filters. Firstly, binary filters inherit from <code>Nanoc::BinaryFilter</code> instead of <code>Nanoc::Filter</code>. Secondly, their <code>run</code> method takes a File object and not a string containing the asset content. Additionally, binary filters should return a File object representing the processed file. The original File argument should not be modified (otherwise you‚Äôd lose the original asset).</p>

<p>For example, a binary filter for generating a thumbnail of an image (using <a href="http://docs.seattlerb.org/image_science/">ImageScience</a>) could look like this (the code is non-functional, because the filter has a lot of irrelevant implementation details):</p>

<pre><code class="language-ruby">class ImageScienceThumbnail &lt; Nanoc::BinaryFilter

  identifier :image_science_thumbnail

  def run(file)
    require 'image_science'

    # Get temporary path
    tmp_path = ‚Ä¶

    # Create thumbnail and write it to the temp path
    ‚Ä¶

    # Return thumbnail file
    File.open(tmp_path)
  end

end</code></pre>

<p>The default router (see the <a href="#wnin-4-routers-july-23rd-2008">article on routers</a>) saves compiled assets in an <span class="path">assets</span> directory inside the output directory. It‚Äôs possible to set <var>assets_prefix</var> in the config file to something else such as "/media", or even "" to save assets directly in the output directory.</p>

<p>Now you know how to compile assets.</p>

<p>There is one small issue, though. Generating thumbnails of images is fine, but what if you want to keep the full-size version? There‚Äôs not much point in only having a thumbnail, and not being able to show the full-size image.</p>

<p>This is where <strong>multiple representations</strong> come into play. A single asset can have different representations (or "reps"): a thumbnail rep, a grayscale rep, a full-size rep, &hellip; Even pages can have multiple reps.</p>

<p>Giving an asset multiple representations is quite easy. In the asset‚Äôs meta file, fill up the list of reps like in this example:</p>

<pre><code class="language-yaml">reps:
  default:
    filters:        []
  thumbnail:
    filters:        [ 'image_science_thumbnail' ]
    thumbnail_size: 100</code></pre>

<p>The asset in this example has two representations: a default one (which is unprocessed) and a thumbnail one (which is run through the <code>image_science_thumbnail</code> filter).</p>

<p>Each representation has its own output file. The name of the output file is determined by the router. The default router appends the representation name to the filename.</p>

<p><a href="#">Last time</a> I wasn‚Äôt able to show you what a real router looks like (because I didn‚Äôt explain multiple representations before), but now I can. Let me just show you the implementation for <code>path_for_asset_rep</code> real quick:</p>

<pre><code class="language-ruby">def path_for_asset_rep(asset_rep)
  # Get data we need
  extension     = asset_rep.attribute_named(:extension)
  modified_path = asset_rep.asset.path[0..-2]
  version       = asset_rep.attribute_named(:version)

  # Initialize path
  assets_prefix = @site.config[:assets_prefix] || '/assets'
  path = assets_prefix + modified_path

  # Add rep name if necessary
  unless asset_rep.name == :default
    path += '-' + asset_rep.name.to_s
  end

  # Add extension
  path += '.' + extension

  # Done
  path
end</code></pre>

<p>The implementation of <code>path_for_page_rep</code> is very similar, so I‚Äôm not showing it here.</p>

<p>The code should be fairly self-explanatory (the <code>[0..-2]</code> is used to strip off the trailing slash). The most important point is that routers determine paths of asset/page <em>representations</em> instead of paths of assets/pages.</p>

<p>So, that‚Äôs what asset compilation and multiple representations look like. The end of the <i>What‚Äôs New In nanoc 2.1</i> series is coming closer, but there is still one more installment to go. The last article in the series will discuss several minor new features and changes. Stay tuned!</p>



	<h2>WNin #4: routers <span class="date">(July 23rd, 2008)</span></h2>
<div class="figure wnin21">
	<img src="/assets/images/whats-new-in-nanoc-21-small.png" alt="What‚Äôs New in nanoc 2.1">
</div>

<p>Welcome to the 4th installment of What‚Äôs New in nanoc 2.1. This article introduces a new feature in nanoc 2.1 named <em>Routers</em>.</p>

<p>First, a word about <em>paths</em>. Every page has a path starting and ending with a slash. The root and about page‚Äôs paths could be <span class="path">/</span> and <span class="path">/about/</span>, for example. A page‚Äôs path depends on the way it is stored; when using the <i>filesystem</i> or <i>filesystem_combined</i> data sources, the path is determined by the directory hierarchy in the <span class="path">content</span> directory.</p>

<p>Then there‚Äôs a page‚Äôs <em>output path</em> or <em>disk path</em>, which includes the terminating "index.html". It is the path where the compiled page will be written to. The <em>web path</em> is the disk path without the trailing "index.html", for pretty URLs. Unless you‚Äôre using <code>custom_path</code> to set a custom output path, the web path is the same as the page‚Äôs path.</p>

<p>Speaking of pretty URLs: it is now possible to tell nanoc about the <strong>list of index filenames</strong> you want to have stripped of paths. This is quite useful when you want to generate "default.htm" files instead of "index.html" because you‚Äôre running some weird web server. In the site‚Äôs configuration file, simply set <code>index_filenames</code> to the list of index filenames to strip. For example:</p>

<pre><code class="language-yaml">index_filenames:
  - 'index.htm'
  - 'index.html'
  - 'default.htm'</code></pre>

<p>If you want to generate "default.htm" instead of "index.html" files by default, simply set the filename and extension in the global metadata file. You could already do this with nanoc 2.0, but I‚Äôll repeat it because it‚Äôs relevant. Here‚Äôs an example of what the global <span class="path">meta.yaml</span> could look like:</p>

<pre><code class="language-yaml"># Built-in
filename:  'default'
extension: 'htm'
‚Ä¶

# Custom
‚Ä¶</code></pre>

<p>With the list of index filenames including "default.htm", a page with path <span class="path">/foo/</span> will now have a web path <span class="path">/foo/</span> instead of <span class="path">/foo/default.htm</span>. Pretty.</p>

<p>So&hellip; <em>routers</em>. Before 2.1, a page‚Äôs web path was always the same as the page path. A page with path <span class="path">/about/</span> would be written to <span class="path">/about/index.html</span>, for example. <strong>Routers allow paths to be rewritten</strong>; the hierarchy of pages in <span class="path">output</span> can, in fact, be entirely different.</p>

<p>I‚Äôd like to show you what a router looks like, but unfortunately that would require me to explain a new feature of nanoc 2.1 called <em>multiple representations</em>, which I‚Äôm going to discuss in a future installment. So, what I‚Äôm going to do is show fake, non-functional code which should never, ever be used. For illustrative purposes only, mkay?</p>

<p>The default router could, <em>hypothetically</em>, look like this:</p>

<pre><code class="language-ruby">class Default &lt; Nanoc::Router

  identifier :default

  def path_for_page(page)
    # Get data we need
    filename   = page.attribute_named(:filename)
    extension  = page.attribute_named(:extension)
    path       = page.path

    # Build path
    path + filename + '.' + extension
  end

end</code></pre>

<p>What this router does, is quite straightforward. When asking the router for the (disk) path for a given page, it simply returns the path with the filename and extension appended to it. Nothing special. (<em>But remember that it‚Äôs a fake router and won‚Äôt work!</em>)</p>

<p>At this point, routers may not seem very useful yet, but they play a larger role with multiple representations. You‚Äôll see soon. There are a few useful things you can do with routers already, though:</p>

<ul>
	<li><p>Write a router that changes the paths of journal articles to something like <span class="path">/blog/year/month/day/title</span>, without having to store pages this way (because storing pages hierarchically like this will require a lot of directories, which isn‚Äôt too pretty). Simply store articles like <span class="path">/blog/year/title</span> and have a router clean up those paths.</p></li>

	<li><p>When building a site in multiple languages, it‚Äôs best to keep a page‚Äôs different languages close together, e.g. <span class="path">/foo/bar/en/</span> and <span class="path">/foo/bar/fr/</span>. When changing a page in one language, it‚Äôs easy to change the page‚Äôs other languages because they‚Äôre close. With routers it‚Äôs easy to rewrite the paths so the language appears at the beginning, e.g. <span class="path">/en/foo/bar/</span> and <span class="path">/fr/foo/bar/</span>, respectively.</p></li>
</ul>

<p>Again, I do realise that not being able to show what a router <em>really</em> looks like (with example code) is annoying, but that‚Äôll all be fixed once I start talking about multiple representations. Don‚Äôt worry.</p>

<p>The next installment will discuss perhaps the two biggest new features new in 2.1, <em>asset compilation</em> and <em>multiple representations</em>. Stay tuned!</p>



	<h2>WNin #3: improved data sources <span class="date">(July 21st, 2008)</span></h2>
<div class="figure wnin21">
	<img src="/assets/images/whats-new-in-nanoc-21-small.png" alt="What‚Äôs New in nanoc 2.1">
</div>

<p>This is the third installment of <i>What‚Äôs New in nanoc 2.1</i>. This article discusses the new data sources, which have been improved a lot in nanoc 2.1.</p>

<p>To recap: data sources are classes that tell nanoc where to find site content. Even though you‚Äôll usually stick to storing your pages as files on the filesystem, you may want to store the in a database instead, or maybe simply store them in a different way on the filesystem.</p>

<p>For example, one big difference between nanoc and one of its competitors, webby, is that the latter stores its pages as single files, and not directories. Webby stores its metadata embedded inside pages. nanoc 2.1 comes with a new data source named <i>filesystem_combined</i> which, similar to webby, <strong>stores content and attributes in a single file</strong>. This can clean up the <span class="path">content</span> directory quite a bit.</p>

<p>Here‚Äôs what the default nanoc site looks like with a filesystem_combined data source:</p>

<pre><code class="language-yaml">-----
# Built-in

# Custom
title: Home
-----

&lt;h1&gt;A Brand New nanoc Site&lt;/h1&gt;

‚Ä¶ rest of the content goes here ‚Ä¶</code></pre>

<p>Creating a new site with this new <i>filesystem_combined</i> data source is easy. Just do this (the <kbd>-d</kbd> switch specifies the name of the data source):</p>

<pre><kbd><span class="prompt">%</span> nanoc create_site -d filesystem_combined my_new_site</kbd></pre>

<p>If you want to switch your existing site over to <i>filesystem_combined</i>, you can do that with a <strong>brand new <kbd>switch</kbd> command</strong>, which you invoke like this:</p>

<pre><kbd><span class="prompt">%</span> nanoc switch -d filesystem_combined</kbd></pre>

<p>If your site is stored in a <abbr title="version control system">VCS</abbr> repository such as Subversion, git, Mercurial or Bazaar, you can  <strong>tell nanoc to use this VCS' commands</strong> using the <kbd>-c</kbd> switch. At the moment, nanoc supports svn, git, hg and bzr, but adding support for new VCSes is trivial. As an example, here‚Äôs how you‚Äôd switch to switch to new data source using git:</p>

<pre><kbd><span class="prompt">%</span> nanoc switch -d filesystem_combined -c git</kbd></pre>

<p>If you want to get a list of supported VCSes, use the <strong>new <kbd>info</kbd> command</strong> (which also gives information about available filters, data sources, and more), which outputs something like this:</p>

<pre><kbd><span class="prompt">%</span> nanoc info</kbd>

<samp>VCSes:

  builtin:
    bazaar, bzr         (Nanoc::Extra::VCSes::Bazaar)
    dummy               (Nanoc::Extra::VCSes::Dummy)
    git                 (Nanoc::Extra::VCSes::Git)
    mercurial, hg       (Nanoc::Extra::VCSes::Mercurial)
    subversion, svn     (Nanoc::Extra::VCSes::Subversion)
  custom:
    (none)

‚Ä¶ more stuff here ‚Ä¶</samp></pre>

<p>The original filesystem data source you‚Äôre all used to (which is simply called <i>filesystem</i>) has been updated a bit. <strong>Layouts are now stored as directories</strong> instead of files, and in the new meta file you can specify the name of the filter to use when rendering this layout. The filter used for compiling layouts is no longer dependent on the file extension.</p>

<p>There‚Äôs <strong>a new <kbd>update</kbd> command</strong> to make updating the site content (e.g. updating the way layouts are stored) easier. Here‚Äôs how you‚Äôd use it for a site versioned using Mercurial:</p>

<pre><kbd><span class="prompt">%</span> nanoc update -c hg</kbd></pre>

<p>The data sources now also <strong>allow creating, updating and deleting stored data</strong>. This is probably not very useful for the commandline interface&mdash;after all, why have <kbd>delete_page</kbd> and <kbd>move_page</kbd> when there‚Äôs the standard unix commands <kbd>rm</kbd> and <kbd>mv</kbd>, respectively&mdash;but for new frontends (GUI frontend, web-based frontend, ‚Ä¶) this may become quite useful later on.</p>

<p>A last important new feature is <strong>data sources now provide modification times</strong> for the data they read, which makes it possible for nanoc to only compile outdated pages, which creates a nice speed improvement.</p>

<p>So, that‚Äôs what data sources in nanoc 2.1 look like. Stay tuned for the third installment of <i>What‚Äôs New in nanoc 2.1</i>!</p>



	<h2>WNin #2: an open framework <span class="date">(July 20th, 2008)</span></h2>
<div class="figure wnin21">
	<img src="/assets/images/whats-new-in-nanoc-21-small.png" alt="What‚Äôs New in nanoc 2.1">
</div>

<p>Welcome to installment two of <i>What‚Äôs New in nanoc 2.1</i>! This installment discusses the technical, code-wise differences between this new version and the old 2.0 release.</p>

<p>The first big improvement is that nanoc <strong>is a lot more modular</strong> now. The commandline interface (which was discussed <a href="#wnin-1-improved-cli-tool-july-12th-2008">before</a>) is now very loosely coupled with the backend. This means that it should be fairly easy to rip out the commandline frontend and replace it with something else&mdash;a web frontend (based off Rails or something similar) jumps to mind.</p>

<p>Also important is that nanoc <strong>has a public API now</strong>, which makes manipulating sites a lot easier. For example, it‚Äôs now possible to programmatically generate pages. If you have a blog where all articles are tagged, you can generate tag index pages easily using something like this:</p>

<pre><code class="language-ruby"># Load nanoc site
site = Nanoc::Site.new(YAML.load_file('config.yaml'))
site.load_data
pages = site.pages

# Get all tags used on the site
all_tags = pages.map { |p| p.attribute_named(:tags) }.flatten.compact.uniq

# Get tags for which an index page exists
tags_with_pages = pages.map { |p| p.attribute_named(:tag) }

# Get tags for which no index page exists
tags_without_pages = all_tags - tags_with_pages

# Build pages for each tag
tags_without_pages.each do |t|
  # Buid page
  page = Nanoc::Page.new("Tag: #{tag}", { :tag => t }, "/blog/tags/#{t}")
  page.site = site

  # Store page
  page.save
end</code></pre>

<p>If that example above confused you, don‚Äôt worry, because&hellip;</p>

<p>The nanoc <strong>source code is now really, really well-documented</strong>. Every class and every method now has thorough documentation. Check out the source documentation <a href="/docs/api/3.1/">over here</a>. It should now be a lot easier to tweak nanoc to your own liking (but be sure to submit patches!).</p>

<p>At least as important as the documentation is the <strong>greatly expanded test suite</strong>, which now features 319 unit tests and over 1200 assertions. Test coverage is about 85%. There are still a few tests missing, but once they have been implemented, the test suite will be really strong. The goal is to make sure nanoc is virtually bug free, and to make regression bugs a thing of the past.</p>

<p>Just because I like showing off, here‚Äôs what the test suite run looks like at the moment:</p>

<pre><samp>.......................................................................
.......................................................................
.......................................................................
.......................................................................
...................................
Finished in 9.640952 seconds.

319 tests, 1222 assertions, 0 failures, 0 errors</samp></pre>

<p>Sweet, is it not?</p>

<p>In unrelated (but still useful) news, the nanoc repository is now <s>mirrored over at Bitbucket</s>, which is github-like hosting for Mercurial instead of git. There‚Äôs also an issue tracker over there, which you can use in case you dislike Trac.</p>

<p>That‚Äôs it for installment two. The next installment will briefly describe the changes to the data source API. Stay tuned!</p>



	<h2>WNin #1: improved CLI tool <span class="date">(July 12th, 2008)</span></h2>
<div class="figure wnin21">
	<img src="/assets/images/whats-new-in-nanoc-21-small.png" alt="What‚Äôs New in nanoc 2.1">
</div>

<p>Welcome to the first installment of <i>What‚Äôs New in nanoc 2.1</i>! This installment introduces the first new important feature of nanoc 2.1: the <strong>improved commandline interface</strong>, which is not only a lot prettier but offers a few new features as well.</p>

<p>The first of these new features includes <strong>built-in commandline help</strong> for every command. For example, the <kbd>compile</kbd> command has a help page that looks like this:</p>

<pre><samp>nanoc compile [options] [path]

compile pages and assets of this site

    Compile all pages and all assets of the current site. If a path is given,
    only the page or asset with the given path will be compiled. Additionally,
    only pages and assets that are outdated will be compiled, unless specified
    otherwise with the -a option.

options:

    -a --all        compile all pages and assets, even those that aren‚Äôt
                    outdated</samp></pre>

<p>As you can see, the <kbd>compile</kbd> command has grown up a bit and it‚Äôs now possible to tell nanoc only to compile a single page instead of the entire site. Note that nanoc also no longer compiles pages unless they‚Äôre considered "outdated"‚Äîa real time saver.</p>

<p>Also neat is that <strong>command abbreviations are detected automatically</strong>. The <kbd>co</kbd> command, for example, will be expanded to <kbd>compile</kbd> because there‚Äôs no other command starting with <kbd>co</kbd>. Additionally, if you type something ambiguous, you‚Äôll be notified:</p>

<pre><kbd><span class="prompt">%</span> nanoc c</kbd>
<samp>nanoc: 'c' is ambiguous:
  create_template create_site create_page create_layout compile</samp></pre>

<p><strong>Error reporting has also been improved.</strong> If a compilation error occurs at some point, the stack of what was being compiled will be printed. The following example shows that something went wrong when compiling the "meta" layout, which was rendered from inside the "journal_archive" layout, which in turn was rendered from inside the "journal/2008" page:</p>

<pre><samp>Compilation stack:
  - [layout] /meta/
  - [layout] /journal_archive/
  - [page]   /journal/2008/ (rep default)</samp></pre>

<p>Of course, the actual error message and the Ruby stack trace will be printed as well, which should make debugging any accidental errors on your site quite a bit easier. (Ignore the "rep" thing for now. We‚Äôll talk about that later.)</p>

<p>When passing the <kbd>--verbose</kbd> switch to the <kbd>compile</kbd> command, a pretty table containing some <strong>profiling information</strong> will be printed. Very useful if you want to optimize some of your custom filters. For example, this is the output for my personal web site:</p>

<pre><samp>                        | count    min    avg    max     tot
------------------------+-----------------------------------
                    erb |    95  0.00s  0.01s  0.23s   0.74s
image_science_thumbnail |    69  0.22s  0.27s  0.35s  18.51s
              bluecloth |     2  0.06s  0.10s  0.15s   0.21s
      website_thumbnail |    12  0.25s  0.48s  0.97s   5.80s
            compile_css |     2  0.00s  0.00s  0.00s   0.00s
              rubypants |    53  0.01s  0.03s  0.09s   1.39s
              rdiscount |    11  0.00s  0.00s  0.01s   0.02s</samp></pre>

<p>This shows that the "compile_css" as well as "rdiscount" filters are extremely fast, while the "image_science_thumbnail" and especially the "website_thumbnail" filters are really slow. (Those thumbnail filters are filters that apply to image assets, not to pages‚Äîasset compilation is something that‚Äôll be discussed later).</p>

<p>Last but not least: it‚Äôs now possible to <strong>write your own commands</strong>. Even though <a href="http://rake.rubyforge.org/">rake</a> is sufficient for performing simple tasks, sometimes you need a more advanced tool that allows passing commandline arguments. Now you can write custom commands. Here‚Äôs a "Hello World" example:</p>

<pre><code class="language-ruby">require 'nanoc/cli'

class HelloWorldCommand &lt; Nanoc::CLI::Command

  def name
    'hello_world'
  end

  def aliases
    %w( hw )
  end

  def short_desc
    'print a simple greeting'
  end

  def long_desc
    'Print the "hello world" greeting on the screen, in either ' +
    'lowercase or uppercase. Can also print a custom text.'
  end

  def usage
    "nanoc hello_world [options] [custom_text]"
  end

  def option_definitions
    [
      # --uppercase
      {
        :long => 'uppercase', :short => 'u', :argument => :forbidden,
        :desc => 'print the text in uppercase instead of lowercase'
      }
    ]
  end

  def run(options, arguments)
    # Get text
    text = (arguments[0] || 'hello world')

    # Print it
    puts (options.has_key?(:uppercase) ? text.upcase : text.downcase)
  end

end</code></pre>

<p>Some example output:</p>

<pre><kbd><span class="prompt">%</span> nanoc hello_world blah</kbd>
<samp>blah</samp>
<kbd><span class="prompt">%</span> nanoc hw -u blah</kbd>
<samp>BLAH</samp>
<kbd><span class="prompt">%</span> nanoc hello -u</kbd>
<samp>HELLO WORLD</samp>
<kbd><span class="prompt">%</span> nanoc hw</kbd>
<samp>hello world</samp></pre>

<p>The auto-generated help page:</p>

<pre><samp>nanoc hello_world [options] [custom_text]

aliases: hw

print a simple greeting

    Print the "hello world" greeting on the screen, in either lowercase or
    uppercase. Can also print a custom text.

options:

    -u --uppercase  print the text in uppercase instead of lowercase</samp></pre>

<p>That‚Äôs it for now. Stay tuned for the second installment of <i>What‚Äôs New in nanoc 2.1</i>, which will discuss changes to the internals of nanoc and their implications.</p>



	<h2>nanoc 2.1: coming soon! <span class="date">(July 10th, 2008)</span></h2>
<p>Good news! nanoc 2.1 is (almost) feature-complete. Testing and documentation still need a bit more work, but it‚Äôs well under way. My summer job is slowing down development a bit, so it‚Äôll take a few weeks before nanoc 2.1 is released.</p>

<p>Don‚Äôt worry though! Today is the start of a series of articles describing nanoc 2.1 exciting new features. I‚Äôm calling this appetite-whetting series "What‚Äôs New in nanoc 2.1" (which is <a href="http://ryandaigle.com/">not a ripoff at all</a>&mdash;honestly!). It‚Äôs going to be so cool that I simply <em>had</em> to craft a shiny logo:</p>

<div class="figure wnin21">
	<img src="/assets/images/whats-new-in-nanoc-21.png" alt="What‚Äôs New in nanoc 2.1">
</div>

<p>Pretty. Maybe I should consider an art career. Anyway‚Ä¶ the first installment is probably going to be published this weekend, depending on how much time I have. Stay tuned!</p>



;T;@‡"/blog/22/{;{
;I"<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<title>nanoc ‚Ä∫ Articles about v2.2</title>
<meta content="nanoc 3.4.0" name="generator">
<link href="../../assets/style-v17.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://feeds.feedburner.com/nanoc" rel="alternate" title="The nanoc Blog" type="application/atom+xml">
<script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-15639968-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script>
</head>
<body>
<div class="wrapper">
<!-- ***** navigation ***** -->
<div class="nav">
<ol>
<li><a href="../../"><span>Home</span></a></li>
<li><a href="../"><span>News</span></a></li>
<li><a href="../../docs/"><span>Documentation</span></a></li>
<li><a href="../../community/"><span>Community</span></a></li>
</ol>
</div>
<!-- ***** sidebar ***** -->
<div class="side">
<ol>
<li><a href="../13/"><span>Articles about v3.4</span></a></li>
<li><a href="../12/"><span>Articles about v0.12.x</span></a></li>
</ol>
</div>
<!-- ***** body ***** -->
<div class="body">
<div class="article">
<div class="header">
<h1>Articles about v2.2</h1>
</div>

	<div class="section" id="nanoc-2-2-released-april-6th-2009">
<h2>nanoc 2.2 released <span class="date">(April 6th, 2009)</span>
</h2>
<p>nanoc 2.2 has arrived. This release contains a handful of new features. nanoc 2.2 is not quite as big as 2.1 was, and it is mostly backward compatible.</p>

<p>nanoc <strong>commands now inherit from <code>Cri::Command</code> instead of <code>Nanoc::CLI::Command</code></strong>. Cri (Commandline Ruby Interface or something) is a library for building commandline applications that was derived from nanoc‚Äôs commandline interface. If you have custom commands defined in your site, you will need to update them to inherit from <code>Cri::Command</code> instead.</p>

<p>The <kbd>compile</kbd> command now takes <strong><kbd>--pages</kbd> and <kbd>--assets</kbd> commandline switches</strong> which tell the compiler to only compile pages or assets (very useful if you have a lot of assets and only want to recompile some pages).</p>

<p>Windows users may find the <strong>new <kbd>--no-color</kbd> commandline switch</strong> useful. This switch disables ANSI color codes, which should make nanoc‚Äôs terminal output a lot nicer to read.</p>

<p>The compiler now <strong>compiles <em>all</em> pages and assets by default</strong>‚Äînot just outdated ones. In other words, the <kbd>--all</kbd> switch is on by default. To compile only outdated pages, use <kbd>--only-outdated</kbd>. nanoc‚Äôs algorithm for finding out which pages/assets are outdated simply isn‚Äôt smart enough (yet).</p>

<p><strong>Stack traces are a lot more informative now</strong>. When an exception occurs, the stack trace will show the exact page/asset/layout and line number where the error happened.</p>

<p>When laying out a page, the current layout is accessible through the <strong>new <code>@layout</code> variable</strong>.</p>

<p>The Blogging helper‚Äôs <code>atom_feed</code> method now takes <strong>new <code>:content_proc</code>, <code>:excerpt_proc</code> and <code>:articles</code> parameters</strong>. This allows atom feeds to be constructed with a custom set of articles, or atom feeds where the excerpt is automatically generated based on the content, etc. See the <a href="http://nanoc.stoneship.org/docs/api/3.1/Nanoc3/Helpers/Blogging.html">Blogging helper documentation</a> for more information.</p>

<p>There is a <strong>new Rainpress filter</strong>, which compresses CSS using the <a href="http://code.google.com/p/rainpress/">Rainpress</a> library.</p>

<p>The LinkTo helper has a <strong>new <code>relative_path_to</code> function</strong>, which generates a relative path to the given page/asset or path. This may not be very useful by itself, but the <strong>new RelativizePaths filter</strong>, which makes all paths in all HTML and CSS files relative, should be quite useful for those who want to deploy their site in subdirectory instead of at the root of a web site.</p>

<p>Last, but not least, the <strong>new Filtering helper</strong> allows parts of a page to be filtered. Check out the <a href="http://nanoc.stoneship.org/docs/api/3.1/Nanoc3/Helpers/Filtering.html">Filtering helper documentation</a> for details. Here‚Äôs an example of how it could be used:</p>

<pre><code class="language-html"><span class="error">&lt;</span>% filter :rubypants do %<span class="error">&gt;</span>
  Here‚Äôs some text‚Ä¶
<span class="error">&lt;</span>% end %<span class="error">&gt;</span></code></pre>

<p>You can, as always, update your copy of nanoc by issuing the &#8220;gem update&#8221; command, like this:</p>

<pre><span class="prompt">%</span> <kbd>gem update nanoc</kbd></pre>

<p>If you have any issues with this nanoc release, do let me know on the <a href="http://groups.google.com/group/nanoc/">mailinglist</a> or on the <a href="irc://chat.freenode.net/#nanoc">IRC channel</a>. Enjoy!</p>
</div>
</div>
</div>
</div>
<!-- ***** footer ***** -->
<div id="footer">
<p>SeqWare ¬© 2007‚Äì2012 Brian O&#8217;Connor. SeqWare is released under the a <a rel="license" href="http://www.gnu.org/licenses/licenses.html">GNU GPL v3</a>. This site is built using the excellent <a href="http://nanoc.stoneship.org/">nanoc</a> tool and examples with the <a href="http://www.fonts.info/info/press/free-fonts-for-font-face-embedding.htm">Graublau</a> and <a href="http://scripts.sil.org/Gentium">Gentium</a> fonts.</p>
</div>
</body>
</html>
;T;	I"<%= render 'articles' %>;T;
I"î
	<div class="section" id="nanoc-2-2-released-april-6th-2009">
<h2>nanoc 2.2 released <span class="date">(April 6th, 2009)</span>
</h2>
<p>nanoc 2.2 has arrived. This release contains a handful of new features. nanoc 2.2 is not quite as big as 2.1 was, and it is mostly backward compatible.</p>

<p>nanoc <strong>commands now inherit from <code>Cri::Command</code> instead of <code>Nanoc::CLI::Command</code></strong>. Cri (Commandline Ruby Interface or something) is a library for building commandline applications that was derived from nanoc‚Äôs commandline interface. If you have custom commands defined in your site, you will need to update them to inherit from <code>Cri::Command</code> instead.</p>

<p>The <kbd>compile</kbd> command now takes <strong><kbd>--pages</kbd> and <kbd>--assets</kbd> commandline switches</strong> which tell the compiler to only compile pages or assets (very useful if you have a lot of assets and only want to recompile some pages).</p>

<p>Windows users may find the <strong>new <kbd>--no-color</kbd> commandline switch</strong> useful. This switch disables ANSI color codes, which should make nanoc‚Äôs terminal output a lot nicer to read.</p>

<p>The compiler now <strong>compiles <em>all</em> pages and assets by default</strong>‚Äînot just outdated ones. In other words, the <kbd>--all</kbd> switch is on by default. To compile only outdated pages, use <kbd>--only-outdated</kbd>. nanoc‚Äôs algorithm for finding out which pages/assets are outdated simply isn‚Äôt smart enough (yet).</p>

<p><strong>Stack traces are a lot more informative now</strong>. When an exception occurs, the stack trace will show the exact page/asset/layout and line number where the error happened.</p>

<p>When laying out a page, the current layout is accessible through the <strong>new <code>@layout</code> variable</strong>.</p>

<p>The Blogging helper‚Äôs <code>atom_feed</code> method now takes <strong>new <code>:content_proc</code>, <code>:excerpt_proc</code> and <code>:articles</code> parameters</strong>. This allows atom feeds to be constructed with a custom set of articles, or atom feeds where the excerpt is automatically generated based on the content, etc. See the <a href="http://nanoc.stoneship.org/docs/api/3.1/Nanoc3/Helpers/Blogging.html">Blogging helper documentation</a> for more information.</p>

<p>There is a <strong>new Rainpress filter</strong>, which compresses CSS using the <a href="http://code.google.com/p/rainpress/">Rainpress</a> library.</p>

<p>The LinkTo helper has a <strong>new <code>relative_path_to</code> function</strong>, which generates a relative path to the given page/asset or path. This may not be very useful by itself, but the <strong>new RelativizePaths filter</strong>, which makes all paths in all HTML and CSS files relative, should be quite useful for those who want to deploy their site in subdirectory instead of at the root of a web site.</p>

<p>Last, but not least, the <strong>new Filtering helper</strong> allows parts of a page to be filtered. Check out the <a href="http://nanoc.stoneship.org/docs/api/3.1/Nanoc3/Helpers/Filtering.html">Filtering helper documentation</a> for details. Here‚Äôs an example of how it could be used:</p>

<pre><code class="language-html">&lt;% filter :rubypants do %&gt;
  Here‚Äôs some text‚Ä¶
&lt;% end %&gt;</code></pre>

<p>You can, as always, update your copy of nanoc by issuing the "gem update" command, like this:</p>

<pre><span class="prompt">%</span> <kbd>gem update nanoc</kbd></pre>

<p>If you have any issues with this nanoc release, do let me know on the <a href="http://groups.google.com/group/nanoc/">mailinglist</a> or on the <a href="irc://chat.freenode.net/#nanoc">IRC channel</a>. Enjoy!</p>
</div>;T;I"Q
	<h2>nanoc 2.2 released <span class="date">(April 6th, 2009)</span></h2>
<p>nanoc 2.2 has arrived. This release contains a handful of new features. nanoc 2.2 is not quite as big as 2.1 was, and it is mostly backward compatible.</p>

<p>nanoc <strong>commands now inherit from <code>Cri::Command</code> instead of <code>Nanoc::CLI::Command</code></strong>. Cri (Commandline Ruby Interface or something) is a library for building commandline applications that was derived from nanoc‚Äôs commandline interface. If you have custom commands defined in your site, you will need to update them to inherit from <code>Cri::Command</code> instead.</p>

<p>The <kbd>compile</kbd> command now takes <strong><kbd>--pages</kbd> and <kbd>--assets</kbd> commandline switches</strong> which tell the compiler to only compile pages or assets (very useful if you have a lot of assets and only want to recompile some pages).</p>

<p>Windows users may find the <strong>new <kbd>--no-color</kbd> commandline switch</strong> useful. This switch disables ANSI color codes, which should make nanoc‚Äôs terminal output a lot nicer to read.</p>

<p>The compiler now <strong>compiles <em>all</em> pages and assets by default</strong>&mdash;not just outdated ones. In other words, the <kbd>--all</kbd> switch is on by default. To compile only outdated pages, use <kbd>--only-outdated</kbd>. nanoc‚Äôs algorithm for finding out which pages/assets are outdated simply isn‚Äôt smart enough (yet).</p>

<p><strong>Stack traces are a lot more informative now</strong>. When an exception occurs, the stack trace will show the exact page/asset/layout and line number where the error happened.</p>

<p>When laying out a page, the current layout is accessible through the <strong>new <code>@layout</code> variable</strong>.</p>

<p>The Blogging helper‚Äôs <code>atom_feed</code> method now takes <strong>new <code>:content_proc</code>, <code>:excerpt_proc</code> and <code>:articles</code> parameters</strong>. This allows atom feeds to be constructed with a custom set of articles, or atom feeds where the excerpt is automatically generated based on the content, etc. See the <a href="http://nanoc.stoneship.org/docs/api/3.1/Nanoc3/Helpers/Blogging.html">Blogging helper documentation</a> for more information.</p>

<p>There is a <strong>new Rainpress filter</strong>, which compresses CSS using the <a href="http://code.google.com/p/rainpress/">Rainpress</a> library.</p>

<p>The LinkTo helper has a <strong>new <code>relative_path_to</code> function</strong>, which generates a relative path to the given page/asset or path. This may not be very useful by itself, but the <strong>new RelativizePaths filter</strong>, which makes all paths in all HTML and CSS files relative, should be quite useful for those who want to deploy their site in subdirectory instead of at the root of a web site.</p>

<p>Last, but not least, the <strong>new Filtering helper</strong> allows parts of a page to be filtered. Check out the <a href="http://nanoc.stoneship.org/docs/api/3.1/Nanoc3/Helpers/Filtering.html">Filtering helper documentation</a> for details. Here‚Äôs an example of how it could be used:</p>

<pre><code class="language-html">&lt;% filter :rubypants do %>
  Here‚Äôs some text‚Ä¶
&lt;% end %></code></pre>

<p>You can, as always, update your copy of nanoc by issuing the "gem update" command, like this:</p>

<pre><span class="prompt">%</span> <kbd>gem update nanoc</kbd></pre>

<p>If you have any issues with this nanoc release, do let me know on the <a href="http://groups.google.com/group/nanoc/">mailinglist</a> or on the <a href="irc://chat.freenode.net/#nanoc">IRC channel</a>. Enjoy!</p>



;T;@Á"8/static/assets/fonts/gentium-basic-bold-italic.ttf/{;{ "3/static/assets/fonts/gentium-basic-italic.eot/{;{ "0/static/assets/fonts/graublau-web-bold.eot/{;{ "1/static/assets/fonts/gentium-basic-bold.eot/{;{ "+/static/assets/fonts/graublau-web.otf/{;{ "3/static/assets/fonts/gentium-basic-italic.ttf/{;{ ",/static/assets/fonts/gentium-basic.ttf/{;{ "+/static/assets/fonts/graublau-web.eot/{;{ ",/static/assets/fonts/gentium-basic.eot/{;{ "1/static/assets/fonts/gentium-basic-bold.ttf/{;{ "0/static/assets/fonts/graublau-web-bold.otf/{;{ "8/static/assets/fonts/gentium-basic-bold-italic.eot/{;{ "5/static/assets/images/tutorial/default-site.png/{;{ "./static/assets/images/triangle-right.gif/{;{ "//static/assets/images/screenshot-home.png/{;{ "?/static/assets/images/manual/item_compilation_diagram.png/{;{ "-/static/assets/images/triangle-left.gif/{;{ "5/static/assets/images/whats-new-in-nanoc-21.png/{;{ "$/static/assets/images/logo.png/{;{ ";/static/assets/images/whats-new-in-nanoc-21-small.png/{;{ "$/static/assets/images/grid.png/{;{ "*/static/assets/images/nav-bottom.png/{;{ "//static/assets/images/features/secure.png/{;{ "1/static/assets/images/features/flexible.png/{;{ "4/static/assets/images/features/previewable.png/{;{ "-/static/assets/images/features/fast.png/{;{ "3/static/assets/images/features/extensible.png/{;{ "2/static/pub/update_to_filesystem_compact.txt/{;{ "/assets/style/screen/{;{;I"‚!@charset "UTF-8";@font-face{font-family:"Graublau Web";src:url(fonts/graublau-web.eot);src:local("Graublau Web"),local("Graublau Web Regular"),local("GraublauWeb"),local("GraublauWeb-Regular"),url(fonts/graublau-web.otf) format("opentype")}@font-face{font-family:"Graublau Web";font-weight:700;src:url(fonts/graublau-web-bold.eot);src:local("Graublau Web Bold"),local("GraublauWeb-Bold"),url(fonts/graublau-web-bold.otf) format("opentype")}@font-face{font-family:"Gentium";src:url(fonts/gentium-basic.eot);src:local("Gentium Basic"),local("Gentium Basic Regular"),local("GentiumBasic"),local("GentiumBasic-Regular"),url(fonts/gentium-basic.ttf) format("truetype")}@font-face{font-family:"Gentium";font-style:italic;src:url(fonts/gentium-basic-italic.eot);src:local("Gentium Basic Italic"),local("GentiumBasic-Italic"),url(fonts/gentium-basic-italic.ttf) format("truetype")}@font-face{font-family:"Gentium";font-weight:700;src:url(fonts/gentium-basic-bold.eot);src:local("Gentium Basic Bold"),local("GentiumBasic-Bold"),url(fonts/gentium-basic-bold.ttf) format("truetype")}@font-face{font-family:"Gentium";font-weight:700;font-style:italic;src:url(fonts/gentium-basic-bold-italic.eot);src:local("Gentium Basic Bold Italic"),local("GentiumBasic-BoldItalic"),url(fonts/gentium-basic-bold-italic.ttf) format("truetype")}*{margin:0;padding:0;border:0}body{background:#fff;border-top:10px solid #153b66;font-family:"Gentium Basic",Gentium,Palatino,Georgia,serif}.wrapper{width:940px;margin:0 auto;position:relative;background:url(images/grid2.png) top center repeat-y}.nav{position:absolute;top:0;left:0}.nav li{display:inline}.nav a,.nav .active{margin:0 2px;padding:43px 3px 3px 13px;background:url(images/triangle-left.gif) bottom left no-repeat;font-family:Helvetica,Arial,"Trebuchet MS",sans-serif;font-weight:700;font-size:12px;text-transform:uppercase;line-height:18px}.nav a span,.nav .active span{padding:5px}.nav a{text-decoration:none}.nav a:link,.nav a:visited{color:#299bf8;background-color:#daebff}.nav a:hover{color:#fff;background-color:#44ccf6;position:relative;top:9px}.nav a:active{color:#299bf8;background-color:#daebff;position:relative;top:9px}.nav .active{color:#fff;background-color:#44ccf6;position:relative;top:9px}.side{position:fixed;margin:130px 0 0 660px;padding:0;top:-20px;width:300px}.side .section{margin:0 0 20px 0;padding:20px;background-color:#daebff}.side p{font-family:"Lucida Grande",Helvetica,Arial,sans-serif;font-size:13px;color:#153b66}.side p kbd{font-family:"Panic Sans","Bitstream Vera Sans Mono",Consolas,monospace;font-size:14px;font-weight:700;color:#000}.side p a:link,.side p a:visited{color:#153b66}.side p a:hover{color:#153b66}.side .figure{margin-top:20px;text-align:center}.side ol{margin-bottom:5px}.side li{list-style-type:none;width:260px;margin:0 0 10px 0}.side li a,.side li .active{display:block;padding:0 5px;font-family:Helvetica,Arial,sans-serif;font-weight:700;font-size:12px;text-decoration:none;text-transform:uppercase;text-align:left;line-height:18px;white-space:nowrap;overflow:hidden;background-color:#dbeffe;background-image:url(images/triangle-right.gif);background-position:bottom right;background-repeat:no-repeat}.side li a:link,.side li a:visited{color:#299bf8}.side li a:hover{color:#fff;background-color:#299bf8}.side li a:active{color:#fff;background-color:#000}.side li .active{color:#fff;background-color:#44ccf6}.side li li{margin:0;padding:0;width:280px}.side li li a,.side li li .active{margin:0;padding:0 5px;text-transform:none;font-weight:400;background:#fff}.side li li a:link,.side li li a:visited{color:#44ccf6}.side li li a:hover{color:#000;font-weight:700;background:transparent}.body{padding:70px 0;width:640px}.body a{padding:2px 0;text-decoration:underline}.body a:link,.body a:visited{color:#1b67a5}.body a:hover{color:#000}.body a.permalink{margin:0 5px;font-weight:400;text-decoration:none}.body a.permalink:link,.body a.permalink:visited{color:#ccc;background:none}.body a.permalink:hover{color:#299bf8}#intro{width:640px}#intro h1{font-family:"Graublau Web",Helvetica,Arial,sans-serif;font-size:39px;font-weight:400;line-height:42px;letter-spacing:-1px;padding:20px 0 16px 0;color:#000}#intro h1 strong{font-weight:700;letter-spacing:0;color:#44ccf6}#intro h2{margin:40px 0 0 0;height:40px;font-family:"Graublau Web",Helvetica,Arial,sans-serif;font-weight:400;font-size:26px;line-height:40px;letter-spacing:-1px;color:#000}#intro h2 strong{font-weight:700;letter-spacing:0;color:#44ccf6}#intro p{margin:0;font-size:18px;font-family:"Gentium Basic",Gentium,Palatino,Georgia,serif;line-height:20px}#intro td img{-webkit-box-shadow:3px 3px 14px #999;-webkit-border-radius:5px;-moz-box-shadow:3px 3px 14px #999;-moz-border-radius:5px;margin:40px 40px 40px 40px;width:110px;height:110px}.article .header{margin:20px 0 40px 0}.article h1{margin:0;font-family:"Graublau Web",Helvetica,Arial,sans-serif;font-weight:700;font-size:46px;line-height:60px;color:#299bf8;color:#44ccf6}.article h2{margin:40px 0 0 0;height:40px;font-family:"Graublau Web",Helvetica,Arial,sans-serif;font-weight:400;font-size:26px;line-height:40px;letter-spacing:-1px;color:#000}.article h2 .date{color:#ccc;margin-left:10px;letter-spacing:1px;font-family:"Graublau Web",Helvetica,Arial,sans-serif;font-size:75%;text-transform:uppercase}.article .section:target>h2{color:#44ccf6}.article .section:target>h2:after{padding:0 20px;font-size:34px;line-height:40px;position:relative;top:5px;content:"‚òú"}.article h3{margin:20px 0;font-family:"Graublau Web",Helvetica,Arial,sans-serif;font-weight:400;font-size:18px;line-height:20px;position:relative;top:8px;color:#000}.article p{font-size:15px;line-height:20px;margin:20px 0 0 0;padding:0}.article p.fixme{margin:20px 0;color:#c00}.article p.fixme:before{content:"FIXME";padding:2px 4px;margin:0 5px 0 0;font-family:Helvetica,Arial,sans-serif;font-size:15px;line-height:20px;background:red;color:#fff}.article p.warning{background:#fee;padding:5px 8px}.article p.warning strong{color:red;text-transform:uppercase;font-family:Helvetica,Arial,sans-serif;font-size:85%;padding-right:2px}.article table{margin:20px auto;border-collapse:collapse}.article table th{font-weight:700;text-transform:uppercase}.article table tr.head th{background:#f0f0f0}.article table tr th.row{background:#f0f0f0;text-align:right}.article table td,.article table th{padding:0 5px;font-family:Helvetica,Arial,sans-serif;font-size:12px;line-height:20px;text-align:left}.article ul,.article ol{margin:20px 0 0 0;padding:0 0 0 20px}.article ul ul,.article ol ol{margin:0 20px;padding:0}.article li{font-size:15px;line-height:20px}.article li p{margin:20px 0 0 0;padding:0}.article ul li{list-style-type:square}.article ol.toc{margin:20px 0 0 0}.article ol.toc>li{font-weight:700;list-style-type:upper-roman}.article ol.toc>li li{font-weight:400}.article dl{margin:20px 0}.article dl dt,.article dl dd{font-size:15px;line-height:20px}.article dl dt{font-weight:700}.article dl dd{margin:0 0 20px 20px}.article dl dd p{margin:20px 0;padding:0}.article dl dd .see{font-style:italic}.article dl dd a{font-style:normal}.article .figure{margin:20px 0;padding:20px 0;text-align:center}.article q,.article .path{font-style:italic}.article code,.article kbd,.article samp,.article var{font-family:"Panic Sans","Bitstream Vera Sans Mono",Consolas,monospace;font-size:12px;line-height:20px;padding:0 2px}.article code,.article samp{font-style:normal}.article kbd{font-weight:700}.article var{font-style:italic}.article pre{margin:20px 0 0 0;padding:9px 10px;white-space:pre-wrap;white-space:-moz-pre-wrap;white-space:-pre-wrap;white-space:-o-pre-wrap;word-wrap:break-word;font-family:"Panic Sans","Bitstream Vera Sans Mono",Consolas,monospace;font-size:12px;line-height:20px;border:1px solid #ccc}.article pre code,.article pre kbd,.article pre samp,.article pre var{background:transparent;padding:0}.article pre .prompt{color:#999}.caps{font-size:90%}#footer{margin:0 auto;padding:100px 0 40px 0}#footer p{width:620px;padding-right:320px;margin:0 auto;font-size:14px;line-height:20px;color:#666}#footer a{text-decoration:underline}#footer a:link,#footer a:visited{color:#666}#footer a:hover{color:#000}pre .log-create{font-weight:700;color:#4a0}pre .log-update{font-weight:700;color:#cb0}pre .comment{color:#666}pre .key{color:#6a0}pre .string,pre .value{color:#772;background:#ffc}pre .constant,pre .class,pre .symbol{color:#c60}pre .function{color:#e21}pre .instance-variable,pre .local_variable{color:#6a0}pre .reserved,pre .predefined,pre .predefined-constant{color:#09c}pre .tag,pre .keyword{color:#8c5}pre .integer,pre .attribute_name{color:#a50}pre .m{padding:0 .1em;background:#555;color:#fff};T;	I"<@import fonts.sass
@import main.sass
@import code.sass
;T;
@B"/community/{;{
;I"F<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<title>SeqWare ‚Ä∫ Community</title>
<meta content="nanoc 3.4.0" name="generator">
<link href="../assets/style-v17.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://feeds.feedburner.com/seqware" rel="alternate" title="The SeqWare Blog" type="application/atom+xml">
<script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-34523087-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script>
</head>
<body>
<div class="wrapper">
<!-- ***** navigation ***** -->
<div class="nav">
<ol>
<li><a href="../"><span>Home</span></a></li>
<li><a href="../blog/"><span>News</span></a></li>
<li><a href="../docs/"><span>Documentation</span></a></li>
<li><span class="active" title="You're here."><span>Community</span></span></li>
<li><a href="../partners/"><span>Partners</span></a></li>
<li><a href="../about/"><span>About</span></a></li>
</ol>
</div>
<!-- ***** sidebar ***** -->
<div class="side">
<div class="section odd">
<script charset="utf-8" src="http://widgets.twimg.com/j/2/widget.js"></script><script> new TWTR.Widget({   version: 2,   type: 'profile',   rpp: 4,   interval: 30000,   width: 250,   height: 370,   theme: {     shell: {       background: '#daebff',       color: '#153b66'     },     tweets: {       background: '#daebff',       color: '#000000',       links: '#153b66'     }   },   features: {     scrollbar: false,     loop: false,     live: true,     behavior: 'all'   } }).render().setUser('seqware').start(); </script>
</div>
<div class="section even">
<p>The current version of SeqWare is 0.12.5, released on August 6th, 2012. See the <a href="../release-notes/">release notes</a> for details.</p>
</div>
</div>
<!-- ***** body ***** -->
<div class="body">
<div class="article">
<div class="header">
<h1>Community</h1>
</div>
<div class="section" id="transition-from-sourceforge">
<h2>Transition from SourceForge</h2>

<p>We are currently transitioning to off of SourceForge to GitHub and other services.  This is a pretty big task since we have years of content in our current wiki, multiple bug tracking systems, and two mailing lists. Please bear with us while we make this migration.  In the mean time you can find our subversion repository and current wiki on SourceForge, see:</p>

<ul>
<li>the SourceForge <a href="http://sourceforge.net/projects/seqware/">developers site</a>
</li>
<li>the SourceForge <a href="http://sourceforge.net/projects/seqware/">wiki page</a> for lots of detailed, developer docs</li>
</ul>
<p>Our new site (this one) is hosted on GitHub and we plan on migrating all of our documentation here, the main project web page, our public bug tracker and, of course, our code repository (from subversion to git).  The two new sites are:</p>

<ul>
<li>the GitHub <a href="https://github.com/SeqWare/seqware">repository</a> for SeqWare</li>
<li>the <a href="http://seqware.github.com">public website</a> (this one) hosted on GitHub</li>
</ul>
</div>
<div class="section" id="mailing-lists">
<h2>Mailing Lists</h2>

<p>For the time being our <a href="http://sourceforge.net/mail/?group_id=239239">mailing lists</a> are still hosted on SourceForge. If you want to contribute to SeqWare we encourage you to email the mailing list or Brian O&#8217;Connor at briandoconnor at gmail dot com directly.</p>

</div>
<div class="section" id="issue-tracker">
<h2>Issue Tracker</h2>

<p>If you encounter bugs or want to make a feature request please email the developer list above (you will need to sign up) and also submit a bug to our <a href="http://sourceforge.net/tracker/?group_id=239239">issue tracker</a> currently on SourceForge.</p>

</div>
<div class="section" id="wiki">
<h2>Wiki</h2>

<p>When the transition to GitHub is complete this site will contain all the documentation and we will no longer have a wiki (at least that is the plan).  In the mean time you can still use the <a href="http://seqware.sf.net/">public wiki</a> on SourceForge which is tailored to developers and is not particularly friendly to new users.  This site should be a much better introduction to our project but we are still adding content.</p>

</div>
<div class="section" id="jenkins-and-artifactory">
<h2>Jenkins and Artifactory</h2>

<p>We maintain a <a href="http://jenkins.res.oicr.on.ca/job/seqware/">Jenkins continuous build server</a>, you can see the status of the project and link to nightly snapshots here. This is really only of interest to developers of SeqWare since we encourage users to download our pre-configured VMs rather than build SeqWare directly.</p>

<p>For those developers building SeqWare we maintain an <a href="http://seqwaremaven.oicr.on.ca/artifactory/">Artifactory repository</a> for serving and hosting components used in our Maven build process.</p>

</div>
<div class="section" id="repositories">
<h2>Repositories</h2>

<p>There are currently two repositories used by the project (see below). The SourceForge repo has all the sub-projects (and several years of cruft)  while the GitHub repository has this documentation and the latest SeqWare Query Engine. We will transition from subversion to git as soon as we can.  If you want to contribute to SeqWare we encourage you to email the mailing list or Brian O&#8217;Connor at briandoconnor at gmail dot com directly.</p>

<ul>
<li>the GitHub git <a href="https://github.com/SeqWare/seqware">repository</a> for SeqWare</li>
<li>the SourceForge subversion <a href="http://sourceforge.net/projects/seqware/develop">repository</a>
</li>
</ul>
</div>
</div>
</div>
</div>
<!-- ***** footer ***** -->
<div id="footer">
<p>SeqWare ¬© 2007‚Äì2012 Brian O&#8217;Connor. SeqWare is released under the a <a rel="license" href="http://www.gnu.org/licenses/licenses.html">GNU GPL v3</a>. This site is built using the excellent <a href="http://nanoc.stoneship.org/">nanoc</a> tool and example site along with the <a href="http://www.fonts.info/info/press/free-fonts-for-font-face-embedding.htm">Graublau</a> and <a href="http://scripts.sil.org/Gentium">Gentium</a> fonts.</p>
</div>
</body>
</html>
;T;	I"dTransition from SourceForge
-------------

We are currently transitioning to off of SourceForge to GitHub and other services.  This is a pretty big task since we have years of content in our current wiki, multiple bug tracking systems, and two mailing lists. Please bear with us while we make this migration.  In the mean time you can find our subversion repository and current wiki on SourceForge, see:

* the SourceForge [developers site](http://sourceforge.net/projects/seqware/)
* the SourceForge [wiki page](http://sourceforge.net/projects/seqware/) for lots of detailed, developer docs

Our new site (this one) is hosted on GitHub and we plan on migrating all of our documentation here, the main project web page, our public bug tracker and, of course, our code repository (from subversion to git).  The two new sites are:

* the GitHub [repository](https://github.com/SeqWare/seqware) for SeqWare
* the [public website](http://seqware.github.com) (this one) hosted on GitHub

Mailing Lists
-------------

For the time being our [mailing lists](http://sourceforge.net/mail/?group_id=239239) are still hosted on SourceForge. If you want to contribute to SeqWare we encourage you to email the mailing list or Brian O'Connor at briandoconnor at gmail dot com directly.

Issue Tracker
-------------

If you encounter bugs or want to make a feature request please email the developer list above (you will need to sign up) and also submit a bug to our [issue tracker](http://sourceforge.net/tracker/?group_id=239239) currently on SourceForge.

Wiki
----

When the transition to GitHub is complete this site will contain all the documentation and we will no longer have a wiki (at least that is the plan).  In the mean time you can still use the [public wiki](http://seqware.sf.net/) on SourceForge which is tailored to developers and is not particularly friendly to new users.  This site should be a much better introduction to our project but we are still adding content.

Jenkins and Artifactory
-----------------------

We maintain a [Jenkins continuous build server](http://jenkins.res.oicr.on.ca/job/seqware/), you can see the status of the project and link to nightly snapshots here. This is really only of interest to developers of SeqWare since we encourage users to download our pre-configured VMs rather than build SeqWare directly.

For those developers building SeqWare we maintain an [Artifactory repository](http://seqwaremaven.oicr.on.ca/artifactory/) for serving and hosting components used in our Maven build process.

Repositories
------------

There are currently two repositories used by the project (see below). The SourceForge repo has all the sub-projects (and several years of cruft)  while the GitHub repository has this documentation and the latest SeqWare Query Engine. We will transition from subversion to git as soon as we can.  If you want to contribute to SeqWare we encourage you to email the mailing list or Brian O'Connor at briandoconnor at gmail dot com directly.

* the GitHub git [repository](https://github.com/SeqWare/seqware) for SeqWare
* the SourceForge subversion [repository](http://sourceforge.net/projects/seqware/develop)

;T;
I"i<div class="section" id="transition-from-sourceforge">
<h2>Transition from SourceForge</h2>

<p>We are currently transitioning to off of SourceForge to GitHub and other services.  This is a pretty big task since we have years of content in our current wiki, multiple bug tracking systems, and two mailing lists. Please bear with us while we make this migration.  In the mean time you can find our subversion repository and current wiki on SourceForge, see:</p>

<ul>
<li>the SourceForge <a href="http://sourceforge.net/projects/seqware/">developers site</a>
</li>
<li>the SourceForge <a href="http://sourceforge.net/projects/seqware/">wiki page</a> for lots of detailed, developer docs</li>
</ul>
<p>Our new site (this one) is hosted on GitHub and we plan on migrating all of our documentation here, the main project web page, our public bug tracker and, of course, our code repository (from subversion to git).  The two new sites are:</p>

<ul>
<li>the GitHub <a href="https://github.com/SeqWare/seqware">repository</a> for SeqWare</li>
<li>the <a href="http://seqware.github.com">public website</a> (this one) hosted on GitHub</li>
</ul>
</div><div class="section" id="mailing-lists">
<h2>Mailing Lists</h2>

<p>For the time being our <a href="http://sourceforge.net/mail/?group_id=239239">mailing lists</a> are still hosted on SourceForge. If you want to contribute to SeqWare we encourage you to email the mailing list or Brian O'Connor at briandoconnor at gmail dot com directly.</p>

</div><div class="section" id="issue-tracker">
<h2>Issue Tracker</h2>

<p>If you encounter bugs or want to make a feature request please email the developer list above (you will need to sign up) and also submit a bug to our <a href="http://sourceforge.net/tracker/?group_id=239239">issue tracker</a> currently on SourceForge.</p>

</div><div class="section" id="wiki">
<h2>Wiki</h2>

<p>When the transition to GitHub is complete this site will contain all the documentation and we will no longer have a wiki (at least that is the plan).  In the mean time you can still use the <a href="http://seqware.sf.net/">public wiki</a> on SourceForge which is tailored to developers and is not particularly friendly to new users.  This site should be a much better introduction to our project but we are still adding content.</p>

</div><div class="section" id="jenkins-and-artifactory">
<h2>Jenkins and Artifactory</h2>

<p>We maintain a <a href="http://jenkins.res.oicr.on.ca/job/seqware/">Jenkins continuous build server</a>, you can see the status of the project and link to nightly snapshots here. This is really only of interest to developers of SeqWare since we encourage users to download our pre-configured VMs rather than build SeqWare directly.</p>

<p>For those developers building SeqWare we maintain an <a href="http://seqwaremaven.oicr.on.ca/artifactory/">Artifactory repository</a> for serving and hosting components used in our Maven build process.</p>

</div><div class="section" id="repositories">
<h2>Repositories</h2>

<p>There are currently two repositories used by the project (see below). The SourceForge repo has all the sub-projects (and several years of cruft)  while the GitHub repository has this documentation and the latest SeqWare Query Engine. We will transition from subversion to git as soon as we can.  If you want to contribute to SeqWare we encourage you to email the mailing list or Brian O'Connor at briandoconnor at gmail dot com directly.</p>

<ul>
<li>the GitHub git <a href="https://github.com/SeqWare/seqware">repository</a> for SeqWare</li>
<li>the SourceForge subversion <a href="http://sourceforge.net/projects/seqware/develop">repository</a>
</li>
</ul>
</div>;T;I"D<h2>Transition from SourceForge</h2>

<p>We are currently transitioning to off of SourceForge to GitHub and other services.  This is a pretty big task since we have years of content in our current wiki, multiple bug tracking systems, and two mailing lists. Please bear with us while we make this migration.  In the mean time you can find our subversion repository and current wiki on SourceForge, see:</p>

<ul>
<li>the SourceForge <a href="http://sourceforge.net/projects/seqware/">developers site</a></li>
<li>the SourceForge <a href="http://sourceforge.net/projects/seqware/">wiki page</a> for lots of detailed, developer docs</li>
</ul>


<p>Our new site (this one) is hosted on GitHub and we plan on migrating all of our documentation here, the main project web page, our public bug tracker and, of course, our code repository (from subversion to git).  The two new sites are:</p>

<ul>
<li>the GitHub <a href="https://github.com/SeqWare/seqware">repository</a> for SeqWare</li>
<li>the <a href="http://seqware.github.com">public website</a> (this one) hosted on GitHub</li>
</ul>


<h2>Mailing Lists</h2>

<p>For the time being our <a href="http://sourceforge.net/mail/?group_id=239239">mailing lists</a> are still hosted on SourceForge. If you want to contribute to SeqWare we encourage you to email the mailing list or Brian O'Connor at briandoconnor at gmail dot com directly.</p>

<h2>Issue Tracker</h2>

<p>If you encounter bugs or want to make a feature request please email the developer list above (you will need to sign up) and also submit a bug to our <a href="http://sourceforge.net/tracker/?group_id=239239">issue tracker</a> currently on SourceForge.</p>

<h2>Wiki</h2>

<p>When the transition to GitHub is complete this site will contain all the documentation and we will no longer have a wiki (at least that is the plan).  In the mean time you can still use the <a href="http://seqware.sf.net/">public wiki</a> on SourceForge which is tailored to developers and is not particularly friendly to new users.  This site should be a much better introduction to our project but we are still adding content.</p>

<h2>Jenkins and Artifactory</h2>

<p>We maintain a <a href="http://jenkins.res.oicr.on.ca/job/seqware/">Jenkins continuous build server</a>, you can see the status of the project and link to nightly snapshots here. This is really only of interest to developers of SeqWare since we encourage users to download our pre-configured VMs rather than build SeqWare directly.</p>

<p>For those developers building SeqWare we maintain an <a href="http://seqwaremaven.oicr.on.ca/artifactory/">Artifactory repository</a> for serving and hosting components used in our Maven build process.</p>

<h2>Repositories</h2>

<p>There are currently two repositories used by the project (see below). The SourceForge repo has all the sub-projects (and several years of cruft)  while the GitHub repository has this documentation and the latest SeqWare Query Engine. We will transition from subversion to git as soon as we can.  If you want to contribute to SeqWare we encourage you to email the mailing list or Brian O'Connor at briandoconnor at gmail dot com directly.</p>

<ul>
<li>the GitHub git <a href="https://github.com/SeqWare/seqware">repository</a> for SeqWare</li>
<li>the SourceForge subversion <a href="http://sourceforge.net/projects/seqware/develop">repository</a></li>
</ul>

;T;@G"
/404/{;{	;I"ù<!DOCTYPE html>
<html lang='en'>
<head>
<meta charset='UTF-8'>
<title>SeqWare &rsaquo; Page Not Found</title>
<meta content='nanoc 3.4.0' name='generator'>
<link href='/assets/style-v17.css' media='screen' rel='stylesheet' type='text/css'>
<link href='http://feeds.feedburner.com/seqware' rel='alternate' title='The SeqWare Blog' type='application/atom+xml'>
<script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-34523087-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script>
</head>
<body>
<div class='wrapper'>
<!-- ***** navigation ***** -->
<div class='nav'>
<ol>
<li><a href="/"><span>Home</span></a></li>
<li><a href="/blog/"><span>News</span></a></li>
<li><a href="/docs/"><span>Documentation</span></a></li>
<li><a href="/community/"><span>Community</span></a></li>
<li><a href="/partners/"><span>Partners</span></a></li>
<li><a href="/about/"><span>About</span></a></li>
</ol>
</div>
<!-- ***** sidebar ***** -->
<div class='side'>
<div class='section odd'>
<script charset="utf-8" src="http://widgets.twimg.com/j/2/widget.js"></script><script> new TWTR.Widget({   version: 2,   type: 'profile',   rpp: 4,   interval: 30000,   width: 250,   height: 370,   theme: {     shell: {       background: '#daebff',       color: '#153b66'     },     tweets: {       background: '#daebff',       color: '#000000',       links: '#153b66'     }   },   features: {     scrollbar: false,     loop: false,     live: true,     behavior: 'all'   } }).render().setUser('seqware').start(); </script>
</div>
<div class='section even'>
<p>The current version of SeqWare is 0.12.5, released on August 6th, 2012. See the <a href="/release-notes/">release notes</a> for details.</p>
</div>
</div>
<!-- ***** body ***** -->
<div class='body'>
<div class='article'>
<div class='header'>
<h1>Page Not Found</h1>
</div>
<p>Unfortunately, the page you requested was not found on the server. It may have have been removed; the site was recently restructured quite a bit and some outdated pages were removed in the process.</p>

<p>If you arrived on this page by entering an address (URL) manually, double-check it to make sure that you did not accidentally mistyped the address.</p>

<?php

########## CONFIGURATION #####################################################

// E-mail settings
$src_email_address = 'webmaster@seqware.github.com';
$dst_email_address = 'briandoconnor@gmail.com';

// The name of the site
$site_name = 'SeqWare';

// Should a mail be sent if there is no referrer?
$send_mail_if_no_referrer = false;

########## DO NOT CHANGE BELOW THIS LINE #####################################

// Get path and URL of this page
$this_path = $_SERVER['REQUEST_URI'];
$this_url  = 'http://' . $_SERVER['SERVER_NAME'] . $this_path;

// Check whether page has referrer
$has_referrer = isset($_SERVER['HTTP_REFERER']);

// Send mail if necessary
$should_send_mail = true;
if(!$has_referrer && !$send_mail_if_no_referrer)
	$should_send_mail = false;
if($should_send_mail)
{
	$subject = '404 @ ' . $site_name . ': ' . $_SERVER['SERVER_NAME'] . $_SERVER['REQUEST_URI'];
	$message = 'The following URL caused a 404 error on ' . $site_name . ':' . "\n\n" .
		'URL:      ' . 'http://' . $_SERVER['SERVER_NAME'] . $_SERVER['REQUEST_URI'] . "\n" .
		'Referrer: ' . $_SERVER['HTTP_REFERER'];
	$headers = 'From: ' . $src_email_address;

	mail($dst_email_address, $subject, $message, $headers);
}

?>

</div>
</div>
</div>
<!-- ***** footer ***** -->
<div id='footer'>
<p>SeqWare &copy; 2007‚Äì2012 Brian O&#8217;Connor. SeqWare is released under the a <a rel="license" href="http://www.gnu.org/licenses/licenses.html">GNU GPL v3</a>. This site is built using the excellent <a href="http://nanoc.stoneship.org/">nanoc</a> tool and example site along with the <a href="http://www.fonts.info/info/press/free-fonts-for-font-face-embedding.htm">Graublau</a> and <a href="http://scripts.sil.org/Gentium">Gentium</a> fonts.</p>
</div>
</body>
</html>
;T;	I"'<p>Unfortunately, the page you requested was not found on the server. It may have have been removed; the site was recently restructured quite a bit and some outdated pages were removed in the process.</p>

<p>If you arrived on this page by entering an address (URL) manually, double-check it to make sure that you did not accidentally mistyped the address.</p>

<?php

########## CONFIGURATION #####################################################

// E-mail settings
$src_email_address = 'webmaster@seqware.github.com';
$dst_email_address = 'briandoconnor@gmail.com';

// The name of the site
$site_name = 'SeqWare';

// Should a mail be sent if there is no referrer?
$send_mail_if_no_referrer = false;

########## DO NOT CHANGE BELOW THIS LINE #####################################

// Get path and URL of this page
$this_path = $_SERVER['REQUEST_URI'];
$this_url  = 'http://' . $_SERVER['SERVER_NAME'] . $this_path;

// Check whether page has referrer
$has_referrer = isset($_SERVER['HTTP_REFERER']);

// Send mail if necessary
$should_send_mail = true;
if(!$has_referrer && !$send_mail_if_no_referrer)
	$should_send_mail = false;
if($should_send_mail)
{
	$subject = '404 @ ' . $site_name . ': ' . $_SERVER['SERVER_NAME'] . $_SERVER['REQUEST_URI'];
	$message = 'The following URL caused a 404 error on ' . $site_name . ':' . "\n\n" .
		'URL:      ' . 'http://' . $_SERVER['SERVER_NAME'] . $_SERVER['REQUEST_URI'] . "\n" .
		'Referrer: ' . $_SERVER['HTTP_REFERER'];
	$headers = 'From: ' . $src_email_address;

	mail($dst_email_address, $subject, $message, $headers);
}

?>
;T;
I"'<p>Unfortunately, the page you requested was not found on the server. It may have have been removed; the site was recently restructured quite a bit and some outdated pages were removed in the process.</p>

<p>If you arrived on this page by entering an address (URL) manually, double-check it to make sure that you did not accidentally mistyped the address.</p>

<?php

########## CONFIGURATION #####################################################

// E-mail settings
$src_email_address = 'webmaster@seqware.github.com';
$dst_email_address = 'briandoconnor@gmail.com';

// The name of the site
$site_name = 'SeqWare';

// Should a mail be sent if there is no referrer?
$send_mail_if_no_referrer = false;

########## DO NOT CHANGE BELOW THIS LINE #####################################

// Get path and URL of this page
$this_path = $_SERVER['REQUEST_URI'];
$this_url  = 'http://' . $_SERVER['SERVER_NAME'] . $this_path;

// Check whether page has referrer
$has_referrer = isset($_SERVER['HTTP_REFERER']);

// Send mail if necessary
$should_send_mail = true;
if(!$has_referrer && !$send_mail_if_no_referrer)
	$should_send_mail = false;
if($should_send_mail)
{
	$subject = '404 @ ' . $site_name . ': ' . $_SERVER['SERVER_NAME'] . $_SERVER['REQUEST_URI'];
	$message = 'The following URL caused a 404 error on ' . $site_name . ':' . "\n\n" .
		'URL:      ' . 'http://' . $_SERVER['SERVER_NAME'] . $_SERVER['REQUEST_URI'] . "\n" .
		'Referrer: ' . $_SERVER['HTTP_REFERER'];
	$headers = 'From: ' . $src_email_address;

	mail($dst_email_address, $subject, $message, $headers);
}

?>
;T;@N"/docs/2-installation/{;{
;I"Å0<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<title>SeqWare ‚Ä∫ Installation</title>
<meta content="nanoc 3.4.0" name="generator">
<link href="../../assets/style-v17.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://feeds.feedburner.com/seqware" rel="alternate" title="The SeqWare Blog" type="application/atom+xml">
<script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-34523087-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script>
</head>
<body>
<div class="wrapper">
<!-- ***** navigation ***** -->
<div class="nav">
<ol>
<li><a href="../../"><span>Home</span></a></li>
<li><a href="../../blog/"><span>News</span></a></li>
<li><a href="../"><span>Documentation</span></a></li>
<li><a href="../../community/"><span>Community</span></a></li>
<li><a href="../../partners/"><span>Partners</span></a></li>
<li><a href="../../about/"><span>About</span></a></li>
</ol>
</div>
<!-- ***** sidebar ***** -->
<div class="side">
<ol>
<li><a href="../1-introduction/"><span>Introduction to SeqWare</span></a></li>
<li>
<span class="active" title="You're here."><span>Installation</span></span><ol class="toc">
<li><a href="#environment">Environment</a></li>
<li><a href="#installing-with-a-local-vm">Installing with a Local VM</a></li>
<li><a href="#installing-with-a-cloud-vm">Installing with a Cloud VM</a></li>
<li><a href="#installing-from-scratch">Installing from Scratch</a></li>
<li><a href="#next-step">Next Step</a></li>
</ol>
</li>
<li><a href="../3-getting-started/"><span>Getting Started</span></a></li>
<li><a href="../4-metadb/"><span>SeqWare MetaDB</span></a></li>
<li><a href="../5-portal/"><span>SeqWare Portal</span></a></li>
<li><a href="../6-pipeline/"><span>SeqWare Pipeline</span></a></li>
<li><a href="../7-web-service/"><span>SeqWare Web Service</span></a></li>
<li><a href="../8-query-engine/"><span>SeqWare Query Engine</span></a></li>
<li><a href="../9-glossary/"><span>Glossary</span></a></li>
<li><a href="../10-faq/"><span>Frequently Asked Questions</span></a></li>
<li><a href="../11-api/"><span>APIs</span></a></li>
</ol>
</div>
<!-- ***** body ***** -->
<div class="body">
<div class="article">
<div class="header">
<h1>Installation</h1>
</div>
<div class="section" id="environment">
<h2>Environment</h2>

<p>SeqWare is designed to work in a 64-bit Linux environment, we do not support Windows
or MacOS.  You can still use SeqWare on your local Mac or Windows PC through
virtualization software.  You need to be comfortable with Linux before moving
forward with SeqWare, specifically the Bash shell, using an editor like vim or
emacs, and some experience programming in Java is extremely helpful.</p>

<p>To learn about Linux, the Bash shell, and Java we recommend the O&#8217;Reilly series of books:</p>

<ul>
<li><a href="http://amzn.com/B0093T2G3I">Linux in a Nutshell</a></li>
<li><a href="http://amzn.com/B0043GXMSY">Learning the bash Shell</a></li>
<li><a href="http://amzn.com/B0043EWVDI">Learning Java</a></li>
</ul>
</div>
<div class="section" id="installing-with-a-local-vm">
<h2>Installing with a Local VM</h2>

<p>We have created a VirtualBox VM with all SeqWare projects pre-installed along
with some sample data.  This is the easiest way to get started with SeqWare
since it requires no installation and configuration on your part.  While the
download is pretty large, you will not incur per hour fees as you do when
running on Amazon so it is a great way to get started with SeqWare, kick the
tires, and see if this is something you want to use.</p>

<div class="section" id="getting-the-vm">
<h3>Getting the VM</h3>

<p>Getting the local VM is a two-step process.  First, download (or install via
your OS&#8217;s package management system) the VirtualBox application. This is a
great piece of software that will let you run the SeqWare CentOS VM on whatever
OS you currently have.</p>

<ul>
<li><a href="http://amzn.com/B0043EWVDI">Oracle Virtual Box</a></li>
</ul>
<p>Next, you will need to download our current VM image which is linked below.
Please make sure you are using the latest version, when we post a new one we
will tweet about it so consider following us on Twitter.</p>

<ul>
<li><a href="https://s3.amazonaws.com/nimbusinformatics.exchange/private/SeqWareVM_0.12.5-r5163_CentOS_6.2_20120904b.ova">SeqWareVM_0.12.5-r5163_CentOS_6.2_20120904.ova</a></li>
</ul>
<p>Open VirtualBox and use the &#8220;Import Appliance&#8221; tool to create a new SeqWare VM
on your system.  You can then launch it and you will be presented with a fairly
standard Linux desktop with links to the project&#8217;s documentation to give you an
idea of where to begin (the &#8220;Getting Started&#8221; guide here which provides a
walk-through of using this VM).</p>

<p class="warning"><strong>Note:</strong>
When you import the VM you need to set your memory and CPU correctly.  Do not
over-commit resources (especially memory) since that will cause the machine to
&#8220;swap&#8221; memory to disk and slow your computer to a crawl. This VM is intended
for you to see SeqWare in action and then create your own workflows. If you are
making a workflow that will take 16GB of memory then you will need a VM running
on a machine that can afford to give 16GB of memory to VirtualBox.  Also, we
only distribute 64-bit VMs which all modern PCs will support and VirtualBox
makes use of various virtualization extensions which most modern PCs support
(but you may want to check with your computer vendor).  </p>


</div>
<div class="section" id="logging-in">
<h3>Logging In</h3>

<p>The login username is <kbd>seqware</kbd> and the password is <kbd>seqware</kbd>. If you need to become <kbd>root</kbd> the password is the same.</p>

</div>
<div class="section" id="what-can-you-do-with-it">
<h3>What Can You Do With It?</h3>

<p>As the note above mentioned, you can use this VM to see what each of the
SeqWare tools can do, kick the tires, explore the docs more, etc. If you decide
to use SeqWare then this VM can also be your development and testing
environment for workflows.  Once you have created and tested a given workflow,
you can also use the SeqWare commands on this machine to &#8220;install&#8221; the workflow
bundle into a production system.  Or you can even hook up this VM to a real
local grid environment (such as an SGE cluster) for running workflows.  This is
exactly what we did at OICR, our SeqWare hosts are all virtual machines that
can submit workflow jobs to our physical cluster. You can find more information
on this later in the guide.</p>

<p><img src="../../assets/images/vm_screen.png" alt="SeqWare VM" width="600px"></p>

</div>
</div>
<div class="section" id="installing-with-a-cloud-vm">
<h2>Installing with a Cloud VM</h2>

<p>We currently support running SeqWare on the Amazon cloud on HPC nodes. These
are high-performance, cluster-compute nodes well suited for research, for specs
see <a href="http://aws.amazon.com/ec2/instance-types/">Cluster Compute Quadruple Extra Large
Instance</a>. These machines provide
23GB of memory and 2x quad core &#8220;Nehalem&#8221; processors which is typically
sufficient for analyzing a human exome within about 4 hours depending on the
specifics of your workflows.</p>

<div class="section" id="getting-an-amazon-cloud-account">
<h3>Getting an Amazon Cloud Account</h3>

<p>To use Amazon&#8217;s cloud (also know as Amazon Web Services or AWS) you need to sign up for an account and that requires a credit card.  Also, while launching these instances is simply point and click using Amazon&#8217;s very nice AWS console, actually using these machines requires the same level of experience as using the local VM above.  If you are looking for a completely graphical, web-based service you should consider using one of the cloud-based providers like Nimbus Informatics or DNAnexus.</p>

<p>Signup for the Amazon cloud <a href="http://aws.amazon.com/">here</a></p>

</div>
<div class="section" id="running-the-vm">
<h3>Running the VM</h3>

<p>What makes Amazon&#8217;s cloud so amazingly awesome is its excellent support for both graphical UIs and programmatic APIs for controlling the cloud.  It is your choice on how you want to launch the VM, either through the console or via one of the many command line and programmatic tools available. The details are subject to change so we refer to Amazon&#8217;s thorough <a href="https://aws.amazon.com/documentation/">documentation</a>.</p>

<p>Our current public AMI(s):</p>

<ul>
<li>SWStandaloneCentOS_v2_GenericDevBox_v5: ami-6bf54102</li>
</ul>
<p>An example of the launching wizard in the Amazon AWS console can be seen below:</p>

<p><img src="../../assets/images/amazon_launcher.png" alt="SeqWare AWS Console" width="600px"></p>

<p class="warning"><strong>Tip:</strong>Make sure you open port 22 for SSH and port 8080 for the SeqWare Portal and Web Service.</p>


</div>
<div class="section" id="logging-in">
<h3>Logging In</h3>

<p>Unlike the local VM there is no graphical desktop to log into.  Instead you will need to follow the directions on the Amazon site for using <kbd>ssh</kbd> to log into your running VM.  There you will have a command line interface to interact with the SeqWare tools. You can also view the SeqWare Portal and SeqWare Web Service remotely in your browser if you have previously opened the ports 22 and 8080.</p>

</div>
<div class="section" id="what-can-you-do-with-it">
<h3>What Can You Do With It?</h3>

<p>You can launch this public AMI which will give you a server with all the SeqWare projects pre-configured and loaded with some small examples.  You can then use the running VM to test workflows and write your own.  Since this VM runs on the fairly powerful HPC node type, you can actually use it to get real work done.  This instance is powerful enough to analyze a whole human exome in 4-8 hours and you can, of course, launch many instances simultaneously to process multiple exomes in parallel.</p>

<p class="warning"><strong>Note:</strong>Keep in mind Amazon charges approximately $1.30 USD per hour to run these instances, it is your responsibility to monitor your cloud usage and turn your VMs off when not in use!</p>


</div>
<div class="section" id="more-to-come">
<h3>More to Come&#8230;</h3>

<p>TODO: In the near future we will document the process to:</p>

<ul>
<li>launch clusters of SeqWare instances</li>
<li>pass configuration information to instances (like your AWS keys)</li>
</ul>
</div>
</div>
<div class="section" id="installing-from-scratch">
<h2>Installing from Scratch</h2>

<p class="warning"><strong>Note:</strong> This is not for the faint of heart.  We do not recommend you attempt to do this
unless you a very familiar with Linux and comfortable with complex software
configuration. We really recommend using the local VM in production and
configure it to submit jobs to a real cluster since the
Pegasus/Condor/Globus/SGE stack are difficult to setup correctly.</p>


<p>This guide will be ported to this manual but for now the best instructions for
setting up SeqWare from scratch can be found on our <a href="https://sourceforge.net/apps/mediawiki/seqware/index.php?title=Creating_a_SeqWare_VM">SourceForge
wiki</a>.</p>

</div>
<div class="section" id="next-step">
<h2>Next Step</h2>

<p>Now that you have seen how to launch either a local of cloud-based SeqWare instance follow the
&#8221;<a href="../3-getting-started/">Getting Started</a>&#8221; guide to see how to run the sample HelloWorld
workflow.</p>
</div>
</div>
</div>
</div>
<!-- ***** footer ***** -->
<div id="footer">
<p>SeqWare ¬© 2007‚Äì2012 Brian O&#8217;Connor. SeqWare is released under the a <a rel="license" href="http://www.gnu.org/licenses/licenses.html">GNU GPL v3</a>. This site is built using the excellent <a href="http://nanoc.stoneship.org/">nanoc</a> tool and example site along with the <a href="http://www.fonts.info/info/press/free-fonts-for-font-face-embedding.htm">Graublau</a> and <a href="http://scripts.sil.org/Gentium">Gentium</a> fonts.</p>
</div>
</body>
</html>
;T;	I"W## Environment

SeqWare is designed to work in a 64-bit Linux environment, we do not support Windows
or MacOS.  You can still use SeqWare on your local Mac or Windows PC through
virtualization software.  You need to be comfortable with Linux before moving
forward with SeqWare, specifically the Bash shell, using an editor like vim or
emacs, and some experience programming in Java is extremely helpful.

To learn about Linux, the Bash shell, and Java we recommend the O'Reilly series of books:

* [Linux in a Nutshell](http://amzn.com/B0093T2G3I)
* [Learning the bash Shell](http://amzn.com/B0043GXMSY)
* [Learning Java](http://amzn.com/B0043EWVDI)

## Installing with a Local VM

We have created a VirtualBox VM with all SeqWare projects pre-installed along
with some sample data.  This is the easiest way to get started with SeqWare
since it requires no installation and configuration on your part.  While the
download is pretty large, you will not incur per hour fees as you do when
running on Amazon so it is a great way to get started with SeqWare, kick the
tires, and see if this is something you want to use.

### Getting the VM

Getting the local VM is a two-step process.  First, download (or install via
your OS's package management system) the VirtualBox application. This is a
great piece of software that will let you run the SeqWare CentOS VM on whatever
OS you currently have.

* [Oracle Virtual Box](http://amzn.com/B0043EWVDI)

Next, you will need to download our current VM image which is linked below.
Please make sure you are using the latest version, when we post a new one we
will tweet about it so consider following us on Twitter.

* [SeqWareVM_0.12.5-r5163_CentOS_6.2_20120904.ova](https://s3.amazonaws.com/nimbusinformatics.exchange/private/SeqWareVM_0.12.5-r5163_CentOS_6.2_20120904b.ova)

Open VirtualBox and use the "Import Appliance" tool to create a new SeqWare VM
on your system.  You can then launch it and you will be presented with a fairly
standard Linux desktop with links to the project's documentation to give you an
idea of where to begin (the "Getting Started" guide here which provides a
walk-through of using this VM).

<p class="warning"><strong>Note:</strong>
When you import the VM you need to set your memory and CPU correctly.  Do not
over-commit resources (especially memory) since that will cause the machine to
"swap" memory to disk and slow your computer to a crawl. This VM is intended
for you to see SeqWare in action and then create your own workflows. If you are
making a workflow that will take 16GB of memory then you will need a VM running
on a machine that can afford to give 16GB of memory to VirtualBox.  Also, we
only distribute 64-bit VMs which all modern PCs will support and VirtualBox
makes use of various virtualization extensions which most modern PCs support
(but you may want to check with your computer vendor).  </p>

### Logging In

The login username is <kbd>seqware</kbd> and the password is <kbd>seqware</kbd>. If you need to become <kbd>root</kbd> the password is the same.

### What Can You Do With It?

As the note above mentioned, you can use this VM to see what each of the
SeqWare tools can do, kick the tires, explore the docs more, etc. If you decide
to use SeqWare then this VM can also be your development and testing
environment for workflows.  Once you have created and tested a given workflow,
you can also use the SeqWare commands on this machine to "install" the workflow
bundle into a production system.  Or you can even hook up this VM to a real
local grid environment (such as an SGE cluster) for running workflows.  This is
exactly what we did at OICR, our SeqWare hosts are all virtual machines that
can submit workflow jobs to our physical cluster. You can find more information
on this later in the guide.

<img src="/assets/images/vm_screen.png" alt="SeqWare VM" width="600px"/>

## Installing with a Cloud VM

We currently support running SeqWare on the Amazon cloud on HPC nodes. These
are high-performance, cluster-compute nodes well suited for research, for specs
see [Cluster Compute Quadruple Extra Large
Instance](http://aws.amazon.com/ec2/instance-types/). These machines provide
23GB of memory and 2x quad core "Nehalem" processors which is typically
sufficient for analyzing a human exome within about 4 hours depending on the
specifics of your workflows.

### Getting an Amazon Cloud Account

To use Amazon's cloud (also know as Amazon Web Services or AWS) you need to sign up for an account and that requires a credit card.  Also, while launching these instances is simply point and click using Amazon's very nice AWS console, actually using these machines requires the same level of experience as using the local VM above.  If you are looking for a completely graphical, web-based service you should consider using one of the cloud-based providers like Nimbus Informatics or DNAnexus.

Signup for the Amazon cloud [here](http://aws.amazon.com/)

### Running the VM

What makes Amazon's cloud so amazingly awesome is its excellent support for both graphical UIs and programmatic APIs for controlling the cloud.  It is your choice on how you want to launch the VM, either through the console or via one of the many command line and programmatic tools available. The details are subject to change so we refer to Amazon's thorough [documentation](https://aws.amazon.com/documentation/).

Our current public AMI(s):

* SWStandaloneCentOS_v2_GenericDevBox_v5: ami-6bf54102

An example of the launching wizard in the Amazon AWS console can be seen below:

<img src="/assets/images/amazon_launcher.png" alt="SeqWare AWS Console" width="600px"/>

<p class="warning"><strong>Tip:</strong>Make sure you open port 22 for SSH and port 8080 for the SeqWare Portal and Web Service.</p>

### Logging In

Unlike the local VM there is no graphical desktop to log into.  Instead you will need to follow the directions on the Amazon site for using <kbd>ssh</kbd> to log into your running VM.  There you will have a command line interface to interact with the SeqWare tools. You can also view the SeqWare Portal and SeqWare Web Service remotely in your browser if you have previously opened the ports 22 and 8080.

### What Can You Do With It?

You can launch this public AMI which will give you a server with all the SeqWare projects pre-configured and loaded with some small examples.  You can then use the running VM to test workflows and write your own.  Since this VM runs on the fairly powerful HPC node type, you can actually use it to get real work done.  This instance is powerful enough to analyze a whole human exome in 4-8 hours and you can, of course, launch many instances simultaneously to process multiple exomes in parallel.


<p class="warning"><strong>Note:</strong>Keep in mind Amazon charges approximately $1.30 USD per hour to run these instances, it is your responsibility to monitor your cloud usage and turn your VMs off when not in use!</p>

### More to Come...

TODO: In the near future we will document the process to:

* launch clusters of SeqWare instances
* pass configuration information to instances (like your AWS keys)


## Installing from Scratch

<p class="warning"><strong>Note:</strong> This is not for the faint of heart.  We do not recommend you attempt to do this
unless you a very familiar with Linux and comfortable with complex software
configuration. We really recommend using the local VM in production and
configure it to submit jobs to a real cluster since the
Pegasus/Condor/Globus/SGE stack are difficult to setup correctly.</p>

This guide will be ported to this manual but for now the best instructions for
setting up SeqWare from scratch can be found on our [SourceForge
wiki](https://sourceforge.net/apps/mediawiki/seqware/index.php?title=Creating_a_SeqWare_VM).

## Next Step

Now that you have seen how to launch either a local of cloud-based SeqWare instance follow the 
"[Getting Started](/docs/3-getting-started/)" guide to see how to run the sample HelloWorld
workflow.;T;
I"≤#<div class="section" id="environment">
<h2>Environment</h2>

<p>SeqWare is designed to work in a 64-bit Linux environment, we do not support Windows
or MacOS.  You can still use SeqWare on your local Mac or Windows PC through
virtualization software.  You need to be comfortable with Linux before moving
forward with SeqWare, specifically the Bash shell, using an editor like vim or
emacs, and some experience programming in Java is extremely helpful.</p>

<p>To learn about Linux, the Bash shell, and Java we recommend the O'Reilly series of books:</p>

<ul>
<li><a href="http://amzn.com/B0093T2G3I">Linux in a Nutshell</a></li>
<li><a href="http://amzn.com/B0043GXMSY">Learning the bash Shell</a></li>
<li><a href="http://amzn.com/B0043EWVDI">Learning Java</a></li>
</ul>
</div><div class="section" id="installing-with-a-local-vm">
<h2>Installing with a Local VM</h2>

<p>We have created a VirtualBox VM with all SeqWare projects pre-installed along
with some sample data.  This is the easiest way to get started with SeqWare
since it requires no installation and configuration on your part.  While the
download is pretty large, you will not incur per hour fees as you do when
running on Amazon so it is a great way to get started with SeqWare, kick the
tires, and see if this is something you want to use.</p>

<div class="section" id="getting-the-vm">
<h3>Getting the VM</h3>

<p>Getting the local VM is a two-step process.  First, download (or install via
your OS's package management system) the VirtualBox application. This is a
great piece of software that will let you run the SeqWare CentOS VM on whatever
OS you currently have.</p>

<ul>
<li><a href="http://amzn.com/B0043EWVDI">Oracle Virtual Box</a></li>
</ul>
<p>Next, you will need to download our current VM image which is linked below.
Please make sure you are using the latest version, when we post a new one we
will tweet about it so consider following us on Twitter.</p>

<ul>
<li><a href="https://s3.amazonaws.com/nimbusinformatics.exchange/private/SeqWareVM_0.12.5-r5163_CentOS_6.2_20120904b.ova">SeqWareVM_0.12.5-r5163_CentOS_6.2_20120904.ova</a></li>
</ul>
<p>Open VirtualBox and use the "Import Appliance" tool to create a new SeqWare VM
on your system.  You can then launch it and you will be presented with a fairly
standard Linux desktop with links to the project's documentation to give you an
idea of where to begin (the "Getting Started" guide here which provides a
walk-through of using this VM).</p>

<p class="warning"><strong>Note:</strong>
When you import the VM you need to set your memory and CPU correctly.  Do not
over-commit resources (especially memory) since that will cause the machine to
"swap" memory to disk and slow your computer to a crawl. This VM is intended
for you to see SeqWare in action and then create your own workflows. If you are
making a workflow that will take 16GB of memory then you will need a VM running
on a machine that can afford to give 16GB of memory to VirtualBox.  Also, we
only distribute 64-bit VMs which all modern PCs will support and VirtualBox
makes use of various virtualization extensions which most modern PCs support
(but you may want to check with your computer vendor).  </p>


</div>
<div class="section" id="logging-in">
<h3>Logging In</h3>

<p>The login username is <kbd>seqware</kbd> and the password is <kbd>seqware</kbd>. If you need to become <kbd>root</kbd> the password is the same.</p>

</div>
<div class="section" id="what-can-you-do-with-it">
<h3>What Can You Do With It?</h3>

<p>As the note above mentioned, you can use this VM to see what each of the
SeqWare tools can do, kick the tires, explore the docs more, etc. If you decide
to use SeqWare then this VM can also be your development and testing
environment for workflows.  Once you have created and tested a given workflow,
you can also use the SeqWare commands on this machine to "install" the workflow
bundle into a production system.  Or you can even hook up this VM to a real
local grid environment (such as an SGE cluster) for running workflows.  This is
exactly what we did at OICR, our SeqWare hosts are all virtual machines that
can submit workflow jobs to our physical cluster. You can find more information
on this later in the guide.</p>

<p><img src="/assets/images/vm_screen.png" alt="SeqWare VM" width="600px"></p>

</div>
</div><div class="section" id="installing-with-a-cloud-vm">
<h2>Installing with a Cloud VM</h2>

<p>We currently support running SeqWare on the Amazon cloud on HPC nodes. These
are high-performance, cluster-compute nodes well suited for research, for specs
see <a href="http://aws.amazon.com/ec2/instance-types/">Cluster Compute Quadruple Extra Large
Instance</a>. These machines provide
23GB of memory and 2x quad core "Nehalem" processors which is typically
sufficient for analyzing a human exome within about 4 hours depending on the
specifics of your workflows.</p>

<div class="section" id="getting-an-amazon-cloud-account">
<h3>Getting an Amazon Cloud Account</h3>

<p>To use Amazon's cloud (also know as Amazon Web Services or AWS) you need to sign up for an account and that requires a credit card.  Also, while launching these instances is simply point and click using Amazon's very nice AWS console, actually using these machines requires the same level of experience as using the local VM above.  If you are looking for a completely graphical, web-based service you should consider using one of the cloud-based providers like Nimbus Informatics or DNAnexus.</p>

<p>Signup for the Amazon cloud <a href="http://aws.amazon.com/">here</a></p>

</div>
<div class="section" id="running-the-vm">
<h3>Running the VM</h3>

<p>What makes Amazon's cloud so amazingly awesome is its excellent support for both graphical UIs and programmatic APIs for controlling the cloud.  It is your choice on how you want to launch the VM, either through the console or via one of the many command line and programmatic tools available. The details are subject to change so we refer to Amazon's thorough <a href="https://aws.amazon.com/documentation/">documentation</a>.</p>

<p>Our current public AMI(s):</p>

<ul>
<li>SWStandaloneCentOS_v2_GenericDevBox_v5: ami-6bf54102</li>
</ul>
<p>An example of the launching wizard in the Amazon AWS console can be seen below:</p>

<p><img src="/assets/images/amazon_launcher.png" alt="SeqWare AWS Console" width="600px"></p>

<p class="warning"><strong>Tip:</strong>Make sure you open port 22 for SSH and port 8080 for the SeqWare Portal and Web Service.</p>


</div>
<div class="section" id="logging-in">
<h3>Logging In</h3>

<p>Unlike the local VM there is no graphical desktop to log into.  Instead you will need to follow the directions on the Amazon site for using <kbd>ssh</kbd> to log into your running VM.  There you will have a command line interface to interact with the SeqWare tools. You can also view the SeqWare Portal and SeqWare Web Service remotely in your browser if you have previously opened the ports 22 and 8080.</p>

</div>
<div class="section" id="what-can-you-do-with-it">
<h3>What Can You Do With It?</h3>

<p>You can launch this public AMI which will give you a server with all the SeqWare projects pre-configured and loaded with some small examples.  You can then use the running VM to test workflows and write your own.  Since this VM runs on the fairly powerful HPC node type, you can actually use it to get real work done.  This instance is powerful enough to analyze a whole human exome in 4-8 hours and you can, of course, launch many instances simultaneously to process multiple exomes in parallel.</p>

<p class="warning"><strong>Note:</strong>Keep in mind Amazon charges approximately $1.30 USD per hour to run these instances, it is your responsibility to monitor your cloud usage and turn your VMs off when not in use!</p>


</div>
<div class="section" id="more-to-come">
<h3>More to Come...</h3>

<p>TODO: In the near future we will document the process to:</p>

<ul>
<li>launch clusters of SeqWare instances</li>
<li>pass configuration information to instances (like your AWS keys)</li>
</ul>
</div>
</div><div class="section" id="installing-from-scratch">
<h2>Installing from Scratch</h2>

<p class="warning"><strong>Note:</strong> This is not for the faint of heart.  We do not recommend you attempt to do this
unless you a very familiar with Linux and comfortable with complex software
configuration. We really recommend using the local VM in production and
configure it to submit jobs to a real cluster since the
Pegasus/Condor/Globus/SGE stack are difficult to setup correctly.</p>


<p>This guide will be ported to this manual but for now the best instructions for
setting up SeqWare from scratch can be found on our <a href="https://sourceforge.net/apps/mediawiki/seqware/index.php?title=Creating_a_SeqWare_VM">SourceForge
wiki</a>.</p>

</div><div class="section" id="next-step">
<h2>Next Step</h2>

<p>Now that you have seen how to launch either a local of cloud-based SeqWare instance follow the
"<a href="/docs/3-getting-started/">Getting Started</a>" guide to see how to run the sample HelloWorld
workflow.</p>
</div>;T;I"!<h2>Environment</h2>

<p>SeqWare is designed to work in a 64-bit Linux environment, we do not support Windows
or MacOS.  You can still use SeqWare on your local Mac or Windows PC through
virtualization software.  You need to be comfortable with Linux before moving
forward with SeqWare, specifically the Bash shell, using an editor like vim or
emacs, and some experience programming in Java is extremely helpful.</p>

<p>To learn about Linux, the Bash shell, and Java we recommend the O'Reilly series of books:</p>

<ul>
<li><a href="http://amzn.com/B0093T2G3I">Linux in a Nutshell</a></li>
<li><a href="http://amzn.com/B0043GXMSY">Learning the bash Shell</a></li>
<li><a href="http://amzn.com/B0043EWVDI">Learning Java</a></li>
</ul>


<h2>Installing with a Local VM</h2>

<p>We have created a VirtualBox VM with all SeqWare projects pre-installed along
with some sample data.  This is the easiest way to get started with SeqWare
since it requires no installation and configuration on your part.  While the
download is pretty large, you will not incur per hour fees as you do when
running on Amazon so it is a great way to get started with SeqWare, kick the
tires, and see if this is something you want to use.</p>

<h3>Getting the VM</h3>

<p>Getting the local VM is a two-step process.  First, download (or install via
your OS's package management system) the VirtualBox application. This is a
great piece of software that will let you run the SeqWare CentOS VM on whatever
OS you currently have.</p>

<ul>
<li><a href="http://amzn.com/B0043EWVDI">Oracle Virtual Box</a></li>
</ul>


<p>Next, you will need to download our current VM image which is linked below.
Please make sure you are using the latest version, when we post a new one we
will tweet about it so consider following us on Twitter.</p>

<ul>
<li><a href="https://s3.amazonaws.com/nimbusinformatics.exchange/private/SeqWareVM_0.12.5-r5163_CentOS_6.2_20120904b.ova">SeqWareVM_0.12.5-r5163_CentOS_6.2_20120904.ova</a></li>
</ul>


<p>Open VirtualBox and use the "Import Appliance" tool to create a new SeqWare VM
on your system.  You can then launch it and you will be presented with a fairly
standard Linux desktop with links to the project's documentation to give you an
idea of where to begin (the "Getting Started" guide here which provides a
walk-through of using this VM).</p>

<p class="warning"><strong>Note:</strong>
When you import the VM you need to set your memory and CPU correctly.  Do not
over-commit resources (especially memory) since that will cause the machine to
"swap" memory to disk and slow your computer to a crawl. This VM is intended
for you to see SeqWare in action and then create your own workflows. If you are
making a workflow that will take 16GB of memory then you will need a VM running
on a machine that can afford to give 16GB of memory to VirtualBox.  Also, we
only distribute 64-bit VMs which all modern PCs will support and VirtualBox
makes use of various virtualization extensions which most modern PCs support
(but you may want to check with your computer vendor).  </p>


<h3>Logging In</h3>

<p>The login username is <kbd>seqware</kbd> and the password is <kbd>seqware</kbd>. If you need to become <kbd>root</kbd> the password is the same.</p>

<h3>What Can You Do With It?</h3>

<p>As the note above mentioned, you can use this VM to see what each of the
SeqWare tools can do, kick the tires, explore the docs more, etc. If you decide
to use SeqWare then this VM can also be your development and testing
environment for workflows.  Once you have created and tested a given workflow,
you can also use the SeqWare commands on this machine to "install" the workflow
bundle into a production system.  Or you can even hook up this VM to a real
local grid environment (such as an SGE cluster) for running workflows.  This is
exactly what we did at OICR, our SeqWare hosts are all virtual machines that
can submit workflow jobs to our physical cluster. You can find more information
on this later in the guide.</p>

<p><img src="/assets/images/vm_screen.png" alt="SeqWare VM" width="600px"/></p>

<h2>Installing with a Cloud VM</h2>

<p>We currently support running SeqWare on the Amazon cloud on HPC nodes. These
are high-performance, cluster-compute nodes well suited for research, for specs
see <a href="http://aws.amazon.com/ec2/instance-types/">Cluster Compute Quadruple Extra Large
Instance</a>. These machines provide
23GB of memory and 2x quad core "Nehalem" processors which is typically
sufficient for analyzing a human exome within about 4 hours depending on the
specifics of your workflows.</p>

<h3>Getting an Amazon Cloud Account</h3>

<p>To use Amazon's cloud (also know as Amazon Web Services or AWS) you need to sign up for an account and that requires a credit card.  Also, while launching these instances is simply point and click using Amazon's very nice AWS console, actually using these machines requires the same level of experience as using the local VM above.  If you are looking for a completely graphical, web-based service you should consider using one of the cloud-based providers like Nimbus Informatics or DNAnexus.</p>

<p>Signup for the Amazon cloud <a href="http://aws.amazon.com/">here</a></p>

<h3>Running the VM</h3>

<p>What makes Amazon's cloud so amazingly awesome is its excellent support for both graphical UIs and programmatic APIs for controlling the cloud.  It is your choice on how you want to launch the VM, either through the console or via one of the many command line and programmatic tools available. The details are subject to change so we refer to Amazon's thorough <a href="https://aws.amazon.com/documentation/">documentation</a>.</p>

<p>Our current public AMI(s):</p>

<ul>
<li>SWStandaloneCentOS_v2_GenericDevBox_v5: ami-6bf54102</li>
</ul>


<p>An example of the launching wizard in the Amazon AWS console can be seen below:</p>

<p><img src="/assets/images/amazon_launcher.png" alt="SeqWare AWS Console" width="600px"/></p>

<p class="warning"><strong>Tip:</strong>Make sure you open port 22 for SSH and port 8080 for the SeqWare Portal and Web Service.</p>


<h3>Logging In</h3>

<p>Unlike the local VM there is no graphical desktop to log into.  Instead you will need to follow the directions on the Amazon site for using <kbd>ssh</kbd> to log into your running VM.  There you will have a command line interface to interact with the SeqWare tools. You can also view the SeqWare Portal and SeqWare Web Service remotely in your browser if you have previously opened the ports 22 and 8080.</p>

<h3>What Can You Do With It?</h3>

<p>You can launch this public AMI which will give you a server with all the SeqWare projects pre-configured and loaded with some small examples.  You can then use the running VM to test workflows and write your own.  Since this VM runs on the fairly powerful HPC node type, you can actually use it to get real work done.  This instance is powerful enough to analyze a whole human exome in 4-8 hours and you can, of course, launch many instances simultaneously to process multiple exomes in parallel.</p>

<p class="warning"><strong>Note:</strong>Keep in mind Amazon charges approximately $1.30 USD per hour to run these instances, it is your responsibility to monitor your cloud usage and turn your VMs off when not in use!</p>


<h3>More to Come...</h3>

<p>TODO: In the near future we will document the process to:</p>

<ul>
<li>launch clusters of SeqWare instances</li>
<li>pass configuration information to instances (like your AWS keys)</li>
</ul>


<h2>Installing from Scratch</h2>

<p class="warning"><strong>Note:</strong> This is not for the faint of heart.  We do not recommend you attempt to do this
unless you a very familiar with Linux and comfortable with complex software
configuration. We really recommend using the local VM in production and
configure it to submit jobs to a real cluster since the
Pegasus/Condor/Globus/SGE stack are difficult to setup correctly.</p>


<p>This guide will be ported to this manual but for now the best instructions for
setting up SeqWare from scratch can be found on our <a href="https://sourceforge.net/apps/mediawiki/seqware/index.php?title=Creating_a_SeqWare_VM">SourceForge
wiki</a>.</p>

<h2>Next Step</h2>

<p>Now that you have seen how to launch either a local of cloud-based SeqWare instance follow the
"<a href="/docs/3-getting-started/">Getting Started</a>" guide to see how to run the sample HelloWorld
workflow.</p>
;T;@T"/blog/{;{
;I"˝<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<title>SeqWare ‚Ä∫ News</title>
<meta content="nanoc 3.4.0" name="generator">
<link href="../assets/style-v17.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://feeds.feedburner.com/seqware" rel="alternate" title="The SeqWare Blog" type="application/atom+xml">
<script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-34523087-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script>
</head>
<body>
<div class="wrapper">
<!-- ***** navigation ***** -->
<div class="nav">
<ol>
<li><a href="../"><span>Home</span></a></li>
<li><span class="active" title="You're here."><span>News</span></span></li>
<li><a href="../docs/"><span>Documentation</span></a></li>
<li><a href="../community/"><span>Community</span></a></li>
<li><a href="../partners/"><span>Partners</span></a></li>
<li><a href="../about/"><span>About</span></a></li>
</ol>
</div>
<!-- ***** sidebar ***** -->
<div class="side">
<ol>
<li><a href="13/"><span>Articles about v0.13.x</span></a></li>
<li><a href="12/"><span>Articles about v0.12.x</span></a></li>
</ol>
</div>
<!-- ***** body ***** -->
<div class="body">
<div class="article">
<div class="header">
<h1>News</h1>
</div>
<p>You can follow SeqWare on Twitter where we will announce new releases and other key events.</p>

<p>
<a href="https://twitter.com/SeqWare" class="twitter-follow-button" data-show-count="false" data-size="large">Follow @SeqWare</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script></p>


<div class="section" id="new-seqware-website-for-0-13-x-september-2nd-2012">
<h2>New SeqWare Website for 0.13.x <span class="date">(September 2nd, 2012)</span>
</h2>
<p>We are slowly transitioning from SourceForge to GitHub.  Part of this transition will involve the migration of our MediaWiki content to this new nanoc-based website which will make it much easier to manage and redistribute our documentation.</p>
</div>
</div>
</div>
</div>
<!-- ***** footer ***** -->
<div id="footer">
<p>SeqWare ¬© 2007‚Äì2012 Brian O&#8217;Connor. SeqWare is released under the a <a rel="license" href="http://www.gnu.org/licenses/licenses.html">GNU GPL v3</a>. This site is built using the excellent <a href="http://nanoc.stoneship.org/">nanoc</a> tool and example site along with the <a href="http://www.fonts.info/info/press/free-fonts-for-font-face-embedding.htm">Graublau</a> and <a href="http://scripts.sil.org/Gentium">Gentium</a> fonts.</p>
</div>
</body>
</html>
;T;	I"$<p>You can follow SeqWare on Twitter where we will announce new releases and other key events.</p>

<p>
<a href="https://twitter.com/SeqWare" class="twitter-follow-button" data-show-count="false" data-size="large">Follow @SeqWare</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</p>


<%= render 'article', :article => sorted_articles.first %>
;T;
I"ç<p>You can follow SeqWare on Twitter where we will announce new releases and other key events.</p>

<p>
<a href="https://twitter.com/SeqWare" class="twitter-follow-button" data-show-count="false" data-size="large">Follow @SeqWare</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script></p>


<div class="section" id="new-seqware-website-for-0-13-x-september-2nd-2012">
<h2>New SeqWare Website for 0.13.x <span class="date">(September 2nd, 2012)</span>
</h2>
<p>We are slowly transitioning from SourceForge to GitHub.  Part of this transition will involve the migration of our MediaWiki content to this new nanoc-based website which will make it much easier to manage and redistribute our documentation.</p>
</div>;T;I"<<p>You can follow SeqWare on Twitter where we will announce new releases and other key events.</p>

<p>
<a href="https://twitter.com/SeqWare" class="twitter-follow-button" data-show-count="false" data-size="large">Follow @SeqWare</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</p>


<h2>New SeqWare Website for 0.13.x <span class="date">(September 2nd, 2012)</span></h2>
<p>We are slowly transitioning from SourceForge to GitHub.  Part of this transition will involve the migration of our MediaWiki content to this new nanoc-based website which will make it much easier to manage and redistribute our documentation.</p>


;T;@["/blog/20/{;{
;I"Ù<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<title>nanoc ‚Ä∫ Articles about v2.0</title>
<meta content="nanoc 3.4.0" name="generator">
<link href="../../assets/style-v17.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://feeds.feedburner.com/nanoc" rel="alternate" title="The nanoc Blog" type="application/atom+xml">
<script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-15639968-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script>
</head>
<body>
<div class="wrapper">
<!-- ***** navigation ***** -->
<div class="nav">
<ol>
<li><a href="../../"><span>Home</span></a></li>
<li><a href="../"><span>News</span></a></li>
<li><a href="../../docs/"><span>Documentation</span></a></li>
<li><a href="../../community/"><span>Community</span></a></li>
</ol>
</div>
<!-- ***** sidebar ***** -->
<div class="side">
<ol>
<li><a href="../13/"><span>Articles about v3.4</span></a></li>
<li><a href="../12/"><span>Articles about v0.12.x</span></a></li>
</ol>
</div>
<!-- ***** body ***** -->
<div class="body">
<div class="article">
<div class="header">
<h1>Articles about v2.0</h1>
</div>

	<div class="section" id="nanoc-2-0-released-december-25th-2007">
<h2>nanoc 2.0 released <span class="date">(December 25th, 2007)</span>
</h2>
<p>nanoc 2.0 has arrived, right in time for christmas!</p>

<p>In addition to nanoc 2.0, I‚Äôm also proud to present a revamped nanoc site, featuring a much less amateurish look, and most importantly, a <a href="../../docs/">brand new, completely rewritten manual</a>. There are quite a few other changes, but I‚Äôm sure you‚Äôll find those by yourself.</p>

<p>To update or install, simply:</p>

<pre><span class="prompt">%</span> <kbd>gem install nanoc</kbd></pre>

<p>Before upgrading, know that there have been quite a few changes, and that some of the changes may cause your site to break. Read carefully what I have to say.</p>

<div class="section" id="new-features">
<h3>New Features</h3>

<p>In addition to defining custom filters, it is now possible to define <strong>custom layout processors</strong>. This is very similar to the new way of defining filters (see below).</p>

<p>Another new feature involves <strong>custom data sources</strong>. Instead of letting nanoc read the data off flat files on the hard disk, you can tell it to read from a database instead, for example. This may not sound terribly exciting, but it opens the door for writing GUI applications that manage a nanoc site. (There a no such GUI applications yet, though. Want to give it a shot?)</p>

<p>Quite useful are <strong>parent and children links for page objects</strong>. You can now easily get the parent of a page like <code>@item.parent</code>, and you can get a page‚Äôs child pages by doing <code>@item.children</code>. Very useful for building site maps or breadcrumb navigation, for example.</p>

<p>The coolest (and perhaps oddest) feature is an <strong>auto-compiler</strong>. Instead of having to manually compile your site every time you make a change, you can now let nanoc compile it whenever necessary.</p>

</div>
<div class="section" id="important-differences-with-nanoc-1-x">
<h3>Important Differences with nanoc 1.x</h3>

<p><strong>The way custom filters are defined has changed.</strong> You can no longer use <code>register_filter</code>. Instead, you can write filters by subclassing <code>Nanoc::Filter</code>. For example, the Markdown filter looks like this now:</p>

<pre><code class="language-ruby"><span class="keyword">class</span> <span class="class">MarkdownFilter</span> &lt; <span class="constant">Nanoc</span>::<span class="constant">Filter</span>
  identifiers <span class="symbol">:markdown</span>, <span class="symbol">:bluecloth</span>

  <span class="keyword">def</span> <span class="function">run</span>(content)
    nanoc_require <span class="string"><span class="delimiter">'</span><span class="content">bluecloth</span><span class="delimiter">'</span></span>
    ::<span class="constant">BlueCloth</span>.new(content).to_html
  <span class="keyword">end</span>
<span class="keyword">end</span></code></pre>

<p><strong>The <code>filters</code> attribute is gone now.</strong> To define the list of filters to run before laying out a page, use the <code>filters_pre</code> attribute, which does exactly the same as <code>filters</code>.</p>

<p><strong>Support for Liquid has been dropped entirely.</strong> Liquid is a nice templating system, but it‚Äôs only really useful in situations where template writers should have restricted access to variables and functions, because of security issues. Such security issues can be a problem on a live web server, but they are completely irrelevant for a nanoc-powered site.</p>

<p><strong>The Erubis filter isn‚Äôt there anymore.</strong> The main reason for using Erubis is speed, but since speed is not really relevant for nanoc-powered sites, the filter has been removed.</p>

<p><strong>Identical files are no longer printed</strong> which makes nanoc‚Äôs output cleaner for sites with many pages. You can use <kbd>--verbose</kbd> or <kbd>-V</kbd> (uppercase V) to let nanoc print identical files.</p>

<p><strong>Templates are no longer run through ERB when creating a page.</strong> This <del>bug</del> <ins>feature</ins> was quite confusing, and it wasn‚Äôt really useful either.</p>

<p>It may not be useful to everybody, but I‚Äôd still like to mention that the nanoc source code has been completely restructured. Some parts were rewritten from scratch. The code is a lot cleaner now, so if you want to take a shot at hacking away at nanoc, now‚Äôs the time.</p>

</div>
<div class="section" id="compatibility-with-ruby-1-9">
<h3>Compatibility with Ruby 1.9</h3>

<p>nanoc is compatible with Ruby 1.9, which is being (or already has been) released today. (I admit I cheated a bit to make it compatible, though, but that‚Äôs not relevant.)</p>

<p>BlueCloth, however, does not appear to be compatible with Ruby 1.9. You‚Äôll get a &#8220;invalid mbstring sequence&#8221; error when trying to filter a page using the <code>markdown</code>/<code>bluecloth</code> filter. To resolve this, you can use RedCloth instead of BlueCloth, since RedCloth also supports Markdown. The RedCloth filter is identified using <code>redcloth</code> or <code>textile</code>.</p>

<p>The nanoc site, which is available as a sample from the <a href="../../docs/1-introduction/#development">Mercurial repository</a>, cannot currently be compiled because of its dependency on Hpricot, and Hpricot does not compile on Ruby 1.9.</p>

<p>These are only small issues, and I‚Äôm convinced that these will be fixed soon. If you rely on BlueCloth, Hpricot, or anything else that is not currently compatible with Ruby 1.9, you can still use Ruby 1.8‚Äînanoc still works on 1.8, and it‚Äôll stay that way for a long time.</p>

</div>
<div class="section" id="last-words">
<h3>Last Words</h3>

<p>nanoc has been tested thorougly, but there‚Äôs always a chance that something goes wrong. If you are experiencing any issues, please do <a href="https://nanoc.stoneship.org/trac/newticket">do report them</a>. They‚Äôll be resolved in no time. Thanks a lot!</p>

<p>Enjoy nanoc 2.0. Merry christmas, and a happy new year.</p>
</div>
</div>
</div>
</div>
</div>
<!-- ***** footer ***** -->
<div id="footer">
<p>SeqWare ¬© 2007‚Äì2012 Brian O&#8217;Connor. SeqWare is released under the a <a rel="license" href="http://www.gnu.org/licenses/licenses.html">GNU GPL v3</a>. This site is built using the excellent <a href="http://nanoc.stoneship.org/">nanoc</a> tool and examples with the <a href="http://www.fonts.info/info/press/free-fonts-for-font-face-embedding.htm">Graublau</a> and <a href="http://scripts.sil.org/Gentium">Gentium</a> fonts.</p>
</div>
</body>
</html>
;T;	I"<%= render 'articles' %>;T;
I"(
	<div class="section" id="nanoc-2-0-released-december-25th-2007">
<h2>nanoc 2.0 released <span class="date">(December 25th, 2007)</span>
</h2>
<p>nanoc 2.0 has arrived, right in time for christmas!</p>

<p>In addition to nanoc 2.0, I‚Äôm also proud to present a revamped nanoc site, featuring a much less amateurish look, and most importantly, a <a href="/docs/">brand new, completely rewritten manual</a>. There are quite a few other changes, but I‚Äôm sure you‚Äôll find those by yourself.</p>

<p>To update or install, simply:</p>

<pre><span class="prompt">%</span> <kbd>gem install nanoc</kbd></pre>

<p>Before upgrading, know that there have been quite a few changes, and that some of the changes may cause your site to break. Read carefully what I have to say.</p>

<div class="section" id="new-features">
<h3>New Features</h3>

<p>In addition to defining custom filters, it is now possible to define <strong>custom layout processors</strong>. This is very similar to the new way of defining filters (see below).</p>

<p>Another new feature involves <strong>custom data sources</strong>. Instead of letting nanoc read the data off flat files on the hard disk, you can tell it to read from a database instead, for example. This may not sound terribly exciting, but it opens the door for writing GUI applications that manage a nanoc site. (There a no such GUI applications yet, though. Want to give it a shot?)</p>

<p>Quite useful are <strong>parent and children links for page objects</strong>. You can now easily get the parent of a page like <code>@item.parent</code>, and you can get a page‚Äôs child pages by doing <code>@item.children</code>. Very useful for building site maps or breadcrumb navigation, for example.</p>

<p>The coolest (and perhaps oddest) feature is an <strong>auto-compiler</strong>. Instead of having to manually compile your site every time you make a change, you can now let nanoc compile it whenever necessary.</p>

</div>
<div class="section" id="important-differences-with-nanoc-1-x">
<h3>Important Differences with nanoc 1.x</h3>

<p><strong>The way custom filters are defined has changed.</strong> You can no longer use <code>register_filter</code>. Instead, you can write filters by subclassing <code>Nanoc::Filter</code>. For example, the Markdown filter looks like this now:</p>

<pre><code class="language-ruby">class MarkdownFilter &lt; Nanoc::Filter
  identifiers :markdown, :bluecloth

  def run(content)
    nanoc_require 'bluecloth'
    ::BlueCloth.new(content).to_html
  end
end</code></pre>

<p><strong>The <code>filters</code> attribute is gone now.</strong> To define the list of filters to run before laying out a page, use the <code>filters_pre</code> attribute, which does exactly the same as <code>filters</code>.</p>

<p><strong>Support for Liquid has been dropped entirely.</strong> Liquid is a nice templating system, but it‚Äôs only really useful in situations where template writers should have restricted access to variables and functions, because of security issues. Such security issues can be a problem on a live web server, but they are completely irrelevant for a nanoc-powered site.</p>

<p><strong>The Erubis filter isn‚Äôt there anymore.</strong> The main reason for using Erubis is speed, but since speed is not really relevant for nanoc-powered sites, the filter has been removed.</p>

<p><strong>Identical files are no longer printed</strong> which makes nanoc‚Äôs output cleaner for sites with many pages. You can use <kbd>--verbose</kbd> or <kbd>-V</kbd> (uppercase V) to let nanoc print identical files.</p>

<p><strong>Templates are no longer run through ERB when creating a page.</strong> This <del>bug</del> <ins>feature</ins> was quite confusing, and it wasn‚Äôt really useful either.</p>

<p>It may not be useful to everybody, but I‚Äôd still like to mention that the nanoc source code has been completely restructured. Some parts were rewritten from scratch. The code is a lot cleaner now, so if you want to take a shot at hacking away at nanoc, now‚Äôs the time.</p>

</div>
<div class="section" id="compatibility-with-ruby-1-9">
<h3>Compatibility with Ruby 1.9</h3>

<p>nanoc is compatible with Ruby 1.9, which is being (or already has been) released today. (I admit I cheated a bit to make it compatible, though, but that‚Äôs not relevant.)</p>

<p>BlueCloth, however, does not appear to be compatible with Ruby 1.9. You‚Äôll get a "invalid mbstring sequence" error when trying to filter a page using the <code>markdown</code>/<code>bluecloth</code> filter. To resolve this, you can use RedCloth instead of BlueCloth, since RedCloth also supports Markdown. The RedCloth filter is identified using <code>redcloth</code> or <code>textile</code>.</p>

<p>The nanoc site, which is available as a sample from the <a href="/docs/1-introduction/#development">Mercurial repository</a>, cannot currently be compiled because of its dependency on Hpricot, and Hpricot does not compile on Ruby 1.9.</p>

<p>These are only small issues, and I‚Äôm convinced that these will be fixed soon. If you rely on BlueCloth, Hpricot, or anything else that is not currently compatible with Ruby 1.9, you can still use Ruby 1.8‚Äînanoc still works on 1.8, and it‚Äôll stay that way for a long time.</p>

</div>
<div class="section" id="last-words">
<h3>Last Words</h3>

<p>nanoc has been tested thorougly, but there‚Äôs always a chance that something goes wrong. If you are experiencing any issues, please do <a href="https://nanoc.stoneship.org/trac/newticket">do report them</a>. They‚Äôll be resolved in no time. Thanks a lot!</p>

<p>Enjoy nanoc 2.0. Merry christmas, and a happy new year.</p>
</div>
</div>;T;I"
	<h2>nanoc 2.0 released <span class="date">(December 25th, 2007)</span></h2>
<p>nanoc 2.0 has arrived, right in time for christmas!</p>

<p>In addition to nanoc 2.0, I‚Äôm also proud to present a revamped nanoc site, featuring a much less amateurish look, and most importantly, a <a href="/docs/">brand new, completely rewritten manual</a>. There are quite a few other changes, but I‚Äôm sure you‚Äôll find those by yourself.</p>

<p>To update or install, simply:</p>

<pre><span class="prompt">%</span> <kbd>gem install nanoc</kbd></pre>

<p>Before upgrading, know that there have been quite a few changes, and that some of the changes may cause your site to break. Read carefully what I have to say.</p>

<h3>New Features</h3>

<p>In addition to defining custom filters, it is now possible to define <strong>custom layout processors</strong>. This is very similar to the new way of defining filters (see below).</p>

<p>Another new feature involves <strong>custom data sources</strong>. Instead of letting nanoc read the data off flat files on the hard disk, you can tell it to read from a database instead, for example. This may not sound terribly exciting, but it opens the door for writing GUI applications that manage a nanoc site. (There a no such GUI applications yet, though. Want to give it a shot?)</p>

<p>Quite useful are <strong>parent and children links for page objects</strong>. You can now easily get the parent of a page like <code>@item.parent</code>, and you can get a page‚Äôs child pages by doing <code>@item.children</code>. Very useful for building site maps or breadcrumb navigation, for example.</p>

<p>The coolest (and perhaps oddest) feature is an <strong>auto-compiler</strong>. Instead of having to manually compile your site every time you make a change, you can now let nanoc compile it whenever necessary.</p>

<h3>Important Differences with nanoc 1.x</h3>

<p><strong>The way custom filters are defined has changed.</strong> You can no longer use <code>register_filter</code>. Instead, you can write filters by subclassing <code>Nanoc::Filter</code>. For example, the Markdown filter looks like this now:</p>

<pre><code class="language-ruby">class MarkdownFilter &lt; Nanoc::Filter
  identifiers :markdown, :bluecloth

  def run(content)
    nanoc_require 'bluecloth'
    ::BlueCloth.new(content).to_html
  end
end</code></pre>

<p><strong>The <code>filters</code> attribute is gone now.</strong> To define the list of filters to run before laying out a page, use the <code>filters_pre</code> attribute, which does exactly the same as <code>filters</code>.</p>

<p><strong>Support for Liquid has been dropped entirely.</strong> Liquid is a nice templating system, but it‚Äôs only really useful in situations where template writers should have restricted access to variables and functions, because of security issues. Such security issues can be a problem on a live web server, but they are completely irrelevant for a nanoc-powered site.</p>

<p><strong>The Erubis filter isn‚Äôt there anymore.</strong> The main reason for using Erubis is speed, but since speed is not really relevant for nanoc-powered sites, the filter has been removed.</p>

<p><strong>Identical files are no longer printed</strong> which makes nanoc‚Äôs output cleaner for sites with many pages. You can use <kbd>--verbose</kbd> or <kbd>-V</kbd> (uppercase V) to let nanoc print identical files.</p>

<p><strong>Templates are no longer run through ERB when creating a page.</strong> This <del>bug</del> <ins>feature</ins> was quite confusing, and it wasn‚Äôt really useful either.</p>

<p>It may not be useful to everybody, but I‚Äôd still like to mention that the nanoc source code has been completely restructured. Some parts were rewritten from scratch. The code is a lot cleaner now, so if you want to take a shot at hacking away at nanoc, now‚Äôs the time.</p>

<h3>Compatibility with Ruby 1.9</h3>

<p>nanoc is compatible with Ruby 1.9, which is being (or already has been) released today. (I admit I cheated a bit to make it compatible, though, but that‚Äôs not relevant.)</p>

<p>BlueCloth, however, does not appear to be compatible with Ruby 1.9. You‚Äôll get a "invalid mbstring sequence" error when trying to filter a page using the <code>markdown</code>/<code>bluecloth</code> filter. To resolve this, you can use RedCloth instead of BlueCloth, since RedCloth also supports Markdown. The RedCloth filter is identified using <code>redcloth</code> or <code>textile</code>.</p>

<p>The nanoc site, which is available as a sample from the <a href="/docs/1-introduction/#development">Mercurial repository</a>, cannot currently be compiled because of its dependency on Hpricot, and Hpricot does not compile on Ruby 1.9.</p>

<p>These are only small issues, and I‚Äôm convinced that these will be fixed soon. If you rely on BlueCloth, Hpricot, or anything else that is not currently compatible with Ruby 1.9, you can still use Ruby 1.8&mdash;nanoc still works on 1.8, and it‚Äôll stay that way for a long time.</p>

<h3>Last Words</h3>

<p>nanoc has been tested thorougly, but there‚Äôs always a chance that something goes wrong. If you are experiencing any issues, please do <a href="https://nanoc.stoneship.org/trac/newticket">do report them</a>. They‚Äôll be resolved in no time. Thanks a lot!</p>

<p>Enjoy nanoc 2.0. Merry christmas, and a happy new year.</p>



;T;@b"/blog/31/{;{
;I"™'<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<title>nanoc ‚Ä∫ Articles about v3.1</title>
<meta content="nanoc 3.4.0" name="generator">
<link href="../../assets/style-v17.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://feeds.feedburner.com/nanoc" rel="alternate" title="The nanoc Blog" type="application/atom+xml">
<script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-15639968-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script>
</head>
<body>
<div class="wrapper">
<!-- ***** navigation ***** -->
<div class="nav">
<ol>
<li><a href="../../"><span>Home</span></a></li>
<li><a href="../"><span>News</span></a></li>
<li><a href="../../docs/"><span>Documentation</span></a></li>
<li><a href="../../community/"><span>Community</span></a></li>
</ol>
</div>
<!-- ***** sidebar ***** -->
<div class="side">
<ol>
<li><a href="../13/"><span>Articles about v3.4</span></a></li>
<li><a href="../12/"><span>Articles about v0.12.x</span></a></li>
</ol>
</div>
<!-- ***** body ***** -->
<div class="body">
<div class="article">
<div class="header">
<h1>Articles about v3.1</h1>
</div>

	<div class="section" id="nanoc-3-1-released-april-3rd-2010">
<h2>nanoc 3.1 released <span class="date">(April 3rd, 2010)</span>
</h2>
<p>nanoc 3.1 is out now. This release introduces quite a few useful features, including API improvements and support for binary assets. Check the <a href="../../release-notes/">full release notes</a> for details. Here‚Äôs how to install nanoc 3.1:</p>

<pre><span class="prompt">%</span> <kbd>gem install nanoc</kbd></pre>


<p>nanoc 3.1 is backwards compatible with nanoc 3.0.x. All sites built with nanoc 3.0.x should compile without issues on nanoc 3.1.</p>

<p>The biggest new feature is support for binary assets. Files such as images, audio files and movies can now easily be managed by nanoc. They behave just like textual items; you can drop them in the content/ directory and they can have metadata as well. Filtering binary items is easy as well; here‚Äôs an example of a <code>:rotate</code> filter that uses the <code>sips</code> command, built into Mac OS X, for rotating images:</p>

<pre><code class="language-ruby"><span class="keyword">class</span> <span class="class">RotateFilter</span> &lt; <span class="constant">Nanoc3</span>::<span class="constant">Filter</span>

  identifier <span class="symbol">:rotate</span>
  type       <span class="symbol">:binary</span>

  <span class="keyword">def</span> <span class="function">run</span>(filename, params={})
    system(
      <span class="string"><span class="delimiter">'</span><span class="content">sips</span><span class="delimiter">'</span></span>,
      <span class="string"><span class="delimiter">'</span><span class="content">--rotate</span><span class="delimiter">'</span></span>, params[<span class="symbol">:angle</span>].to_s,
      <span class="string"><span class="delimiter">'</span><span class="content">--out</span><span class="delimiter">'</span></span>,    output_filename,
      filename
    )
  <span class="keyword">end</span>

<span class="keyword">end</span></code></pre>


<p>This filter can now be invoked like any other filter. For example, suppose you have a <code>content/images/tree.jpg</code> image, you can write the following rules for creating a rotated version:</p>

<pre><code class="language-ruby">compile <span class="string"><span class="delimiter">'</span><span class="content">/images/tree/</span><span class="delimiter">'</span></span> <span class="keyword">do</span>
  filter <span class="symbol">:rotate</span>, <span class="symbol">:angle</span> =&gt; <span class="float">5.0</span>
<span class="keyword">end</span>

route <span class="string"><span class="delimiter">'</span><span class="content">/images/tree/</span><span class="delimiter">'</span></span> <span class="keyword">do</span>
  <span class="string"><span class="delimiter">'</span><span class="content">/assets/images/tree-rotated.jpg</span><span class="delimiter">'</span></span>
<span class="keyword">end</span></code></pre>


<p>Filters can also convert textual content to binary content and vice versa. For example, here‚Äôs a text-to-speech filter that uses Mac OS X‚Äôs <code>say</code> command:</p>

<pre><code class="language-ruby"><span class="keyword">class</span> <span class="class">SynthesiseAudio</span> &lt; <span class="constant">Nanoc3</span>::<span class="constant">Filter</span>

  identifier <span class="symbol">:synthesise_audio</span>
  type       <span class="symbol">:text</span> =&gt; <span class="symbol">:binary</span>

  <span class="keyword">def</span> <span class="function">run</span>(content, params={})
    system(<span class="string"><span class="delimiter">'</span><span class="content">say</span><span class="delimiter">'</span></span>, content, <span class="string"><span class="delimiter">'</span><span class="content">-o</span><span class="delimiter">'</span></span>, output_filename)
  <span class="keyword">end</span>

<span class="keyword">end</span></code></pre>


<p>Check out the <a href="../../docs/5-advanced-concepts/#writing-filters">writing filters</a> section of the manual for details.</p>

<p>Binary items behave like textual items, with the exception that you cannot request their compiled content. Binary assets can have metadata too, just like normal items. This can be quite useful in some cases. For example, if you have a screenshot with the following metadata:</p>

<pre><code class="language-yaml"><span class="key">alt</span>: <span class="string"><span class="delimiter">"</span><span class="content">A screenshot of my desktop.</span><span class="delimiter">"</span></span></code></pre>


<p>‚Ä¶ then you can output the path to that screenshot as well as its ‚Äúalt‚Äù attribute like this (assuming that the <code>screenshot</code> object points to that very screenshot item):</p>

<pre><code class="language-html"><span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">"</span><span class="content">&lt;%= screenshot.path %</span></span><span class="error">&gt;</span>" alt="<span class="error">&lt;</span>%= screenshot[:alt] %<span class="error">&gt;</span>"<span class="error">&gt;</span></code></pre>


<p>‚Ä¶ and you‚Äôll get this output:</p>

<pre><code class="language-html"><span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">"</span><span class="content">/assets/images/screenshot.png</span><span class="delimiter">"</span></span> <span class="attribute-name">alt</span>=<span class="string"><span class="delimiter">"</span><span class="content">A screenshot of my desktop.</span><span class="delimiter">"</span></span><span class="tag">&gt;</span></code></pre>


<p>The site configuration has a <code>text_extensions</code> array containing a list of extensions; when the site is loaded, files with an extension in that list will be considered as being textual instead of binary. If you use textual items with custom extensions, be sure to add their extension to the <code>text_extensions</code> list. The default list is defined like this:</p>

<pre><code class="language-yaml"><span class="key">text_extensions</span>: <span class="string"><span class="content">[ 'css', 'erb', 'haml', 'htm', 'html', 'js', 'less', 'markdown', 'md', 'php', 'rb', 'sass', 'txt' ]</span></span></code></pre>


<p>Accessing compiled content and paths of compiled items is easier in 3.1. To get the compiled content of an item, use <code>item.compiled_content</code>; this will get the compiled content at the <code>:pre</code> snapshot of the default representation. You can customize this behaviour with parameters; for example, to get the content at the <code>:clean</code> snapshot of the <code>:xml</code> representation, use <code>item.compiled_content(:rep =&gt; :xml, :snapshot =&gt; :clean)</code>. Getting paths is easier too: <code>item.path</code>‚Äîand this method takes parameters to, so you can say <code>item.path(:rep =&gt; :xml)</code> to get the path of the <code>:xml</code> representation.</p>

<p>The old way:</p>

<pre><code class="language-ruby">item.reps.find { |r| r.name == <span class="symbol">:default</span> }.path
item.reps.find { |r| r.name == <span class="symbol">:default</span> }.content_at_snapshot(<span class="symbol">:pre</span>)
item.reps.find { |r| r.name == <span class="symbol">:pretty</span> }.content_at_snapshot(<span class="symbol">:pre</span>)
item.reps.find { |r| r.name == <span class="symbol">:default</span> }.content_at_snapshot(<span class="symbol">:clean</span>)</code></pre>


<p>The new way:</p>

<pre><code class="language-ruby">item.path
item.compiled_content
item.compiled_content(<span class="symbol">:rep</span> =&gt; <span class="symbol">:pretty</span>)
item.compiled_content(<span class="symbol">:snapshot</span> =&gt; <span class="symbol">:clean</span>)</code></pre>


<p>So, install nanoc 3.1 and give it a try. If you have questions or are experiencing issues, let me know on the <a href="http://groups.google.com/group/nanoc/">nanoc mailinglist</a> or on the <a href="irc://chat.freenode.net/#nanoc">nanoc IRC channel</a>. Enjoy!</p>
</div>
</div>
</div>
</div>
<!-- ***** footer ***** -->
<div id="footer">
<p>SeqWare ¬© 2007‚Äì2012 Brian O&#8217;Connor. SeqWare is released under the a <a rel="license" href="http://www.gnu.org/licenses/licenses.html">GNU GPL v3</a>. This site is built using the excellent <a href="http://nanoc.stoneship.org/">nanoc</a> tool and examples with the <a href="http://www.fonts.info/info/press/free-fonts-for-font-face-embedding.htm">Graublau</a> and <a href="http://scripts.sil.org/Gentium">Gentium</a> fonts.</p>
</div>
</body>
</html>
;T;	I"<%= render 'articles' %>;T;
I"1
	<div class="section" id="nanoc-3-1-released-april-3rd-2010">
<h2>nanoc 3.1 released <span class="date">(April 3rd, 2010)</span>
</h2>
<p>nanoc 3.1 is out now. This release introduces quite a few useful features, including API improvements and support for binary assets. Check the <a href="/release-notes/">full release notes</a> for details. Here‚Äôs how to install nanoc 3.1:</p>

<pre><span class="prompt">%</span> <kbd>gem install nanoc</kbd></pre>


<p>nanoc 3.1 is backwards compatible with nanoc 3.0.x. All sites built with nanoc 3.0.x should compile without issues on nanoc 3.1.</p>

<p>The biggest new feature is support for binary assets. Files such as images, audio files and movies can now easily be managed by nanoc. They behave just like textual items; you can drop them in the content/ directory and they can have metadata as well. Filtering binary items is easy as well; here‚Äôs an example of a <code>:rotate</code> filter that uses the <code>sips</code> command, built into Mac OS X, for rotating images:</p>

<pre><code class="language-ruby">class RotateFilter &lt; Nanoc3::Filter

  identifier :rotate
  type       :binary

  def run(filename, params={})
    system(
      'sips',
      '--rotate', params[:angle].to_s,
      '--out',    output_filename,
      filename
    )
  end

end
</code></pre>


<p>This filter can now be invoked like any other filter. For example, suppose you have a <code>content/images/tree.jpg</code> image, you can write the following rules for creating a rotated version:</p>

<pre><code class="language-ruby">compile '/images/tree/' do
  filter :rotate, :angle =&gt; 5.0
end

route '/images/tree/' do
  '/assets/images/tree-rotated.jpg'
end
</code></pre>


<p>Filters can also convert textual content to binary content and vice versa. For example, here‚Äôs a text-to-speech filter that uses Mac OS X‚Äôs <code>say</code> command:</p>

<pre><code class="language-ruby">class SynthesiseAudio &lt; Nanoc3::Filter

  identifier :synthesise_audio
  type       :text =&gt; :binary

  def run(content, params={})
    system('say', content, '-o', output_filename)
  end

end
</code></pre>


<p>Check out the <a href="/docs/5-advanced-concepts/#writing-filters">writing filters</a> section of the manual for details.</p>

<p>Binary items behave like textual items, with the exception that you cannot request their compiled content. Binary assets can have metadata too, just like normal items. This can be quite useful in some cases. For example, if you have a screenshot with the following metadata:</p>

<pre><code class="language-yaml">alt: "A screenshot of my desktop."
</code></pre>


<p>‚Ä¶ then you can output the path to that screenshot as well as its ‚Äúalt‚Äù attribute like this (assuming that the <code>screenshot</code> object points to that very screenshot item):</p>

<pre><code class="language-html">&lt;img src="&lt;%= screenshot.path %&gt;" alt="&lt;%= screenshot[:alt] %&gt;"&gt;
</code></pre>


<p>‚Ä¶ and you‚Äôll get this output:</p>

<pre><code class="language-html">&lt;img src="/assets/images/screenshot.png" alt="A screenshot of my desktop."&gt;
</code></pre>


<p>The site configuration has a <code>text_extensions</code> array containing a list of extensions; when the site is loaded, files with an extension in that list will be considered as being textual instead of binary. If you use textual items with custom extensions, be sure to add their extension to the <code>text_extensions</code> list. The default list is defined like this:</p>

<pre><code class="language-yaml">text_extensions: [ 'css', 'erb', 'haml', 'htm', 'html', 'js', 'less', 'markdown', 'md', 'php', 'rb', 'sass', 'txt' ]
</code></pre>


<p>Accessing compiled content and paths of compiled items is easier in 3.1. To get the compiled content of an item, use <code>item.compiled_content</code>; this will get the compiled content at the <code>:pre</code> snapshot of the default representation. You can customize this behaviour with parameters; for example, to get the content at the <code>:clean</code> snapshot of the <code>:xml</code> representation, use <code>item.compiled_content(:rep =&gt; :xml, :snapshot =&gt; :clean)</code>. Getting paths is easier too: <code>item.path</code>‚Äîand this method takes parameters to, so you can say <code>item.path(:rep =&gt; :xml)</code> to get the path of the <code>:xml</code> representation.</p>

<p>The old way:</p>

<pre><code class="language-ruby">item.reps.find { |r| r.name == :default }.path
item.reps.find { |r| r.name == :default }.content_at_snapshot(:pre)
item.reps.find { |r| r.name == :pretty }.content_at_snapshot(:pre)
item.reps.find { |r| r.name == :default }.content_at_snapshot(:clean)
</code></pre>


<p>The new way:</p>

<pre><code class="language-ruby">item.path
item.compiled_content
item.compiled_content(:rep =&gt; :pretty)
item.compiled_content(:snapshot =&gt; :clean)
</code></pre>


<p>So, install nanoc 3.1 and give it a try. If you have questions or are experiencing issues, let me know on the <a href="http://groups.google.com/group/nanoc/">nanoc mailinglist</a> or on the <a href="irc://chat.freenode.net/#nanoc">nanoc IRC channel</a>. Enjoy!</p>
</div>;T;I"ÿ
	<h2>nanoc 3.1 released <span class="date">(April 3rd, 2010)</span></h2>
<p>nanoc 3.1 is out now. This release introduces quite a few useful features, including API improvements and support for binary assets. Check the <a href="/release-notes/">full release notes</a> for details. Here‚Äôs how to install nanoc 3.1:</p>

<pre><span class="prompt">%</span> <kbd>gem install nanoc</kbd></pre>


<p>nanoc 3.1 is backwards compatible with nanoc 3.0.x. All sites built with nanoc 3.0.x should compile without issues on nanoc 3.1.</p>

<p>The biggest new feature is support for binary assets. Files such as images, audio files and movies can now easily be managed by nanoc. They behave just like textual items; you can drop them in the content/ directory and they can have metadata as well. Filtering binary items is easy as well; here‚Äôs an example of a <code>:rotate</code> filter that uses the <code>sips</code> command, built into Mac OS X, for rotating images:</p>

<pre><code class="language-ruby">class RotateFilter &lt; Nanoc3::Filter

  identifier :rotate
  type       :binary

  def run(filename, params={})
    system(
      'sips',
      '--rotate', params[:angle].to_s,
      '--out',    output_filename,
      filename
    )
  end

end
</code></pre>


<p>This filter can now be invoked like any other filter. For example, suppose you have a <code>content/images/tree.jpg</code> image, you can write the following rules for creating a rotated version:</p>

<pre><code class="language-ruby">compile '/images/tree/' do
  filter :rotate, :angle => 5.0
end

route '/images/tree/' do
  '/assets/images/tree-rotated.jpg'
end
</code></pre>


<p>Filters can also convert textual content to binary content and vice versa. For example, here‚Äôs a text-to-speech filter that uses Mac OS X‚Äôs <code>say</code> command:</p>

<pre><code class="language-ruby">class SynthesiseAudio &lt; Nanoc3::Filter

  identifier :synthesise_audio
  type       :text => :binary

  def run(content, params={})
    system('say', content, '-o', output_filename)
  end

end
</code></pre>


<p>Check out the <a href="/docs/5-advanced-concepts/#writing-filters">writing filters</a> section of the manual for details.</p>

<p>Binary items behave like textual items, with the exception that you cannot request their compiled content. Binary assets can have metadata too, just like normal items. This can be quite useful in some cases. For example, if you have a screenshot with the following metadata:</p>

<pre><code class="language-yaml">alt: "A screenshot of my desktop."
</code></pre>


<p>‚Ä¶ then you can output the path to that screenshot as well as its ‚Äúalt‚Äù attribute like this (assuming that the <code>screenshot</code> object points to that very screenshot item):</p>

<pre><code class="language-html">&lt;img src="&lt;%= screenshot.path %>" alt="&lt;%= screenshot[:alt] %>">
</code></pre>


<p>‚Ä¶ and you‚Äôll get this output:</p>

<pre><code class="language-html">&lt;img src="/assets/images/screenshot.png" alt="A screenshot of my desktop.">
</code></pre>


<p>The site configuration has a <code>text_extensions</code> array containing a list of extensions; when the site is loaded, files with an extension in that list will be considered as being textual instead of binary. If you use textual items with custom extensions, be sure to add their extension to the <code>text_extensions</code> list. The default list is defined like this:</p>

<pre><code class="language-yaml">text_extensions: [ 'css', 'erb', 'haml', 'htm', 'html', 'js', 'less', 'markdown', 'md', 'php', 'rb', 'sass', 'txt' ]
</code></pre>


<p>Accessing compiled content and paths of compiled items is easier in 3.1. To get the compiled content of an item, use <code>item.compiled_content</code>; this will get the compiled content at the <code>:pre</code> snapshot of the default representation. You can customize this behaviour with parameters; for example, to get the content at the <code>:clean</code> snapshot of the <code>:xml</code> representation, use <code>item.compiled_content(:rep =&gt; :xml, :snapshot =&gt; :clean)</code>. Getting paths is easier too: <code>item.path</code>‚Äîand this method takes parameters to, so you can say <code>item.path(:rep =&gt; :xml)</code> to get the path of the <code>:xml</code> representation.</p>

<p>The old way:</p>

<pre><code class="language-ruby">item.reps.find { |r| r.name == :default }.path
item.reps.find { |r| r.name == :default }.content_at_snapshot(:pre)
item.reps.find { |r| r.name == :pretty }.content_at_snapshot(:pre)
item.reps.find { |r| r.name == :default }.content_at_snapshot(:clean)
</code></pre>


<p>The new way:</p>

<pre><code class="language-ruby">item.path
item.compiled_content
item.compiled_content(:rep => :pretty)
item.compiled_content(:snapshot => :clean)
</code></pre>


<p>So, install nanoc 3.1 and give it a try. If you have questions or are experiencing issues, let me know on the <a href="http://groups.google.com/group/nanoc/">nanoc mailinglist</a> or on the <a href="irc://chat.freenode.net/#nanoc">nanoc IRC channel</a>. Enjoy!</p>



;T;@i"/blog/32/{;{
;I"˛<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<title>nanoc ‚Ä∫ Articles about v3.2</title>
<meta content="nanoc 3.4.0" name="generator">
<link href="../../assets/style-v17.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://feeds.feedburner.com/nanoc" rel="alternate" title="The nanoc Blog" type="application/atom+xml">
<script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-15639968-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script>
</head>
<body>
<div class="wrapper">
<!-- ***** navigation ***** -->
<div class="nav">
<ol>
<li><a href="../../"><span>Home</span></a></li>
<li><a href="../"><span>News</span></a></li>
<li><a href="../../docs/"><span>Documentation</span></a></li>
<li><a href="../../community/"><span>Community</span></a></li>
</ol>
</div>
<!-- ***** sidebar ***** -->
<div class="side">
<ol>
<li><a href="../34/"><span>Articles about v3.4</span></a></li>
<li><span class="active" title="You're here."><span>Articles about v3.2</span></span></li>
<li><a href="../31/"><span>Articles about v3.1</span></a></li>
<li><a href="../30/"><span>Articles about v3.0</span></a></li>
<li><a href="../22/"><span>Articles about v2.2</span></a></li>
<li><a href="../21/"><span>Articles about v2.1</span></a></li>
<li><a href="../20/"><span>Articles about v2.0</span></a></li>
</ol>
</div>
<!-- ***** body ***** -->
<div class="body">
<div class="article">
<div class="header">
<h1>Articles about v3.2</h1>
</div>

	<div class="section" id="nanoc-3-2-released-july-24th-2011">
<h2>nanoc 3.2 released <span class="date">(July 24th, 2011)</span>
</h2>
<p>After a long wait, nanoc 3.2 has been released. Major new points in this release include speed improvements, custom commands and a handful of new and updated filters. Check the <a href="../../release-notes/">full release notes</a> for details.</p>

<p>To update your nanoc install, simply</p>

<pre><span class="prompt">%</span> <kbd>gem install nanoc</kbd></pre>


<p>Below is an example of how to write custom commands for nanoc. You can use this to create your own HTML/CSS validation commands, deploy commands, blog maintenance commands and more. Read the <a href="../../docs/5-advanced-concepts/#writing-commands">writing commands</a> section of the manual for details.</p>

<pre><code class="language-ruby">usage       <span class="string"><span class="delimiter">'</span><span class="content">dostuff [options]</span><span class="delimiter">'</span></span>
aliases     <span class="symbol">:ds</span>, <span class="symbol">:stuff</span>
summary     <span class="string"><span class="delimiter">'</span><span class="content">does stuff</span><span class="delimiter">'</span></span>
description <span class="string"><span class="delimiter">'</span><span class="content">This command does a lot of stuff. I really mean a lot.</span><span class="delimiter">'</span></span>

flag   <span class="symbol">:h</span>, <span class="symbol">:help</span>,  <span class="string"><span class="delimiter">'</span><span class="content">show help for this command</span><span class="delimiter">'</span></span> <span class="keyword">do</span> |value, cmd|
  puts cmd.help
  exit <span class="integer">0</span>
<span class="keyword">end</span>
flag   <span class="symbol">:m</span>, <span class="symbol">:more</span>,  <span class="string"><span class="delimiter">'</span><span class="content">do even more stuff</span><span class="delimiter">'</span></span>
option <span class="symbol">:s</span>, <span class="symbol">:stuff</span>, <span class="string"><span class="delimiter">'</span><span class="content">specify stuff to do</span><span class="delimiter">'</span></span>, <span class="symbol">:argument</span> =&gt; <span class="symbol">:optional</span>

run <span class="keyword">do</span> |opts, args, cmd|
  stuff = opts[<span class="symbol">:stuff</span>] || <span class="string"><span class="delimiter">'</span><span class="content">generic stuff</span><span class="delimiter">'</span></span>
  puts <span class="string"><span class="delimiter">"</span><span class="content">Doing </span><span class="inline"><span class="inline-delimiter">#{</span>stuff<span class="inline-delimiter">}</span></span><span class="content">!</span><span class="delimiter">"</span></span>

  <span class="keyword">if</span> opts[<span class="symbol">:more</span>]
    puts <span class="string"><span class="delimiter">'</span><span class="content">Doing it even more!</span><span class="delimiter">'</span></span>
  <span class="keyword">end</span>
<span class="keyword">end</span></code></pre>

<p>If you have any questions, be sure to ask them on <a href="http://groups.google.com/group/nanoc/">the mailinglist</a>. If you encounter issues, please do report them at <a href="https://github.com/ddfreyne/nanoc/issues">the issue tracker</a>‚Äîthanks! You can also find me (and others) on the <a href="irc://chat.freenode.net/#nanoc">nanoc IRC channel</a>.</p>

<p>Enjoy!</p>
</div>
</div>
</div>
</div>
<!-- ***** footer ***** -->
<div id="footer">
<p>SeqWare ¬© 2007‚Äì2012 Brian O&#8217;Connor. SeqWare is released under the a <a rel="license" href="http://www.gnu.org/licenses/licenses.html">GNU GPL v3</a>. This site is built using the excellent <a href="http://nanoc.stoneship.org/">nanoc</a> tool and examples with the <a href="http://www.fonts.info/info/press/free-fonts-for-font-face-embedding.htm">Graublau</a> and <a href="http://scripts.sil.org/Gentium">Gentium</a> fonts.</p>
</div>
</body>
</html>
;T;	I"<%= render 'articles' %>;T;
I"√
	<div class="section" id="nanoc-3-2-released-july-24th-2011">
<h2>nanoc 3.2 released <span class="date">(July 24th, 2011)</span>
</h2>
<p>After a long wait, nanoc 3.2 has been released. Major new points in this release include speed improvements, custom commands and a handful of new and updated filters. Check the <a href="/release-notes/">full release notes</a> for details.</p>

<p>To update your nanoc install, simply</p>

<pre><span class="prompt">%</span> <kbd>gem install nanoc</kbd></pre>


<p>Below is an example of how to write custom commands for nanoc. You can use this to create your own HTML/CSS validation commands, deploy commands, blog maintenance commands and more. Read the <a href="/docs/5-advanced-concepts/#writing-commands">writing commands</a> section of the manual for details.</p>

<pre><code>#!ruby
usage       'dostuff [options]'
aliases     :ds, :stuff
summary     'does stuff'
description 'This command does a lot of stuff. I really mean a lot.'

flag   :h, :help,  'show help for this command' do |value, cmd|
  puts cmd.help
  exit 0
end
flag   :m, :more,  'do even more stuff'
option :s, :stuff, 'specify stuff to do', :argument =&gt; :optional

run do |opts, args, cmd|
  stuff = opts[:stuff] || 'generic stuff'
  puts "Doing #{stuff}!"

  if opts[:more]
    puts 'Doing it even more!'
  end
end
</code></pre>

<p>If you have any questions, be sure to ask them on <a href="http://groups.google.com/group/nanoc/">the mailinglist</a>. If you encounter issues, please do report them at <a href="https://github.com/ddfreyne/nanoc/issues">the issue tracker</a>‚Äîthanks! You can also find me (and others) on the <a href="irc://chat.freenode.net/#nanoc">nanoc IRC channel</a>.</p>

<p>Enjoy!</p>
</div>;T;I"Ç
	<h2>nanoc 3.2 released <span class="date">(July 24th, 2011)</span></h2>
<p>After a long wait, nanoc 3.2 has been released. Major new points in this release include speed improvements, custom commands and a handful of new and updated filters. Check the <a href="/release-notes/">full release notes</a> for details.</p>

<p>To update your nanoc install, simply</p>

<pre><span class="prompt">%</span> <kbd>gem install nanoc</kbd></pre>


<p>Below is an example of how to write custom commands for nanoc. You can use this to create your own HTML/CSS validation commands, deploy commands, blog maintenance commands and more. Read the <a href="/docs/5-advanced-concepts/#writing-commands">writing commands</a> section of the manual for details.</p>

<pre><code>#!ruby
usage       'dostuff [options]'
aliases     :ds, :stuff
summary     'does stuff'
description 'This command does a lot of stuff. I really mean a lot.'

flag   :h, :help,  'show help for this command' do |value, cmd|
  puts cmd.help
  exit 0
end
flag   :m, :more,  'do even more stuff'
option :s, :stuff, 'specify stuff to do', :argument =&gt; :optional

run do |opts, args, cmd|
  stuff = opts[:stuff] || 'generic stuff'
  puts "Doing #{stuff}!"

  if opts[:more]
    puts 'Doing it even more!'
  end
end
</code></pre>

<p>If you have any questions, be sure to ask them on <a href="http://groups.google.com/group/nanoc/">the mailinglist</a>. If you encounter issues, please do report them at <a href="https://github.com/ddfreyne/nanoc/issues">the issue tracker</a>‚Äîthanks! You can also find me (and others) on the <a href="irc://chat.freenode.net/#nanoc">nanoc IRC channel</a>.</p>

<p>Enjoy!</p>



;T;@p"#/static/assets/images/Use.png/{;{ ",/static/assets/images/seqware_logo.png/{;{ "'/static/assets/images/Develop.png/{;{ "&/static/assets/images/Deploy.png/{;{ "/blog/13/2012-06-09/{;{
;I"u<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<title>nanoc ‚Ä∫ nanoc 3.4 released</title>
<meta content="nanoc 3.4.0" name="generator">
<link href="/assets/style-v17.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://feeds.feedburner.com/nanoc" rel="alternate" title="The nanoc Blog" type="application/atom+xml">
<script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-15639968-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script>
</head>
<body>
<div class="wrapper">
<!-- ***** navigation ***** -->
<div class="nav">
<ol>
<li><a href="/"><span>Home</span></a></li>
<li><a href="/blog/"><span>News</span></a></li>
<li><a href="/docs/"><span>Documentation</span></a></li>
<li><a href="/community/"><span>Community</span></a></li>
</ol>
</div>
<!-- ***** sidebar ***** -->
<div class="side">
<ol>
<li><a href="/blog/13/"><span>Articles about v3.4</span></a></li>
<li><a href="/blog/12/"><span>Articles about v0.12.x</span></a></li>
</ol>
</div>
<!-- ***** body ***** -->
<div class="body">
<div class="article">
<div class="header">
<h1>nanoc 3.4 released</h1>
</div>
<p>nanoc 3.4 is out! This release brings a few useful improvements to the user interface along with some new and improved filters and commands.</p>

<p>When nanoc crashes, it will now write a <code>crash.log</code> file that contains a lot of extra debugging information that can be useful for tracking down the cause of a crash. The extra information includes the contents of the Gemfile.lock, the list of all installed gems, the <code>$LOAD_PATH</code> and the environment variables.</p>

<p>There is a new <code>show-rules</code> command that prints the compilation steps taken for every item. This could come in handy when figuring out why an item isn‚Äôt filtered as you expected it to be, or when an item isn‚Äôt written while it should be, for instance.</p>

<p>Some other enhancements include new Handlebars and Pandoc filters. Check out the <a href="/release-notes/">full release notes</a> for details.</p>

<p>You can update your gems using <code>gem update</code> or, if you use Bundler, <code>bundle update</code>.</p>

<p>If you have any questions, be sure to ask them on <a href="http://groups.google.com/group/nanoc/">the mailinglist</a>. If you encounter issues, please do report them at <a href="https://github.com/ddfreyne/nanoc/issues">the issue tracker</a>‚Äîthanks! You can also find me (and others) on the <a href="irc://chat.freenode.net/#nanoc">nanoc IRC channel</a>.</p>

<p>Enjoy!</p>
</div>
</div>
</div>
<!-- ***** footer ***** -->
<div id="footer">
<p>SeqWare ¬© 2007‚Äì2012 Brian O&#8217;Connor. SeqWare is released under the a <a rel="license" href="http://www.gnu.org/licenses/licenses.html">GNU GPL v3</a>. This site is built using the excellent <a href="http://nanoc.stoneship.org/">nanoc</a> tool and examples with the <a href="http://www.fonts.info/info/press/free-fonts-for-font-face-embedding.htm">Graublau</a> and <a href="http://scripts.sil.org/Gentium">Gentium</a> fonts.</p>
</div>
</body>
</html>
;T;	I"nanoc 3.4 is out! This release brings a few useful improvements to the user interface along with some new and improved filters and commands.

When nanoc crashes, it will now write a `crash.log` file that contains a lot of extra debugging information that can be useful for tracking down the cause of a crash. The extra information includes the contents of the Gemfile.lock, the list of all installed gems, the `$LOAD_PATH` and the environment variables.

There is a new `show-rules` command that prints the compilation steps taken for every item. This could come in handy when figuring out why an item isn‚Äôt filtered as you expected it to be, or when an item isn‚Äôt written while it should be, for instance.

Some other enhancements include new Handlebars and Pandoc filters. Check out the [full release notes](/release-notes/) for details.

You can update your gems using `gem update` or, if you use Bundler, `bundle update`. 

If you have any questions, be sure to ask them on [the mailinglist](http://groups.google.com/group/nanoc/). If you encounter issues, please do report them at [the issue tracker](https://github.com/ddfreyne/nanoc/issues)‚Äîthanks! You can also find me (and others) on the [nanoc IRC channel](irc://chat.freenode.net/#nanoc).

Enjoy!
;T;
I"Ç<p>nanoc 3.4 is out! This release brings a few useful improvements to the user interface along with some new and improved filters and commands.</p>

<p>When nanoc crashes, it will now write a <code>crash.log</code> file that contains a lot of extra debugging information that can be useful for tracking down the cause of a crash. The extra information includes the contents of the Gemfile.lock, the list of all installed gems, the <code>$LOAD_PATH</code> and the environment variables.</p>

<p>There is a new <code>show-rules</code> command that prints the compilation steps taken for every item. This could come in handy when figuring out why an item isn‚Äôt filtered as you expected it to be, or when an item isn‚Äôt written while it should be, for instance.</p>

<p>Some other enhancements include new Handlebars and Pandoc filters. Check out the <a href="/release-notes/">full release notes</a> for details.</p>

<p>You can update your gems using <code>gem update</code> or, if you use Bundler, <code>bundle update</code>.</p>

<p>If you have any questions, be sure to ask them on <a href="http://groups.google.com/group/nanoc/">the mailinglist</a>. If you encounter issues, please do report them at <a href="https://github.com/ddfreyne/nanoc/issues">the issue tracker</a>‚Äîthanks! You can also find me (and others) on the <a href="irc://chat.freenode.net/#nanoc">nanoc IRC channel</a>.</p>

<p>Enjoy!</p>;T;I"É<p>nanoc 3.4 is out! This release brings a few useful improvements to the user interface along with some new and improved filters and commands.</p>

<p>When nanoc crashes, it will now write a <code>crash.log</code> file that contains a lot of extra debugging information that can be useful for tracking down the cause of a crash. The extra information includes the contents of the Gemfile.lock, the list of all installed gems, the <code>$LOAD_PATH</code> and the environment variables.</p>

<p>There is a new <code>show-rules</code> command that prints the compilation steps taken for every item. This could come in handy when figuring out why an item isn‚Äôt filtered as you expected it to be, or when an item isn‚Äôt written while it should be, for instance.</p>

<p>Some other enhancements include new Handlebars and Pandoc filters. Check out the <a href="/release-notes/">full release notes</a> for details.</p>

<p>You can update your gems using <code>gem update</code> or, if you use Bundler, <code>bundle update</code>.</p>

<p>If you have any questions, be sure to ask them on <a href="http://groups.google.com/group/nanoc/">the mailinglist</a>. If you encounter issues, please do report them at <a href="https://github.com/ddfreyne/nanoc/issues">the issue tracker</a>‚Äîthanks! You can also find me (and others) on the <a href="irc://chat.freenode.net/#nanoc">nanoc IRC channel</a>.</p>

<p>Enjoy!</p>
;T;@É"/blog/12/2011-07-24/{;{
;I"<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<title>nanoc ‚Ä∫ nanoc 3.2 released</title>
<meta content="nanoc 3.4.0" name="generator">
<link href="/assets/style-v17.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://feeds.feedburner.com/nanoc" rel="alternate" title="The nanoc Blog" type="application/atom+xml">
<script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-15639968-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script>
</head>
<body>
<div class="wrapper">
<!-- ***** navigation ***** -->
<div class="nav">
<ol>
<li><a href="/"><span>Home</span></a></li>
<li><a href="/blog/"><span>News</span></a></li>
<li><a href="/docs/"><span>Documentation</span></a></li>
<li><a href="/community/"><span>Community</span></a></li>
</ol>
</div>
<!-- ***** sidebar ***** -->
<div class="side">
<ol>
<li><a href="/blog/13/"><span>Articles about v3.4</span></a></li>
<li><a href="/blog/12/"><span>Articles about v3.2</span></a></li>
</ol>
</div>
<!-- ***** body ***** -->
<div class="body">
<div class="article">
<div class="header">
<h1>nanoc 3.2 released</h1>
</div>
<p>After a long wait, nanoc 3.2 has been released. Major new points in this release include speed improvements, custom commands and a handful of new and updated filters. Check the <a href="/release-notes/">full release notes</a> for details.</p>

<p>To update your nanoc install, simply</p>

<pre><span class="prompt">%</span> <kbd>gem install nanoc</kbd></pre>


<p>Below is an example of how to write custom commands for nanoc. You can use this to create your own HTML/CSS validation commands, deploy commands, blog maintenance commands and more. Read the <a href="/docs/5-advanced-concepts/#writing-commands">writing commands</a> section of the manual for details.</p>

<pre><code class="language-ruby">usage       <span class="string"><span class="delimiter">'</span><span class="content">dostuff [options]</span><span class="delimiter">'</span></span>
aliases     <span class="symbol">:ds</span>, <span class="symbol">:stuff</span>
summary     <span class="string"><span class="delimiter">'</span><span class="content">does stuff</span><span class="delimiter">'</span></span>
description <span class="string"><span class="delimiter">'</span><span class="content">This command does a lot of stuff. I really mean a lot.</span><span class="delimiter">'</span></span>

flag   <span class="symbol">:h</span>, <span class="symbol">:help</span>,  <span class="string"><span class="delimiter">'</span><span class="content">show help for this command</span><span class="delimiter">'</span></span> <span class="keyword">do</span> |value, cmd|
  puts cmd.help
  exit <span class="integer">0</span>
<span class="keyword">end</span>
flag   <span class="symbol">:m</span>, <span class="symbol">:more</span>,  <span class="string"><span class="delimiter">'</span><span class="content">do even more stuff</span><span class="delimiter">'</span></span>
option <span class="symbol">:s</span>, <span class="symbol">:stuff</span>, <span class="string"><span class="delimiter">'</span><span class="content">specify stuff to do</span><span class="delimiter">'</span></span>, <span class="symbol">:argument</span> =&gt; <span class="symbol">:optional</span>

run <span class="keyword">do</span> |opts, args, cmd|
  stuff = opts[<span class="symbol">:stuff</span>] || <span class="string"><span class="delimiter">'</span><span class="content">generic stuff</span><span class="delimiter">'</span></span>
  puts <span class="string"><span class="delimiter">"</span><span class="content">Doing </span><span class="inline"><span class="inline-delimiter">#{</span>stuff<span class="inline-delimiter">}</span></span><span class="content">!</span><span class="delimiter">"</span></span>

  <span class="keyword">if</span> opts[<span class="symbol">:more</span>]
    puts <span class="string"><span class="delimiter">'</span><span class="content">Doing it even more!</span><span class="delimiter">'</span></span>
  <span class="keyword">end</span>
<span class="keyword">end</span></code></pre>

<p>If you have any questions, be sure to ask them on <a href="http://groups.google.com/group/nanoc/">the mailinglist</a>. If you encounter issues, please do report them at <a href="https://github.com/ddfreyne/nanoc/issues">the issue tracker</a>‚Äîthanks! You can also find me (and others) on the <a href="irc://chat.freenode.net/#nanoc">nanoc IRC channel</a>.</p>

<p>Enjoy!</p>
</div>
</div>
</div>
<!-- ***** footer ***** -->
<div id="footer">
<p>SeqWare ¬© 2007‚Äì2012 Brian O&#8217;Connor. SeqWare is released under the a <a rel="license" href="http://www.gnu.org/licenses/licenses.html">GNU GPL v3</a>. This site is built using the excellent <a href="http://nanoc.stoneship.org/">nanoc</a> tool and examples with the <a href="http://www.fonts.info/info/press/free-fonts-for-font-face-embedding.htm">Graublau</a> and <a href="http://scripts.sil.org/Gentium">Gentium</a> fonts.</p>
</div>
</body>
</html>
;T;	I"‹After a long wait, nanoc 3.2 has been released. Major new points in this release include speed improvements, custom commands and a handful of new and updated filters. Check the [full release notes](/release-notes/) for details.

To update your nanoc install, simply

<pre><span class="prompt">%</span> <kbd>gem install nanoc</kbd></pre>

Below is an example of how to write custom commands for nanoc. You can use this to create your own HTML/CSS validation commands, deploy commands, blog maintenance commands and more. Read the [writing commands](/docs/5-advanced-concepts/#writing-commands) section of the manual for details.

	#!ruby
	usage       'dostuff [options]'
	aliases     :ds, :stuff
	summary     'does stuff'
	description 'This command does a lot of stuff. I really mean a lot.'
    
	flag   :h, :help,  'show help for this command' do |value, cmd|
	  puts cmd.help
	  exit 0
	end
	flag   :m, :more,  'do even more stuff'
	option :s, :stuff, 'specify stuff to do', :argument => :optional
    
	run do |opts, args, cmd|
	  stuff = opts[:stuff] || 'generic stuff'
	  puts "Doing #{stuff}!"
    
	  if opts[:more]
	    puts 'Doing it even more!'
	  end
	end

If you have any questions, be sure to ask them on [the mailinglist](http://groups.google.com/group/nanoc/). If you encounter issues, please do report them at [the issue tracker](https://github.com/ddfreyne/nanoc/issues)‚Äîthanks! You can also find me (and others) on the [nanoc IRC channel](irc://chat.freenode.net/#nanoc).

Enjoy!
;T;
I"4<p>After a long wait, nanoc 3.2 has been released. Major new points in this release include speed improvements, custom commands and a handful of new and updated filters. Check the <a href="/release-notes/">full release notes</a> for details.</p>

<p>To update your nanoc install, simply</p>

<pre><span class="prompt">%</span> <kbd>gem install nanoc</kbd></pre>


<p>Below is an example of how to write custom commands for nanoc. You can use this to create your own HTML/CSS validation commands, deploy commands, blog maintenance commands and more. Read the <a href="/docs/5-advanced-concepts/#writing-commands">writing commands</a> section of the manual for details.</p>

<pre><code>#!ruby
usage       'dostuff [options]'
aliases     :ds, :stuff
summary     'does stuff'
description 'This command does a lot of stuff. I really mean a lot.'

flag   :h, :help,  'show help for this command' do |value, cmd|
  puts cmd.help
  exit 0
end
flag   :m, :more,  'do even more stuff'
option :s, :stuff, 'specify stuff to do', :argument =&gt; :optional

run do |opts, args, cmd|
  stuff = opts[:stuff] || 'generic stuff'
  puts "Doing #{stuff}!"

  if opts[:more]
    puts 'Doing it even more!'
  end
end
</code></pre>

<p>If you have any questions, be sure to ask them on <a href="http://groups.google.com/group/nanoc/">the mailinglist</a>. If you encounter issues, please do report them at <a href="https://github.com/ddfreyne/nanoc/issues">the issue tracker</a>‚Äîthanks! You can also find me (and others) on the <a href="irc://chat.freenode.net/#nanoc">nanoc IRC channel</a>.</p>

<p>Enjoy!</p>;T;I"5<p>After a long wait, nanoc 3.2 has been released. Major new points in this release include speed improvements, custom commands and a handful of new and updated filters. Check the <a href="/release-notes/">full release notes</a> for details.</p>

<p>To update your nanoc install, simply</p>

<pre><span class="prompt">%</span> <kbd>gem install nanoc</kbd></pre>


<p>Below is an example of how to write custom commands for nanoc. You can use this to create your own HTML/CSS validation commands, deploy commands, blog maintenance commands and more. Read the <a href="/docs/5-advanced-concepts/#writing-commands">writing commands</a> section of the manual for details.</p>

<pre><code>#!ruby
usage       'dostuff [options]'
aliases     :ds, :stuff
summary     'does stuff'
description 'This command does a lot of stuff. I really mean a lot.'

flag   :h, :help,  'show help for this command' do |value, cmd|
  puts cmd.help
  exit 0
end
flag   :m, :more,  'do even more stuff'
option :s, :stuff, 'specify stuff to do', :argument =&gt; :optional

run do |opts, args, cmd|
  stuff = opts[:stuff] || 'generic stuff'
  puts "Doing #{stuff}!"

  if opts[:more]
    puts 'Doing it even more!'
  end
end
</code></pre>

<p>If you have any questions, be sure to ask them on <a href="http://groups.google.com/group/nanoc/">the mailinglist</a>. If you encounter issues, please do report them at <a href="https://github.com/ddfreyne/nanoc/issues">the issue tracker</a>‚Äîthanks! You can also find me (and others) on the <a href="irc://chat.freenode.net/#nanoc">nanoc IRC channel</a>.</p>

<p>Enjoy!</p>
;T;@ä"/blog/13/{;{
;I"P
<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<title>SeqWare ‚Ä∫ Articles about v0.13.x</title>
<meta content="nanoc 3.4.0" name="generator">
<link href="../../assets/style-v17.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://feeds.feedburner.com/seqware" rel="alternate" title="The SeqWare Blog" type="application/atom+xml">
<script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-34523087-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script>
</head>
<body>
<div class="wrapper">
<!-- ***** navigation ***** -->
<div class="nav">
<ol>
<li><a href="../../"><span>Home</span></a></li>
<li><a href="../"><span>News</span></a></li>
<li><a href="../../docs/"><span>Documentation</span></a></li>
<li><a href="../../community/"><span>Community</span></a></li>
<li><a href="../../partners/"><span>Partners</span></a></li>
<li><a href="../../about/"><span>About</span></a></li>
</ol>
</div>
<!-- ***** sidebar ***** -->
<div class="side">
<ol>
<li><span class="active" title="You're here."><span>Articles about v0.13.x</span></span></li>
<li><a href="../12/"><span>Articles about v0.12.x</span></a></li>
</ol>
</div>
<!-- ***** body ***** -->
<div class="body">
<div class="article">
<div class="header">
<h1>Articles about v0.13.x</h1>
</div>

	<div class="section" id="new-seqware-website-for-0-13-x-september-2nd-2012">
<h2>New SeqWare Website for 0.13.x <span class="date">(September 2nd, 2012)</span>
</h2>
<p>We are slowly transitioning from SourceForge to GitHub.  Part of this transition will involve the migration of our MediaWiki content to this new nanoc-based website which will make it much easier to manage and redistribute our documentation.</p>
</div>
</div>
</div>
</div>
<!-- ***** footer ***** -->
<div id="footer">
<p>SeqWare ¬© 2007‚Äì2012 Brian O&#8217;Connor. SeqWare is released under the a <a rel="license" href="http://www.gnu.org/licenses/licenses.html">GNU GPL v3</a>. This site is built using the excellent <a href="http://nanoc.stoneship.org/">nanoc</a> tool and example site along with the <a href="http://www.fonts.info/info/press/free-fonts-for-font-face-embedding.htm">Graublau</a> and <a href="http://scripts.sil.org/Gentium">Gentium</a> fonts.</p>
</div>
</body>
</html>
;T;	I"<%= render 'articles' %>;T;
I"ß
	<div class="section" id="new-seqware-website-for-0-13-x-september-2nd-2012">
<h2>New SeqWare Website for 0.13.x <span class="date">(September 2nd, 2012)</span>
</h2>
<p>We are slowly transitioning from SourceForge to GitHub.  Part of this transition will involve the migration of our MediaWiki content to this new nanoc-based website which will make it much easier to manage and redistribute our documentation.</p>
</div>;T;I"V
	<h2>New SeqWare Website for 0.13.x <span class="date">(September 2nd, 2012)</span></h2>
<p>We are slowly transitioning from SourceForge to GitHub.  Part of this transition will involve the migration of our MediaWiki content to this new nanoc-based website which will make it much easier to manage and redistribute our documentation.</p>



;T;@ë"/blog/12/{;{
;I"f
<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<title>SeqWare ‚Ä∫ Articles about v0.12.x</title>
<meta content="nanoc 3.4.0" name="generator">
<link href="../../assets/style-v17.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://feeds.feedburner.com/seqware" rel="alternate" title="The SeqWare Blog" type="application/atom+xml">
<script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-34523087-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script>
</head>
<body>
<div class="wrapper">
<!-- ***** navigation ***** -->
<div class="nav">
<ol>
<li><a href="../../"><span>Home</span></a></li>
<li><a href="../"><span>News</span></a></li>
<li><a href="../../docs/"><span>Documentation</span></a></li>
<li><a href="../../community/"><span>Community</span></a></li>
<li><a href="../../partners/"><span>Partners</span></a></li>
<li><a href="../../about/"><span>About</span></a></li>
</ol>
</div>
<!-- ***** sidebar ***** -->
<div class="side">
<ol>
<li><a href="../13/"><span>Articles about v0.13.x</span></a></li>
<li><span class="active" title="You're here."><span>Articles about v0.12.x</span></span></li>
</ol>
</div>
<!-- ***** body ***** -->
<div class="body">
<div class="article">
<div class="header">
<h1>Articles about v0.12.x</h1>
</div>

	<div class="section" id="seqware-0-12-5-released-august-6th-2012">
<h2>SeqWare 0.12.5 released <span class="date">(August 6th, 2012)</span>
</h2>
<p>We have released the final version in the 0.12.x series of SeqWare. Check out the <a href="../../release-notes/">full release notes</a> for details.</p>

<p>If you have any questions, be sure to ask them on <a href="http://sourceforge.net/mail/?group_id=239239">the mailing list</a>.</p>
</div>
</div>
</div>
</div>
<!-- ***** footer ***** -->
<div id="footer">
<p>SeqWare ¬© 2007‚Äì2012 Brian O&#8217;Connor. SeqWare is released under the a <a rel="license" href="http://www.gnu.org/licenses/licenses.html">GNU GPL v3</a>. This site is built using the excellent <a href="http://nanoc.stoneship.org/">nanoc</a> tool and example site along with the <a href="http://www.fonts.info/info/press/free-fonts-for-font-face-embedding.htm">Graublau</a> and <a href="http://scripts.sil.org/Gentium">Gentium</a> fonts.</p>
</div>
</body>
</html>
;T;	I"<%= render 'articles' %>;T;
I"∏
	<div class="section" id="seqware-0-12-5-released-august-6th-2012">
<h2>SeqWare 0.12.5 released <span class="date">(August 6th, 2012)</span>
</h2>
<p>We have released the final version in the 0.12.x series of SeqWare. Check out the <a href="/release-notes/">full release notes</a> for details.</p>

<p>If you have any questions, be sure to ask them on <a href="http://sourceforge.net/mail/?group_id=239239">the mailing list</a>.</p>
</div>;T;I"q
	<h2>SeqWare 0.12.5 released <span class="date">(August 6th, 2012)</span></h2>
<p>We have released the final version in the 0.12.x series of SeqWare. Check out the <a href="/release-notes/">full release notes</a> for details.</p>

<p>If you have any questions, be sure to ask them on <a href="http://sourceforge.net/mail/?group_id=239239">the mailing list</a>.</p>



;T;@ò"/blog/12/2012-08-06/{;{
;I"ó	<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<title>SeqWare ‚Ä∫ SeqWare 0.12.5 released</title>
<meta content="nanoc 3.4.0" name="generator">
<link href="/assets/style-v17.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://feeds.feedburner.com/seqware" rel="alternate" title="The SeqWare Blog" type="application/atom+xml">
<script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-34523087-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script>
</head>
<body>
<div class="wrapper">
<!-- ***** navigation ***** -->
<div class="nav">
<ol>
<li><a href="/"><span>Home</span></a></li>
<li><a href="/blog/"><span>News</span></a></li>
<li><a href="/docs/"><span>Documentation</span></a></li>
<li><a href="/community/"><span>Community</span></a></li>
<li><a href="/partners/"><span>Partners</span></a></li>
<li><a href="/about/"><span>About</span></a></li>
</ol>
</div>
<!-- ***** sidebar ***** -->
<div class="side">
<ol>
<li><a href="/blog/13/"><span>Articles about v0.13.x</span></a></li>
<li><a href="/blog/12/"><span>Articles about v0.12.x</span></a></li>
</ol>
</div>
<!-- ***** body ***** -->
<div class="body">
<div class="article">
<div class="header">
<h1>SeqWare 0.12.5 released</h1>
</div>
<p>We have released the final version in the 0.12.x series of SeqWare. Check out the <a href="/release-notes/">full release notes</a> for details.</p>

<p>If you have any questions, be sure to ask them on <a href="http://sourceforge.net/mail/?group_id=239239">the mailing list</a>.</p>
</div>
</div>
</div>
<!-- ***** footer ***** -->
<div id="footer">
<p>SeqWare ¬© 2007‚Äì2012 Brian O&#8217;Connor. SeqWare is released under the a <a rel="license" href="http://www.gnu.org/licenses/licenses.html">GNU GPL v3</a>. This site is built using the excellent <a href="http://nanoc.stoneship.org/">nanoc</a> tool and example site along with the <a href="http://www.fonts.info/info/press/free-fonts-for-font-face-embedding.htm">Graublau</a> and <a href="http://scripts.sil.org/Gentium">Gentium</a> fonts.</p>
</div>
</body>
</html>
;T;	I"¸We have released the final version in the 0.12.x series of SeqWare. Check out the [full release notes](/release-notes/) for details.

If you have any questions, be sure to ask them on [the mailing list](http://sourceforge.net/mail/?group_id=239239). 

;T;
I"<p>We have released the final version in the 0.12.x series of SeqWare. Check out the <a href="/release-notes/">full release notes</a> for details.</p>

<p>If you have any questions, be sure to ask them on <a href="http://sourceforge.net/mail/?group_id=239239">the mailing list</a>.</p>;T;I"<p>We have released the final version in the 0.12.x series of SeqWare. Check out the <a href="/release-notes/">full release notes</a> for details.</p>

<p>If you have any questions, be sure to ask them on <a href="http://sourceforge.net/mail/?group_id=239239">the mailing list</a>.</p>
;T;@ü"/blog/13/2012-09-02/{;{
;I"Ä	<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<title>SeqWare ‚Ä∫ New SeqWare Website for 0.13.x</title>
<meta content="nanoc 3.4.0" name="generator">
<link href="/assets/style-v17.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://feeds.feedburner.com/seqware" rel="alternate" title="The SeqWare Blog" type="application/atom+xml">
<script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-34523087-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script>
</head>
<body>
<div class="wrapper">
<!-- ***** navigation ***** -->
<div class="nav">
<ol>
<li><a href="/"><span>Home</span></a></li>
<li><a href="/blog/"><span>News</span></a></li>
<li><a href="/docs/"><span>Documentation</span></a></li>
<li><a href="/community/"><span>Community</span></a></li>
<li><a href="/partners/"><span>Partners</span></a></li>
<li><a href="/about/"><span>About</span></a></li>
</ol>
</div>
<!-- ***** sidebar ***** -->
<div class="side">
<ol>
<li><a href="/blog/13/"><span>Articles about v0.13.x</span></a></li>
<li><a href="/blog/12/"><span>Articles about v0.12.x</span></a></li>
</ol>
</div>
<!-- ***** body ***** -->
<div class="body">
<div class="article">
<div class="header">
<h1>New SeqWare Website for 0.13.x</h1>
</div>
<p>We are slowly transitioning from SourceForge to GitHub.  Part of this transition will involve the migration of our MediaWiki content to this new nanoc-based website which will make it much easier to manage and redistribute our documentation.</p>
</div>
</div>
</div>
<!-- ***** footer ***** -->
<div id="footer">
<p>SeqWare ¬© 2007‚Äì2012 Brian O&#8217;Connor. SeqWare is released under the a <a rel="license" href="http://www.gnu.org/licenses/licenses.html">GNU GPL v3</a>. This site is built using the excellent <a href="http://nanoc.stoneship.org/">nanoc</a> tool and example site along with the <a href="http://www.fonts.info/info/press/free-fonts-for-font-face-embedding.htm">Graublau</a> and <a href="http://scripts.sil.org/Gentium">Gentium</a> fonts.</p>
</div>
</body>
</html>
;T;	I"ÛWe are slowly transitioning from SourceForge to GitHub.  Part of this transition will involve the migration of our MediaWiki content to this new nanoc-based website which will make it much easier to manage and redistribute our documentation.

;T;
I"¯<p>We are slowly transitioning from SourceForge to GitHub.  Part of this transition will involve the migration of our MediaWiki content to this new nanoc-based website which will make it much easier to manage and redistribute our documentation.</p>;T;I"˘<p>We are slowly transitioning from SourceForge to GitHub.  Part of this transition will involve the migration of our MediaWiki content to this new nanoc-based website which will make it much easier to manage and redistribute our documentation.</p>
;T;@¶"/about/{;{
;I"<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<title>SeqWare ‚Ä∫ About</title>
<meta content="nanoc 3.4.0" name="generator">
<link href="../assets/style-v17.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://feeds.feedburner.com/seqware" rel="alternate" title="The SeqWare Blog" type="application/atom+xml">
<script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-34523087-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script>
</head>
<body>
<div class="wrapper">
<!-- ***** navigation ***** -->
<div class="nav">
<ol>
<li><a href="../"><span>Home</span></a></li>
<li><a href="../blog/"><span>News</span></a></li>
<li><a href="../docs/"><span>Documentation</span></a></li>
<li><a href="../community/"><span>Community</span></a></li>
<li><a href="../partners/"><span>Partners</span></a></li>
<li><span class="active" title="You're here."><span>About</span></span></li>
</ol>
</div>
<!-- ***** sidebar ***** -->
<div class="side">
<div class="section odd">
<script charset="utf-8" src="http://widgets.twimg.com/j/2/widget.js"></script><script> new TWTR.Widget({   version: 2,   type: 'profile',   rpp: 4,   interval: 30000,   width: 250,   height: 370,   theme: {     shell: {       background: '#daebff',       color: '#153b66'     },     tweets: {       background: '#daebff',       color: '#000000',       links: '#153b66'     }   },   features: {     scrollbar: false,     loop: false,     live: true,     behavior: 'all'   } }).render().setUser('seqware').start(); </script>
</div>
<div class="section even">
<p>The current version of SeqWare is 0.12.5, released on August 6th, 2012. See the <a href="../release-notes/">release notes</a> for details.</p>
</div>
</div>
<!-- ***** body ***** -->
<div class="body">
<div class="article">
<div class="header">
<h1>About</h1>
</div>
<div class="section" id="history">
<h2>History</h2>

<p>The SeqWare project (originally SolexaTools) was started in 2007 by Brian O&#8217;Connor while he was a postdoc in the Nelson Lab at UCLA.  Brian moved to UNC in 2010 to be a research associate in the Lineberger center where the project grew and developed into the pipeline system used for the center&#8217;s TCGA RNA-Seq analysis.  In 2011 Brian moved to OICR in Toronto where he is currently a software architect and manager for the Software Engineering team. SeqWare continues to be developed by his team and is used for the institutes NGS data analysis needs, including the center&#8217;s ICGC projects.</p>

</div>
<div class="section" id="purpose">
<h2>Purpose</h2>

<p>The open source SeqWare project is a portable software infrastructure designed to analyze massive genomics datasets produced by contemporary and emerging technologies, in particular Next Generation Sequencing (NGS) platforms. It consists of a comprehensive suite of tools focused on enabling the end-to-end analysis of sequence data ‚Äì from from raw base calling to analyzed variants ready for interpretation by users. <strong>SeqWare is tool agnostic, it is a framework for building analysis workflows and does not provide specific implementations out-of-the-box. You use SeqWare to create high-throughput infrastructure for NGS analysis using whatever analysis tools you like.</strong></p>

</div>
<div class="section" id="components">
<h2>Components</h2>

<p>SeqWare currently provides 5 main tools specifically designed to support massively parallel sequencing technologies. All tools can be used together or separately:</p>

<ul>
<li>
<strong>MetaDB</strong>: provides a common database to store metadata used by all components.</li>
<li>
<strong>Portal</strong>: a LIMS-like web application to manage samples, record computational events, and present results back to end users.</li>
<li>
<strong>Pipeline</strong>: a workflow engine that is capable of wrapping and combining other tools (BFAST, BWA, SAMtools, etc) into complex pipelines, recording metadata about the analysis, and facilitates automation of pipelines based on metadata.</li>
<li>
<strong>Web Service</strong>: a programmatic API that lets people build new tools on top of the project</li>
<li>
<strong>Query Engine</strong>: a NOSQL database designed to store and query variants and other events inferred from sequence data.</li>
</ul>
<p><img width="600" src="../assets/images/seqware_arch.png"></p>

</div>
<div class="section" id="publications">
<h2>Publications</h2>

<p>Please cite the SeqWare paper:</p>

<p>O‚ÄôConnor, B. D., B. Merriman, and S. F. Nelson. <a href="http://www.biomedcentral.com/1471-2105/11/S12/S2">SeqWare Query Engine: storing and searching sequence data in the cloud</a>. BMC Bioinformatics 2010, 11(Suppl 12):S2</p>
</div>
</div>
</div>
</div>
<!-- ***** footer ***** -->
<div id="footer">
<p>SeqWare ¬© 2007‚Äì2012 Brian O&#8217;Connor. SeqWare is released under the a <a rel="license" href="http://www.gnu.org/licenses/licenses.html">GNU GPL v3</a>. This site is built using the excellent <a href="http://nanoc.stoneship.org/">nanoc</a> tool and example site along with the <a href="http://www.fonts.info/info/press/free-fonts-for-font-face-embedding.htm">Graublau</a> and <a href="http://scripts.sil.org/Gentium">Gentium</a> fonts.</p>
</div>
</body>
</html>
;T;	I"ò	##History

The SeqWare project (originally SolexaTools) was started in 2007 by Brian O'Connor while he was a postdoc in the Nelson Lab at UCLA.  Brian moved to UNC in 2010 to be a research associate in the Lineberger center where the project grew and developed into the pipeline system used for the center's TCGA RNA-Seq analysis.  In 2011 Brian moved to OICR in Toronto where he is currently a software architect and manager for the Software Engineering team. SeqWare continues to be developed by his team and is used for the institutes NGS data analysis needs, including the center's ICGC projects.

##Purpose

The open source SeqWare project is a portable software infrastructure designed to analyze massive genomics datasets produced by contemporary and emerging technologies, in particular Next Generation Sequencing (NGS) platforms. It consists of a comprehensive suite of tools focused on enabling the end-to-end analysis of sequence data ‚Äì from from raw base calling to analyzed variants ready for interpretation by users. **SeqWare is tool agnostic, it is a framework for building analysis workflows and does not provide specific implementations out-of-the-box. You use SeqWare to create high-throughput infrastructure for NGS analysis using whatever analysis tools you like.**

##Components

SeqWare currently provides 5 main tools specifically designed to support massively parallel sequencing technologies. All tools can be used together or separately:

* **MetaDB**: provides a common database to store metadata used by all components.
* **Portal**: a LIMS-like web application to manage samples, record computational events, and present results back to end users.
* **Pipeline**: a workflow engine that is capable of wrapping and combining other tools (BFAST, BWA, SAMtools, etc) into complex pipelines, recording metadata about the analysis, and facilitates automation of pipelines based on metadata.
* **Web Service**: a programmatic API that lets people build new tools on top of the project
* **Query Engine**: a NOSQL database designed to store and query variants and other events inferred from sequence data.

<img width="600" src="/assets/images/seqware_arch.png"/>

## Publications

Please cite the SeqWare paper:

O‚ÄôConnor, B. D., B. Merriman, and S. F. Nelson. [SeqWare Query Engine: storing and searching sequence data in the cloud](http://www.biomedcentral.com/1471-2105/11/S12/S2). BMC Bioinformatics 2010, 11(Suppl 12):S2


;T;
I"<div class="section" id="history">
<h2>History</h2>

<p>The SeqWare project (originally SolexaTools) was started in 2007 by Brian O'Connor while he was a postdoc in the Nelson Lab at UCLA.  Brian moved to UNC in 2010 to be a research associate in the Lineberger center where the project grew and developed into the pipeline system used for the center's TCGA RNA-Seq analysis.  In 2011 Brian moved to OICR in Toronto where he is currently a software architect and manager for the Software Engineering team. SeqWare continues to be developed by his team and is used for the institutes NGS data analysis needs, including the center's ICGC projects.</p>

</div><div class="section" id="purpose">
<h2>Purpose</h2>

<p>The open source SeqWare project is a portable software infrastructure designed to analyze massive genomics datasets produced by contemporary and emerging technologies, in particular Next Generation Sequencing (NGS) platforms. It consists of a comprehensive suite of tools focused on enabling the end-to-end analysis of sequence data ‚Äì from from raw base calling to analyzed variants ready for interpretation by users. <strong>SeqWare is tool agnostic, it is a framework for building analysis workflows and does not provide specific implementations out-of-the-box. You use SeqWare to create high-throughput infrastructure for NGS analysis using whatever analysis tools you like.</strong></p>

</div><div class="section" id="components">
<h2>Components</h2>

<p>SeqWare currently provides 5 main tools specifically designed to support massively parallel sequencing technologies. All tools can be used together or separately:</p>

<ul>
<li>
<strong>MetaDB</strong>: provides a common database to store metadata used by all components.</li>
<li>
<strong>Portal</strong>: a LIMS-like web application to manage samples, record computational events, and present results back to end users.</li>
<li>
<strong>Pipeline</strong>: a workflow engine that is capable of wrapping and combining other tools (BFAST, BWA, SAMtools, etc) into complex pipelines, recording metadata about the analysis, and facilitates automation of pipelines based on metadata.</li>
<li>
<strong>Web Service</strong>: a programmatic API that lets people build new tools on top of the project</li>
<li>
<strong>Query Engine</strong>: a NOSQL database designed to store and query variants and other events inferred from sequence data.</li>
</ul>
<p><img width="600" src="/assets/images/seqware_arch.png"></p>

</div><div class="section" id="publications">
<h2>Publications</h2>

<p>Please cite the SeqWare paper:</p>

<p>O‚ÄôConnor, B. D., B. Merriman, and S. F. Nelson. <a href="http://www.biomedcentral.com/1471-2105/11/S12/S2">SeqWare Query Engine: storing and searching sequence data in the cloud</a>. BMC Bioinformatics 2010, 11(Suppl 12):S2</p>
</div>;T;I"c
<h2>History</h2>

<p>The SeqWare project (originally SolexaTools) was started in 2007 by Brian O'Connor while he was a postdoc in the Nelson Lab at UCLA.  Brian moved to UNC in 2010 to be a research associate in the Lineberger center where the project grew and developed into the pipeline system used for the center's TCGA RNA-Seq analysis.  In 2011 Brian moved to OICR in Toronto where he is currently a software architect and manager for the Software Engineering team. SeqWare continues to be developed by his team and is used for the institutes NGS data analysis needs, including the center's ICGC projects.</p>

<h2>Purpose</h2>

<p>The open source SeqWare project is a portable software infrastructure designed to analyze massive genomics datasets produced by contemporary and emerging technologies, in particular Next Generation Sequencing (NGS) platforms. It consists of a comprehensive suite of tools focused on enabling the end-to-end analysis of sequence data ‚Äì from from raw base calling to analyzed variants ready for interpretation by users. <strong>SeqWare is tool agnostic, it is a framework for building analysis workflows and does not provide specific implementations out-of-the-box. You use SeqWare to create high-throughput infrastructure for NGS analysis using whatever analysis tools you like.</strong></p>

<h2>Components</h2>

<p>SeqWare currently provides 5 main tools specifically designed to support massively parallel sequencing technologies. All tools can be used together or separately:</p>

<ul>
<li><strong>MetaDB</strong>: provides a common database to store metadata used by all components.</li>
<li><strong>Portal</strong>: a LIMS-like web application to manage samples, record computational events, and present results back to end users.</li>
<li><strong>Pipeline</strong>: a workflow engine that is capable of wrapping and combining other tools (BFAST, BWA, SAMtools, etc) into complex pipelines, recording metadata about the analysis, and facilitates automation of pipelines based on metadata.</li>
<li><strong>Web Service</strong>: a programmatic API that lets people build new tools on top of the project</li>
<li><strong>Query Engine</strong>: a NOSQL database designed to store and query variants and other events inferred from sequence data.</li>
</ul>


<p><img width="600" src="/assets/images/seqware_arch.png"/></p>

<h2>Publications</h2>

<p>Please cite the SeqWare paper:</p>

<p>O‚ÄôConnor, B. D., B. Merriman, and S. F. Nelson. <a href="http://www.biomedcentral.com/1471-2105/11/S12/S2">SeqWare Query Engine: storing and searching sequence data in the cloud</a>. BMC Bioinformatics 2010, 11(Suppl 12):S2</p>
;T;@≠"//static/assets/images/cloud-based_ico.png/{;{ "7/static/assets/images/science-streamlined_ico.png/{;{ "2/static/assets/images/genome-capable_ico.png/{;{ "//static/assets/images/open-source_ico.png/{;{ "1/static/assets/images/concepts-icon_bgr.png/{;{ "/partners/{;{
;I"]<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<title>SeqWare ‚Ä∫ Partners</title>
<meta content="nanoc 3.4.0" name="generator">
<link href="../assets/style-v17.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://feeds.feedburner.com/seqware" rel="alternate" title="The SeqWare Blog" type="application/atom+xml">
<script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-34523087-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script>
</head>
<body>
<div class="wrapper">
<!-- ***** navigation ***** -->
<div class="nav">
<ol>
<li><a href="../"><span>Home</span></a></li>
<li><a href="../blog/"><span>News</span></a></li>
<li><a href="../docs/"><span>Documentation</span></a></li>
<li><a href="../community/"><span>Community</span></a></li>
<li><span class="active" title="You're here."><span>Partners</span></span></li>
<li><a href="../about/"><span>About</span></a></li>
</ol>
</div>
<!-- ***** sidebar ***** -->
<div class="side">
<div class="section odd">
<script charset="utf-8" src="http://widgets.twimg.com/j/2/widget.js"></script><script> new TWTR.Widget({   version: 2,   type: 'profile',   rpp: 4,   interval: 30000,   width: 250,   height: 370,   theme: {     shell: {       background: '#daebff',       color: '#153b66'     },     tweets: {       background: '#daebff',       color: '#000000',       links: '#153b66'     }   },   features: {     scrollbar: false,     loop: false,     live: true,     behavior: 'all'   } }).render().setUser('seqware').start(); </script>
</div>
<div class="section even">
<p>The current version of SeqWare is 0.12.5, released on August 6th, 2012. See the <a href="../release-notes/">release notes</a> for details.</p>
</div>
</div>
<!-- ***** body ***** -->
<div class="body">
<div class="article">
<div class="header">
<h1>Partners</h1>
</div>
<div class="section" id="users">
<h2>Users</h2>

<p>SeqWare is currently used by a variety of NGS users including the <a href="http://unclineberger.org/">Lineberger Comprehensive Cancer Center</a> at UNC, at the <a href="http://oicr.on.ca">Ontario Institute for Cancer Research</a> in Toronto and by our commercial partner <a href="http://nimbusinformatics.com">Nimbus Informatics</a>.</p>

<p>The majority of SeqWare development is currently happening at <a href="http://oicr.on.ca">OICR</a> and <a href="http://nimbusinformatics.com">Nimbus Informatics</a>.</p>

</div>
<div class="section" id="commercial-partner">
<h2>Commercial Partner</h2>

<p>Please see Nimbus&#8217; website if you are interested in consulting services for SeqWare workflow creation, hosting of SeqWare on Amazon&#8217;s cloud, or support for local installs of SeqWare.</p>

<p><a href="http://nimbusinformatics.com"><img src="../assets/images/nimbus_clear.png"></a></p>

</div>
<div class="section" id="contributions">
<h2>Contributions</h2>

<p>These are the folks that have made SeqWare possible.  Most development activity now centers around SeqWare at Nimbus Informatics and OICR:</p>

<ul>
<li>
<strong>Brian O&#8217;Connor</strong>: lead developer/architect. Started the project in the Nelson lab and moved in 2010 to UNC which is the TCGA center responsible for RNASeq data creation. Currently he is deploying SeqWare at OICR where he is the software architect for the Informatics and Biocomputing group. Brian focuses on SeqWare Query Engine, Pipeline, and MetaDB. You can contact Brian at briandoconnor at gmail dot com.</li>
<li>
<strong>Jordan Mendler (inactive)</strong>: developer/architect. Worked on the project in the Nelson Lab at UCLA. Jordan focused on SeqWare Pipeline.</li>
<li>
<strong>Sara Grimm (inactive)</strong>: developer/analyst. Worked on the project in the Lineberger Bioinformatics group at UNC. Sara focused on SeqWare Pipeline modules for RNAseq analysis.</li>
<li>
<strong>Jianying Li (inactive)</strong>: developer/analyst. Worked on the project in the Lineberger Bioinformatics group at UNC. Jianying focused on SeqWare Pipeline modules for QC reporting and statistical analysis on RNAseq data.</li>
<li>
<strong>Matt Soloway</strong>: developer/user. Works on the project in the Lineberger Bioinformatics group at UNC. Matt focuses on SeqWare MetaDB dataload and also workflows, which links -BOTH- modules for automated distribution of computations on the cluster -AND- results to SeqWare users.</li>
<li>
<strong>Stuart Jefferys</strong>: developer/user. Works on the project in the Lineberger Bioinformatics group at UNC. Stuart focuses on SeqWare Pipeline development.</li>
<li>
<strong>Oleg Boussel, Dmitry Nevaikin, and others with VRP Inc (inactive)</strong>: VRP created the SeqWare Portal version we have today. Recently wrapped up this consulting work.</li>
<li>
<strong>Marc Carlson</strong>: SeqWare Pipeline module developer.</li>
<li>
<strong>Morgan Taschuk</strong>: SeqWare Pipeline Developer at OICR.</li>
<li>
<strong>Denis Yuen</strong>: SeqWare Query Engine Developer at OICR.</li>
<li>
<strong>Yong Liang</strong>: SeqWare Web Service and Pipeline Developer at OICR.</li>
</ul>
</div>
</div>
</div>
</div>
<!-- ***** footer ***** -->
<div id="footer">
<p>SeqWare ¬© 2007‚Äì2012 Brian O&#8217;Connor. SeqWare is released under the a <a rel="license" href="http://www.gnu.org/licenses/licenses.html">GNU GPL v3</a>. This site is built using the excellent <a href="http://nanoc.stoneship.org/">nanoc</a> tool and example site along with the <a href="http://www.fonts.info/info/press/free-fonts-for-font-face-embedding.htm">Graublau</a> and <a href="http://scripts.sil.org/Gentium">Gentium</a> fonts.</p>
</div>
</body>
</html>
;T;	I"î
## Users

SeqWare is currently used by a variety of NGS users including the [Lineberger Comprehensive Cancer Center](http://unclineberger.org/) at UNC, at the [Ontario Institute for Cancer Research](http://oicr.on.ca) in Toronto and by our commercial partner [Nimbus Informatics](http://nimbusinformatics.com).

The majority of SeqWare development is currently happening at [OICR](http://oicr.on.ca) and [Nimbus Informatics](http://nimbusinformatics.com).

##Commercial Partner

Please see Nimbus' website if you are interested in consulting services for SeqWare workflow creation, hosting of SeqWare on Amazon's cloud, or support for local installs of SeqWare.

<a href="http://nimbusinformatics.com"><img src="/assets/images/nimbus_clear.png"/></a>

## Contributions

These are the folks that have made SeqWare possible.  Most development activity now centers around SeqWare at Nimbus Informatics and OICR:

* **Brian O'Connor**: lead developer/architect. Started the project in the Nelson lab and moved in 2010 to UNC which is the TCGA center responsible for RNASeq data creation. Currently he is deploying SeqWare at OICR where he is the software architect for the Informatics and Biocomputing group. Brian focuses on SeqWare Query Engine, Pipeline, and MetaDB. You can contact Brian at briandoconnor at gmail dot com.
* **Jordan Mendler (inactive)**: developer/architect. Worked on the project in the Nelson Lab at UCLA. Jordan focused on SeqWare Pipeline.
* **Sara Grimm (inactive)**: developer/analyst. Worked on the project in the Lineberger Bioinformatics group at UNC. Sara focused on SeqWare Pipeline modules for RNAseq analysis.
* **Jianying Li (inactive)**: developer/analyst. Worked on the project in the Lineberger Bioinformatics group at UNC. Jianying focused on SeqWare Pipeline modules for QC reporting and statistical analysis on RNAseq data.
* **Matt Soloway**: developer/user. Works on the project in the Lineberger Bioinformatics group at UNC. Matt focuses on SeqWare MetaDB dataload and also workflows, which links -BOTH- modules for automated distribution of computations on the cluster -AND- results to SeqWare users.
* **Stuart Jefferys**: developer/user. Works on the project in the Lineberger Bioinformatics group at UNC. Stuart focuses on SeqWare Pipeline development.
* **Oleg Boussel, Dmitry Nevaikin, and others with VRP Inc (inactive)**: VRP created the SeqWare Portal version we have today. Recently wrapped up this consulting work.
* **Marc Carlson**: SeqWare Pipeline module developer.
* **Morgan Taschuk**: SeqWare Pipeline Developer at OICR.
* **Denis Yuen**: SeqWare Query Engine Developer at OICR.
* **Yong Liang**: SeqWare Web Service and Pipeline Developer at OICR.
;T;
I"|<div class="section" id="users">
<h2>Users</h2>

<p>SeqWare is currently used by a variety of NGS users including the <a href="http://unclineberger.org/">Lineberger Comprehensive Cancer Center</a> at UNC, at the <a href="http://oicr.on.ca">Ontario Institute for Cancer Research</a> in Toronto and by our commercial partner <a href="http://nimbusinformatics.com">Nimbus Informatics</a>.</p>

<p>The majority of SeqWare development is currently happening at <a href="http://oicr.on.ca">OICR</a> and <a href="http://nimbusinformatics.com">Nimbus Informatics</a>.</p>

</div><div class="section" id="commercial-partner">
<h2>Commercial Partner</h2>

<p>Please see Nimbus' website if you are interested in consulting services for SeqWare workflow creation, hosting of SeqWare on Amazon's cloud, or support for local installs of SeqWare.</p>

<p><a href="http://nimbusinformatics.com"><img src="/assets/images/nimbus_clear.png"></a></p>

</div><div class="section" id="contributions">
<h2>Contributions</h2>

<p>These are the folks that have made SeqWare possible.  Most development activity now centers around SeqWare at Nimbus Informatics and OICR:</p>

<ul>
<li>
<strong>Brian O'Connor</strong>: lead developer/architect. Started the project in the Nelson lab and moved in 2010 to UNC which is the TCGA center responsible for RNASeq data creation. Currently he is deploying SeqWare at OICR where he is the software architect for the Informatics and Biocomputing group. Brian focuses on SeqWare Query Engine, Pipeline, and MetaDB. You can contact Brian at briandoconnor at gmail dot com.</li>
<li>
<strong>Jordan Mendler (inactive)</strong>: developer/architect. Worked on the project in the Nelson Lab at UCLA. Jordan focused on SeqWare Pipeline.</li>
<li>
<strong>Sara Grimm (inactive)</strong>: developer/analyst. Worked on the project in the Lineberger Bioinformatics group at UNC. Sara focused on SeqWare Pipeline modules for RNAseq analysis.</li>
<li>
<strong>Jianying Li (inactive)</strong>: developer/analyst. Worked on the project in the Lineberger Bioinformatics group at UNC. Jianying focused on SeqWare Pipeline modules for QC reporting and statistical analysis on RNAseq data.</li>
<li>
<strong>Matt Soloway</strong>: developer/user. Works on the project in the Lineberger Bioinformatics group at UNC. Matt focuses on SeqWare MetaDB dataload and also workflows, which links -BOTH- modules for automated distribution of computations on the cluster -AND- results to SeqWare users.</li>
<li>
<strong>Stuart Jefferys</strong>: developer/user. Works on the project in the Lineberger Bioinformatics group at UNC. Stuart focuses on SeqWare Pipeline development.</li>
<li>
<strong>Oleg Boussel, Dmitry Nevaikin, and others with VRP Inc (inactive)</strong>: VRP created the SeqWare Portal version we have today. Recently wrapped up this consulting work.</li>
<li>
<strong>Marc Carlson</strong>: SeqWare Pipeline module developer.</li>
<li>
<strong>Morgan Taschuk</strong>: SeqWare Pipeline Developer at OICR.</li>
<li>
<strong>Denis Yuen</strong>: SeqWare Query Engine Developer at OICR.</li>
<li>
<strong>Yong Liang</strong>: SeqWare Web Service and Pipeline Developer at OICR.</li>
</ul>
</div>;T;I"È<h2>Users</h2>

<p>SeqWare is currently used by a variety of NGS users including the <a href="http://unclineberger.org/">Lineberger Comprehensive Cancer Center</a> at UNC, at the <a href="http://oicr.on.ca">Ontario Institute for Cancer Research</a> in Toronto and by our commercial partner <a href="http://nimbusinformatics.com">Nimbus Informatics</a>.</p>

<p>The majority of SeqWare development is currently happening at <a href="http://oicr.on.ca">OICR</a> and <a href="http://nimbusinformatics.com">Nimbus Informatics</a>.</p>

<h2>Commercial Partner</h2>

<p>Please see Nimbus' website if you are interested in consulting services for SeqWare workflow creation, hosting of SeqWare on Amazon's cloud, or support for local installs of SeqWare.</p>

<p><a href="http://nimbusinformatics.com"><img src="/assets/images/nimbus_clear.png"/></a></p>

<h2>Contributions</h2>

<p>These are the folks that have made SeqWare possible.  Most development activity now centers around SeqWare at Nimbus Informatics and OICR:</p>

<ul>
<li><strong>Brian O'Connor</strong>: lead developer/architect. Started the project in the Nelson lab and moved in 2010 to UNC which is the TCGA center responsible for RNASeq data creation. Currently he is deploying SeqWare at OICR where he is the software architect for the Informatics and Biocomputing group. Brian focuses on SeqWare Query Engine, Pipeline, and MetaDB. You can contact Brian at briandoconnor at gmail dot com.</li>
<li><strong>Jordan Mendler (inactive)</strong>: developer/architect. Worked on the project in the Nelson Lab at UCLA. Jordan focused on SeqWare Pipeline.</li>
<li><strong>Sara Grimm (inactive)</strong>: developer/analyst. Worked on the project in the Lineberger Bioinformatics group at UNC. Sara focused on SeqWare Pipeline modules for RNAseq analysis.</li>
<li><strong>Jianying Li (inactive)</strong>: developer/analyst. Worked on the project in the Lineberger Bioinformatics group at UNC. Jianying focused on SeqWare Pipeline modules for QC reporting and statistical analysis on RNAseq data.</li>
<li><strong>Matt Soloway</strong>: developer/user. Works on the project in the Lineberger Bioinformatics group at UNC. Matt focuses on SeqWare MetaDB dataload and also workflows, which links -BOTH- modules for automated distribution of computations on the cluster -AND- results to SeqWare users.</li>
<li><strong>Stuart Jefferys</strong>: developer/user. Works on the project in the Lineberger Bioinformatics group at UNC. Stuart focuses on SeqWare Pipeline development.</li>
<li><strong>Oleg Boussel, Dmitry Nevaikin, and others with VRP Inc (inactive)</strong>: VRP created the SeqWare Portal version we have today. Recently wrapped up this consulting work.</li>
<li><strong>Marc Carlson</strong>: SeqWare Pipeline module developer.</li>
<li><strong>Morgan Taschuk</strong>: SeqWare Pipeline Developer at OICR.</li>
<li><strong>Denis Yuen</strong>: SeqWare Query Engine Developer at OICR.</li>
<li><strong>Yong Liang</strong>: SeqWare Web Service and Pipeline Developer at OICR.</li>
</ul>

;T;@√",/static/assets/images/seqware_arch.png/{;{ ",/static/assets/images/nimbus_clear.png/{;{ "/docs/5-portal/{;{
;I"î<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<title>SeqWare ‚Ä∫ SeqWare Portal</title>
<meta content="nanoc 3.4.0" name="generator">
<link href="../../assets/style-v17.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://feeds.feedburner.com/seqware" rel="alternate" title="The SeqWare Blog" type="application/atom+xml">
<script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-34523087-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script>
</head>
<body>
<div class="wrapper">
<!-- ***** navigation ***** -->
<div class="nav">
<ol>
<li><a href="../../"><span>Home</span></a></li>
<li><a href="../../blog/"><span>News</span></a></li>
<li><a href="../"><span>Documentation</span></a></li>
<li><a href="../../community/"><span>Community</span></a></li>
<li><a href="../../partners/"><span>Partners</span></a></li>
<li><a href="../../about/"><span>About</span></a></li>
</ol>
</div>
<!-- ***** sidebar ***** -->
<div class="side">
<ol>
<li><a href="../1-introduction/"><span>Introduction to SeqWare</span></a></li>
<li><a href="../2-installation/"><span>Installation</span></a></li>
<li><a href="../3-getting-started/"><span>Getting Started</span></a></li>
<li><a href="../4-metadb/"><span>SeqWare MetaDB</span></a></li>
<li>
<span class="active" title="You're here."><span>SeqWare Portal</span></span><ol class="toc">
<li><a href="#overview">Overview</a></li>
<li><a href="#admin-setup">Admin Setup</a></li>
<li><a href="#features">Features</a></li>
<li><a href="#uploading-data">Uploading Data</a></li>
<li><a href="#launching-workflows">Launching Workflows</a></li>
<li><a href="#monitoring-workflows">Monitoring Workflows</a></li>
<li><a href="#retrieving-results">Retrieving Results</a></li>
</ol>
</li>
<li><a href="../6-pipeline/"><span>SeqWare Pipeline</span></a></li>
<li><a href="../7-web-service/"><span>SeqWare Web Service</span></a></li>
<li><a href="../8-query-engine/"><span>SeqWare Query Engine</span></a></li>
<li><a href="../9-glossary/"><span>Glossary</span></a></li>
<li><a href="../10-faq/"><span>Frequently Asked Questions</span></a></li>
<li><a href="../11-api/"><span>APIs</span></a></li>
</ol>
</div>
<!-- ***** body ***** -->
<div class="body">
<div class="article">
<div class="header">
<h1>SeqWare Portal</h1>
</div>
<div class="section" id="overview">
<h2>Overview</h2>

</div>
<div class="section" id="admin-setup">
<h2>Admin Setup</h2>

</div>
<div class="section" id="features">
<h2>Features</h2>

</div>
<div class="section" id="uploading-data">
<h2>Uploading Data</h2>

</div>
<div class="section" id="launching-workflows">
<h2>Launching Workflows</h2>

</div>
<div class="section" id="monitoring-workflows">
<h2>Monitoring Workflows</h2>

</div>
<div class="section" id="retrieving-results"><h2>Retrieving Results</h2></div>
</div>
</div>
</div>
<!-- ***** footer ***** -->
<div id="footer">
<p>SeqWare ¬© 2007‚Äì2012 Brian O&#8217;Connor. SeqWare is released under the a <a rel="license" href="http://www.gnu.org/licenses/licenses.html">GNU GPL v3</a>. This site is built using the excellent <a href="http://nanoc.stoneship.org/">nanoc</a> tool and example site along with the <a href="http://www.fonts.info/info/press/free-fonts-for-font-face-embedding.htm">Graublau</a> and <a href="http://scripts.sil.org/Gentium">Gentium</a> fonts.</p>
</div>
</body>
</html>
;T;	I"É## Overview

## Admin Setup

## Features

## Uploading Data

## Launching Workflows

## Monitoring Workflows

## Retrieving Results;T;
I"¸<div class="section" id="overview">
<h2>Overview</h2>

</div><div class="section" id="admin-setup">
<h2>Admin Setup</h2>

</div><div class="section" id="features">
<h2>Features</h2>

</div><div class="section" id="uploading-data">
<h2>Uploading Data</h2>

</div><div class="section" id="launching-workflows">
<h2>Launching Workflows</h2>

</div><div class="section" id="monitoring-workflows">
<h2>Monitoring Workflows</h2>

</div><div class="section" id="retrieving-results"><h2>Retrieving Results</h2></div>;T;I"Æ<h2>Overview</h2>

<h2>Admin Setup</h2>

<h2>Features</h2>

<h2>Uploading Data</h2>

<h2>Launching Workflows</h2>

<h2>Monitoring Workflows</h2>

<h2>Retrieving Results</h2>
;T;@–"/docs/9-glossary/{;{
;I"Z<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<title>SeqWare ‚Ä∫ Glossary</title>
<meta content="nanoc 3.4.0" name="generator">
<link href="../../assets/style-v17.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://feeds.feedburner.com/seqware" rel="alternate" title="The SeqWare Blog" type="application/atom+xml">
<script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-34523087-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script>
</head>
<body>
<div class="wrapper">
<!-- ***** navigation ***** -->
<div class="nav">
<ol>
<li><a href="../../"><span>Home</span></a></li>
<li><a href="../../blog/"><span>News</span></a></li>
<li><a href="../"><span>Documentation</span></a></li>
<li><a href="../../community/"><span>Community</span></a></li>
<li><a href="../../partners/"><span>Partners</span></a></li>
<li><a href="../../about/"><span>About</span></a></li>
</ol>
</div>
<!-- ***** sidebar ***** -->
<div class="side">
<ol>
<li><a href="../1-introduction/"><span>Introduction to SeqWare</span></a></li>
<li><a href="../2-installation/"><span>Installation</span></a></li>
<li><a href="../3-getting-started/"><span>Getting Started</span></a></li>
<li><a href="../4-metadb/"><span>SeqWare MetaDB</span></a></li>
<li><a href="../5-portal/"><span>SeqWare Portal</span></a></li>
<li><a href="../6-pipeline/"><span>SeqWare Pipeline</span></a></li>
<li><a href="../7-web-service/"><span>SeqWare Web Service</span></a></li>
<li><a href="../8-query-engine/"><span>SeqWare Query Engine</span></a></li>
<li><span class="active" title="You're here."><span>Glossary</span></span></li>
<li><a href="../10-faq/"><span>Frequently Asked Questions</span></a></li>
<li><a href="../11-api/"><span>APIs</span></a></li>
</ol>
</div>
<!-- ***** body ***** -->
<div class="body">
<div class="article">
<div class="header">
<h1>Glossary</h1>
</div>
<dl class="glossary">
<dt>Workflow Bundle</dt>
    <dd> 
        A zip file (using Zip64) that contains the workflow definition, 
        binary files, data files, etc.  Everything that needs to be included 
        to run the workflow.
        </dd>

    <dt>more to come&#8230;</dt>
    <dd> 
         we will add more in the near future
        </dd>

</dl>
</div>
</div>
</div>
<!-- ***** footer ***** -->
<div id="footer">
<p>SeqWare ¬© 2007‚Äì2012 Brian O&#8217;Connor. SeqWare is released under the a <a rel="license" href="http://www.gnu.org/licenses/licenses.html">GNU GPL v3</a>. This site is built using the excellent <a href="http://nanoc.stoneship.org/">nanoc</a> tool and example site along with the <a href="http://www.fonts.info/info/press/free-fonts-for-font-face-embedding.htm">Graublau</a> and <a href="http://scripts.sil.org/Gentium">Gentium</a> fonts.</p>
</div>
</body>
</html>
;T;	I"]<dl class="glossary">

	<dt>Workflow Bundle</dt>
	<dd> 
        A zip file (using Zip64) that contains the workflow definition, 
        binary files, data files, etc.  Everything that needs to be included 
        to run the workflow.
        </dd>

	<dt>more to come...</dt>
	<dd> 
         we will add more in the near future
        </dd>

</dl>;T;
I"d<dl class="glossary">
<dt>Workflow Bundle</dt>
    <dd> 
        A zip file (using Zip64) that contains the workflow definition, 
        binary files, data files, etc.  Everything that needs to be included 
        to run the workflow.
        </dd>

    <dt>more to come...</dt>
    <dd> 
         we will add more in the near future
        </dd>

</dl>;T;I"k<dl class="glossary">

    <dt>Workflow Bundle</dt>
    <dd> 
        A zip file (using Zip64) that contains the workflow definition, 
        binary files, data files, etc.  Everything that needs to be included 
        to run the workflow.
        </dd>

    <dt>more to come...</dt>
    <dd> 
         we will add more in the near future
        </dd>

</dl>

;T;@◊"/docs/11-api/{;{
;I"Í<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<title>SeqWare ‚Ä∫ APIs</title>
<meta content="nanoc 3.4.0" name="generator">
<link href="../../assets/style-v17.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://feeds.feedburner.com/seqware" rel="alternate" title="The SeqWare Blog" type="application/atom+xml">
<script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-34523087-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script>
</head>
<body>
<div class="wrapper">
<!-- ***** navigation ***** -->
<div class="nav">
<ol>
<li><a href="../../"><span>Home</span></a></li>
<li><a href="../../blog/"><span>News</span></a></li>
<li><a href="../"><span>Documentation</span></a></li>
<li><a href="../../community/"><span>Community</span></a></li>
<li><a href="../../partners/"><span>Partners</span></a></li>
<li><a href="../../about/"><span>About</span></a></li>
</ol>
</div>
<!-- ***** sidebar ***** -->
<div class="side">
<ol>
<li><a href="../1-introduction/"><span>Introduction to SeqWare</span></a></li>
<li><a href="../2-installation/"><span>Installation</span></a></li>
<li><a href="../3-getting-started/"><span>Getting Started</span></a></li>
<li><a href="../4-metadb/"><span>SeqWare MetaDB</span></a></li>
<li><a href="../5-portal/"><span>SeqWare Portal</span></a></li>
<li><a href="../6-pipeline/"><span>SeqWare Pipeline</span></a></li>
<li><a href="../7-web-service/"><span>SeqWare Web Service</span></a></li>
<li><a href="../8-query-engine/"><span>SeqWare Query Engine</span></a></li>
<li><a href="../9-glossary/"><span>Glossary</span></a></li>
<li><a href="../10-faq/"><span>Frequently Asked Questions</span></a></li>
<li><span class="active" title="You're here."><span>APIs</span></span></li>
</ol>
</div>
<!-- ***** body ***** -->
<div class="body">
<div class="article">
<div class="header">
<h1>APIs</h1>
</div>
<div class="section" id="overview">
<h2>Overview</h2>

</div>
<div class="section" id="seqware-web-service">
<h2>SeqWare Web Service</h2>

</div>
<div class="section" id="seqware-query-engine-web-service"><h2>SeqWare Query Engine Web Service</h2></div>
</div>
</div>
</div>
<!-- ***** footer ***** -->
<div id="footer">
<p>SeqWare ¬© 2007‚Äì2012 Brian O&#8217;Connor. SeqWare is released under the a <a rel="license" href="http://www.gnu.org/licenses/licenses.html">GNU GPL v3</a>. This site is built using the excellent <a href="http://nanoc.stoneship.org/">nanoc</a> tool and example site along with the <a href="http://www.fonts.info/info/press/free-fonts-for-font-face-embedding.htm">Graublau</a> and <a href="http://scripts.sil.org/Gentium">Gentium</a> fonts.</p>
</div>
</body>
</html>
;T;	I"M## Overview

## SeqWare Web Service

## SeqWare Query Engine Web Service;T;
I"˙<div class="section" id="overview">
<h2>Overview</h2>

</div><div class="section" id="seqware-web-service">
<h2>SeqWare Web Service</h2>

</div><div class="section" id="seqware-query-engine-web-service"><h2>SeqWare Query Engine Web Service</h2></div>;T;I"`<h2>Overview</h2>

<h2>SeqWare Web Service</h2>

<h2>SeqWare Query Engine Web Service</h2>
;T;@ﬁ"/docs/7-web-service/{;{
;I"<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<title>SeqWare ‚Ä∫ SeqWare Web Service</title>
<meta content="nanoc 3.4.0" name="generator">
<link href="../../assets/style-v17.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://feeds.feedburner.com/seqware" rel="alternate" title="The SeqWare Blog" type="application/atom+xml">
<script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-34523087-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script>
</head>
<body>
<div class="wrapper">
<!-- ***** navigation ***** -->
<div class="nav">
<ol>
<li><a href="../../"><span>Home</span></a></li>
<li><a href="../../blog/"><span>News</span></a></li>
<li><a href="../"><span>Documentation</span></a></li>
<li><a href="../../community/"><span>Community</span></a></li>
<li><a href="../../partners/"><span>Partners</span></a></li>
<li><a href="../../about/"><span>About</span></a></li>
</ol>
</div>
<!-- ***** sidebar ***** -->
<div class="side">
<ol>
<li><a href="../1-introduction/"><span>Introduction to SeqWare</span></a></li>
<li><a href="../2-installation/"><span>Installation</span></a></li>
<li><a href="../3-getting-started/"><span>Getting Started</span></a></li>
<li><a href="../4-metadb/"><span>SeqWare MetaDB</span></a></li>
<li><a href="../5-portal/"><span>SeqWare Portal</span></a></li>
<li><a href="../6-pipeline/"><span>SeqWare Pipeline</span></a></li>
<li>
<span class="active" title="You're here."><span>SeqWare Web Service</span></span><ol class="toc">
<li><a href="#overview">Overview</a></li>
<li><a href="#admin-setup">Admin Setup</a></li>
<li><a href="#features">Features</a></li>
<li><a href="#reporting">Reporting</a></li>
<li><a href="#workflow-launching-monitoring">Workflow Launching, Monitoring</a></li>
<li><a href="#data-retrieval">Data Retrieval</a></li>
</ol>
</li>
<li><a href="../8-query-engine/"><span>SeqWare Query Engine</span></a></li>
<li><a href="../9-glossary/"><span>Glossary</span></a></li>
<li><a href="../10-faq/"><span>Frequently Asked Questions</span></a></li>
<li><a href="../11-api/"><span>APIs</span></a></li>
</ol>
</div>
<!-- ***** body ***** -->
<div class="body">
<div class="article">
<div class="header">
<h1>SeqWare Web Service</h1>
</div>
<div class="section" id="overview">
<h2>Overview</h2>

</div>
<div class="section" id="admin-setup">
<h2>Admin Setup</h2>

</div>
<div class="section" id="features">
<h2>Features</h2>

</div>
<div class="section" id="reporting">
<h2>Reporting</h2>

</div>
<div class="section" id="workflow-launching-monitoring">
<h2>Workflow Launching, Monitoring</h2>

</div>
<div class="section" id="data-retrieval"><h2>Data Retrieval</h2></div>
</div>
</div>
</div>
<!-- ***** footer ***** -->
<div id="footer">
<p>SeqWare ¬© 2007‚Äì2012 Brian O&#8217;Connor. SeqWare is released under the a <a rel="license" href="http://www.gnu.org/licenses/licenses.html">GNU GPL v3</a>. This site is built using the excellent <a href="http://nanoc.stoneship.org/">nanoc</a> tool and example site along with the <a href="http://www.fonts.info/info/press/free-fonts-for-font-face-embedding.htm">Graublau</a> and <a href="http://scripts.sil.org/Gentium">Gentium</a> fonts.</p>
</div>
</body>
</html>
;T;	I"q## Overview

## Admin Setup

## Features

## Reporting

## Workflow Launching, Monitoring

## Data Retrieval;T;
I"™<div class="section" id="overview">
<h2>Overview</h2>

</div><div class="section" id="admin-setup">
<h2>Admin Setup</h2>

</div><div class="section" id="features">
<h2>Features</h2>

</div><div class="section" id="reporting">
<h2>Reporting</h2>

</div><div class="section" id="workflow-launching-monitoring">
<h2>Workflow Launching, Monitoring</h2>

</div><div class="section" id="data-retrieval"><h2>Data Retrieval</h2></div>;T;I"ë<h2>Overview</h2>

<h2>Admin Setup</h2>

<h2>Features</h2>

<h2>Reporting</h2>

<h2>Workflow Launching, Monitoring</h2>

<h2>Data Retrieval</h2>
;T;@Â"/docs/10-faq/{;{
;I"§<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<title>SeqWare ‚Ä∫ Frequently Asked Questions</title>
<meta content="nanoc 3.4.0" name="generator">
<link href="../../assets/style-v17.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://feeds.feedburner.com/seqware" rel="alternate" title="The SeqWare Blog" type="application/atom+xml">
<script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-34523087-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script>
</head>
<body>
<div class="wrapper">
<!-- ***** navigation ***** -->
<div class="nav">
<ol>
<li><a href="../../"><span>Home</span></a></li>
<li><a href="../../blog/"><span>News</span></a></li>
<li><a href="../"><span>Documentation</span></a></li>
<li><a href="../../community/"><span>Community</span></a></li>
<li><a href="../../partners/"><span>Partners</span></a></li>
<li><a href="../../about/"><span>About</span></a></li>
</ol>
</div>
<!-- ***** sidebar ***** -->
<div class="side">
<ol>
<li><a href="../1-introduction/"><span>Introduction to SeqWare</span></a></li>
<li><a href="../2-installation/"><span>Installation</span></a></li>
<li><a href="../3-getting-started/"><span>Getting Started</span></a></li>
<li><a href="../4-metadb/"><span>SeqWare MetaDB</span></a></li>
<li><a href="../5-portal/"><span>SeqWare Portal</span></a></li>
<li><a href="../6-pipeline/"><span>SeqWare Pipeline</span></a></li>
<li><a href="../7-web-service/"><span>SeqWare Web Service</span></a></li>
<li><a href="../8-query-engine/"><span>SeqWare Query Engine</span></a></li>
<li><a href="../9-glossary/"><span>Glossary</span></a></li>
<li><span class="active" title="You're here."><span>Frequently Asked Questions</span></span></li>
<li><a href="../11-api/"><span>APIs</span></a></li>
</ol>
</div>
<!-- ***** body ***** -->
<div class="body">
<div class="article">
<div class="header">
<h1>Frequently Asked Questions</h1>
</div>
<dl>
<dt>Is there a VM available?</dt>
  <dd>Yes, both local and cloud VMs can be downloaded, see the ‚ÄúInstallation‚Äù guide.</dd>
</dl>
</div>
</div>
</div>
<!-- ***** footer ***** -->
<div id="footer">
<p>SeqWare ¬© 2007‚Äì2012 Brian O&#8217;Connor. SeqWare is released under the a <a rel="license" href="http://www.gnu.org/licenses/licenses.html">GNU GPL v3</a>. This site is built using the excellent <a href="http://nanoc.stoneship.org/">nanoc</a> tool and example site along with the <a href="http://www.fonts.info/info/press/free-fonts-for-font-face-embedding.htm">Graublau</a> and <a href="http://scripts.sil.org/Gentium">Gentium</a> fonts.</p>
</div>
</body>
</html>
;T;	I"nIs there a VM available?
: Yes, both local and cloud VMs can be downloaded, see the "Installation" guide.;T;
I"ä<dl>
<dt>Is there a VM available?</dt>
  <dd>Yes, both local and cloud VMs can be downloaded, see the ‚ÄúInstallation‚Äù guide.</dd>
</dl>;T;I"ç<dl>
  <dt>Is there a VM available?</dt>
  <dd>Yes, both local and cloud VMs can be downloaded, see the ‚ÄúInstallation‚Äù guide.</dd>
</dl>
;T;@Ï"/docs/6-pipeline/{;{
;I"|<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<title>SeqWare ‚Ä∫ SeqWare Pipeline</title>
<meta content="nanoc 3.4.0" name="generator">
<link href="../../assets/style-v17.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://feeds.feedburner.com/seqware" rel="alternate" title="The SeqWare Blog" type="application/atom+xml">
<script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-34523087-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script>
</head>
<body>
<div class="wrapper">
<!-- ***** navigation ***** -->
<div class="nav">
<ol>
<li><a href="../../"><span>Home</span></a></li>
<li><a href="../../blog/"><span>News</span></a></li>
<li><a href="../"><span>Documentation</span></a></li>
<li><a href="../../community/"><span>Community</span></a></li>
<li><a href="../../partners/"><span>Partners</span></a></li>
<li><a href="../../about/"><span>About</span></a></li>
</ol>
</div>
<!-- ***** sidebar ***** -->
<div class="side">
<ol>
<li><a href="../1-introduction/"><span>Introduction to SeqWare</span></a></li>
<li><a href="../2-installation/"><span>Installation</span></a></li>
<li><a href="../3-getting-started/"><span>Getting Started</span></a></li>
<li><a href="../4-metadb/"><span>SeqWare MetaDB</span></a></li>
<li><a href="../5-portal/"><span>SeqWare Portal</span></a></li>
<li>
<span class="active" title="You're here."><span>SeqWare Pipeline</span></span><ol class="toc">
<li><a href="#overview">Overview</a></li>
<li><a href="#admin-setup">Admin Setup</a></li>
<li><a href="#features">Features</a></li>
<li><a href="#workflow-manuals">Workflow Manuals</a></li>
<li><a href="#reporting-manuals">Reporting Manuals</a></li>
<li><a href="#importing-tools">Importing Tools</a></li>
<li><a href="#metadata-tools">Metadata Tools</a></li>
</ol>
</li>
<li><a href="../7-web-service/"><span>SeqWare Web Service</span></a></li>
<li><a href="../8-query-engine/"><span>SeqWare Query Engine</span></a></li>
<li><a href="../9-glossary/"><span>Glossary</span></a></li>
<li><a href="../10-faq/"><span>Frequently Asked Questions</span></a></li>
<li><a href="../11-api/"><span>APIs</span></a></li>
</ol>
</div>
<!-- ***** body ***** -->
<div class="body">
<div class="article">
<div class="header">
<h1>SeqWare Pipeline</h1>
</div>
<div class="section" id="overview">
<h2>Overview</h2>

</div>
<div class="section" id="admin-setup">
<h2>Admin Setup</h2>

</div>
<div class="section" id="features">
<h2>Features</h2>

</div>
<div class="section" id="workflow-manuals">
<h2>Workflow Manuals</h2>

<ul>
<li>
<a href="http://sourceforge.net/apps/mediawiki/seqware/index.php?title=How_to_Write_a_Bundled_Workflow">Writing Workflows</a> : A series of analysis tools and modules chained together to produce a particular result</li>
<li>
<a href="http://sourceforge.net/apps/mediawiki/seqware/index.php?title=Developing_New_SeqWare_Pipeline_Modules">Writing Modules</a> : Java wrappers around tools for use in a workflow</li>
<li>
<a href="../../manuals/command_line_tools/">Command-Line Tools</a> : Tools to create samples, experiments and studies on the command line, upload data, launch workflows, and more.</li>
<li>
<a href="http://sourceforge.net/apps/mediawiki/seqware/index.php?title=Module_Conventions">SeqWare Conventions</a>: File MIME-types, Error codes</li>
<li>
<a href="http://sourceforge.net/apps/mediawiki/seqware/index.php?title=Available_Modules">Generic Pipeline Modules</a> : Generic Modules for your workflows</li>
</ul>
</div>
<div class="section" id="reporting-manuals">
<h2>Reporting Manuals</h2>

<ul>
<li>
<a href="http://sourceforge.net/apps/mediawiki/seqware/index.php?title=SymLink_Reporter">Study Reporter</a> : Create a nested tree structure of all of the output files from a particular sample, or all of the samples in a study</li>
<li>
<a href="http://sourceforge.net/apps/mediawiki/seqware/index.php?title=Sequencer_Run_Reporter">Sequencer Run Reporter</a>: Gives you a view of all the sequencer runs/lanes/barcodes and the associated analysis processing events.</li>
<li>
<a href="http://sourceforge.net/apps/mediawiki/seqware/index.php?title=Workflow_Run_Reporter">Workflow Run Reporter</a>: Find the identity and library samples and input and output files from one or more workflow runs.</li>
</ul>
</div>
<div class="section" id="importing-tools">
<h2>Importing Tools</h2>

<ul>
<li>
<a href="http://sourceforge.net/apps/mediawiki/seqware/index.php?title=FileLinker">FileLinker</a> : Import files into the MetaDB and link them with IUS&#8217;s or lanes.</li>
</ul>
</div>
<div class="section" id="metadata-tools">
<h2>Metadata Tools</h2>

<ul>
<li>
<a href="http://sourceforge.net/apps/mediawiki/seqware/index.php?title=AttributeAnnotator">AttributeAnnotator</a> : Annotate items in the MetaDB with &#8216;skip&#8217; or key-value pairs.</li>
</ul>
</div>
</div>
</div>
</div>
<!-- ***** footer ***** -->
<div id="footer">
<p>SeqWare ¬© 2007‚Äì2012 Brian O&#8217;Connor. SeqWare is released under the a <a rel="license" href="http://www.gnu.org/licenses/licenses.html">GNU GPL v3</a>. This site is built using the excellent <a href="http://nanoc.stoneship.org/">nanoc</a> tool and example site along with the <a href="http://www.fonts.info/info/press/free-fonts-for-font-face-embedding.htm">Graublau</a> and <a href="http://scripts.sil.org/Gentium">Gentium</a> fonts.</p>
</div>
</body>
</html>
;T;	I"##Overview

##Admin Setup

##Features

##Workflow Manuals

* [Writing Workflows](http://sourceforge.net/apps/mediawiki/seqware/index.php?title=How_to_Write_a_Bundled_Workflow) : A series of analysis tools and modules chained together to produce a particular result
* [Writing Modules](http://sourceforge.net/apps/mediawiki/seqware/index.php?title=Developing_New_SeqWare_Pipeline_Modules) : Java wrappers around tools for use in a workflow
* [Command-Line Tools](/manuals/command_line_tools/) : Tools to create samples, experiments and studies on the command line, upload data, launch workflows, and more.
* [SeqWare Conventions](http://sourceforge.net/apps/mediawiki/seqware/index.php?title=Module_Conventions): File MIME-types, Error codes
* [Generic Pipeline Modules](http://sourceforge.net/apps/mediawiki/seqware/index.php?title=Available_Modules) : Generic Modules for your workflows

##Reporting Manuals

* [Study Reporter](http://sourceforge.net/apps/mediawiki/seqware/index.php?title=SymLink_Reporter) : Create a nested tree structure of all of the output files from a particular sample, or all of the samples in a study
* [Sequencer Run Reporter](http://sourceforge.net/apps/mediawiki/seqware/index.php?title=Sequencer_Run_Reporter): Gives you a view of all the sequencer runs/lanes/barcodes and the associated analysis processing events.
* [Workflow Run Reporter](http://sourceforge.net/apps/mediawiki/seqware/index.php?title=Workflow_Run_Reporter): Find the identity and library samples and input and output files from one or more workflow runs.

## Importing Tools

* [FileLinker](http://sourceforge.net/apps/mediawiki/seqware/index.php?title=FileLinker) : Import files into the MetaDB and link them with IUS's or lanes.

## Metadata Tools

* [AttributeAnnotator](http://sourceforge.net/apps/mediawiki/seqware/index.php?title=AttributeAnnotator) : Annotate items in the MetaDB with 'skip' or key-value pairs.;T;
I"›	<div class="section" id="overview">
<h2>Overview</h2>

</div><div class="section" id="admin-setup">
<h2>Admin Setup</h2>

</div><div class="section" id="features">
<h2>Features</h2>

</div><div class="section" id="workflow-manuals">
<h2>Workflow Manuals</h2>

<ul>
<li>
<a href="http://sourceforge.net/apps/mediawiki/seqware/index.php?title=How_to_Write_a_Bundled_Workflow">Writing Workflows</a> : A series of analysis tools and modules chained together to produce a particular result</li>
<li>
<a href="http://sourceforge.net/apps/mediawiki/seqware/index.php?title=Developing_New_SeqWare_Pipeline_Modules">Writing Modules</a> : Java wrappers around tools for use in a workflow</li>
<li>
<a href="/manuals/command_line_tools/">Command-Line Tools</a> : Tools to create samples, experiments and studies on the command line, upload data, launch workflows, and more.</li>
<li>
<a href="http://sourceforge.net/apps/mediawiki/seqware/index.php?title=Module_Conventions">SeqWare Conventions</a>: File MIME-types, Error codes</li>
<li>
<a href="http://sourceforge.net/apps/mediawiki/seqware/index.php?title=Available_Modules">Generic Pipeline Modules</a> : Generic Modules for your workflows</li>
</ul>
</div><div class="section" id="reporting-manuals">
<h2>Reporting Manuals</h2>

<ul>
<li>
<a href="http://sourceforge.net/apps/mediawiki/seqware/index.php?title=SymLink_Reporter">Study Reporter</a> : Create a nested tree structure of all of the output files from a particular sample, or all of the samples in a study</li>
<li>
<a href="http://sourceforge.net/apps/mediawiki/seqware/index.php?title=Sequencer_Run_Reporter">Sequencer Run Reporter</a>: Gives you a view of all the sequencer runs/lanes/barcodes and the associated analysis processing events.</li>
<li>
<a href="http://sourceforge.net/apps/mediawiki/seqware/index.php?title=Workflow_Run_Reporter">Workflow Run Reporter</a>: Find the identity and library samples and input and output files from one or more workflow runs.</li>
</ul>
</div><div class="section" id="importing-tools">
<h2>Importing Tools</h2>

<ul>
<li>
<a href="http://sourceforge.net/apps/mediawiki/seqware/index.php?title=FileLinker">FileLinker</a> : Import files into the MetaDB and link them with IUS's or lanes.</li>
</ul>
</div><div class="section" id="metadata-tools">
<h2>Metadata Tools</h2>

<ul>
<li>
<a href="http://sourceforge.net/apps/mediawiki/seqware/index.php?title=AttributeAnnotator">AttributeAnnotator</a> : Annotate items in the MetaDB with 'skip' or key-value pairs.</li>
</ul>
</div>;T;I"ì<h2>Overview</h2>

<h2>Admin Setup</h2>

<h2>Features</h2>

<h2>Workflow Manuals</h2>

<ul>
<li><a href="http://sourceforge.net/apps/mediawiki/seqware/index.php?title=How_to_Write_a_Bundled_Workflow">Writing Workflows</a> : A series of analysis tools and modules chained together to produce a particular result</li>
<li><a href="http://sourceforge.net/apps/mediawiki/seqware/index.php?title=Developing_New_SeqWare_Pipeline_Modules">Writing Modules</a> : Java wrappers around tools for use in a workflow</li>
<li><a href="/manuals/command_line_tools/">Command-Line Tools</a> : Tools to create samples, experiments and studies on the command line, upload data, launch workflows, and more.</li>
<li><a href="http://sourceforge.net/apps/mediawiki/seqware/index.php?title=Module_Conventions">SeqWare Conventions</a>: File MIME-types, Error codes</li>
<li><a href="http://sourceforge.net/apps/mediawiki/seqware/index.php?title=Available_Modules">Generic Pipeline Modules</a> : Generic Modules for your workflows</li>
</ul>


<h2>Reporting Manuals</h2>

<ul>
<li><a href="http://sourceforge.net/apps/mediawiki/seqware/index.php?title=SymLink_Reporter">Study Reporter</a> : Create a nested tree structure of all of the output files from a particular sample, or all of the samples in a study</li>
<li><a href="http://sourceforge.net/apps/mediawiki/seqware/index.php?title=Sequencer_Run_Reporter">Sequencer Run Reporter</a>: Gives you a view of all the sequencer runs/lanes/barcodes and the associated analysis processing events.</li>
<li><a href="http://sourceforge.net/apps/mediawiki/seqware/index.php?title=Workflow_Run_Reporter">Workflow Run Reporter</a>: Find the identity and library samples and input and output files from one or more workflow runs.</li>
</ul>


<h2>Importing Tools</h2>

<ul>
<li><a href="http://sourceforge.net/apps/mediawiki/seqware/index.php?title=FileLinker">FileLinker</a> : Import files into the MetaDB and link them with IUS's or lanes.</li>
</ul>


<h2>Metadata Tools</h2>

<ul>
<li><a href="http://sourceforge.net/apps/mediawiki/seqware/index.php?title=AttributeAnnotator">AttributeAnnotator</a> : Annotate items in the MetaDB with 'skip' or key-value pairs.</li>
</ul>

;T;@Û"/docs/8-query-engine/{;{
;I"∫<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<title>SeqWare ‚Ä∫ SeqWare Query Engine</title>
<meta content="nanoc 3.4.0" name="generator">
<link href="../../assets/style-v17.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://feeds.feedburner.com/seqware" rel="alternate" title="The SeqWare Blog" type="application/atom+xml">
<script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-34523087-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script>
</head>
<body>
<div class="wrapper">
<!-- ***** navigation ***** -->
<div class="nav">
<ol>
<li><a href="../../"><span>Home</span></a></li>
<li><a href="../../blog/"><span>News</span></a></li>
<li><a href="../"><span>Documentation</span></a></li>
<li><a href="../../community/"><span>Community</span></a></li>
<li><a href="../../partners/"><span>Partners</span></a></li>
<li><a href="../../about/"><span>About</span></a></li>
</ol>
</div>
<!-- ***** sidebar ***** -->
<div class="side">
<ol>
<li><a href="../1-introduction/"><span>Introduction to SeqWare</span></a></li>
<li><a href="../2-installation/"><span>Installation</span></a></li>
<li><a href="../3-getting-started/"><span>Getting Started</span></a></li>
<li><a href="../4-metadb/"><span>SeqWare MetaDB</span></a></li>
<li><a href="../5-portal/"><span>SeqWare Portal</span></a></li>
<li><a href="../6-pipeline/"><span>SeqWare Pipeline</span></a></li>
<li><a href="../7-web-service/"><span>SeqWare Web Service</span></a></li>
<li>
<span class="active" title="You're here."><span>SeqWare Query Engine</span></span><ol class="toc">
<li><a href="#overview">Overview</a></li>
<li><a href="#admin-setup">Admin Setup</a></li>
<li><a href="#features">Features</a></li>
<li><a href="#loading-data">Loading Data</a></li>
<li><a href="#querying-data">Querying Data</a></li>
<li><a href="#making-custom-plugins">Making Custom Plugins</a></li>
<li><a href="#rest-api">REST API</a></li>
<li><a href="#web-app">Web App</a></li>
</ol>
</li>
<li><a href="../9-glossary/"><span>Glossary</span></a></li>
<li><a href="../10-faq/"><span>Frequently Asked Questions</span></a></li>
<li><a href="../11-api/"><span>APIs</span></a></li>
</ol>
</div>
<!-- ***** body ***** -->
<div class="body">
<div class="article">
<div class="header">
<h1>SeqWare Query Engine</h1>
</div>
<div class="section" id="overview">
<h2>Overview</h2>

</div>
<div class="section" id="admin-setup">
<h2>Admin Setup</h2>

</div>
<div class="section" id="features">
<h2>Features</h2>

</div>
<div class="section" id="loading-data">
<h2>Loading Data</h2>

</div>
<div class="section" id="querying-data">
<h2>Querying Data</h2>

</div>
<div class="section" id="making-custom-plugins">
<h2>Making Custom Plugins</h2>

</div>
<div class="section" id="rest-api">
<h2>REST API</h2>

</div>
<div class="section" id="web-app"><h2>Web App</h2></div>
</div>
</div>
</div>
<!-- ***** footer ***** -->
<div id="footer">
<p>SeqWare ¬© 2007‚Äì2012 Brian O&#8217;Connor. SeqWare is released under the a <a rel="license" href="http://www.gnu.org/licenses/licenses.html">GNU GPL v3</a>. This site is built using the excellent <a href="http://nanoc.stoneship.org/">nanoc</a> tool and example site along with the <a href="http://www.fonts.info/info/press/free-fonts-for-font-face-embedding.htm">Graublau</a> and <a href="http://scripts.sil.org/Gentium">Gentium</a> fonts.</p>
</div>
</body>
</html>
;T;	I"~## Overview

## Admin Setup

## Features

## Loading Data

## Querying Data

## Making Custom Plugins

## REST API

## Web App;T;
I"<div class="section" id="overview">
<h2>Overview</h2>

</div><div class="section" id="admin-setup">
<h2>Admin Setup</h2>

</div><div class="section" id="features">
<h2>Features</h2>

</div><div class="section" id="loading-data">
<h2>Loading Data</h2>

</div><div class="section" id="querying-data">
<h2>Querying Data</h2>

</div><div class="section" id="making-custom-plugins">
<h2>Making Custom Plugins</h2>

</div><div class="section" id="rest-api">
<h2>REST API</h2>

</div><div class="section" id="web-app"><h2>Web App</h2></div>;T;I"Ø<h2>Overview</h2>

<h2>Admin Setup</h2>

<h2>Features</h2>

<h2>Loading Data</h2>

<h2>Querying Data</h2>

<h2>Making Custom Plugins</h2>

<h2>REST API</h2>

<h2>Web App</h2>
;T;@˙"/docs/4-metadb/{;{
;I"‹<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<title>SeqWare ‚Ä∫ SeqWare MetaDB</title>
<meta content="nanoc 3.4.0" name="generator">
<link href="../../assets/style-v17.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://feeds.feedburner.com/seqware" rel="alternate" title="The SeqWare Blog" type="application/atom+xml">
<script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-34523087-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script>
</head>
<body>
<div class="wrapper">
<!-- ***** navigation ***** -->
<div class="nav">
<ol>
<li><a href="../../"><span>Home</span></a></li>
<li><a href="../../blog/"><span>News</span></a></li>
<li><a href="../"><span>Documentation</span></a></li>
<li><a href="../../community/"><span>Community</span></a></li>
<li><a href="../../partners/"><span>Partners</span></a></li>
<li><a href="../../about/"><span>About</span></a></li>
</ol>
</div>
<!-- ***** sidebar ***** -->
<div class="side">
<ol>
<li><a href="../1-introduction/"><span>Introduction to SeqWare</span></a></li>
<li><a href="../2-installation/"><span>Installation</span></a></li>
<li><a href="../3-getting-started/"><span>Getting Started</span></a></li>
<li>
<span class="active" title="You're here."><span>SeqWare MetaDB</span></span><ol class="toc">
<li><a href="#overview">Overview</a></li>
<li><a href="#tables">Tables</a></li>
</ol>
</li>
<li><a href="../5-portal/"><span>SeqWare Portal</span></a></li>
<li><a href="../6-pipeline/"><span>SeqWare Pipeline</span></a></li>
<li><a href="../7-web-service/"><span>SeqWare Web Service</span></a></li>
<li><a href="../8-query-engine/"><span>SeqWare Query Engine</span></a></li>
<li><a href="../9-glossary/"><span>Glossary</span></a></li>
<li><a href="../10-faq/"><span>Frequently Asked Questions</span></a></li>
<li><a href="../11-api/"><span>APIs</span></a></li>
</ol>
</div>
<!-- ***** body ***** -->
<div class="body">
<div class="article">
<div class="header">
<h1>SeqWare MetaDB</h1>
</div>
<div class="section" id="overview">
<h2>Overview</h2>

</div>
<div class="section" id="tables"><h2>Tables</h2></div>
</div>
</div>
</div>
<!-- ***** footer ***** -->
<div id="footer">
<p>SeqWare ¬© 2007‚Äì2012 Brian O&#8217;Connor. SeqWare is released under the a <a rel="license" href="http://www.gnu.org/licenses/licenses.html">GNU GPL v3</a>. This site is built using the excellent <a href="http://nanoc.stoneship.org/">nanoc</a> tool and example site along with the <a href="http://www.fonts.info/info/press/free-fonts-for-font-face-embedding.htm">Graublau</a> and <a href="http://scripts.sil.org/Gentium">Gentium</a> fonts.</p>
</div>
</body>
</html>
;T;	I"## Overview

## Tables;T;
I"x<div class="section" id="overview">
<h2>Overview</h2>

</div><div class="section" id="tables"><h2>Tables</h2></div>;T;I"(<h2>Overview</h2>

<h2>Tables</h2>
;T;@")/static/assets/images/vm_screen.png/{;{ "//static/assets/images/amazon_launcher.png/{;{ "+/docs/3-getting-started/user-tutorial/{;{
;I"@â<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<title>SeqWare ‚Ä∫ User Tutorial</title>
<meta content="nanoc 3.4.0" name="generator">
<link href="../../../assets/style-v17.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://feeds.feedburner.com/seqware" rel="alternate" title="The SeqWare Blog" type="application/atom+xml">
<script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-34523087-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script>
</head>
<body>
<div class="wrapper">
<!-- ***** navigation ***** -->
<div class="nav">
<ol>
<li><a href="../../../"><span>Home</span></a></li>
<li><a href="../../../blog/"><span>News</span></a></li>
<li><a href="../../"><span>Documentation</span></a></li>
<li><a href="../../../community/"><span>Community</span></a></li>
<li><a href="../../../partners/"><span>Partners</span></a></li>
<li><a href="../../../about/"><span>About</span></a></li>
</ol>
</div>
<!-- ***** sidebar ***** -->
<div class="side">
<ol>
<li><a href="../../1-introduction/"><span>Introduction to SeqWare</span></a></li>
<li><a href="../../2-installation/"><span>Installation</span></a></li>
<li>
<a href="../"><span>Getting Started</span></a><ol class="toc">
<li><a href="#by-the-end-of-this-tutorial">By the End of This Tutorial</a></li>
<li><a href="#the-example">The Example</a></li>
<li><a href="#first-steps">First Steps</a></li>
<li><a href="#the-seqware-command-line-tool">The SeqWare Command Line Tool</a></li>
<li><a href="#the-seqware-settings-file">The SeqWare Settings File</a></li>
<li><a href="#creating-studies-experiments-and-samples">Creating Studies, Experiments, and Samples</a></li>
<li><a href="#uploading-files-and-associating-with-a-sample">Uploading Files and Associating with a Sample</a></li>
<li><a href="#listing-available-workflows-and-their-parameters">Listing Available Workflows and Their Parameters</a></li>
</ol>
</li>
<li><a href="../../4-metadb/"><span>SeqWare MetaDB</span></a></li>
<li><a href="../../5-portal/"><span>SeqWare Portal</span></a></li>
<li><a href="../../6-pipeline/"><span>SeqWare Pipeline</span></a></li>
<li><a href="../../7-web-service/"><span>SeqWare Web Service</span></a></li>
<li><a href="../../8-query-engine/"><span>SeqWare Query Engine</span></a></li>
<li><a href="../../9-glossary/"><span>Glossary</span></a></li>
<li><a href="../../10-faq/"><span>Frequently Asked Questions</span></a></li>
<li><a href="../../11-api/"><span>APIs</span></a></li>
</ol>
</div>
<!-- ***** body ***** -->
<div class="body">
<div class="article">
<div class="header">
<h1>User Tutorial</h1>
</div>
<p>The majority of this guide is dedicated to walking users and developers through the basics of using SeqWare. We assume that people are most interested in the Pipeline sub-project and focus most of our time on that.  The examples below will all be based on a local VM but the environment on our cloud instance is almost identical, so most of the examples below will be applicable to either VM type. In the future we will probably have a separate user guide that focuses on the differences of running on Amazon‚Äôs cloud.</p>

<div class="section" id="by-the-end-of-this-tutorial">
<h2>By the End of This Tutorial</h2>

<p>This guide will show you how to use command line tools from Pipeline to access the MetaDB. This will allow you to do the following tasks using tools that can be scripted versus our Portal web-based interface that requires a user to click on an interface (we will show examples of the latter along the way too). By the end of these tutorials you will be able to:</p>

<ul>
<li>use both command line and web-based tools from Pipeline and Portal respectively</li>
  <li>create studies, experiments, and samples in the MetaDB</li>
  <li>upload data such as fastq files to the VM and associate that data with particular samples in the MetaDB</li>
  <li>find the list of available workflows and the parameters they accept using Pipeline</li>
  <li>schedule a HelloWorld workflow and monitor its progress using Pipeline</li>
  <li>generate a report on the outputs of your workflows in Pipeline and Portal</li>
  <li>download files produced by a workflow using Pipeline tools</li>
</ul>
<p>The command line tools are all Java tools from SeqWare Pipeline that wrap our RESTful SeqWare Web Service. If you would like to learn more about the low-level API (perhaps you want to call it directly in a program or script) you can find more information in the <a href="../../7-web-service/">SeqWare Web Service</a> documentation.</p>

</div>
<div class="section" id="the-example">
<h2>The Example</h2>

<p>In this tutorial we will use a simple HelloWorld workflow that takes a text file as input and creates another file as output. The same examples could be applied to any workflows and input data types.  How to build your own workflows (<strong>the central purpose of SeqWare</strong>) is covered in the <a href="../developer-tutorial/">Developer Tutorial</a>.</p>

</div>
<div class="section" id="first-steps">
<h2>First Steps</h2>

<p>Please launch your local VM in VirtualBox and login as user <kbd>seqware</kbd>, password <kbd>seqware</kbd> at this time. Click on the ‚ÄúSeqWare Directory‚Äù link on the desktop which will open a terminal to the location where we installed the SeqWare tools.</p>

</div>
<div class="section" id="the-seqware-command-line-tool">
<h2>The SeqWare Command Line Tool</h2>

<p>SeqWare is open source architecture built mostly in Java. In the <kbd>/home/seqware/SeqWare</kbd> directory you will see a jar file. This contains SeqWare Pipeline code that will allow you to interact with the SeqWare Web service (actually either on a VM, installed on another local machine/cluster, or in the cloud) that controls, among other things, workflow execution. This jar is, essentially, the command line interface for the whole SeqWare project.</p>

<p class="warning"><strong>Tip:</strong> The VM will contain a recent version of the jar that we have validated with this tutorial.  You may want to upgrade to the latest version, though, which you can download from our continuous build server. Please choose the jar that has the -full suffix, e.g. <a href="http://jenkins.res.oicr.on.ca/job/seqware/lastStableBuild/net.sourceforge.seqware%24seqware-distribution/">seqware-distribution-0.12.5-SNAPSHOT-full.jar</a>. Keep in mind we make no promises that the latest version will be bug free!</p>

</div>
<div class="section" id="the-seqware-settings-file">
<h2>The SeqWare Settings File</h2>

<p>The SeqWare jar file uses a simple configuration file that has been setup for you already on the VM. By default the location is ~/.seqware/settings.</p>

<p>This file contains the web address of the RESTful web service, your username and password, and you Amazon public and private keys that will allow you to push and pull data files to and from the cloud, etc.  Here is the example settings file from the VM, this will be ready to work on the VM but keep in mind, this is where you would change settings if you, for example, setup the Web Service and MetaDB on another server or you launched a VM on the cloud and wanted to use the local VM command line jar to control the remote server.  Another common thing you may want to do is use the ProvisionFiles module (described later) to push and pull data into/out of the cloud. This is the file where you would supply your access and secret keys that you got when signing up for Amazon (keep those safe!):</p>

<pre>
#
# SEQWARE PIPELINE SETTINGS
#
# the name of the cluster as defined in the Pegasus sites.xml config file
SW_CLUSTER=seqwarevm
# the directory used to store the generated DAX workflow documents before submission to the cluster
SW_DAX_DIR=/home/seqware/SeqWare/pegasus-dax
# the directory containing all the Pegasus config files this instance of SeqWare should use
SW_PEGASUS_CONFIG_DIR=/home/seqware/.seqware/pegasus
# SeqWare MetaDB communication method, can be "database" or "webservice" or "none"
SW_METADATA_METHOD=webservice
# a directory to copy bundles to for archiving/installing
SW_BUNDLE_DIR=/home/seqware/SeqWare/provisioned-bundles
# the central repository for installed bundles
SW_BUNDLE_REPO_DIR=/home/seqware/SeqWare/released-bundles
#
# SEQWARE WEBSERVICE SETTINGS
#
# the base URL for the RESTful SeqWare API
SW_REST_URL=http://localhost:8080/SeqWareWebService
# the username and password to connect to the REST API, this is used by SeqWare Pipeline to write back processing info to the DB
SW_REST_USER=admin@admin.com
SW_REST_PASS=admin

# SEQWARE TESTING SETTINGS
#
SW_DB_USER=seqware
SW_DB_PASS=seqware
SW_DB_SERVER=localhost
SW_DB=test_seqware_meta_db

#
# AMAZON CLOUD SETTINGS
#
# used by tools reading and writing to S3 buckets (dependency data/software bundles, inputs, outputs, etc)
# most likely not used here at OICR
AWS_ACCESS_KEY=lksjdflksjdklf
AWS_SECRET_KEY=slkdjfeoiksdlkjflksjejlfkjeloijxelkj
</pre>

</div>
<div class="section" id="creating-studies-experiments-and-samples">
<h2>Creating Studies, Experiments, and Samples</h2>

<p>SeqWare MetaDB lets you track studies, experiment, and samples and then link those to files (like FASTQ or something similar). You can then run workflows on those files, track the resulting files, and use those files for the next workflow.  You will want to set up your study, experiments, and samples before uploading your text or other data files.  This ensures you have ‚Äúparents‚Äù to attach these files to.  Otherwise you will not be able to use them as parameters for workflows. </p>

<p>You can do this either with the <a href="http://SeqWarePortal" title="SeqWare Portal">Portal</a> or via the command line tools below.</p>

<div class="section" id="via-the-portal">
<h3>Via the Portal</h3>

<p>First, login to the portal, the URL is http://localhost:8080/SeqWarePortal and you will need to use the browser inside the VM to access this. The default username is <kbd>admin@admin.com&lt;/kdb&gt; and the default password is <kbd>admin&lt;/kdb&gt;.  Feel free to change your password in the web app.</kbd></kbd></p>

<p class="warning"><strong>Tip:</strong>You could setup the VM so it gets a &#8220;real&#8221; IP address on your network, in which case you could access both the Portal and Web Service via any computer on your network.</p>

<p>In the following screenshots you see the process that allows you to create these entities through the web application.
When you first login you will see your studies (of which you have none).  First, create a study which can be though of as a project that can have many distinct experimental designs:</p>

<p><img src="../../../assets/images/create_study.png" width="600px"></p>

<p>You will then see your new study which includes a link to add an experiment. An experiment encapsulates a particular experimental design, for example 2x50 sequencing on the Illumina platform.  If you then did another experiment with a 2x250 read structure on the same platform that would be considered a novel experimental design.</p>

<p><img src="../../../assets/images/create_experiment.png" width="600px"></p>

<p>Once you click on the ‚Äúadd experiment‚Äù link you will then be able to define the NGS platform used and the nature of the experimental design. Of note is the ‚ÄúSpot Decoding String‚Äù which allows you to document the structure of the reads.</p>

<p>The next step is to create one or more samples and associate them with this new experiment.  Under the experiment you just added you will see a link for ‚Äúadd sample‚Äù, click it and populate the sample information.</p>

<p>At this point you will see your complete study/experiment/sample hierarchy in the ‚ÄúMy Studies‚Äù section.</p>

<p><img src="../../../assets/images/my_studies.png" width="600px"></p>

<p class="warning"><strong>Tip:</strong> Notice the &#8220;SWID: 14&#8221; next to &#8220;My Test Study&#8221;. The other items in the hierarchy have an SWID as well.  This is common for every item in the MetaDB, everything has a SWID aka accession.  When you use command line tools they will often take a &#8220;parent accession&#8221; to attach output to and this is referring to what you see as SWID in the Portal.</p>

<p class="warning"><strong>Tip:</strong> You can also track sequencer runs and associate samples with the particular &#8220;lanes&#8221; on the flowcell (or equivalent on the particular sequencing platform).  This is not covered here but will be in the SeqWare Portal guide.  Suffice it to say, this lets you use Portal as a light-weight LIMS system for tracking both studies/experiments/sample and sequencer runs/lanes and how they relate to each other.</p>

</div>
<div class="section" id="via-command-line-tools">
<h3>Via Command Line Tools</h3>

<p>There are also command line tools for creating study, experiment, and samples.  The functionality for each of these is fairly limited.  For example, the rich descriptive ‚ÄúSpot Decoding String‚Äù language for describing how a read is structured is not yet fully supported and updates to existing entities are not yet possible.  However the basic functionality to create studies, experiments, and samples now exists in a scriptable form and that is really the point.  By providing command line tools you can automate the setup of this information using simple Bash shell scripts or the language of your choice.</p>

<p>First, you can find out what tables this tool is capable of writing to:</p>

<pre><code>java -jar seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.Metadata -- --list-tables

TableName
study
experiment
sample
</code></pre>

<p>Now, for a given table, you can find out what fields you can write back to and their type:</p>

<pre><code>java -jar seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.Metadata -- --table study --list-fields

Field    Type    Possible_Values
title    String
description    String
accession    String
center_name    String
center_project_name    String
study_type    Integer    [1: Whole Genome Sequencing, 2: Metagenomics, 3: Transcriptome Analysis, 4: Resequencing, 5: Epigenetics, 6: Synthetic Genomics, 7: Forensic or Paleo-genomics, 8: Gene Regulation Study, 9: Cancer Genomics, 10: Population Genomics, 11: Other]
</code></pre>

<p>So using the information above you can create a new study:</p>

<pre><code>java -jar seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.Metadata -- --table study --create --field 'title::New Test Study' --field 'description::This is a test description' --field 'accession::InternalID123' --field 'center_name::SeqWare' --field 'center_project_name::SeqWare Test Project' --field study_type::4

SWID: 29830
</code></pre>

<p>The output of this command above includes the line ‚ÄúSWID: 29830‚Äù (or whatever number is appropriate for your database).  This is very important since this number is a unique identifier across the database and used to link together entities.  For example, you will use the number produced by the study add command as the parent for the experiment you create below.  If you do not track and supply these numbers then the hierarchy of study/experiment/sample cannot be created.</p>

<p>The next step is to create an experiment and link it to the study you created above. You can find the platform ID using the ‚Äìlist-fields option shown above:</p>

<pre><code>java -jar seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.Metadata -- --table experiment --create --field 'title::New Test Experiment' --field 'description::This is a test description' --field study_accession::29830 --field platform_id::26

SWID: 29831
</code></pre>

<p>Again, you use the SWID from the above output in the next step to create an associated sample. You can find the platform ID using the ‚Äìlist-fields option shown above:</p>

<pre><code>java -jar seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.Metadata -- --table sample --create --field 'title::New Test Sample' --field 'description::This is a test description' --field experiment_accession::29831 --field organism_id::26

SWID: 29832
</code></pre>

<p>At this point you should have a nice study/experiment/sample hierarchy.  You can, of course, add multiple samples per experiment and multiple experiments per study.  For each of the samples you can now upload one or more files.  You will need the SWID from the sample creation above for this step (or visible in the Portal).  Here is a screenshot of what the above commands produce in the Portal (note, the SWIDs do not match but these are just examples):</p>

<p><img src="../../../assets/images/final_exp.png" width="600px"></p>

</div>
</div>
<div class="section" id="uploading-files-and-associating-with-a-sample">
<h2>Uploading Files and Associating with a Sample</h2>

<p>The first step in uploading a file and associating with a sample is to
identify the sample‚Äôs SWID. The easiest way to do this is to use the Portal web
application to navigate through the Study/Experiment/Sample tree to the sample
you want to upload text for and to note its associated SWID.  You then need to
know the destination location to put your file in.  For the local VM this is either a directory (which defaults to <kbd>/datastore</kbd>) or a shared filesystem over NFS if you have connected your VM instance to shared storage and a cluster. The important thing is this directory is shared across your VM and any other cluster nodes it connects to if any.  The default <kbd>/datastore</kbd> will work fine here.  For Amazon‚Äôs cloud this shared location is their S3 service which allows you to store arbitrary files in ‚Äúbuckets‚Äù.  You will see in the SeqWare Pipeline section of this manual how to work with files on S3.</p>

<p>Once you have these two
pieces of information (destination path ‚Äú/datastore/‚Äù and the SWID) you can then use either the Portal or the ProvisionFiles command line utility to put your
files into the right place and associate them with the correct sample.</p>

<div class="section" id="via-the-portal">
<h3>Via the Portal</h3>

<p>First, create your text document that you want to associate with a sample (we are using a text document here since the sample HelloWorld workflow takes this as an input but typically you would upload Fastq files for a sample).  I created a document called <kbd>simple.txt</kbd> that just has some random text in it.</p>

<p>Now, navigate to ‚ÄúMy Studies‚Äù, pick a sample, and then click ‚Äúupload file‚Äù.  You can then either give the complete path to the text file (‚Äúenter the file URL into the database‚Äù or you can use the ‚ÄúFile to upload‚Äù browser to upload the simple.txt file. The third option (using a dedicated transfer tool) requires admin configuration and only works on the cloud so we will skip it here. Click upload when you are done.</p>

<p>If possible you should enter a path or URL (http://server/file/path or s3://<bucket>/file/path) since this will not result in duplicate data or long uploads. If you do this then the file path should be accessible to whatever computer the workflow jobs run on (either a shared filesystem or S3). If you choose to upload it might fail for large files and it will also cause a duplicate file to live in <kbd>/datastore/uploads</kbd>.  In these examples we will just provide a URL.</bucket></p>

<p><img src="../../../assets/images/upload.png" width="600px"></p>

<p>You can verify the upload has been successful by browsing ‚ÄúMy Studies‚Äù section. You should be able to re-download the file, if so it was put in a location visible to the web server.</p>

</div>
<div class="section" id="via-command-line-tools">
<h3>Via Command Line Tools</h3>

<p>The same process of uploading data described above can also be used on the command line. Here is an example of calling the ProvisionFiles command line utility:</p>

<pre><code>java -jar seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.ModuleRunner -- --module net.sourceforge.seqware.pipeline.modules.utilities.ProvisionFiles --metadata-output-file-prefix /datastore/ --metadata-parent-accession 29832 --metadata-processing-accession-file simple.txt -- -im text::text/plain::simple.txt -o /datastore/ --force-copy
</code></pre>

<p>In this example it will copy the simple.txt text files to /datastore/ directory and
will link them to the sample identified by 29832 (the sample‚Äôs SWID).  So the
final output file is ‚Äú/datastore/simple.txt‚Äù in the database. If you left off
‚Äìforce-copy you would get a symlink in this case since it is a local file
operation. Use the portal to find out the SWID for an existing sample or get
the SWID using the command line tool when you create a new study. Providing
that here will cause the text to be associated with that parent sample.</p>

<p class="warning"><strong>Tip:</strong> you can find a list of the meta types (like chemical/seq-na-text-gzip or text/plain above) at <a href="http://sourceforge.net/apps/mediawiki/seqware/index.php?title=Module_Conventions#Module_MIME_Types">Module Conventions - Module MIME Types</a>. This is the list we add to as needed when creating new workflows.  It is extremely important to be consistent with these since a workflow will not recognize your input unless the meta type string matches what it expects exactly.</p>

<div class="section" id="associating-existing-files-with-a-sample">
<h4>Associating Existing Files with a Sample</h4>

<p>The best way to get data into the cloud is to use the ProvisionFiles utility above since it both uploads the data (using multiple threads to maximize performance) and also saves the metadata back to the database.  However, sometimes you have already uploaded data or, as is the case for the local VM, it is a single filesystem so there is no reason to make copies of the data (same would be true if /home/seqware/ was on an NFS share).  In this case you just want to link the files to particular samples in the database.  GenericMetadataSaver is the tool you can use to accomplish this, for example:</p>

<pre><code>java -jar seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.ModuleRunner -- --module net.sourceforge.seqware.pipeline.modules.GenericMetadataSaver --metadata-parent-accession 25192 -- --gms-output-file text::text/plain::/home/seqware/SeqWare/simple.txt --gms-algorithm UploadText --gms-suppress-output-file-check
</code></pre>

<p>Here files are associated with the parent (SWID: 25192 which is a sample). One word of caution, if you expect people to download your files through the Portal then the paths you inject into the database must start with /datastore/ or wherever Tomcat (the web server) expects to find uploaded files.  For the VM, this is /datastore/. See the section on SeqWare Portal for more information on configuring Tomcat.</p>

</div>
</div>
</div>
<div class="section" id="listing-available-workflows-and-their-parameters">
<h2>Listing Available Workflows and Their Parameters</h2>

<p>Once you have uploaded data the next step is to find the available workflows and their parameters.  To see the list of available workflows you can execute the following command:</p>

<pre><code>java -jar seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.BundleManager -- --list-install
</code></pre>

<p>You will get a tab-delimited list of workflows showing their name, version, and (most importantly) their SWID.  </p>

<p class="warning"><strong>Tip:</strong> it may be easier for you to read the output by cutting and pasting into a spreadsheet.</p>

<p>In this example we are going to use the latest (at the time of this writing) HelloWorld workflow bundle (SWID 7 below).  The output of the above command includes the line:</p>

<p>HelloWorldWorkflow      1.0     Wed Aug 15 19:00:11 EDT 2012    7       /home/seqware/SeqWare/released-bundles/Workflow_Bundle_HelloWorldWorkflow<em>1.0_SeqWare</em>0.12.5.zip</p>

<p>The fourth column includes the SWID for this workflow that you will use in the next command to find all the parameters (and their defaults) that this workflow takes.  Here is the command, notice I redirect the output to create a basic ini file that can later be customized and used to submit a run of this workflow:</p>

<pre><code>java -jar seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.BundleManager -- --list-workflow-params --workflow-accession 7 &gt; workflow.ini
</code></pre>

<p>In this example the workflow ‚ÄúHelloWorldWorkflow‚Äù version 1.0 (SWID 7) parameters are listed.  The output conforms to the input you can use to parametrize and launch workflows.  For example:</p>

<pre>
#key=input_file:type=file:display=F:display_name=input_file:file_meta_type=text/plain
input_file=${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/data/input.txt
#key=output_dir:type=text:display=F:display_name=output_dir
output_dir=seqware-results
#key=output_prefix:type=text:display=F:display_name=output_prefix
output_prefix=/datastore/
</pre>

<p class="warning"><strong>Note:</strong> the lines above have been wrapped but you should not include line breaks in your file.  Instead, make sure the file that you create using this tool (and customize for later launching a workflow) includes comment lines starting with ‚Äú#‚Äù and the key=value lines only.  In the command above the redirect to the file workflow.ini will include some extra lines of status output.  Make sure you remove these before continuing to launch the workflow with this ini file.  You can customize any values from the key/value pairs that you need to.  For example, the most frequent parameters you will customize are input files.  In the workflow example above you will want to customize input_file.  For example, if you wanted to process the file you uploaded you would customize the line as:

	input_file=/datastore/simple.txt

Since this is a low-level tool you may see many more parameters exposed with this tool than you would using the web Portal application.  Please use caution when customizing these values since some refer to items that affect the underlying infrastructure.

</p>
<p class="warning"><strong>Tip:</strong> when you customize key-values in the ini file prepared above you do not need to include key-values that you leave unchanged.  If you do not include these the workflow will run with those values by default anyway.  Removing unchanged key-values will greatly reduce the size of your ini files making it much easier to see the key-values you are interested in.


## Triggering a Workflow and Monitoring Progress 

At this point you know what workflow you are going to run and you have a customized ini file that contains, for example, the input files. The next step is to trigger the workflow using the ini file you prepared. Make sure you use the correct workflow accession and parent accession. Use the parent accession of the &#8220;Analysis Event&#8221; that the file is attached to not the file itself.

	java -jar seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.WorkflowLauncher &#8211; &#8211;ini-files workflow.ini &#8211;workflow-accession 7 &#8211;schedule &#8211;parent-accessions 24

</p>
<p class="warning"><strong>Tip:</strong> the parent-accessions is the SWID of the ProvisionFiles element that was added under the sample when use used this tool to upload the text files in the example above.  You MUST specify this otherwise the workflow‚Äôs results will not be linked to anything (they will be orphaned and will not be visible in the Portal or present in the reports below). Conveniently the ProvisionFiles tool will write these accessions to a file and the portal displays these values.</p>

This schedules the workflow to run on the VM. Notice it also prints the workflow run accession which you can use to help monitor the workflow.

Once submitted, you can use the Portal to list the number of submitted, running, and failed workflows.  Log into the Portal and click on the ‚ÄúShow Analysis‚Äù link under the Analysis panel.  You can then click on the tab for ‚ÄúRunning Analysis‚Äù to see what is submitted/running/failed.

<img src="../../../assets/images/running.png" width="600px">

A better way of monitoring workflows (and getting a list of the outputs) is to use the WorkflowRunReporter plugin. This will let you script the monitoring of workflow runs.

<pre>java -jar ~/seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.WorkflowRunReporter -- -wa 7</pre>

In this example all the status information for workflows with workflow accession 7 are printed out to a file in the local file system.  This includes several columns of interest including the status of the workflow, the output file types, and their locations in S3 or the file system. You can use this information to automate the checking of workflows and the retrieval of the results!

In the output from the above command you will see accessions for each workflow run. If the status is ‚Äúfailed‚Äù you can use resources directly on the Web Service to see what went wrong by returning the stderr and stdout from the workflow. This is how you might do that for a workflow_run with an accession of 6774:

<pre>
	GET -C admin@admin.com:admin http://localhost:8080/SeqWareWebService/reports/workflowruns/6774/stderr
</pre>

Keep in mind two things: 

1. this is a non-standard URL since this feature is in testing
1. this direct GET request will be replaced with a command-line tool in the near future.

## Downloading Workflow Results

Once a workflow has finished running you will want to list out the associated files and download the results.  While you can use the Portal for downloading files the best way to get files in bulk is to use our reporting tool. This produces a tab-delimited file that lists all the files produced for the workflows you are interested in.  You can then use the same ProvisionFiles utility above to pull files back.  Since the report produces a simple tab-delimited file you can easily automate the downloading of results by looping over the output files and calling ProvisionFiles using a script.

<pre>
	java -jar seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.SymLinkFileReporter -- --no-links --output-filename study_report --workflow-accession 7 --study Test
</pre>

The output here is a study_report.csv file that contains a line for each file (both those uploaded and those produced by workflows).  You can also filter by file types, for example if you want to see report bundles (not applicable to the HelloWorld workflow but you get the idea):

<pre>
	java -jar seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.SymLinkFileReporter -- --no-links --output-filename study_report --workflow-accession 13224 --study 20120403_SEQ1 --file-type application/zip-report-bundle
</pre>

Or an example filtering by sample (again, not directly applicable to the HelloWorld output):

<pre>
	java -jar seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.SymLinkFileReporter -- --no-links --output-filename study_report --workflow-accession 13224  --sample 20120403_SEQ1_GAG
</pre>

You can use these URLs (such as s3://bucket/samplename/test_R1.text.gz) with ProvisionFiles to download results (if they were remote, in the local VM they are just local files).  Here‚Äôs an example downloading a report bundle:

<pre>
	java -jar seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.ModuleRunner -- --module net.sourceforge.seqware.pipeline.modules.utilities.ProvisionFiles --no-metadata -- -i s3://bucket/results/seqware-0.10.0_ComprehensiveExomeGenomeAnalysis-0.10.5/59491657/GAG.fa.variant_quality.gatk.hg19.report.zip -o ./
</pre>

Here the zip report bundle is downloaded to the current working directory on the computer you are working on.  In this way you can pull back the results of workflows entirely through scripts that wrap the SymLinkFileReporter and ProvisionFiles.

Also note the SymLinkFileReporter gives you SWIDs for processing events and entities such as studies, samples, and experiments.  You can use this tool to find these SWIDs that are used as ‚Äúparents‚Äù for workflow runs.

In addition to the command line tools, you can also use the Portal to explore the output of workflows triggered through the command line tools.

You can find more information on this report tool on the public SeqWare wiki: [Study Reporter](http://sourceforge.net/apps/mediawiki/seqware/index.php?title=SymLink_Reporter).

<p class="warning"><strong>Note:</strong> in the example above I use &#8211;no-metadata with ProvisionFiles. This is to prevent the tool from writing back an event to the central database. Since you are just downloading a file (versus uploading a file) you do not really want to record that download event in the database.
</p>

## Next Steps

See the [Developer&#8217;s Guide](/docs/3-getting-started/developer-tutorial/) for how to create a new workflow.


## To Do

Here are the items we are currently working on to improve the command line tools. The goal is to make the command line tools a fully functional replacement for the Portal. This will allow users to increase the throughput of file upload and workflow triggering through the system since the tools can be easily scripted.

* command line tools to list, search, and update Study, Sample, and Experiments without having to use the Portal
* displaying SWID on every entity in the Portal (making it easier to ‚Äúattach‚Äù items such as Fastq files to items you see in the Portal) &#8211; done
* command line tool for listing and monitoring active workflows &#8211; partially done
* command line tool  for listing the parameters (ini_file field) that were used for a given workflow run (and maybe the full DAX too)

We also want to make sure the Portal is fully usable.  Future versions of this document will show:

* workflow launching via Portal too

We also will probably create a second version of this document that is tailored for running a VM on Amazon&#8217;s cloud versus the local VM. This process is almost identical but the cloud has another option for storing files.
</div>
</div>
</div>
</div>
<!-- ***** footer ***** -->
<div id="footer">
<p>SeqWare ¬© 2007‚Äì2012 Brian O&#8217;Connor. SeqWare is released under the a <a rel="license" href="http://www.gnu.org/licenses/licenses.html">GNU GPL v3</a>. This site is built using the excellent <a href="http://nanoc.stoneship.org/">nanoc</a> tool and example site along with the <a href="http://www.fonts.info/info/press/free-fonts-for-font-face-embedding.htm">Graublau</a> and <a href="http://scripts.sil.org/Gentium">Gentium</a> fonts.</p>
</div>
</body>
</html>
;T;	I"çtThe majority of this guide is dedicated to walking users and developers through the basics of using SeqWare. We assume that people are most interested in the Pipeline sub-project and focus most of our time on that.  The examples below will all be based on a local VM but the environment on our cloud instance is almost identical, so most of the examples below will be applicable to either VM type. In the future we will probably have a separate user guide that focuses on the differences of running on Amazon's cloud.

## By the End of This Tutorial

This guide will show you how to use command line tools from Pipeline to access the MetaDB. This will allow you to do the following tasks using tools that can be scripted versus our Portal web-based interface that requires a user to click on an interface (we will show examples of the latter along the way too). By the end of these tutorials you will be able to:

* use both command line and web-based tools from Pipeline and Portal respectively
* create studies, experiments, and samples in the MetaDB
* upload data such as fastq files to the VM and associate that data with particular samples in the MetaDB
* find the list of available workflows and the parameters they accept using Pipeline
* schedule a HelloWorld workflow and monitor its progress using Pipeline
* generate a report on the outputs of your workflows in Pipeline and Portal
* download files produced by a workflow using Pipeline tools

The command line tools are all Java tools from SeqWare Pipeline that wrap our RESTful SeqWare Web Service. If you would like to learn more about the low-level API (perhaps you want to call it directly in a program or script) you can find more information in the [SeqWare Web Service](/docs/7-web-service/) documentation.

## The Example

In this tutorial we will use a simple HelloWorld workflow that takes a text file as input and creates another file as output. The same examples could be applied to any workflows and input data types.  How to build your own workflows (**the central purpose of SeqWare**) is covered in the [Developer Tutorial](/docs/3-getting-started/developer-tutorial/).

## First Steps

Please launch your local VM in VirtualBox and login as user <kbd>seqware</kbd>, password <kbd>seqware</kbd> at this time. Click on the "SeqWare Directory" link on the desktop which will open a terminal to the location where we installed the SeqWare tools.

## The SeqWare Command Line Tool

SeqWare is open source architecture built mostly in Java. In the <kbd>/home/seqware/SeqWare</kbd> directory you will see a jar file. This contains SeqWare Pipeline code that will allow you to interact with the SeqWare Web service (actually either on a VM, installed on another local machine/cluster, or in the cloud) that controls, among other things, workflow execution. This jar is, essentially, the command line interface for the whole SeqWare project.

<p class="warning"><strong>Tip:</strong> The VM will contain a recent version of the jar that we have validated with this tutorial.  You may want to upgrade to the latest version, though, which you can download from our continuous build server. Please choose the jar that has the -full suffix, e.g. <a href="http://jenkins.res.oicr.on.ca/job/seqware/lastStableBuild/net.sourceforge.seqware$seqware-distribution/">seqware-distribution-0.12.5-SNAPSHOT-full.jar</a>. Keep in mind we make no promises that the latest version will be bug free!</p>

## The SeqWare Settings File

The SeqWare jar file uses a simple configuration file that has been setup for you already on the VM. By default the location is ~/.seqware/settings.

This file contains the web address of the RESTful web service, your username and password, and you Amazon public and private keys that will allow you to push and pull data files to and from the cloud, etc.  Here is the example settings file from the VM, this will be ready to work on the VM but keep in mind, this is where you would change settings if you, for example, setup the Web Service and MetaDB on another server or you launched a VM on the cloud and wanted to use the local VM command line jar to control the remote server.  Another common thing you may want to do is use the ProvisionFiles module (described later) to push and pull data into/out of the cloud. This is the file where you would supply your access and secret keys that you got when signing up for Amazon (keep those safe!):

<pre>
#
# SEQWARE PIPELINE SETTINGS
#
# the name of the cluster as defined in the Pegasus sites.xml config file
SW_CLUSTER=seqwarevm
# the directory used to store the generated DAX workflow documents before submission to the cluster
SW_DAX_DIR=/home/seqware/SeqWare/pegasus-dax
# the directory containing all the Pegasus config files this instance of SeqWare should use
SW_PEGASUS_CONFIG_DIR=/home/seqware/.seqware/pegasus
# SeqWare MetaDB communication method, can be "database" or "webservice" or "none"
SW_METADATA_METHOD=webservice
# a directory to copy bundles to for archiving/installing
SW_BUNDLE_DIR=/home/seqware/SeqWare/provisioned-bundles
# the central repository for installed bundles
SW_BUNDLE_REPO_DIR=/home/seqware/SeqWare/released-bundles
#
# SEQWARE WEBSERVICE SETTINGS
#
# the base URL for the RESTful SeqWare API
SW_REST_URL=http://localhost:8080/SeqWareWebService
# the username and password to connect to the REST API, this is used by SeqWare Pipeline to write back processing info to the DB
SW_REST_USER=admin@admin.com
SW_REST_PASS=admin

# SEQWARE TESTING SETTINGS
#
SW_DB_USER=seqware
SW_DB_PASS=seqware
SW_DB_SERVER=localhost
SW_DB=test_seqware_meta_db

#
# AMAZON CLOUD SETTINGS
#
# used by tools reading and writing to S3 buckets (dependency data/software bundles, inputs, outputs, etc)
# most likely not used here at OICR
AWS_ACCESS_KEY=lksjdflksjdklf
AWS_SECRET_KEY=slkdjfeoiksdlkjflksjejlfkjeloijxelkj
</pre>

## Creating Studies, Experiments, and Samples

SeqWare MetaDB lets you track studies, experiment, and samples and then link those to files (like FASTQ or something similar). You can then run workflows on those files, track the resulting files, and use those files for the next workflow.  You will want to set up your study, experiments, and samples before uploading your text or other data files.  This ensures you have ‚Äúparents‚Äù to attach these files to.  Otherwise you will not be able to use them as parameters for workflows. 

You can do this either with the [Portal](http://SeqWarePortal "SeqWare Portal") or via the command line tools below.

### Via the Portal

First, login to the portal, the URL is http://localhost:8080/SeqWarePortal and you will need to use the browser inside the VM to access this. The default username is <kbd>admin@admin.com</kdb> and the default password is <kbd>admin</kdb>.  Feel free to change your password in the web app.

<p class="warning"><strong>Tip:</strong>You could setup the VM so it gets a "real" IP address on your network, in which case you could access both the Portal and Web Service via any computer on your network.</p>

In the following screenshots you see the process that allows you to create these entities through the web application.
When you first login you will see your studies (of which you have none).  First, create a study which can be though of as a project that can have many distinct experimental designs:

<img src="/assets/images/create_study.png" width="600px"/>

You will then see your new study which includes a link to add an experiment. An experiment encapsulates a particular experimental design, for example 2x50 sequencing on the Illumina platform.  If you then did another experiment with a 2x250 read structure on the same platform that would be considered a novel experimental design.

<img src="/assets/images/create_experiment.png" width="600px"/>

Once you click on the "add experiment" link you will then be able to define the NGS platform used and the nature of the experimental design. Of note is the "Spot Decoding String" which allows you to document the structure of the reads.

The next step is to create one or more samples and associate them with this new experiment.  Under the experiment you just added you will see a link for "add sample", click it and populate the sample information.

At this point you will see your complete study/experiment/sample hierarchy in the "My Studies" section.

<img src="/assets/images/my_studies.png" width="600px"/>

<p class="warning"><strong>Tip:</strong> Notice the "SWID: 14" next to "My Test Study". The other items in the hierarchy have an SWID as well.  This is common for every item in the MetaDB, everything has a SWID aka accession.  When you use command line tools they will often take a "parent accession" to attach output to and this is referring to what you see as SWID in the Portal.</p>

<p class="warning"><strong>Tip:</strong> You can also track sequencer runs and associate samples with the particular "lanes" on the flowcell (or equivalent on the particular sequencing platform).  This is not covered here but will be in the SeqWare Portal guide.  Suffice it to say, this lets you use Portal as a light-weight LIMS system for tracking both studies/experiments/sample and sequencer runs/lanes and how they relate to each other.</p>


### Via Command Line Tools

There are also command line tools for creating study, experiment, and samples.  The functionality for each of these is fairly limited.  For example, the rich descriptive "Spot Decoding String" language for describing how a read is structured is not yet fully supported and updates to existing entities are not yet possible.  However the basic functionality to create studies, experiments, and samples now exists in a scriptable form and that is really the point.  By providing command line tools you can automate the setup of this information using simple Bash shell scripts or the language of your choice.

First, you can find out what tables this tool is capable of writing to:

	java -jar seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.Metadata -- --list-tables
	
	TableName
	study
	experiment
	sample

Now, for a given table, you can find out what fields you can write back to and their type:

	java -jar seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.Metadata -- --table study --list-fields
	
	Field    Type    Possible_Values
	title    String
	description    String
	accession    String
	center_name    String
	center_project_name    String
	study_type    Integer    [1: Whole Genome Sequencing, 2: Metagenomics, 3: Transcriptome Analysis, 4: Resequencing, 5: Epigenetics, 6: Synthetic Genomics, 7: Forensic or Paleo-genomics, 8: Gene Regulation Study, 9: Cancer Genomics, 10: Population Genomics, 11: Other]

So using the information above you can create a new study:

	java -jar seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.Metadata -- --table study --create --field 'title::New Test Study' --field 'description::This is a test description' --field 'accession::InternalID123' --field 'center_name::SeqWare' --field 'center_project_name::SeqWare Test Project' --field study_type::4
	
	SWID: 29830

The output of this command above includes the line ‚ÄúSWID: 29830‚Äù (or whatever number is appropriate for your database).  This is very important since this number is a unique identifier across the database and used to link together entities.  For example, you will use the number produced by the study add command as the parent for the experiment you create below.  If you do not track and supply these numbers then the hierarchy of study/experiment/sample cannot be created.

The next step is to create an experiment and link it to the study you created above. You can find the platform ID using the --list-fields option shown above:

	java -jar seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.Metadata -- --table experiment --create --field 'title::New Test Experiment' --field 'description::This is a test description' --field study_accession::29830 --field platform_id::26
	
	SWID: 29831

Again, you use the SWID from the above output in the next step to create an associated sample. You can find the platform ID using the --list-fields option shown above:

	java -jar seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.Metadata -- --table sample --create --field 'title::New Test Sample' --field 'description::This is a test description' --field experiment_accession::29831 --field organism_id::26
	
	SWID: 29832

At this point you should have a nice study/experiment/sample hierarchy.  You can, of course, add multiple samples per experiment and multiple experiments per study.  For each of the samples you can now upload one or more files.  You will need the SWID from the sample creation above for this step (or visible in the Portal).  Here is a screenshot of what the above commands produce in the Portal (note, the SWIDs do not match but these are just examples):

<img src="/assets/images/final_exp.png" width="600px"/>


## Uploading Files and Associating with a Sample

The first step in uploading a file and associating with a sample is to
identify the sample‚Äôs SWID. The easiest way to do this is to use the Portal web
application to navigate through the Study/Experiment/Sample tree to the sample
you want to upload text for and to note its associated SWID.  You then need to
know the destination location to put your file in.  For the local VM this is either a directory (which defaults to <kbd>/datastore</kbd>) or a shared filesystem over NFS if you have connected your VM instance to shared storage and a cluster. The important thing is this directory is shared across your VM and any other cluster nodes it connects to if any.  The default <kbd>/datastore</kbd> will work fine here.  For Amazon's cloud this shared location is their S3 service which allows you to store arbitrary files in "buckets".  You will see in the SeqWare Pipeline section of this manual how to work with files on S3.

Once you have these two
pieces of information (destination path "/datastore/" and the SWID) you can then use either the Portal or the ProvisionFiles command line utility to put your
files into the right place and associate them with the correct sample.

###Via the Portal

First, create your text document that you want to associate with a sample (we are using a text document here since the sample HelloWorld workflow takes this as an input but typically you would upload Fastq files for a sample).  I created a document called <kbd>simple.txt</kbd> that just has some random text in it.

Now, navigate to "My Studies", pick a sample, and then click "upload file".  You can then either give the complete path to the text file ("enter the file URL into the database" or you can use the "File to upload" browser to upload the simple.txt file. The third option (using a dedicated transfer tool) requires admin configuration and only works on the cloud so we will skip it here. Click upload when you are done.

If possible you should enter a path or URL (http://server/file/path or s3://<bucket>/file/path) since this will not result in duplicate data or long uploads. If you do this then the file path should be accessible to whatever computer the workflow jobs run on (either a shared filesystem or S3). If you choose to upload it might fail for large files and it will also cause a duplicate file to live in <kbd>/datastore/uploads</kbd>.  In these examples we will just provide a URL.

<img src="/assets/images/upload.png" width="600px"/>

You can verify the upload has been successful by browsing "My Studies" section. You should be able to re-download the file, if so it was put in a location visible to the web server.

### Via Command Line Tools

The same process of uploading data described above can also be used on the command line. Here is an example of calling the ProvisionFiles command line utility:

	java -jar seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.ModuleRunner -- --module net.sourceforge.seqware.pipeline.modules.utilities.ProvisionFiles --metadata-output-file-prefix /datastore/ --metadata-parent-accession 29832 --metadata-processing-accession-file simple.txt -- -im text::text/plain::simple.txt -o /datastore/ --force-copy

In this example it will copy the simple.txt text files to /datastore/ directory and
will link them to the sample identified by 29832 (the sample‚Äôs SWID).  So the
final output file is "/datastore/simple.txt" in the database. If you left off
--force-copy you would get a symlink in this case since it is a local file
operation. Use the portal to find out the SWID for an existing sample or get
the SWID using the command line tool when you create a new study. Providing
that here will cause the text to be associated with that parent sample.

<p class="warning"><strong>Tip:</strong> you can find a list of the meta types (like chemical/seq-na-text-gzip or text/plain above) at <a href="http://sourceforge.net/apps/mediawiki/seqware/index.php?title=Module_Conventions#Module_MIME_Types">Module Conventions - Module MIME Types</a>. This is the list we add to as needed when creating new workflows.  It is extremely important to be consistent with these since a workflow will not recognize your input unless the meta type string matches what it expects exactly.</p>


#### Associating Existing Files with a Sample 

The best way to get data into the cloud is to use the ProvisionFiles utility above since it both uploads the data (using multiple threads to maximize performance) and also saves the metadata back to the database.  However, sometimes you have already uploaded data or, as is the case for the local VM, it is a single filesystem so there is no reason to make copies of the data (same would be true if /home/seqware/ was on an NFS share).  In this case you just want to link the files to particular samples in the database.  GenericMetadataSaver is the tool you can use to accomplish this, for example:

	java -jar seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.ModuleRunner -- --module net.sourceforge.seqware.pipeline.modules.GenericMetadataSaver --metadata-parent-accession 25192 -- --gms-output-file text::text/plain::/home/seqware/SeqWare/simple.txt --gms-algorithm UploadText --gms-suppress-output-file-check

Here files are associated with the parent (SWID: 25192 which is a sample). One word of caution, if you expect people to download your files through the Portal then the paths you inject into the database must start with /datastore/ or wherever Tomcat (the web server) expects to find uploaded files.  For the VM, this is /datastore/. See the section on SeqWare Portal for more information on configuring Tomcat.

## Listing Available Workflows and Their Parameters

Once you have uploaded data the next step is to find the available workflows and their parameters.  To see the list of available workflows you can execute the following command:

	java -jar seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.BundleManager -- --list-install

You will get a tab-delimited list of workflows showing their name, version, and (most importantly) their SWID.  

<p class="warning"><strong>Tip:</strong> it may be easier for you to read the output by cutting and pasting into a spreadsheet.</p>

In this example we are going to use the latest (at the time of this writing) HelloWorld workflow bundle (SWID 7 below).  The output of the above command includes the line:

  HelloWorldWorkflow      1.0     Wed Aug 15 19:00:11 EDT 2012    7       /home/seqware/SeqWare/released-bundles/Workflow_Bundle_HelloWorldWorkflow_1.0_SeqWare_0.12.5.zip

The fourth column includes the SWID for this workflow that you will use in the next command to find all the parameters (and their defaults) that this workflow takes.  Here is the command, notice I redirect the output to create a basic ini file that can later be customized and used to submit a run of this workflow:

	java -jar seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.BundleManager -- --list-workflow-params --workflow-accession 7 > workflow.ini

In this example the workflow ‚ÄúHelloWorldWorkflow‚Äù version 1.0 (SWID 7) parameters are listed.  The output conforms to the input you can use to parametrize and launch workflows.  For example:

<pre>
#key=input_file:type=file:display=F:display_name=input_file:file_meta_type=text/plain
input_file=${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/data/input.txt
#key=output_dir:type=text:display=F:display_name=output_dir
output_dir=seqware-results
#key=output_prefix:type=text:display=F:display_name=output_prefix
output_prefix=/datastore/
</pre>

<p class="warning"><strong>Note:</strong> the lines above have been wrapped but you should not include line breaks in your file.  Instead, make sure the file that you create using this tool (and customize for later launching a workflow) includes comment lines starting with ‚Äú#‚Äù and the key=value lines only.  In the command above the redirect to the file workflow.ini will include some extra lines of status output.  Make sure you remove these before continuing to launch the workflow with this ini file.  You can customize any values from the key/value pairs that you need to.  For example, the most frequent parameters you will customize are input files.  In the workflow example above you will want to customize input_file.  For example, if you wanted to process the file you uploaded you would customize the line as:

	input_file=/datastore/simple.txt

Since this is a low-level tool you may see many more parameters exposed with this tool than you would using the web Portal application.  Please use caution when customizing these values since some refer to items that affect the underlying infrastructure.

<p class="warning"><strong>Tip:</strong> when you customize key-values in the ini file prepared above you do not need to include key-values that you leave unchanged.  If you do not include these the workflow will run with those values by default anyway.  Removing unchanged key-values will greatly reduce the size of your ini files making it much easier to see the key-values you are interested in.


## Triggering a Workflow and Monitoring Progress 

At this point you know what workflow you are going to run and you have a customized ini file that contains, for example, the input files. The next step is to trigger the workflow using the ini file you prepared. Make sure you use the correct workflow accession and parent accession. Use the parent accession of the "Analysis Event" that the file is attached to not the file itself.

	java -jar seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.WorkflowLauncher -- --ini-files workflow.ini --workflow-accession 7 --schedule --parent-accessions 24

<p class="warning"><strong>Tip:</strong> the parent-accessions is the SWID of the ProvisionFiles element that was added under the sample when use used this tool to upload the text files in the example above.  You MUST specify this otherwise the workflow‚Äôs results will not be linked to anything (they will be orphaned and will not be visible in the Portal or present in the reports below). Conveniently the ProvisionFiles tool will write these accessions to a file and the portal displays these values.</p>

This schedules the workflow to run on the VM. Notice it also prints the workflow run accession which you can use to help monitor the workflow.

Once submitted, you can use the Portal to list the number of submitted, running, and failed workflows.  Log into the Portal and click on the ‚ÄúShow Analysis‚Äù link under the Analysis panel.  You can then click on the tab for ‚ÄúRunning Analysis‚Äù to see what is submitted/running/failed.

<img src="/assets/images/running.png" width="600px"/>

A better way of monitoring workflows (and getting a list of the outputs) is to use the WorkflowRunReporter plugin. This will let you script the monitoring of workflow runs.

<pre>java -jar ~/seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.WorkflowRunReporter -- -wa 7</pre>

In this example all the status information for workflows with workflow accession 7 are printed out to a file in the local file system.  This includes several columns of interest including the status of the workflow, the output file types, and their locations in S3 or the file system. You can use this information to automate the checking of workflows and the retrieval of the results!

In the output from the above command you will see accessions for each workflow run. If the status is ‚Äúfailed‚Äù you can use resources directly on the Web Service to see what went wrong by returning the stderr and stdout from the workflow. This is how you might do that for a workflow_run with an accession of 6774:

<pre>
	GET -C admin@admin.com:admin http://localhost:8080/SeqWareWebService/reports/workflowruns/6774/stderr
</pre>

Keep in mind two things: 

1. this is a non-standard URL since this feature is in testing
1. this direct GET request will be replaced with a command-line tool in the near future.

## Downloading Workflow Results

Once a workflow has finished running you will want to list out the associated files and download the results.  While you can use the Portal for downloading files the best way to get files in bulk is to use our reporting tool. This produces a tab-delimited file that lists all the files produced for the workflows you are interested in.  You can then use the same ProvisionFiles utility above to pull files back.  Since the report produces a simple tab-delimited file you can easily automate the downloading of results by looping over the output files and calling ProvisionFiles using a script.

<pre>
	java -jar seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.SymLinkFileReporter -- --no-links --output-filename study_report --workflow-accession 7 --study Test
</pre>

The output here is a study_report.csv file that contains a line for each file (both those uploaded and those produced by workflows).  You can also filter by file types, for example if you want to see report bundles (not applicable to the HelloWorld workflow but you get the idea):

<pre>
	java -jar seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.SymLinkFileReporter -- --no-links --output-filename study_report --workflow-accession 13224 --study 20120403_SEQ1 --file-type application/zip-report-bundle
</pre>

Or an example filtering by sample (again, not directly applicable to the HelloWorld output):

<pre>
	java -jar seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.SymLinkFileReporter -- --no-links --output-filename study_report --workflow-accession 13224  --sample 20120403_SEQ1_GAG
</pre>

You can use these URLs (such as s3://bucket/samplename/test_R1.text.gz) with ProvisionFiles to download results (if they were remote, in the local VM they are just local files).  Here‚Äôs an example downloading a report bundle:

<pre>
	java -jar seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.ModuleRunner -- --module net.sourceforge.seqware.pipeline.modules.utilities.ProvisionFiles --no-metadata -- -i s3://bucket/results/seqware-0.10.0_ComprehensiveExomeGenomeAnalysis-0.10.5/59491657/GAG.fa.variant_quality.gatk.hg19.report.zip -o ./
</pre>

Here the zip report bundle is downloaded to the current working directory on the computer you are working on.  In this way you can pull back the results of workflows entirely through scripts that wrap the SymLinkFileReporter and ProvisionFiles.

Also note the SymLinkFileReporter gives you SWIDs for processing events and entities such as studies, samples, and experiments.  You can use this tool to find these SWIDs that are used as ‚Äúparents‚Äù for workflow runs.

In addition to the command line tools, you can also use the Portal to explore the output of workflows triggered through the command line tools.

You can find more information on this report tool on the public SeqWare wiki: [Study Reporter](http://sourceforge.net/apps/mediawiki/seqware/index.php?title=SymLink_Reporter).

<p class="warning"><strong>Note:</strong> in the example above I use --no-metadata with ProvisionFiles. This is to prevent the tool from writing back an event to the central database. Since you are just downloading a file (versus uploading a file) you do not really want to record that download event in the database.
</p>

## Next Steps

See the [Developer's Guide](/docs/3-getting-started/developer-tutorial/) for how to create a new workflow.


## To Do

Here are the items we are currently working on to improve the command line tools. The goal is to make the command line tools a fully functional replacement for the Portal. This will allow users to increase the throughput of file upload and workflow triggering through the system since the tools can be easily scripted.

* command line tools to list, search, and update Study, Sample, and Experiments without having to use the Portal
* displaying SWID on every entity in the Portal (making it easier to ‚Äúattach‚Äù items such as Fastq files to items you see in the Portal) -- done
* command line tool for listing and monitoring active workflows -- partially done
* command line tool  for listing the parameters (ini_file field) that were used for a given workflow run (and maybe the full DAX too)

We also want to make sure the Portal is fully usable.  Future versions of this document will show:

* workflow launching via Portal too

We also will probably create a second version of this document that is tailored for running a VM on Amazon's cloud versus the local VM. This process is almost identical but the cloud has another option for storing files.;T;
I"◊z<p>The majority of this guide is dedicated to walking users and developers through the basics of using SeqWare. We assume that people are most interested in the Pipeline sub-project and focus most of our time on that.  The examples below will all be based on a local VM but the environment on our cloud instance is almost identical, so most of the examples below will be applicable to either VM type. In the future we will probably have a separate user guide that focuses on the differences of running on Amazon‚Äôs cloud.</p>

<div class="section" id="by-the-end-of-this-tutorial">
<h2>By the End of This Tutorial</h2>

<p>This guide will show you how to use command line tools from Pipeline to access the MetaDB. This will allow you to do the following tasks using tools that can be scripted versus our Portal web-based interface that requires a user to click on an interface (we will show examples of the latter along the way too). By the end of these tutorials you will be able to:</p>

<ul>
<li>use both command line and web-based tools from Pipeline and Portal respectively</li>
  <li>create studies, experiments, and samples in the MetaDB</li>
  <li>upload data such as fastq files to the VM and associate that data with particular samples in the MetaDB</li>
  <li>find the list of available workflows and the parameters they accept using Pipeline</li>
  <li>schedule a HelloWorld workflow and monitor its progress using Pipeline</li>
  <li>generate a report on the outputs of your workflows in Pipeline and Portal</li>
  <li>download files produced by a workflow using Pipeline tools</li>
</ul>
<p>The command line tools are all Java tools from SeqWare Pipeline that wrap our RESTful SeqWare Web Service. If you would like to learn more about the low-level API (perhaps you want to call it directly in a program or script) you can find more information in the <a href="/docs/7-web-service/">SeqWare Web Service</a> documentation.</p>

</div><div class="section" id="the-example">
<h2>The Example</h2>

<p>In this tutorial we will use a simple HelloWorld workflow that takes a text file as input and creates another file as output. The same examples could be applied to any workflows and input data types.  How to build your own workflows (<strong>the central purpose of SeqWare</strong>) is covered in the <a href="/docs/3-getting-started/developer-tutorial/">Developer Tutorial</a>.</p>

</div><div class="section" id="first-steps">
<h2>First Steps</h2>

<p>Please launch your local VM in VirtualBox and login as user <kbd>seqware</kbd>, password <kbd>seqware</kbd> at this time. Click on the ‚ÄúSeqWare Directory‚Äù link on the desktop which will open a terminal to the location where we installed the SeqWare tools.</p>

</div><div class="section" id="the-seqware-command-line-tool">
<h2>The SeqWare Command Line Tool</h2>

<p>SeqWare is open source architecture built mostly in Java. In the <kbd>/home/seqware/SeqWare</kbd> directory you will see a jar file. This contains SeqWare Pipeline code that will allow you to interact with the SeqWare Web service (actually either on a VM, installed on another local machine/cluster, or in the cloud) that controls, among other things, workflow execution. This jar is, essentially, the command line interface for the whole SeqWare project.</p>

<p class="warning"><strong>Tip:</strong> The VM will contain a recent version of the jar that we have validated with this tutorial.  You may want to upgrade to the latest version, though, which you can download from our continuous build server. Please choose the jar that has the -full suffix, e.g. <a href="http://jenkins.res.oicr.on.ca/job/seqware/lastStableBuild/net.sourceforge.seqware%24seqware-distribution/">seqware-distribution-0.12.5-SNAPSHOT-full.jar</a>. Keep in mind we make no promises that the latest version will be bug free!</p>

</div><div class="section" id="the-seqware-settings-file">
<h2>The SeqWare Settings File</h2>

<p>The SeqWare jar file uses a simple configuration file that has been setup for you already on the VM. By default the location is ~/.seqware/settings.</p>

<p>This file contains the web address of the RESTful web service, your username and password, and you Amazon public and private keys that will allow you to push and pull data files to and from the cloud, etc.  Here is the example settings file from the VM, this will be ready to work on the VM but keep in mind, this is where you would change settings if you, for example, setup the Web Service and MetaDB on another server or you launched a VM on the cloud and wanted to use the local VM command line jar to control the remote server.  Another common thing you may want to do is use the ProvisionFiles module (described later) to push and pull data into/out of the cloud. This is the file where you would supply your access and secret keys that you got when signing up for Amazon (keep those safe!):</p>

<pre>
#
# SEQWARE PIPELINE SETTINGS
#
# the name of the cluster as defined in the Pegasus sites.xml config file
SW_CLUSTER=seqwarevm
# the directory used to store the generated DAX workflow documents before submission to the cluster
SW_DAX_DIR=/home/seqware/SeqWare/pegasus-dax
# the directory containing all the Pegasus config files this instance of SeqWare should use
SW_PEGASUS_CONFIG_DIR=/home/seqware/.seqware/pegasus
# SeqWare MetaDB communication method, can be "database" or "webservice" or "none"
SW_METADATA_METHOD=webservice
# a directory to copy bundles to for archiving/installing
SW_BUNDLE_DIR=/home/seqware/SeqWare/provisioned-bundles
# the central repository for installed bundles
SW_BUNDLE_REPO_DIR=/home/seqware/SeqWare/released-bundles
#
# SEQWARE WEBSERVICE SETTINGS
#
# the base URL for the RESTful SeqWare API
SW_REST_URL=http://localhost:8080/SeqWareWebService
# the username and password to connect to the REST API, this is used by SeqWare Pipeline to write back processing info to the DB
SW_REST_USER=admin@admin.com
SW_REST_PASS=admin

# SEQWARE TESTING SETTINGS
#
SW_DB_USER=seqware
SW_DB_PASS=seqware
SW_DB_SERVER=localhost
SW_DB=test_seqware_meta_db

#
# AMAZON CLOUD SETTINGS
#
# used by tools reading and writing to S3 buckets (dependency data/software bundles, inputs, outputs, etc)
# most likely not used here at OICR
AWS_ACCESS_KEY=lksjdflksjdklf
AWS_SECRET_KEY=slkdjfeoiksdlkjflksjejlfkjeloijxelkj
</pre>

</div><div class="section" id="creating-studies-experiments-and-samples">
<h2>Creating Studies, Experiments, and Samples</h2>

<p>SeqWare MetaDB lets you track studies, experiment, and samples and then link those to files (like FASTQ or something similar). You can then run workflows on those files, track the resulting files, and use those files for the next workflow.  You will want to set up your study, experiments, and samples before uploading your text or other data files.  This ensures you have ‚Äúparents‚Äù to attach these files to.  Otherwise you will not be able to use them as parameters for workflows. </p>

<p>You can do this either with the <a href="http://SeqWarePortal" title="SeqWare Portal">Portal</a> or via the command line tools below.</p>

<div class="section" id="via-the-portal">
<h3>Via the Portal</h3>

<p>First, login to the portal, the URL is http://localhost:8080/SeqWarePortal and you will need to use the browser inside the VM to access this. The default username is <kbd>admin@admin.com&lt;/kdb&gt; and the default password is <kbd>admin&lt;/kdb&gt;.  Feel free to change your password in the web app.</kbd></kbd></p>

<p class="warning"><strong>Tip:</strong>You could setup the VM so it gets a "real" IP address on your network, in which case you could access both the Portal and Web Service via any computer on your network.</p>

<p>In the following screenshots you see the process that allows you to create these entities through the web application.
When you first login you will see your studies (of which you have none).  First, create a study which can be though of as a project that can have many distinct experimental designs:</p>

<p><img src="/assets/images/create_study.png" width="600px"></p>

<p>You will then see your new study which includes a link to add an experiment. An experiment encapsulates a particular experimental design, for example 2x50 sequencing on the Illumina platform.  If you then did another experiment with a 2x250 read structure on the same platform that would be considered a novel experimental design.</p>

<p><img src="/assets/images/create_experiment.png" width="600px"></p>

<p>Once you click on the ‚Äúadd experiment‚Äù link you will then be able to define the NGS platform used and the nature of the experimental design. Of note is the ‚ÄúSpot Decoding String‚Äù which allows you to document the structure of the reads.</p>

<p>The next step is to create one or more samples and associate them with this new experiment.  Under the experiment you just added you will see a link for ‚Äúadd sample‚Äù, click it and populate the sample information.</p>

<p>At this point you will see your complete study/experiment/sample hierarchy in the ‚ÄúMy Studies‚Äù section.</p>

<p><img src="/assets/images/my_studies.png" width="600px"></p>

<p class="warning"><strong>Tip:</strong> Notice the "SWID: 14" next to "My Test Study". The other items in the hierarchy have an SWID as well.  This is common for every item in the MetaDB, everything has a SWID aka accession.  When you use command line tools they will often take a "parent accession" to attach output to and this is referring to what you see as SWID in the Portal.</p>

<p class="warning"><strong>Tip:</strong> You can also track sequencer runs and associate samples with the particular "lanes" on the flowcell (or equivalent on the particular sequencing platform).  This is not covered here but will be in the SeqWare Portal guide.  Suffice it to say, this lets you use Portal as a light-weight LIMS system for tracking both studies/experiments/sample and sequencer runs/lanes and how they relate to each other.</p>

</div>
<div class="section" id="via-command-line-tools">
<h3>Via Command Line Tools</h3>

<p>There are also command line tools for creating study, experiment, and samples.  The functionality for each of these is fairly limited.  For example, the rich descriptive ‚ÄúSpot Decoding String‚Äù language for describing how a read is structured is not yet fully supported and updates to existing entities are not yet possible.  However the basic functionality to create studies, experiments, and samples now exists in a scriptable form and that is really the point.  By providing command line tools you can automate the setup of this information using simple Bash shell scripts or the language of your choice.</p>

<p>First, you can find out what tables this tool is capable of writing to:</p>

<pre><code>java -jar seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.Metadata -- --list-tables

TableName
study
experiment
sample
</code></pre>

<p>Now, for a given table, you can find out what fields you can write back to and their type:</p>

<pre><code>java -jar seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.Metadata -- --table study --list-fields

Field    Type    Possible_Values
title    String
description    String
accession    String
center_name    String
center_project_name    String
study_type    Integer    [1: Whole Genome Sequencing, 2: Metagenomics, 3: Transcriptome Analysis, 4: Resequencing, 5: Epigenetics, 6: Synthetic Genomics, 7: Forensic or Paleo-genomics, 8: Gene Regulation Study, 9: Cancer Genomics, 10: Population Genomics, 11: Other]
</code></pre>

<p>So using the information above you can create a new study:</p>

<pre><code>java -jar seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.Metadata -- --table study --create --field 'title::New Test Study' --field 'description::This is a test description' --field 'accession::InternalID123' --field 'center_name::SeqWare' --field 'center_project_name::SeqWare Test Project' --field study_type::4

SWID: 29830
</code></pre>

<p>The output of this command above includes the line ‚ÄúSWID: 29830‚Äù (or whatever number is appropriate for your database).  This is very important since this number is a unique identifier across the database and used to link together entities.  For example, you will use the number produced by the study add command as the parent for the experiment you create below.  If you do not track and supply these numbers then the hierarchy of study/experiment/sample cannot be created.</p>

<p>The next step is to create an experiment and link it to the study you created above. You can find the platform ID using the ‚Äìlist-fields option shown above:</p>

<pre><code>java -jar seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.Metadata -- --table experiment --create --field 'title::New Test Experiment' --field 'description::This is a test description' --field study_accession::29830 --field platform_id::26

SWID: 29831
</code></pre>

<p>Again, you use the SWID from the above output in the next step to create an associated sample. You can find the platform ID using the ‚Äìlist-fields option shown above:</p>

<pre><code>java -jar seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.Metadata -- --table sample --create --field 'title::New Test Sample' --field 'description::This is a test description' --field experiment_accession::29831 --field organism_id::26

SWID: 29832
</code></pre>

<p>At this point you should have a nice study/experiment/sample hierarchy.  You can, of course, add multiple samples per experiment and multiple experiments per study.  For each of the samples you can now upload one or more files.  You will need the SWID from the sample creation above for this step (or visible in the Portal).  Here is a screenshot of what the above commands produce in the Portal (note, the SWIDs do not match but these are just examples):</p>

<p><img src="/assets/images/final_exp.png" width="600px"></p>

</div>
</div><div class="section" id="uploading-files-and-associating-with-a-sample">
<h2>Uploading Files and Associating with a Sample</h2>

<p>The first step in uploading a file and associating with a sample is to
identify the sample‚Äôs SWID. The easiest way to do this is to use the Portal web
application to navigate through the Study/Experiment/Sample tree to the sample
you want to upload text for and to note its associated SWID.  You then need to
know the destination location to put your file in.  For the local VM this is either a directory (which defaults to <kbd>/datastore</kbd>) or a shared filesystem over NFS if you have connected your VM instance to shared storage and a cluster. The important thing is this directory is shared across your VM and any other cluster nodes it connects to if any.  The default <kbd>/datastore</kbd> will work fine here.  For Amazon‚Äôs cloud this shared location is their S3 service which allows you to store arbitrary files in ‚Äúbuckets‚Äù.  You will see in the SeqWare Pipeline section of this manual how to work with files on S3.</p>

<p>Once you have these two
pieces of information (destination path ‚Äú/datastore/‚Äù and the SWID) you can then use either the Portal or the ProvisionFiles command line utility to put your
files into the right place and associate them with the correct sample.</p>

<div class="section" id="via-the-portal">
<h3>Via the Portal</h3>

<p>First, create your text document that you want to associate with a sample (we are using a text document here since the sample HelloWorld workflow takes this as an input but typically you would upload Fastq files for a sample).  I created a document called <kbd>simple.txt</kbd> that just has some random text in it.</p>

<p>Now, navigate to ‚ÄúMy Studies‚Äù, pick a sample, and then click ‚Äúupload file‚Äù.  You can then either give the complete path to the text file (‚Äúenter the file URL into the database‚Äù or you can use the ‚ÄúFile to upload‚Äù browser to upload the simple.txt file. The third option (using a dedicated transfer tool) requires admin configuration and only works on the cloud so we will skip it here. Click upload when you are done.</p>

<p>If possible you should enter a path or URL (http://server/file/path or s3://<bucket>/file/path) since this will not result in duplicate data or long uploads. If you do this then the file path should be accessible to whatever computer the workflow jobs run on (either a shared filesystem or S3). If you choose to upload it might fail for large files and it will also cause a duplicate file to live in <kbd>/datastore/uploads</kbd>.  In these examples we will just provide a URL.</bucket></p>

<p><img src="/assets/images/upload.png" width="600px"></p>

<p>You can verify the upload has been successful by browsing ‚ÄúMy Studies‚Äù section. You should be able to re-download the file, if so it was put in a location visible to the web server.</p>

</div>
<div class="section" id="via-command-line-tools">
<h3>Via Command Line Tools</h3>

<p>The same process of uploading data described above can also be used on the command line. Here is an example of calling the ProvisionFiles command line utility:</p>

<pre><code>java -jar seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.ModuleRunner -- --module net.sourceforge.seqware.pipeline.modules.utilities.ProvisionFiles --metadata-output-file-prefix /datastore/ --metadata-parent-accession 29832 --metadata-processing-accession-file simple.txt -- -im text::text/plain::simple.txt -o /datastore/ --force-copy
</code></pre>

<p>In this example it will copy the simple.txt text files to /datastore/ directory and
will link them to the sample identified by 29832 (the sample‚Äôs SWID).  So the
final output file is ‚Äú/datastore/simple.txt‚Äù in the database. If you left off
‚Äìforce-copy you would get a symlink in this case since it is a local file
operation. Use the portal to find out the SWID for an existing sample or get
the SWID using the command line tool when you create a new study. Providing
that here will cause the text to be associated with that parent sample.</p>

<p class="warning"><strong>Tip:</strong> you can find a list of the meta types (like chemical/seq-na-text-gzip or text/plain above) at <a href="http://sourceforge.net/apps/mediawiki/seqware/index.php?title=Module_Conventions#Module_MIME_Types">Module Conventions - Module MIME Types</a>. This is the list we add to as needed when creating new workflows.  It is extremely important to be consistent with these since a workflow will not recognize your input unless the meta type string matches what it expects exactly.</p>

<div class="section" id="associating-existing-files-with-a-sample">
<h4>Associating Existing Files with a Sample</h4>

<p>The best way to get data into the cloud is to use the ProvisionFiles utility above since it both uploads the data (using multiple threads to maximize performance) and also saves the metadata back to the database.  However, sometimes you have already uploaded data or, as is the case for the local VM, it is a single filesystem so there is no reason to make copies of the data (same would be true if /home/seqware/ was on an NFS share).  In this case you just want to link the files to particular samples in the database.  GenericMetadataSaver is the tool you can use to accomplish this, for example:</p>

<pre><code>java -jar seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.ModuleRunner -- --module net.sourceforge.seqware.pipeline.modules.GenericMetadataSaver --metadata-parent-accession 25192 -- --gms-output-file text::text/plain::/home/seqware/SeqWare/simple.txt --gms-algorithm UploadText --gms-suppress-output-file-check
</code></pre>

<p>Here files are associated with the parent (SWID: 25192 which is a sample). One word of caution, if you expect people to download your files through the Portal then the paths you inject into the database must start with /datastore/ or wherever Tomcat (the web server) expects to find uploaded files.  For the VM, this is /datastore/. See the section on SeqWare Portal for more information on configuring Tomcat.</p>

</div>
</div>
</div><div class="section" id="listing-available-workflows-and-their-parameters">
<h2>Listing Available Workflows and Their Parameters</h2>

<p>Once you have uploaded data the next step is to find the available workflows and their parameters.  To see the list of available workflows you can execute the following command:</p>

<pre><code>java -jar seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.BundleManager -- --list-install
</code></pre>

<p>You will get a tab-delimited list of workflows showing their name, version, and (most importantly) their SWID.  </p>

<p class="warning"><strong>Tip:</strong> it may be easier for you to read the output by cutting and pasting into a spreadsheet.</p>

<p>In this example we are going to use the latest (at the time of this writing) HelloWorld workflow bundle (SWID 7 below).  The output of the above command includes the line:</p>

<p>HelloWorldWorkflow      1.0     Wed Aug 15 19:00:11 EDT 2012    7       /home/seqware/SeqWare/released-bundles/Workflow_Bundle_HelloWorldWorkflow<em>1.0_SeqWare</em>0.12.5.zip</p>

<p>The fourth column includes the SWID for this workflow that you will use in the next command to find all the parameters (and their defaults) that this workflow takes.  Here is the command, notice I redirect the output to create a basic ini file that can later be customized and used to submit a run of this workflow:</p>

<pre><code>java -jar seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.BundleManager -- --list-workflow-params --workflow-accession 7 &gt; workflow.ini
</code></pre>

<p>In this example the workflow ‚ÄúHelloWorldWorkflow‚Äù version 1.0 (SWID 7) parameters are listed.  The output conforms to the input you can use to parametrize and launch workflows.  For example:</p>

<pre>
#key=input_file:type=file:display=F:display_name=input_file:file_meta_type=text/plain
input_file=${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/data/input.txt
#key=output_dir:type=text:display=F:display_name=output_dir
output_dir=seqware-results
#key=output_prefix:type=text:display=F:display_name=output_prefix
output_prefix=/datastore/
</pre>

<p class="warning"><strong>Note:</strong> the lines above have been wrapped but you should not include line breaks in your file.  Instead, make sure the file that you create using this tool (and customize for later launching a workflow) includes comment lines starting with ‚Äú#‚Äù and the key=value lines only.  In the command above the redirect to the file workflow.ini will include some extra lines of status output.  Make sure you remove these before continuing to launch the workflow with this ini file.  You can customize any values from the key/value pairs that you need to.  For example, the most frequent parameters you will customize are input files.  In the workflow example above you will want to customize input_file.  For example, if you wanted to process the file you uploaded you would customize the line as:

	input_file=/datastore/simple.txt

Since this is a low-level tool you may see many more parameters exposed with this tool than you would using the web Portal application.  Please use caution when customizing these values since some refer to items that affect the underlying infrastructure.

</p>
<p class="warning"><strong>Tip:</strong> when you customize key-values in the ini file prepared above you do not need to include key-values that you leave unchanged.  If you do not include these the workflow will run with those values by default anyway.  Removing unchanged key-values will greatly reduce the size of your ini files making it much easier to see the key-values you are interested in.


## Triggering a Workflow and Monitoring Progress 

At this point you know what workflow you are going to run and you have a customized ini file that contains, for example, the input files. The next step is to trigger the workflow using the ini file you prepared. Make sure you use the correct workflow accession and parent accession. Use the parent accession of the "Analysis Event" that the file is attached to not the file itself.

	java -jar seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.WorkflowLauncher -- --ini-files workflow.ini --workflow-accession 7 --schedule --parent-accessions 24

</p>
<p class="warning"><strong>Tip:</strong> the parent-accessions is the SWID of the ProvisionFiles element that was added under the sample when use used this tool to upload the text files in the example above.  You MUST specify this otherwise the workflow‚Äôs results will not be linked to anything (they will be orphaned and will not be visible in the Portal or present in the reports below). Conveniently the ProvisionFiles tool will write these accessions to a file and the portal displays these values.</p>

This schedules the workflow to run on the VM. Notice it also prints the workflow run accession which you can use to help monitor the workflow.

Once submitted, you can use the Portal to list the number of submitted, running, and failed workflows.  Log into the Portal and click on the ‚ÄúShow Analysis‚Äù link under the Analysis panel.  You can then click on the tab for ‚ÄúRunning Analysis‚Äù to see what is submitted/running/failed.

<img src="/assets/images/running.png" width="600px">

A better way of monitoring workflows (and getting a list of the outputs) is to use the WorkflowRunReporter plugin. This will let you script the monitoring of workflow runs.

<pre>java -jar ~/seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.WorkflowRunReporter -- -wa 7</pre>

In this example all the status information for workflows with workflow accession 7 are printed out to a file in the local file system.  This includes several columns of interest including the status of the workflow, the output file types, and their locations in S3 or the file system. You can use this information to automate the checking of workflows and the retrieval of the results!

In the output from the above command you will see accessions for each workflow run. If the status is ‚Äúfailed‚Äù you can use resources directly on the Web Service to see what went wrong by returning the stderr and stdout from the workflow. This is how you might do that for a workflow_run with an accession of 6774:

<pre>
	GET -C admin@admin.com:admin http://localhost:8080/SeqWareWebService/reports/workflowruns/6774/stderr
</pre>

Keep in mind two things: 

1. this is a non-standard URL since this feature is in testing
1. this direct GET request will be replaced with a command-line tool in the near future.

## Downloading Workflow Results

Once a workflow has finished running you will want to list out the associated files and download the results.  While you can use the Portal for downloading files the best way to get files in bulk is to use our reporting tool. This produces a tab-delimited file that lists all the files produced for the workflows you are interested in.  You can then use the same ProvisionFiles utility above to pull files back.  Since the report produces a simple tab-delimited file you can easily automate the downloading of results by looping over the output files and calling ProvisionFiles using a script.

<pre>
	java -jar seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.SymLinkFileReporter -- --no-links --output-filename study_report --workflow-accession 7 --study Test
</pre>

The output here is a study_report.csv file that contains a line for each file (both those uploaded and those produced by workflows).  You can also filter by file types, for example if you want to see report bundles (not applicable to the HelloWorld workflow but you get the idea):

<pre>
	java -jar seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.SymLinkFileReporter -- --no-links --output-filename study_report --workflow-accession 13224 --study 20120403_SEQ1 --file-type application/zip-report-bundle
</pre>

Or an example filtering by sample (again, not directly applicable to the HelloWorld output):

<pre>
	java -jar seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.SymLinkFileReporter -- --no-links --output-filename study_report --workflow-accession 13224  --sample 20120403_SEQ1_GAG
</pre>

You can use these URLs (such as s3://bucket/samplename/test_R1.text.gz) with ProvisionFiles to download results (if they were remote, in the local VM they are just local files).  Here‚Äôs an example downloading a report bundle:

<pre>
	java -jar seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.ModuleRunner -- --module net.sourceforge.seqware.pipeline.modules.utilities.ProvisionFiles --no-metadata -- -i s3://bucket/results/seqware-0.10.0_ComprehensiveExomeGenomeAnalysis-0.10.5/59491657/GAG.fa.variant_quality.gatk.hg19.report.zip -o ./
</pre>

Here the zip report bundle is downloaded to the current working directory on the computer you are working on.  In this way you can pull back the results of workflows entirely through scripts that wrap the SymLinkFileReporter and ProvisionFiles.

Also note the SymLinkFileReporter gives you SWIDs for processing events and entities such as studies, samples, and experiments.  You can use this tool to find these SWIDs that are used as ‚Äúparents‚Äù for workflow runs.

In addition to the command line tools, you can also use the Portal to explore the output of workflows triggered through the command line tools.

You can find more information on this report tool on the public SeqWare wiki: [Study Reporter](http://sourceforge.net/apps/mediawiki/seqware/index.php?title=SymLink_Reporter).

<p class="warning"><strong>Note:</strong> in the example above I use --no-metadata with ProvisionFiles. This is to prevent the tool from writing back an event to the central database. Since you are just downloading a file (versus uploading a file) you do not really want to record that download event in the database.
</p>

## Next Steps

See the [Developer's Guide](/docs/3-getting-started/developer-tutorial/) for how to create a new workflow.


## To Do

Here are the items we are currently working on to improve the command line tools. The goal is to make the command line tools a fully functional replacement for the Portal. This will allow users to increase the throughput of file upload and workflow triggering through the system since the tools can be easily scripted.

* command line tools to list, search, and update Study, Sample, and Experiments without having to use the Portal
* displaying SWID on every entity in the Portal (making it easier to ‚Äúattach‚Äù items such as Fastq files to items you see in the Portal) -- done
* command line tool for listing and monitoring active workflows -- partially done
* command line tool  for listing the parameters (ini_file field) that were used for a given workflow run (and maybe the full DAX too)

We also want to make sure the Portal is fully usable.  Future versions of this document will show:

* workflow launching via Portal too

We also will probably create a second version of this document that is tailored for running a VM on Amazon's cloud versus the local VM. This process is almost identical but the cloud has another option for storing files.
</div>;T;I"»w<p>The majority of this guide is dedicated to walking users and developers through the basics of using SeqWare. We assume that people are most interested in the Pipeline sub-project and focus most of our time on that.  The examples below will all be based on a local VM but the environment on our cloud instance is almost identical, so most of the examples below will be applicable to either VM type. In the future we will probably have a separate user guide that focuses on the differences of running on Amazon‚Äôs cloud.</p>

<h2>By the End of This Tutorial</h2>

<p>This guide will show you how to use command line tools from Pipeline to access the MetaDB. This will allow you to do the following tasks using tools that can be scripted versus our Portal web-based interface that requires a user to click on an interface (we will show examples of the latter along the way too). By the end of these tutorials you will be able to:</p>

<ul>
  <li>use both command line and web-based tools from Pipeline and Portal respectively</li>
  <li>create studies, experiments, and samples in the MetaDB</li>
  <li>upload data such as fastq files to the VM and associate that data with particular samples in the MetaDB</li>
  <li>find the list of available workflows and the parameters they accept using Pipeline</li>
  <li>schedule a HelloWorld workflow and monitor its progress using Pipeline</li>
  <li>generate a report on the outputs of your workflows in Pipeline and Portal</li>
  <li>download files produced by a workflow using Pipeline tools</li>
</ul>

<p>The command line tools are all Java tools from SeqWare Pipeline that wrap our RESTful SeqWare Web Service. If you would like to learn more about the low-level API (perhaps you want to call it directly in a program or script) you can find more information in the <a href="/docs/7-web-service/">SeqWare Web Service</a> documentation.</p>

<h2>The Example</h2>

<p>In this tutorial we will use a simple HelloWorld workflow that takes a text file as input and creates another file as output. The same examples could be applied to any workflows and input data types.  How to build your own workflows (<strong>the central purpose of SeqWare</strong>) is covered in the <a href="/docs/3-getting-started/developer-tutorial/">Developer Tutorial</a>.</p>

<h2>First Steps</h2>

<p>Please launch your local VM in VirtualBox and login as user <kbd>seqware</kbd>, password <kbd>seqware</kbd> at this time. Click on the ‚ÄúSeqWare Directory‚Äù link on the desktop which will open a terminal to the location where we installed the SeqWare tools.</p>

<h2>The SeqWare Command Line Tool</h2>

<p>SeqWare is open source architecture built mostly in Java. In the <kbd>/home/seqware/SeqWare</kbd> directory you will see a jar file. This contains SeqWare Pipeline code that will allow you to interact with the SeqWare Web service (actually either on a VM, installed on another local machine/cluster, or in the cloud) that controls, among other things, workflow execution. This jar is, essentially, the command line interface for the whole SeqWare project.</p>

<p class="warning"><strong>Tip:</strong> The VM will contain a recent version of the jar that we have validated with this tutorial.  You may want to upgrade to the latest version, though, which you can download from our continuous build server. Please choose the jar that has the -full suffix, e.g. <a href="http://jenkins.res.oicr.on.ca/job/seqware/lastStableBuild/net.sourceforge.seqware$seqware-distribution/">seqware-distribution-0.12.5-SNAPSHOT-full.jar</a>. Keep in mind we make no promises that the latest version will be bug free!</p>

<h2>The SeqWare Settings File</h2>

<p>The SeqWare jar file uses a simple configuration file that has been setup for you already on the VM. By default the location is ~/.seqware/settings.</p>

<p>This file contains the web address of the RESTful web service, your username and password, and you Amazon public and private keys that will allow you to push and pull data files to and from the cloud, etc.  Here is the example settings file from the VM, this will be ready to work on the VM but keep in mind, this is where you would change settings if you, for example, setup the Web Service and MetaDB on another server or you launched a VM on the cloud and wanted to use the local VM command line jar to control the remote server.  Another common thing you may want to do is use the ProvisionFiles module (described later) to push and pull data into/out of the cloud. This is the file where you would supply your access and secret keys that you got when signing up for Amazon (keep those safe!):</p>

<pre>
#
# SEQWARE PIPELINE SETTINGS
#
# the name of the cluster as defined in the Pegasus sites.xml config file
SW_CLUSTER=seqwarevm
# the directory used to store the generated DAX workflow documents before submission to the cluster
SW_DAX_DIR=/home/seqware/SeqWare/pegasus-dax
# the directory containing all the Pegasus config files this instance of SeqWare should use
SW_PEGASUS_CONFIG_DIR=/home/seqware/.seqware/pegasus
# SeqWare MetaDB communication method, can be "database" or "webservice" or "none"
SW_METADATA_METHOD=webservice
# a directory to copy bundles to for archiving/installing
SW_BUNDLE_DIR=/home/seqware/SeqWare/provisioned-bundles
# the central repository for installed bundles
SW_BUNDLE_REPO_DIR=/home/seqware/SeqWare/released-bundles
#
# SEQWARE WEBSERVICE SETTINGS
#
# the base URL for the RESTful SeqWare API
SW_REST_URL=http://localhost:8080/SeqWareWebService
# the username and password to connect to the REST API, this is used by SeqWare Pipeline to write back processing info to the DB
SW_REST_USER=admin@admin.com
SW_REST_PASS=admin

# SEQWARE TESTING SETTINGS
#
SW_DB_USER=seqware
SW_DB_PASS=seqware
SW_DB_SERVER=localhost
SW_DB=test_seqware_meta_db

#
# AMAZON CLOUD SETTINGS
#
# used by tools reading and writing to S3 buckets (dependency data/software bundles, inputs, outputs, etc)
# most likely not used here at OICR
AWS_ACCESS_KEY=lksjdflksjdklf
AWS_SECRET_KEY=slkdjfeoiksdlkjflksjejlfkjeloijxelkj
</pre>

<h2>Creating Studies, Experiments, and Samples</h2>

<p>SeqWare MetaDB lets you track studies, experiment, and samples and then link those to files (like FASTQ or something similar). You can then run workflows on those files, track the resulting files, and use those files for the next workflow.  You will want to set up your study, experiments, and samples before uploading your text or other data files.  This ensures you have ‚Äúparents‚Äù to attach these files to.  Otherwise you will not be able to use them as parameters for workflows. </p>

<p>You can do this either with the <a href="http://SeqWarePortal" title="SeqWare Portal">Portal</a> or via the command line tools below.</p>

<h3>Via the Portal</h3>

<p>First, login to the portal, the URL is http://localhost:8080/SeqWarePortal and you will need to use the browser inside the VM to access this. The default username is <kbd>admin@admin.com&lt;/kdb&gt; and the default password is <kbd>admin&lt;/kdb&gt;.  Feel free to change your password in the web app.</kbd></kbd></p>

<p class="warning"><strong>Tip:</strong>You could setup the VM so it gets a "real" IP address on your network, in which case you could access both the Portal and Web Service via any computer on your network.</p>

<p>In the following screenshots you see the process that allows you to create these entities through the web application.
When you first login you will see your studies (of which you have none).  First, create a study which can be though of as a project that can have many distinct experimental designs:</p>

<p><img src="/assets/images/create_study.png" width="600px" /></p>

<p>You will then see your new study which includes a link to add an experiment. An experiment encapsulates a particular experimental design, for example 2x50 sequencing on the Illumina platform.  If you then did another experiment with a 2x250 read structure on the same platform that would be considered a novel experimental design.</p>

<p><img src="/assets/images/create_experiment.png" width="600px" /></p>

<p>Once you click on the ‚Äúadd experiment‚Äù link you will then be able to define the NGS platform used and the nature of the experimental design. Of note is the ‚ÄúSpot Decoding String‚Äù which allows you to document the structure of the reads.</p>

<p>The next step is to create one or more samples and associate them with this new experiment.  Under the experiment you just added you will see a link for ‚Äúadd sample‚Äù, click it and populate the sample information.</p>

<p>At this point you will see your complete study/experiment/sample hierarchy in the ‚ÄúMy Studies‚Äù section.</p>

<p><img src="/assets/images/my_studies.png" width="600px" /></p>

<p class="warning"><strong>Tip:</strong> Notice the "SWID: 14" next to "My Test Study". The other items in the hierarchy have an SWID as well.  This is common for every item in the MetaDB, everything has a SWID aka accession.  When you use command line tools they will often take a "parent accession" to attach output to and this is referring to what you see as SWID in the Portal.</p>

<p class="warning"><strong>Tip:</strong> You can also track sequencer runs and associate samples with the particular "lanes" on the flowcell (or equivalent on the particular sequencing platform).  This is not covered here but will be in the SeqWare Portal guide.  Suffice it to say, this lets you use Portal as a light-weight LIMS system for tracking both studies/experiments/sample and sequencer runs/lanes and how they relate to each other.</p>

<h3>Via Command Line Tools</h3>

<p>There are also command line tools for creating study, experiment, and samples.  The functionality for each of these is fairly limited.  For example, the rich descriptive ‚ÄúSpot Decoding String‚Äù language for describing how a read is structured is not yet fully supported and updates to existing entities are not yet possible.  However the basic functionality to create studies, experiments, and samples now exists in a scriptable form and that is really the point.  By providing command line tools you can automate the setup of this information using simple Bash shell scripts or the language of your choice.</p>

<p>First, you can find out what tables this tool is capable of writing to:</p>

<pre><code>java -jar seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.Metadata -- --list-tables

TableName
study
experiment
sample
</code></pre>

<p>Now, for a given table, you can find out what fields you can write back to and their type:</p>

<pre><code>java -jar seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.Metadata -- --table study --list-fields

Field    Type    Possible_Values
title    String
description    String
accession    String
center_name    String
center_project_name    String
study_type    Integer    [1: Whole Genome Sequencing, 2: Metagenomics, 3: Transcriptome Analysis, 4: Resequencing, 5: Epigenetics, 6: Synthetic Genomics, 7: Forensic or Paleo-genomics, 8: Gene Regulation Study, 9: Cancer Genomics, 10: Population Genomics, 11: Other]
</code></pre>

<p>So using the information above you can create a new study:</p>

<pre><code>java -jar seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.Metadata -- --table study --create --field 'title::New Test Study' --field 'description::This is a test description' --field 'accession::InternalID123' --field 'center_name::SeqWare' --field 'center_project_name::SeqWare Test Project' --field study_type::4

SWID: 29830
</code></pre>

<p>The output of this command above includes the line ‚ÄúSWID: 29830‚Äù (or whatever number is appropriate for your database).  This is very important since this number is a unique identifier across the database and used to link together entities.  For example, you will use the number produced by the study add command as the parent for the experiment you create below.  If you do not track and supply these numbers then the hierarchy of study/experiment/sample cannot be created.</p>

<p>The next step is to create an experiment and link it to the study you created above. You can find the platform ID using the ‚Äìlist-fields option shown above:</p>

<pre><code>java -jar seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.Metadata -- --table experiment --create --field 'title::New Test Experiment' --field 'description::This is a test description' --field study_accession::29830 --field platform_id::26

SWID: 29831
</code></pre>

<p>Again, you use the SWID from the above output in the next step to create an associated sample. You can find the platform ID using the ‚Äìlist-fields option shown above:</p>

<pre><code>java -jar seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.Metadata -- --table sample --create --field 'title::New Test Sample' --field 'description::This is a test description' --field experiment_accession::29831 --field organism_id::26

SWID: 29832
</code></pre>

<p>At this point you should have a nice study/experiment/sample hierarchy.  You can, of course, add multiple samples per experiment and multiple experiments per study.  For each of the samples you can now upload one or more files.  You will need the SWID from the sample creation above for this step (or visible in the Portal).  Here is a screenshot of what the above commands produce in the Portal (note, the SWIDs do not match but these are just examples):</p>

<p><img src="/assets/images/final_exp.png" width="600px" /></p>

<h2>Uploading Files and Associating with a Sample</h2>

<p>The first step in uploading a file and associating with a sample is to
identify the sample‚Äôs SWID. The easiest way to do this is to use the Portal web
application to navigate through the Study/Experiment/Sample tree to the sample
you want to upload text for and to note its associated SWID.  You then need to
know the destination location to put your file in.  For the local VM this is either a directory (which defaults to <kbd>/datastore</kbd>) or a shared filesystem over NFS if you have connected your VM instance to shared storage and a cluster. The important thing is this directory is shared across your VM and any other cluster nodes it connects to if any.  The default <kbd>/datastore</kbd> will work fine here.  For Amazon‚Äôs cloud this shared location is their S3 service which allows you to store arbitrary files in ‚Äúbuckets‚Äù.  You will see in the SeqWare Pipeline section of this manual how to work with files on S3.</p>

<p>Once you have these two
pieces of information (destination path ‚Äú/datastore/‚Äù and the SWID) you can then use either the Portal or the ProvisionFiles command line utility to put your
files into the right place and associate them with the correct sample.</p>

<h3>Via the Portal</h3>

<p>First, create your text document that you want to associate with a sample (we are using a text document here since the sample HelloWorld workflow takes this as an input but typically you would upload Fastq files for a sample).  I created a document called <kbd>simple.txt</kbd> that just has some random text in it.</p>

<p>Now, navigate to ‚ÄúMy Studies‚Äù, pick a sample, and then click ‚Äúupload file‚Äù.  You can then either give the complete path to the text file (‚Äúenter the file URL into the database‚Äù or you can use the ‚ÄúFile to upload‚Äù browser to upload the simple.txt file. The third option (using a dedicated transfer tool) requires admin configuration and only works on the cloud so we will skip it here. Click upload when you are done.</p>

<p>If possible you should enter a path or URL (http://server/file/path or s3://<bucket>/file/path) since this will not result in duplicate data or long uploads. If you do this then the file path should be accessible to whatever computer the workflow jobs run on (either a shared filesystem or S3). If you choose to upload it might fail for large files and it will also cause a duplicate file to live in <kbd>/datastore/uploads</kbd>.  In these examples we will just provide a URL.</bucket></p>

<p><img src="/assets/images/upload.png" width="600px" /></p>

<p>You can verify the upload has been successful by browsing ‚ÄúMy Studies‚Äù section. You should be able to re-download the file, if so it was put in a location visible to the web server.</p>

<h3>Via Command Line Tools</h3>

<p>The same process of uploading data described above can also be used on the command line. Here is an example of calling the ProvisionFiles command line utility:</p>

<pre><code>java -jar seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.ModuleRunner -- --module net.sourceforge.seqware.pipeline.modules.utilities.ProvisionFiles --metadata-output-file-prefix /datastore/ --metadata-parent-accession 29832 --metadata-processing-accession-file simple.txt -- -im text::text/plain::simple.txt -o /datastore/ --force-copy
</code></pre>

<p>In this example it will copy the simple.txt text files to /datastore/ directory and
will link them to the sample identified by 29832 (the sample‚Äôs SWID).  So the
final output file is ‚Äú/datastore/simple.txt‚Äù in the database. If you left off
‚Äìforce-copy you would get a symlink in this case since it is a local file
operation. Use the portal to find out the SWID for an existing sample or get
the SWID using the command line tool when you create a new study. Providing
that here will cause the text to be associated with that parent sample.</p>

<p class="warning"><strong>Tip:</strong> you can find a list of the meta types (like chemical/seq-na-text-gzip or text/plain above) at <a href="http://sourceforge.net/apps/mediawiki/seqware/index.php?title=Module_Conventions#Module_MIME_Types">Module Conventions - Module MIME Types</a>. This is the list we add to as needed when creating new workflows.  It is extremely important to be consistent with these since a workflow will not recognize your input unless the meta type string matches what it expects exactly.</p>

<h4>Associating Existing Files with a Sample</h4>

<p>The best way to get data into the cloud is to use the ProvisionFiles utility above since it both uploads the data (using multiple threads to maximize performance) and also saves the metadata back to the database.  However, sometimes you have already uploaded data or, as is the case for the local VM, it is a single filesystem so there is no reason to make copies of the data (same would be true if /home/seqware/ was on an NFS share).  In this case you just want to link the files to particular samples in the database.  GenericMetadataSaver is the tool you can use to accomplish this, for example:</p>

<pre><code>java -jar seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.ModuleRunner -- --module net.sourceforge.seqware.pipeline.modules.GenericMetadataSaver --metadata-parent-accession 25192 -- --gms-output-file text::text/plain::/home/seqware/SeqWare/simple.txt --gms-algorithm UploadText --gms-suppress-output-file-check
</code></pre>

<p>Here files are associated with the parent (SWID: 25192 which is a sample). One word of caution, if you expect people to download your files through the Portal then the paths you inject into the database must start with /datastore/ or wherever Tomcat (the web server) expects to find uploaded files.  For the VM, this is /datastore/. See the section on SeqWare Portal for more information on configuring Tomcat.</p>

<h2>Listing Available Workflows and Their Parameters</h2>

<p>Once you have uploaded data the next step is to find the available workflows and their parameters.  To see the list of available workflows you can execute the following command:</p>

<pre><code>java -jar seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.BundleManager -- --list-install
</code></pre>

<p>You will get a tab-delimited list of workflows showing their name, version, and (most importantly) their SWID.  </p>

<p class="warning"><strong>Tip:</strong> it may be easier for you to read the output by cutting and pasting into a spreadsheet.</p>

<p>In this example we are going to use the latest (at the time of this writing) HelloWorld workflow bundle (SWID 7 below).  The output of the above command includes the line:</p>

<p>HelloWorldWorkflow      1.0     Wed Aug 15 19:00:11 EDT 2012    7       /home/seqware/SeqWare/released-bundles/Workflow_Bundle_HelloWorldWorkflow<em>1.0_SeqWare</em>0.12.5.zip</p>

<p>The fourth column includes the SWID for this workflow that you will use in the next command to find all the parameters (and their defaults) that this workflow takes.  Here is the command, notice I redirect the output to create a basic ini file that can later be customized and used to submit a run of this workflow:</p>

<pre><code>java -jar seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.BundleManager -- --list-workflow-params --workflow-accession 7 &gt; workflow.ini
</code></pre>

<p>In this example the workflow ‚ÄúHelloWorldWorkflow‚Äù version 1.0 (SWID 7) parameters are listed.  The output conforms to the input you can use to parametrize and launch workflows.  For example:</p>

<pre>
#key=input_file:type=file:display=F:display_name=input_file:file_meta_type=text/plain
input_file=${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/data/input.txt
#key=output_dir:type=text:display=F:display_name=output_dir
output_dir=seqware-results
#key=output_prefix:type=text:display=F:display_name=output_prefix
output_prefix=/datastore/
</pre>

<p class="warning"><strong>Note:</strong> the lines above have been wrapped but you should not include line breaks in your file.  Instead, make sure the file that you create using this tool (and customize for later launching a workflow) includes comment lines starting with ‚Äú#‚Äù and the key=value lines only.  In the command above the redirect to the file workflow.ini will include some extra lines of status output.  Make sure you remove these before continuing to launch the workflow with this ini file.  You can customize any values from the key/value pairs that you need to.  For example, the most frequent parameters you will customize are input files.  In the workflow example above you will want to customize input_file.  For example, if you wanted to process the file you uploaded you would customize the line as:

	input_file=/datastore/simple.txt

Since this is a low-level tool you may see many more parameters exposed with this tool than you would using the web Portal application.  Please use caution when customizing these values since some refer to items that affect the underlying infrastructure.

<p class="warning"><strong>Tip:</strong> when you customize key-values in the ini file prepared above you do not need to include key-values that you leave unchanged.  If you do not include these the workflow will run with those values by default anyway.  Removing unchanged key-values will greatly reduce the size of your ini files making it much easier to see the key-values you are interested in.


## Triggering a Workflow and Monitoring Progress 

At this point you know what workflow you are going to run and you have a customized ini file that contains, for example, the input files. The next step is to trigger the workflow using the ini file you prepared. Make sure you use the correct workflow accession and parent accession. Use the parent accession of the "Analysis Event" that the file is attached to not the file itself.

	java -jar seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.WorkflowLauncher -- --ini-files workflow.ini --workflow-accession 7 --schedule --parent-accessions 24

<p class="warning"><strong>Tip:</strong> the parent-accessions is the SWID of the ProvisionFiles element that was added under the sample when use used this tool to upload the text files in the example above.  You MUST specify this otherwise the workflow‚Äôs results will not be linked to anything (they will be orphaned and will not be visible in the Portal or present in the reports below). Conveniently the ProvisionFiles tool will write these accessions to a file and the portal displays these values.</p>

This schedules the workflow to run on the VM. Notice it also prints the workflow run accession which you can use to help monitor the workflow.

Once submitted, you can use the Portal to list the number of submitted, running, and failed workflows.  Log into the Portal and click on the ‚ÄúShow Analysis‚Äù link under the Analysis panel.  You can then click on the tab for ‚ÄúRunning Analysis‚Äù to see what is submitted/running/failed.

<img src="/assets/images/running.png" width="600px" />

A better way of monitoring workflows (and getting a list of the outputs) is to use the WorkflowRunReporter plugin. This will let you script the monitoring of workflow runs.

<pre>java -jar ~/seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.WorkflowRunReporter -- -wa 7</pre>

In this example all the status information for workflows with workflow accession 7 are printed out to a file in the local file system.  This includes several columns of interest including the status of the workflow, the output file types, and their locations in S3 or the file system. You can use this information to automate the checking of workflows and the retrieval of the results!

In the output from the above command you will see accessions for each workflow run. If the status is ‚Äúfailed‚Äù you can use resources directly on the Web Service to see what went wrong by returning the stderr and stdout from the workflow. This is how you might do that for a workflow_run with an accession of 6774:

<pre>
	GET -C admin@admin.com:admin http://localhost:8080/SeqWareWebService/reports/workflowruns/6774/stderr
</pre>

Keep in mind two things: 

1. this is a non-standard URL since this feature is in testing
1. this direct GET request will be replaced with a command-line tool in the near future.

## Downloading Workflow Results

Once a workflow has finished running you will want to list out the associated files and download the results.  While you can use the Portal for downloading files the best way to get files in bulk is to use our reporting tool. This produces a tab-delimited file that lists all the files produced for the workflows you are interested in.  You can then use the same ProvisionFiles utility above to pull files back.  Since the report produces a simple tab-delimited file you can easily automate the downloading of results by looping over the output files and calling ProvisionFiles using a script.

<pre>
	java -jar seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.SymLinkFileReporter -- --no-links --output-filename study_report --workflow-accession 7 --study Test
</pre>

The output here is a study_report.csv file that contains a line for each file (both those uploaded and those produced by workflows).  You can also filter by file types, for example if you want to see report bundles (not applicable to the HelloWorld workflow but you get the idea):

<pre>
	java -jar seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.SymLinkFileReporter -- --no-links --output-filename study_report --workflow-accession 13224 --study 20120403_SEQ1 --file-type application/zip-report-bundle
</pre>

Or an example filtering by sample (again, not directly applicable to the HelloWorld output):

<pre>
	java -jar seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.SymLinkFileReporter -- --no-links --output-filename study_report --workflow-accession 13224  --sample 20120403_SEQ1_GAG
</pre>

You can use these URLs (such as s3://bucket/samplename/test_R1.text.gz) with ProvisionFiles to download results (if they were remote, in the local VM they are just local files).  Here‚Äôs an example downloading a report bundle:

<pre>
	java -jar seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.ModuleRunner -- --module net.sourceforge.seqware.pipeline.modules.utilities.ProvisionFiles --no-metadata -- -i s3://bucket/results/seqware-0.10.0_ComprehensiveExomeGenomeAnalysis-0.10.5/59491657/GAG.fa.variant_quality.gatk.hg19.report.zip -o ./
</pre>

Here the zip report bundle is downloaded to the current working directory on the computer you are working on.  In this way you can pull back the results of workflows entirely through scripts that wrap the SymLinkFileReporter and ProvisionFiles.

Also note the SymLinkFileReporter gives you SWIDs for processing events and entities such as studies, samples, and experiments.  You can use this tool to find these SWIDs that are used as ‚Äúparents‚Äù for workflow runs.

In addition to the command line tools, you can also use the Portal to explore the output of workflows triggered through the command line tools.

You can find more information on this report tool on the public SeqWare wiki: [Study Reporter](http://sourceforge.net/apps/mediawiki/seqware/index.php?title=SymLink_Reporter).

<p class="warning"><strong>Note:</strong> in the example above I use --no-metadata with ProvisionFiles. This is to prevent the tool from writing back an event to the central database. Since you are just downloading a file (versus uploading a file) you do not really want to record that download event in the database.
</p>

## Next Steps

See the [Developer's Guide](/docs/3-getting-started/developer-tutorial/) for how to create a new workflow.


## To Do

Here are the items we are currently working on to improve the command line tools. The goal is to make the command line tools a fully functional replacement for the Portal. This will allow users to increase the throughput of file upload and workflow triggering through the system since the tools can be easily scripted.

* command line tools to list, search, and update Study, Sample, and Experiments without having to use the Portal
* displaying SWID on every entity in the Portal (making it easier to ‚Äúattach‚Äù items such as Fastq files to items you see in the Portal) -- done
* command line tool for listing and monitoring active workflows -- partially done
* command line tool  for listing the parameters (ini_file field) that were used for a given workflow run (and maybe the full DAX too)

We also want to make sure the Portal is fully usable.  Future versions of this document will show:

* workflow launching via Portal too

We also will probably create a second version of this document that is tailored for running a VM on Amazon's cloud versus the local VM. This process is almost identical but the cloud has another option for storing files.
</p></p>
;T;@",/docs/3-getting-started/admin-tutorial/{;{
;I"¿<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<title>SeqWare ‚Ä∫ Getting Started</title>
<meta content="nanoc 3.4.0" name="generator">
<link href="../../../assets/style-v17.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://feeds.feedburner.com/seqware" rel="alternate" title="The SeqWare Blog" type="application/atom+xml">
<script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-34523087-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script>
</head>
<body>
<div class="wrapper">
<!-- ***** navigation ***** -->
<div class="nav">
<ol>
<li><a href="../../../"><span>Home</span></a></li>
<li><a href="../../../blog/"><span>News</span></a></li>
<li><a href="../../"><span>Documentation</span></a></li>
<li><a href="../../../community/"><span>Community</span></a></li>
<li><a href="../../../partners/"><span>Partners</span></a></li>
<li><a href="../../../about/"><span>About</span></a></li>
</ol>
</div>
<!-- ***** sidebar ***** -->
<div class="side">
<ol>
<li><a href="../../1-introduction/"><span>Introduction to SeqWare</span></a></li>
<li><a href="../../2-installation/"><span>Installation</span></a></li>
<li>
<a href="../"><span>Getting Started</span></a><ol class="toc"><li><a href="#by-the-end-of-these-tutorials">By the End of These Tutorials</a></li></ol>
</li>
<li><a href="../../4-metadb/"><span>SeqWare MetaDB</span></a></li>
<li><a href="../../5-portal/"><span>SeqWare Portal</span></a></li>
<li><a href="../../6-pipeline/"><span>SeqWare Pipeline</span></a></li>
<li><a href="../../7-web-service/"><span>SeqWare Web Service</span></a></li>
<li><a href="../../8-query-engine/"><span>SeqWare Query Engine</span></a></li>
<li><a href="../../9-glossary/"><span>Glossary</span></a></li>
<li><a href="../../10-faq/"><span>Frequently Asked Questions</span></a></li>
<li><a href="../../11-api/"><span>APIs</span></a></li>
</ol>
</div>
<!-- ***** body ***** -->
<div class="body">
<div class="article">
<div class="header">
<h1>Getting Started</h1>
</div>
<p>The majority of this guide is dedicated to walking users and developers through the basics of using SeqWare. We assume that people are most interested in the Pipeline sub-project and focus most of our time on that.  The examples below will all be based on a local VM but the environment on our cloud instance is almost identical, so most of the examples below</p>

<div class="section" id="by-the-end-of-these-tutorials">
<h2>By the End of These Tutorials</h2>

<p>By the end of these tutorials you will:</p>

<ul>
<li>create studies, experiments, and samples in the MetaDB</li>
  <li>run a HelloWorld workflow in Pipeline</li>
  <li>create a new workflow bundle in Pipeline</li>
  <li>install and schedule your new workflow bundle in Pipeline and MetaDB</li>
  <li>generate a report on the outputs of your workflows in Pipeline and Portal</li>
  <li>get an overview of the administration process for SeqWare</li>
  <li>be prepared to move on to more detailed documentation for each sub-project</li>
</ul>
<p>Please launch your local VM and log in as <kbd>seqware</kbd> at this time.</p>
</div>
</div>
</div>
</div>
<!-- ***** footer ***** -->
<div id="footer">
<p>SeqWare ¬© 2007‚Äì2012 Brian O&#8217;Connor. SeqWare is released under the a <a rel="license" href="http://www.gnu.org/licenses/licenses.html">GNU GPL v3</a>. This site is built using the excellent <a href="http://nanoc.stoneship.org/">nanoc</a> tool and example site along with the <a href="http://www.fonts.info/info/press/free-fonts-for-font-face-embedding.htm">Graublau</a> and <a href="http://scripts.sil.org/Gentium">Gentium</a> fonts.</p>
</div>
</body>
</html>
;T;	I"ßThe majority of this guide is dedicated to walking users and developers through the basics of using SeqWare. We assume that people are most interested in the Pipeline sub-project and focus most of our time on that.  The examples below will all be based on a local VM but the environment on our cloud instance is almost identical, so most of the examples below

## By the End of These Tutorials

By the end of these tutorials you will:

* create studies, experiments, and samples in the MetaDB
* run a HelloWorld workflow in Pipeline
* create a new workflow bundle in Pipeline
* install and schedule your new workflow bundle in Pipeline and MetaDB
* generate a report on the outputs of your workflows in Pipeline and Portal
* get an overview of the administration process for SeqWare
* be prepared to move on to more detailed documentation for each sub-project

Please launch your local VM and log in as <kbd>seqware</kbd> at this time.;T;
I"I<p>The majority of this guide is dedicated to walking users and developers through the basics of using SeqWare. We assume that people are most interested in the Pipeline sub-project and focus most of our time on that.  The examples below will all be based on a local VM but the environment on our cloud instance is almost identical, so most of the examples below</p>

<div class="section" id="by-the-end-of-these-tutorials">
<h2>By the End of These Tutorials</h2>

<p>By the end of these tutorials you will:</p>

<ul>
<li>create studies, experiments, and samples in the MetaDB</li>
  <li>run a HelloWorld workflow in Pipeline</li>
  <li>create a new workflow bundle in Pipeline</li>
  <li>install and schedule your new workflow bundle in Pipeline and MetaDB</li>
  <li>generate a report on the outputs of your workflows in Pipeline and Portal</li>
  <li>get an overview of the administration process for SeqWare</li>
  <li>be prepared to move on to more detailed documentation for each sub-project</li>
</ul>
<p>Please launch your local VM and log in as <kbd>seqware</kbd> at this time.</p>
</div>;T;I"<p>The majority of this guide is dedicated to walking users and developers through the basics of using SeqWare. We assume that people are most interested in the Pipeline sub-project and focus most of our time on that.  The examples below will all be based on a local VM but the environment on our cloud instance is almost identical, so most of the examples below</p>

<h2>By the End of These Tutorials</h2>

<p>By the end of these tutorials you will:</p>

<ul>
  <li>create studies, experiments, and samples in the MetaDB</li>
  <li>run a HelloWorld workflow in Pipeline</li>
  <li>create a new workflow bundle in Pipeline</li>
  <li>install and schedule your new workflow bundle in Pipeline and MetaDB</li>
  <li>generate a report on the outputs of your workflows in Pipeline and Portal</li>
  <li>get an overview of the administration process for SeqWare</li>
  <li>be prepared to move on to more detailed documentation for each sub-project</li>
</ul>

<p>Please launch your local VM and log in as <kbd>seqware</kbd> at this time.</p>
;T;@"0/docs/3-getting-started/developer-tutorial/{;{
;I"ıg<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<title>SeqWare ‚Ä∫ Developer Tutorial</title>
<meta content="nanoc 3.4.0" name="generator">
<link href="../../../assets/style-v17.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://feeds.feedburner.com/seqware" rel="alternate" title="The SeqWare Blog" type="application/atom+xml">
<script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-34523087-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script>
</head>
<body>
<div class="wrapper">
<!-- ***** navigation ***** -->
<div class="nav">
<ol>
<li><a href="../../../"><span>Home</span></a></li>
<li><a href="../../../blog/"><span>News</span></a></li>
<li><a href="../../"><span>Documentation</span></a></li>
<li><a href="../../../community/"><span>Community</span></a></li>
<li><a href="../../../partners/"><span>Partners</span></a></li>
<li><a href="../../../about/"><span>About</span></a></li>
</ol>
</div>
<!-- ***** sidebar ***** -->
<div class="side">
<ol>
<li><a href="../../1-introduction/"><span>Introduction to SeqWare</span></a></li>
<li><a href="../../2-installation/"><span>Installation</span></a></li>
<li>
<a href="../"><span>Getting Started</span></a><ol class="toc">
<li><a href="#by-the-end-of-this-tutorial">By the End of This Tutorial</a></li>
<li><a href="#first-steps">First Steps</a></li>
<li><a href="#overview-of-workflow-development-using-the-vm">Overview of Workflow Development Using the VM</a></li>
<li><a href="#the-sample-workflow-bundle">The Sample Workflow Bundle</a></li>
<li><a href="#creating-a-new-worlflow-bundle">Creating a New Worlflow Bundle</a></li>
<li><a href="#test-the-myhelloworld-workflow-bundle-on-the-vm">Test the MyHelloWorld Workflow Bundle on the VM</a></li>
<li><a href="#packaging-and-installing-the-myhelloworld-locally">Packaging and Installing the MyHelloWorld Locally</a></li>
<li><a href="#next-steps">Next Steps</a></li>
</ol>
</li>
<li><a href="../../4-metadb/"><span>SeqWare MetaDB</span></a></li>
<li><a href="../../5-portal/"><span>SeqWare Portal</span></a></li>
<li><a href="../../6-pipeline/"><span>SeqWare Pipeline</span></a></li>
<li><a href="../../7-web-service/"><span>SeqWare Web Service</span></a></li>
<li><a href="../../8-query-engine/"><span>SeqWare Query Engine</span></a></li>
<li><a href="../../9-glossary/"><span>Glossary</span></a></li>
<li><a href="../../10-faq/"><span>Frequently Asked Questions</span></a></li>
<li><a href="../../11-api/"><span>APIs</span></a></li>
</ol>
</div>
<!-- ***** body ***** -->
<div class="body">
<div class="article">
<div class="header">
<h1>Developer Tutorial</h1>
</div>
<p>This guide picks up where the <a href="../user-tutorial/">User Tutorial</a> left off. In that previous guide we showed you how to start up your local VM, create studies, experiments, and samples, associate an input file with a sample, and then launch a workflow to process that file.  This process is the same generic process we use at OICR to analyze samples from fastq to, eventually, annotated variants.  In this production system the workflows are fairly complex (they include branching and looping) and we string multiple worklfows together (output of one as input for the next) using <kbd>deciders</kbd>.</p>

<p>The next step presented in this tutorial is to create a workflow of your own based on the HelloWorld that comes bundled with the VM.  In theory you could use either a local VM or an Amazon instance to follow the tutorial below but in our case we will base it on the local VM.</p>

<div class="section" id="by-the-end-of-this-tutorial">
<h2>By the End of This Tutorial</h2>

<p>By the end of these tutorials you will:</p>

<ul>
<li>create a new SeqWare Pipeline workflow bundle based on HelloWorld</li>
  <li>package, install, schedule, and run your new workflow bundle in Pipeline and MetaDB</li>
  <li>generate a report on the outputs of your workflows in Pipeline and Portal</li>
  <li>be prepared to move on to more detailed documentation for each sub-project</li>
</ul>
</div>
<div class="section" id="first-steps">
<h2>First Steps</h2>

<p>Please launch your local VM in VirtualBox and login as user <kbd>seqware</kbd>, password <kbd>seqware</kbd> at this time. Click on the ‚ÄúSeqWare Directory‚Äù link on the desktop which will open a terminal to the location where we installed the SeqWare tools.</p>

</div>
<div class="section" id="overview-of-workflow-development-using-the-vm">
<h2>Overview of Workflow Development Using the VM</h2>

<p>You should be in the ~seqware/SeqWare directory now, this is
the working directory.  Notice there is a jar file here and also two important
directories: provisioned-bundles which contains unzipped workflow bundles and
is where you will work on new bundles and released-bundles (SW_BUNDLE_REPO_DIR
in the config) which contains zip versions of the workflows that you create
when you package up these bundles and install them locally or on the cloud. You
will work in provisioned-bundles, copying a template HelloWorld workflow to a
new bundle that you can modify You will also test your bundles from there as
well. Once you finish with the new bundle you will package and install it via
the web service (to either the remote cloud VM or local VM). Once
installed you can use the workflow scheduling tools you have used before to
trigger workflows (on the cloud or the local VM), monitor them, and get data
back.</p>

</div>
<div class="section" id="the-sample-workflow-bundle">
<h2>The Sample Workflow Bundle</h2>

<p>Go into the bundle directory so you can look around:</p>

<pre> cd provisioned-bundles/Workflow_Bundle_HelloWorldWorkflow_1.0_SeqWare_0.12.5/Workflow_Bundle_helloworld/1.0/</pre>

<p>You
should look at three files in particular.  The workflows/workflow.ftl and the
config/workflow.ini.  The first is the workflow script file written in an XML
file format from the Pegasus project.  It is templatized using FreeMarker so you
can replace variables using values from the config file and also write simple
macros and control blocks.  In this workflow example you see 4 key jobs.  The
first (IDPRE1) is the job that copies the input file specified either from S3
or another location.  The second job (ID001) is the meat of the workflow, it is
simply calling a script in the bin directory that echos a file and also writes
‚ÄúHello World‚Äù to the output.  The third and fourth jobs are related.  The first
(IDPOST1) copies the output file to the final destination while the second
records the output file back to the metadatabase.</p>

<p>Here is the example workflow XML:</p>

<pre>
<code class="language-text">&lt;#assign workflow_name = "Workflow_Bundle_helloworld/1.0"/&gt;

&lt;#macro requires_dir dir&gt;
  /${workflow_bundle_dir}/${workflow_name}/bin/globus/pegasus-dirmanager -c -d ${dir}
&lt;/#macro&gt;

&lt;#-- workflow and seqware versions --&gt;
&lt;#assign seqware_version = "0.12.5"/&gt;
&lt;#assign workflow_version = "1.0"/&gt;
&lt;#assign java_version = "1.6.0"/&gt;
&lt;#assign perl_version = "5.14.1"/&gt;
&lt;#-- make sure it is a string --&gt;
&lt;#assign parentAccessions = "${parent_accessions}"/&gt;
&lt;#-- Set relative paths for files within the run--&gt;
&lt;#assign bin_dir = "bin"/&gt;
&lt;#assign data_dir = "data"/&gt;
&lt;#assign lib_dir = "lib"/&gt;


&lt;#-- Set the basename from input file name --&gt;
&lt;#list input_file?split("/") as tmp&gt;
  &lt;#assign basename = tmp/&gt;
&lt;/#list&gt;


   &lt;#list input_file?split("/") as tmp&gt;
     &lt;#assign basename = tmp/&gt;
   &lt;/#list&gt;
   
  
      -Xmx1000M
      -classpath ${workflow_bundle_dir}/${workflow_name}/classes:${workflow_bundle_dir}/${workflow_name}/lib/seqware-pipeline-${seqware_version}-full.jar
      net.sourceforge.seqware.pipeline.runner.Runner
      --no-metadata      
      --module net.sourceforge.seqware.pipeline.modules.utilities.ProvisionFiles
      --
      --input-file ${input_file}
      --output-dir ${data_dir}
    condor12000
  &lt;#assign algo = "job1"/&gt;
  
      -Xmx1000M
      -classpath ${workflow_bundle_dir}/${workflow_name}/bin:${workflow_bundle_dir}/${workflow_name}/lib/seqware-pipeline-${seqware_version}-full.jar
      net.sourceforge.seqware.pipeline.runner.Runner
      --${metadata}
      &lt;#list parentAccessions?split(",") as pa&gt;
      --metadata-parent-accession ${pa}
      &lt;/#list&gt;
      --metadata-processing-accession-file ${data_dir}/${algo}_accession
      --metadata-output-file-prefix ${output_prefix}
      --metadata-workflow-run-accession ${workflow_run_accession}
      --module net.sourceforge.seqware.pipeline.modules.GenericCommandRunner
      --
      --gcr-command ${workflow_bundle_dir}/${workflow_name}/bin/hello.sh ${data_dir}/${basename} ${data_dir}/${basename}.hello
    condor12000
    &lt;@requires_dir "${data_dir}"/&gt;
  
      -Xmx1000M
      -classpath ${workflow_bundle_dir}/${workflow_name}/classes:${workflow_bundle_dir}/${workflow_name}/lib/seqware-pipeline-${seqware_version}-full.jar
      net.sourceforge.seqware.pipeline.runner.Runner
      --no-metadata      
      --module net.sourceforge.seqware.pipeline.modules.utilities.ProvisionFiles
      --
      --force-copy
      --input-file ${data_dir}/${basename}.hello
      --output-dir ${output_prefix}${output_dir}/seqware-${seqware_version}_HelloWorld-${workflow_version}/${random}
    condor12000
  &lt;#assign algo = "jobpost2"/&gt;
  
      -Xmx1000M
      -classpath ${workflow_bundle_dir}/${workflow_name}/classes:${workflow_bundle_dir}/${workflow_name}/lib/seqware-pipeline-${seqware_version}-full.jar
      net.sourceforge.seqware.pipeline.runner.Runner
      --${metadata}
      &lt;#list parentAccessions?split(",") as pa&gt;
      --metadata-parent-accession ${pa}
      &lt;/#list&gt;
      --metadata-processing-accession-file ${data_dir}/${algo}_accession
      --metadata-output-file-prefix ${output_prefix}
      --metadata-workflow-run-accession ${workflow_run_accession}
      --module net.sourceforge.seqware.pipeline.modules.GenericMetadataSaver
      --
      --gms-algorithm ComprehensiveMitochondrialGenomeAnalysisSummary
      --gms-suppress-output-file-check
      --gms-output-file HelloWorld::text/plain::${output_dir}/seqware-${seqware_version}_HelloWorld-${workflow_version}/${random}/${basename}.hello
    condor12000</code>
</pre>

<p>The ini config file is the place where you define 1) what parameters the
workflow will take (via the Portal web app or Web Service) and 2) what the
default values should be.  Often times only a small handful of variables need
to be exposed, the rest can be hidden from the Porta/Web Service (display=F)
and just the default value used.</p>

<p>Looking at:</p>

<p>/home/seqware/SeqWare/provisioned-bundles/Workflow_Bundle_HelloWorldWorkflow<em>1.0_SeqWare</em>0.12.5/Workflow_Bundle_helloworld/1.0/config/workflow.ini</p>

<pre>
# key=input_file:type=file:display=F:file_meta_type=text/plain
input_file=${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/data/input.txt
# this is just a comment, the output directory is a conventions and used in many workflows to specify a relative output path
output_dir=seqware-results
# the output_prefix is a convension and used to specify the root of the absolute output path or an S3 bucket name 
# you should pick a path that is available on all custer nodes and can be written by your user
# ends in a "/"
output_prefix=./provisioned/
</pre>

<p>The final file to look at is metadata.xml which is the place where workflows included in a bundle are declared.  This is the place where you would rename a workflow, update its version string, etc.</p>

<p>Look at: </p>

<pre> /home/seqware/SeqWare/provisioned-bundles/Workflow_Bundle_HelloWorldWorkflow_1.0_SeqWare_0.12.5/Workflow_Bundle_helloworld/1.0/metadata.xml</pre>

<pre>
<bundle version="1.0"><workflow name="HelloWorldWorkflow" version="1.0"><description>This is just a simple HelloWorld showing you how to create a very basic workflow.</description><test command="java -jar ${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/lib/seqware-pipeline-0.12.5.jar --plugin net.sourceforge.seqware.pipeline.plugins.WorkflowLauncher -- --no-metadata --provisioned-bundle-dir ${workflow_bundle_dir} --workflow HelloWorldWorkflow --version 1.0 --ini-files ${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/config/workflow.ini "></test><workflow_command command="java -jar ${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/lib/seqware-pipeline-0.12.5.jar --plugin net.sourceforge.seqware.pipeline.plugins.WorkflowLauncher -- --bundle ${workflow_bundle_dir} --workflow HelloWorldWorkflow --version 1.0 "></workflow_command><workflow_template path="${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/workflows/workflow.ftl"></workflow_template><config path="${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/config/workflow.ini"></config><build command="ant -f ${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/build.xml"></build><requirements compute="single" memory="20M" network="local"></requirements></workflow></bundle></pre>

<p>This is only a brief introduction to the workflow bundle process.  Take a look at <a href="http://sourceforge.net/apps/mediawiki/seqware/index.php?title=How_to_Write_a_Bundled_Workflow">How to Write a Workflow Bundle</a> for extensive details on the workflow development process.  There is also information on this site on using Maven to create workflow bundles using the excellent archetype system.  And we also are prototyping a workflow language based on Java. These are experimental but could be very useful. Eventually that documentation will be migrated to this guide.</p>

</div>
<div class="section" id="creating-a-new-worlflow-bundle">
<h2>Creating a New Worlflow Bundle</h2>

<p>Now that you have seen the components for a bundle the next step is to create your own bundle based on HelloWorld.  We are only going to make superficial changes here but would expect that you would make much more radical changes if you were creating a new workflow.  While you can use the ‚Äúcopy and hack‚Äù method, in the future we will recommend the archetype approach.</p>

<p>First you need to change directories to the workflow and create a duplicate:</p>

<pre>
cd /home/seqware/SeqWare/provisioned-bundles
cp -r Workflow_Bundle_HelloWorldWorkflow_1.0_SeqWare_0.12.5 Workflow_Bundle_MyHelloWorldWorkflow_1.0_SeqWare_0.12.5
</pre>

<p>Now modify the metadata.xml, change the name of the workflow here:</p>

<pre>
<bundle version="1.0"><workflow name="MyHelloWorldWorkflow" version="1.0"><description>This is just a simple HelloWorld showing you how to create a very basic workflow.</description><test command="java -jar ${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/lib/seqware-pipeline-0.12.5.jar --plugin net.sourceforge.seqware.pipeline.plugins.WorkflowLauncher -- --no-metadata --provisioned-bundle-dir ${workflow_bundle_dir} --workflow MyHelloWorldWorkflow --version 1.0 --ini-files ${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/config/workflow.ini "></test><workflow_command command="java -jar ${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/lib/seqware-pipeline-0.12.5.jar --plugin net.sourceforge.seqware.pipeline.plugins.WorkflowLauncher -- --bundle ${workflow_bundle_dir} --workflow MyHelloWorldWorkflow --version 1.0 "></workflow_command><workflow_template path="${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/workflows/workflow.ftl"></workflow_template><config path="${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/config/workflow.ini"></config><build command="ant -f ${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/build.xml"></build><requirements compute="single" memory="20M" network="local"></requirements></workflow></bundle></pre>

<p>Next, change the name at the top of the workflow bundle:</p>

<pre>
xmlns="http://pegasus.isi.edu/schema/DAX" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://pegasus.isi.edu/schema/DAX http://pegasus.isi.edu/schema/dax-3.2.xsd" version="3.2" count="1" index="0" name="MyHelloWorldWorkflow"
...
</pre>

<p>That should be it for this example. More radical changes would, of course, be made in a real-world workflow.</p>

</div>
<div class="section" id="test-the-myhelloworld-workflow-bundle-on-the-vm">
<h2>Test the MyHelloWorld Workflow Bundle on the VM</h2>

<p>At this point you should be in the new workflow directory:</p>

<pre>
/home/seqware/SeqWare/provisioned-bundles/Workflow_Bundle_MyHelloWorldWorkflow_1.0_SeqWare_0.12.5/Workflow_Bundle_helloworld/1.0
</pre>

<p>This is where you will execute the test command to try to run the workflow on the local VM with sample default data.  You will repeat this process many times in your new bundle development process as you tweak and change your workflows, debugging as you go.</p>

<p class="warning"><strong>Tip:</strong> if someone gives you a zipped workflow bundle use a command similar to the below to unzip it to your /home/seqware/SeqWare/provisioned-bundles/ directory:

</p>
<pre>
java -jar ~/SeqWare/seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.BundleManager -- --bundle released-bundles/Workflow_Bundle_Someone_Gave_Me.zip --list
</pre>

This automatically unzips the bundle to the provisioned-bundles directory and then lists out the contents.
 
<pre>
# sample output
Running Plugin: net.sourceforge.seqware.pipeline.plugins.BundleManager
Setting Up Plugin: net.sourceforge.seqware.pipeline.plugins.BundleManager@a94884d
TEMPLATE PATH: ${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/workflows/workflow.ftl
List Workflows:
 Workflow:
  Name : HelloWorldWorkflow
  Version : 1.0
  Description : This is just a simple HelloWorld showing you how to create a very basic workflow.
  Test Command: java -jar ${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/lib/seqware-pipeline-0.12.5.jar --plugin net.sourceforge.seqware.pipeline.plugins.WorkflowLauncher -- --no-metadata --provisioned-bundle-dir ${workflow_bundle_dir} --workflow HelloWorldWorkflow --version 1.0 --ini-files ${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/config/workflow.ini
  Template Path:${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/workflows/workflow.ftl
  Config Path:${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/config/workflow.ini
  Requirements Compute: single Memory: 20M Network: local

</pre>


<p>Now in this example below I am just changing into the MyHelloWorld workflow directory and using the WorkflowLauncher to launch the workflow with the sample ini file included.</p>

<pre>
# cd into the right directory
cd /home/seqware/SeqWare/provisioned-bundles/Workflow_Bundle_MyHelloWorldWorkflow_1.0_SeqWare_0.12.5
 
# and launch the test
java -jar ~/SeqWare/seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.WorkflowLauncher -- --no-metadata --provisioned-bundle-dir `pwd` --workflow MyHelloWorldWorkflow --version 1.0 --ini-files Workflow_Bundle_helloworld/1.0/config/workflow.ini --wait
</pre>

<p>This should work just fine, it will give you status information and gradually complete the workflow.  If something goes wrong you should see status messages indicating what happened.  These will tell you the particular steps with the problem so you can look at the workflow file to debug.  Here is the sample output when I ran the command:</p>

<pre>
TEMPLATE PATH: ${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/workflows/workflow.ftl
TEMPLATE FILE: /home/seqware/SeqWare/provisioned-bundles/Workflow_Bundle_HelloWorldWorkflow_1.0_SeqWare_0.12.5/Workflow_Bundle_helloworld/1.0/workflows/workflow.ftl
INI FILES: Workflow_Bundle_helloworld/1.0/config/workflow.ini
CREATING DAX IN: /tmp/dax88379466867104723094914822612050
  INI FILE: Workflow_Bundle_helloworld/1.0/config/workflow.ini
  KEY: parent-accessions VALUE: 0
  KEY: parent_accessions VALUE: 0
  KEY: output_prefix VALUE: ./provisioned/
  KEY: output_dir VALUE: seqware-results
  KEY: workflow_run_accession VALUE: 0
  KEY: parent_accession VALUE: 0
  KEY: input_file VALUE: ${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/data/input.txt
  KEY: workflow-run-accession VALUE: 0
  KEY: seqware_cluster VALUE: seqwarevm
  KEY: metadata VALUE: no-metadata
  KEY: workflow_bundle_dir VALUE: /home/seqware/SeqWare/provisioned-bundles/Workflow_Bundle_HelloWorldWorkflow_1.0_SeqWare_0.12.5
SUBMITTING TO PEGASUS: pegasus-plan -Dpegasus.user.properties=/home/seqware/.seqware/pegasus/properties --dax /tmp/dax88379466867104723094914822612050 --dir /home/seqware/SeqWare/pegasus-dax -o seqwarevm --force --submit -s seqwarevm
PEGASUS STATUS COMMAND: pegasus-status -l /home/seqware/SeqWare/pegasus-dax/seqware/pegasus/HelloWorldWorkflow/run0004
MONITORING PEGASUS STATUS:
RUNNING: step 1 of 5 (20%)
RUNNING: step 2 of 5 (40%)
RUNNING: step 3 of 5 (60%)
RUNNING: step 4 of 5 (80%)
WORKFLOW COMPLETED SUCCESSFULLY!
</pre>

</div>
<div class="section" id="packaging-and-installing-the-myhelloworld-locally">
<h2>Packaging and Installing the MyHelloWorld Locally</h2>

<p>Assuming the workflow above worked fine the next step is to install it locally,
this means it will be inserted into the MetaDB via the locally running web
service.  During this process it will zip up the workflow bundle and put it
into your released-bundles directory. Once you have the zip file you can share it with
other users and, in the future, upload it to an AppStore to make it even easier to share.</p>

<p>Here is an example showing how this
process works on the VM and what is happing in the database and your
released-bundles directory as you do this.  You may want to delete the zip file
that is in the released-bundles directory before you do this step below (or back
it up somewhere first).  To connect to the database in the example below you
can issue the following command in the terminal:</p>

<pre> "psql -U seqware -W
seqware_meta_db"</pre>

<p>‚Ä¶with password seqware.</p>

<pre>
cd /home/seqware/SeqWare
java -jar ~/SeqWare/seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.BundleManager -- --bundle /home/seqware/SeqWare/provisioned-bundles/Workflow_Bundle_MyHelloWorldWorkflow_1.0_SeqWare_0.12.5 --install
</pre>

<p>What happens here is the /home/seqware/SeqWare/provisioned-bundles/Workflow_Bundle_MyHelloWorldWorkflow<em>1.0_SeqWare</em>0.12.5 directory is zip‚Äôd up to your released-bundles directory and the metadata about the workflow is saved to the database.</p>

<p>The output of this program:</p>

<pre>
# the output
Installing Bundle
Bundle: /home/seqware/SeqWare/provisioned-bundles/Workflow_Bundle_MyHelloWorldWorkflow_1.0_SeqWare_0.12.5
Now packaging /home/seqware/SeqWare/provisioned-bundles/Workflow_Bundle_MyHelloWorldWorkflow_1.0_SeqWare_0.12.5 to a zip file and transferring to the directory: /home/seqware/SeqWare/released-bundles Please be aware, this process can take hours if the bundle is many GB in size.
...
Bundle Has Been Installed to the MetaDB and Provisioned to /home/seqware/SeqWare/provisioned-bundles/Workflow_Bundle_MyHelloWorldWorkflow_1.0_SeqWare_0.12.5!
</pre>

<p>Now notice two things, it is now in the local DB via the web service.</p>

<pre>
seqware_meta_db=# select * from workflow order by create_tstmp desc limit 1;
-[ RECORD 1 ]-------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
workflow_id               | 3
name                      | MyHelloWorldWorkflow
description               | This is just a simple HelloWorld showing you how to create a very basic workflow.
input_algorithm           |
version                   | 1.0
seqware_version           |
owner_id                  | 1
base_ini_file             | ${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/config/workflow.ini
cmd                       | java -jar ${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/lib/seqware-pipeline-0.12.5.jar --plugin net.sourceforge.seqware.pipeline.plugins.WorkflowLauncher -- --bundle ${workflow_bundle_dir} --workflow MyHelloWorldWorkflow --version 1.0
current_working_dir       | /home/seqware/SeqWare/provisioned-bundles/Workflow_Bundle_MyHelloWorldWorkflow_1.0_SeqWare_0.12.5
host                      |
username                  |
workflow_template         | ${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/workflows/workflow.ftl
create_tstmp              | 2012-08-15 01:20:22.457
update_tstmp              | 2012-08-15 01:20:22.505
sw_accession              | 6
permanent_bundle_location | /home/seqware/SeqWare/released-bundles/Workflow_Bundle_MyHelloWorldWorkflow_1.0_SeqWare_0.12.5.zip
</pre>

<p>And also notice you now have a zip file for this workflow:</p>

<pre>
cd /home/seqware/SeqWare/released-bundles
ls -lth
total 50M
-rw-rw-r-- 1 seqware seqware 50M Aug 15 01:20 Workflow_Bundle_MyHelloWorldWorkflow_1.0_SeqWare_0.12.5.zip
</pre>

<p>Now that this is installed you can trigger it just like you have done in the <a href="../user-tutorial/">User Tutorial</a> using the web service previously.</p>

</div>
<div class="section" id="next-steps">
<h2>Next Steps</h2>

<p>The guide <a href="http://sourceforge.net/apps/mediawiki/seqware/index.php?title=How_to_Write_a_Bundled_Workflow">How to Write a Workflow Bundle</a> on the public SeqWare project wiki goes into very detailed information about workflow bundles, how to create them, the syntax they use, and other key information. In the near future this will be migrated to this site but the directions there should still be up to date.</p>
</div>
</div>
</div>
</div>
<!-- ***** footer ***** -->
<div id="footer">
<p>SeqWare ¬© 2007‚Äì2012 Brian O&#8217;Connor. SeqWare is released under the a <a rel="license" href="http://www.gnu.org/licenses/licenses.html">GNU GPL v3</a>. This site is built using the excellent <a href="http://nanoc.stoneship.org/">nanoc</a> tool and example site along with the <a href="http://www.fonts.info/info/press/free-fonts-for-font-face-embedding.htm">Graublau</a> and <a href="http://scripts.sil.org/Gentium">Gentium</a> fonts.</p>
</div>
</body>
</html>
;T;	I"6cThis guide picks up where the [User Tutorial](/docs/3-getting-started/user-tutorial/) left off. In that previous guide we showed you how to start up your local VM, create studies, experiments, and samples, associate an input file with a sample, and then launch a workflow to process that file.  This process is the same generic process we use at OICR to analyze samples from fastq to, eventually, annotated variants.  In this production system the workflows are fairly complex (they include branching and looping) and we string multiple worklfows together (output of one as input for the next) using <kbd>deciders</kbd>.

The next step presented in this tutorial is to create a workflow of your own based on the HelloWorld that comes bundled with the VM.  In theory you could use either a local VM or an Amazon instance to follow the tutorial below but in our case we will base it on the local VM.

## By the End of This Tutorial

By the end of these tutorials you will:

* create a new SeqWare Pipeline workflow bundle based on HelloWorld
* package, install, schedule, and run your new workflow bundle in Pipeline and MetaDB
* generate a report on the outputs of your workflows in Pipeline and Portal
* be prepared to move on to more detailed documentation for each sub-project

## First Steps

Please launch your local VM in VirtualBox and login as user <kbd>seqware</kbd>, password <kbd>seqware</kbd> at this time. Click on the "SeqWare Directory" link on the desktop which will open a terminal to the location where we installed the SeqWare tools.

## Overview of Workflow Development Using the VM

You should be in the ~seqware/SeqWare directory now, this is
the working directory.  Notice there is a jar file here and also two important
directories: provisioned-bundles which contains unzipped workflow bundles and
is where you will work on new bundles and released-bundles (SW_BUNDLE_REPO_DIR
in the config) which contains zip versions of the workflows that you create
when you package up these bundles and install them locally or on the cloud. You
will work in provisioned-bundles, copying a template HelloWorld workflow to a
new bundle that you can modify You will also test your bundles from there as
well. Once you finish with the new bundle you will package and install it via
the web service (to either the remote cloud VM or local VM). Once
installed you can use the workflow scheduling tools you have used before to
trigger workflows (on the cloud or the local VM), monitor them, and get data
back.

## The Sample Workflow Bundle

Go into the bundle directory so you can look around:

<pre> cd provisioned-bundles/Workflow_Bundle_HelloWorldWorkflow_1.0_SeqWare_0.12.5/Workflow_Bundle_helloworld/1.0/</pre>

You
should look at three files in particular.  The workflows/workflow.ftl and the
config/workflow.ini.  The first is the workflow script file written in an XML
file format from the Pegasus project.  It is templatized using FreeMarker so you
can replace variables using values from the config file and also write simple
macros and control blocks.  In this workflow example you see 4 key jobs.  The
first (IDPRE1) is the job that copies the input file specified either from S3
or another location.  The second job (ID001) is the meat of the workflow, it is
simply calling a script in the bin directory that echos a file and also writes
"Hello World" to the output.  The third and fourth jobs are related.  The first
(IDPOST1) copies the output file to the final destination while the second
records the output file back to the metadatabase.

Here is the example workflow XML:

<pre>
<code class="language-text">
<?xml version="1.0" encoding="UTF-8"?>
<adag xmlns="http://pegasus.isi.edu/schema/DAX" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://pegasus.isi.edu/schema/DAX http://pegasus.isi.edu/schema/dax-3.2.xsd" version="3.2" count="1" index="0" name="HelloWorldWorkflow">
<!--
This is a sample HelloWorld workflow. Use it as a template to build your own workflow.
-->
<!-- the directory structure inside the bundle -->
<#assign workflow_name = "Workflow_Bundle_helloworld/1.0"/>
<!-- MACRO: to create a mkdir pre job and stage mkdir binary -->
<#macro requires_dir dir>
  <profile namespace="env" key="GRIDSTART_PREJOB">/${workflow_bundle_dir}/${workflow_name}/bin/globus/pegasus-dirmanager -c -d ${dir}</profile>
</#macro>
<!-- VARS -->
<#-- workflow and seqware versions -->
<#assign seqware_version = "0.12.5"/>
<#assign workflow_version = "1.0"/>
<#assign java_version = "1.6.0"/>
<#assign perl_version = "5.14.1"/>
<#-- make sure it is a string -->
<#assign parentAccessions = "${parent_accessions}"/>
<#-- Set relative paths for files within the run-->
<#assign bin_dir = "bin"/>
<#assign data_dir = "data"/>
<#assign lib_dir = "lib"/>

<!-- BASE FILE NAME -->
<#-- Set the basename from input file name -->
<#list input_file?split("/") as tmp>
  <#assign basename = tmp/>
</#list>
<!-- EXECUTABLES INCLUDED WITH BUNDLE -->
<executable namespace="seqware" name="java" version="${java_version}" 
            arch="x86_64" os="linux" installed="true" >
  <!-- the path to the tool that actually runs a given module -->
  <pfn url="file:///${workflow_bundle_dir}/${workflow_name}/bin/jre1.6.0_29/bin/java" site="${seqware_cluster}"/>
</executable>
<executable namespace="seqware" name="perl" version="${perl_version}" 
            arch="x86_64" os="linux" installed="true" >
  <!-- the path to the tool that actually runs a given module -->
  <pfn url="file:///${workflow_bundle_dir}/${workflow_name}/bin/perl-5.14.1/perl" site="${seqware_cluster}"/>
</executable>
<executable namespace="pegasus" name="dirmanager" version="1" 
            arch="x86_64" os="linux" installed="true" >
  <!-- the path to the tool that actually runs a given module -->
  <pfn url="file:///${workflow_bundle_dir}/${workflow_name}/bin/globus/pegasus-dirmanager" site="${seqware_cluster}"/>     
</executable>

<!-- Part 1: Define all jobs -->
   <!-- find input base file name -->
   <#list input_file?split("/") as tmp>
     <#assign basename = tmp/>
   </#list>
   <!-- Provision input file, make link if local file, copy from HTTP/S3 otherwise -->
  <job id="IDPRE1" namespace="seqware" name="java" version="${java_version}">
    <argument>
      -Xmx1000M
      -classpath ${workflow_bundle_dir}/${workflow_name}/classes:${workflow_bundle_dir}/${workflow_name}/lib/seqware-pipeline-${seqware_version}-full.jar
      net.sourceforge.seqware.pipeline.runner.Runner
      --no-metadata      
      --module net.sourceforge.seqware.pipeline.modules.utilities.ProvisionFiles
      --
      --input-file ${input_file}
      --output-dir ${data_dir}
    </argument>
    <profile namespace="globus" key="jobtype">condor</profile>
    <profile namespace="globus" key="count">1</profile>
    <profile namespace="globus" key="maxmemory">2000</profile>
  </job>
  <!-- HelloWorld job, just calls a simple script. -->
  <#assign algo = "job1"/>
  <job id="ID001" namespace="seqware" name="java" version="${java_version}">
    <argument>
      -Xmx1000M
      -classpath ${workflow_bundle_dir}/${workflow_name}/bin:${workflow_bundle_dir}/${workflow_name}/lib/seqware-pipeline-${seqware_version}-full.jar
      net.sourceforge.seqware.pipeline.runner.Runner
      --${metadata}
      <#list parentAccessions?split(",") as pa>
      --metadata-parent-accession ${pa}
      </#list>
      --metadata-processing-accession-file ${data_dir}/${algo}_accession
      --metadata-output-file-prefix ${output_prefix}
      --metadata-workflow-run-accession ${workflow_run_accession}
      --module net.sourceforge.seqware.pipeline.modules.GenericCommandRunner
      --
      --gcr-command ${workflow_bundle_dir}/${workflow_name}/bin/hello.sh ${data_dir}/${basename} ${data_dir}/${basename}.hello
    </argument>
    <profile namespace="globus" key="jobtype">condor</profile>
    <profile namespace="globus" key="count">1</profile>
    <profile namespace="globus" key="maxmemory">2000</profile>
    <!-- Prejob to make output directory -->
    <@requires_dir "${data_dir}"/>
  </job>
  <!-- Provision output file to either local dir or S3 -->
  <job id="IDPOST1" namespace="seqware" name="java" version="${java_version}">
    <argument>
      -Xmx1000M
      -classpath ${workflow_bundle_dir}/${workflow_name}/classes:${workflow_bundle_dir}/${workflow_name}/lib/seqware-pipeline-${seqware_version}-full.jar
      net.sourceforge.seqware.pipeline.runner.Runner
      --no-metadata      
      --module net.sourceforge.seqware.pipeline.modules.utilities.ProvisionFiles
      --
      --force-copy
      --input-file ${data_dir}/${basename}.hello
      --output-dir ${output_prefix}${output_dir}/seqware-${seqware_version}_HelloWorld-${workflow_version}/${random}
    </argument>
    <profile namespace="globus" key="jobtype">condor</profile>
    <profile namespace="globus" key="count">1</profile>
    <profile namespace="globus" key="maxmemory">2000</profile>
  </job>
  <!-- Save output locations to MetaDB -->
  <#assign algo = "jobpost2"/>
  <job id="IDPOST2" namespace="seqware" name="java" version="${java_version}">
    <argument>
      -Xmx1000M
      -classpath ${workflow_bundle_dir}/${workflow_name}/classes:${workflow_bundle_dir}/${workflow_name}/lib/seqware-pipeline-${seqware_version}-full.jar
      net.sourceforge.seqware.pipeline.runner.Runner
      --${metadata}
      <#list parentAccessions?split(",") as pa>
      --metadata-parent-accession ${pa}
      </#list>
      --metadata-processing-accession-file ${data_dir}/${algo}_accession
      --metadata-output-file-prefix ${output_prefix}
      --metadata-workflow-run-accession ${workflow_run_accession}
      --module net.sourceforge.seqware.pipeline.modules.GenericMetadataSaver
      --
      --gms-algorithm ComprehensiveMitochondrialGenomeAnalysisSummary
      --gms-suppress-output-file-check
      --gms-output-file HelloWorld::text/plain::${output_dir}/seqware-${seqware_version}_HelloWorld-${workflow_version}/${random}/${basename}.hello
    </argument>
    <profile namespace="globus" key="jobtype">condor</profile>
    <profile namespace="globus" key="count">1</profile>
    <profile namespace="globus" key="maxmemory">2000</profile>
  </job>

<!-- End of Job Definitions -->
<!-- Part 2: list of control-flow dependencies -->
  <!-- Define task group dependencies -->
  <child ref="ID001">
    <parent ref="IDPRE1"/>
  </child>
  <child ref="IDPOST1">
    <parent ref="ID001"/>
  </child>
  <child ref="IDPOST2">
    <parent ref="IDPOST1"/>
  </child>
<!-- End of Dependencies -->
</adag>
</code>
</pre>

The ini config file is the place where you define 1) what parameters the
workflow will take (via the Portal web app or Web Service) and 2) what the
default values should be.  Often times only a small handful of variables need
to be exposed, the rest can be hidden from the Porta/Web Service (display=F)
and just the default value used.

Looking at:

 /home/seqware/SeqWare/provisioned-bundles/Workflow_Bundle_HelloWorldWorkflow_1.0_SeqWare_0.12.5/Workflow_Bundle_helloworld/1.0/config/workflow.ini

<pre>
# key=input_file:type=file:display=F:file_meta_type=text/plain
input_file=${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/data/input.txt
# this is just a comment, the output directory is a conventions and used in many workflows to specify a relative output path
output_dir=seqware-results
# the output_prefix is a convension and used to specify the root of the absolute output path or an S3 bucket name 
# you should pick a path that is available on all custer nodes and can be written by your user
# ends in a "/"
output_prefix=./provisioned/
</pre>

The final file to look at is metadata.xml which is the place where workflows included in a bundle are declared.  This is the place where you would rename a workflow, update its version string, etc.

Look at: 

<pre> /home/seqware/SeqWare/provisioned-bundles/Workflow_Bundle_HelloWorldWorkflow_1.0_SeqWare_0.12.5/Workflow_Bundle_helloworld/1.0/metadata.xml</pre>

<pre>
<bundle version="1.0">
  <workflow name="HelloWorldWorkflow" version="1.0">
    <description>This is just a simple HelloWorld showing you how to create a very basic workflow.</description>
    <test command="java -jar ${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/lib/seqware-pipeline-0.12.5.jar --plugin net.sourceforge.seqware.pipeline.plugins.WorkflowLauncher -- --no-metadata --provisioned-bundle-dir ${workflow_bundle_dir} --workflow HelloWorldWorkflow --version 1.0 --ini-files ${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/config/workflow.ini "/>
    <workflow_command command="java -jar ${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/lib/seqware-pipeline-0.12.5.jar --plugin net.sourceforge.seqware.pipeline.plugins.WorkflowLauncher -- --bundle ${workflow_bundle_dir} --workflow HelloWorldWorkflow --version 1.0 "/>
    <workflow_template path="${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/workflows/workflow.ftl"/>
    <config path="${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/config/workflow.ini"/>
    <build command="ant -f ${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/build.xml"/>
    <requirements compute="single" memory="20M" network="local"/>
  </workflow>
</bundle>
</pre>

This is only a brief introduction to the workflow bundle process.  Take a look at [How to Write a Workflow Bundle](http://sourceforge.net/apps/mediawiki/seqware/index.php?title=How_to_Write_a_Bundled_Workflow) for extensive details on the workflow development process.  There is also information on this site on using Maven to create workflow bundles using the excellent archetype system.  And we also are prototyping a workflow language based on Java. These are experimental but could be very useful. Eventually that documentation will be migrated to this guide.

## Creating a New Worlflow Bundle

Now that you have seen the components for a bundle the next step is to create your own bundle based on HelloWorld.  We are only going to make superficial changes here but would expect that you would make much more radical changes if you were creating a new workflow.  While you can use the "copy and hack" method, in the future we will recommend the archetype approach.

First you need to change directories to the workflow and create a duplicate:

<pre>
cd /home/seqware/SeqWare/provisioned-bundles
cp -r Workflow_Bundle_HelloWorldWorkflow_1.0_SeqWare_0.12.5 Workflow_Bundle_MyHelloWorldWorkflow_1.0_SeqWare_0.12.5
</pre>

Now modify the metadata.xml, change the name of the workflow here:

<pre>
<bundle version="1.0">
  <workflow name="MyHelloWorldWorkflow" version="1.0">
    <description>This is just a simple HelloWorld showing you how to create a very basic workflow.</description>
    <test command="java -jar ${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/lib/seqware-pipeline-0.12.5.jar --plugin net.sourceforge.seqware.pipeline.plugins.WorkflowLauncher -- --no-metadata --provisioned-bundle-dir ${workflow_bundle_dir} --workflow MyHelloWorldWorkflow --version 1.0 --ini-files ${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/config/workflow.ini "/>
    <workflow_command command="java -jar ${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/lib/seqware-pipeline-0.12.5.jar --plugin net.sourceforge.seqware.pipeline.plugins.WorkflowLauncher -- --bundle ${workflow_bundle_dir} --workflow MyHelloWorldWorkflow --version 1.0 "/>
    <workflow_template path="${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/workflows/workflow.ftl"/>
    <config path="${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/config/workflow.ini"/>
    <build command="ant -f ${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/build.xml"/>
    <requirements compute="single" memory="20M" network="local"/>
  </workflow>
</bundle>
</pre>

Next, change the name at the top of the workflow bundle:

<pre>
xmlns="http://pegasus.isi.edu/schema/DAX" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://pegasus.isi.edu/schema/DAX http://pegasus.isi.edu/schema/dax-3.2.xsd" version="3.2" count="1" index="0" name="MyHelloWorldWorkflow"
...
</pre>

That should be it for this example. More radical changes would, of course, be made in a real-world workflow.


## Test the MyHelloWorld Workflow Bundle on the VM

At this point you should be in the new workflow directory:

<pre>
/home/seqware/SeqWare/provisioned-bundles/Workflow_Bundle_MyHelloWorldWorkflow_1.0_SeqWare_0.12.5/Workflow_Bundle_helloworld/1.0
</pre>

This is where you will execute the test command to try to run the workflow on the local VM with sample default data.  You will repeat this process many times in your new bundle development process as you tweak and change your workflows, debugging as you go.

<p class="warning"><strong>Tip:</strong> if someone gives you a zipped workflow bundle use a command similar to the below to unzip it to your /home/seqware/SeqWare/provisioned-bundles/ directory:

<pre>
java -jar ~/SeqWare/seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.BundleManager -- --bundle released-bundles/Workflow_Bundle_Someone_Gave_Me.zip --list
</pre>

This automatically unzips the bundle to the provisioned-bundles directory and then lists out the contents.
 
<pre>
# sample output
Running Plugin: net.sourceforge.seqware.pipeline.plugins.BundleManager
Setting Up Plugin: net.sourceforge.seqware.pipeline.plugins.BundleManager@a94884d
TEMPLATE PATH: ${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/workflows/workflow.ftl
List Workflows:
 Workflow:
  Name : HelloWorldWorkflow
  Version : 1.0
  Description : This is just a simple HelloWorld showing you how to create a very basic workflow.
  Test Command: java -jar ${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/lib/seqware-pipeline-0.12.5.jar --plugin net.sourceforge.seqware.pipeline.plugins.WorkflowLauncher -- --no-metadata --provisioned-bundle-dir ${workflow_bundle_dir} --workflow HelloWorldWorkflow --version 1.0 --ini-files ${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/config/workflow.ini
  Template Path:${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/workflows/workflow.ftl
  Config Path:${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/config/workflow.ini
  Requirements Compute: single Memory: 20M Network: local

</pre>
</p>

Now in this example below I am just changing into the MyHelloWorld workflow directory and using the WorkflowLauncher to launch the workflow with the sample ini file included.

<pre>
# cd into the right directory
cd /home/seqware/SeqWare/provisioned-bundles/Workflow_Bundle_MyHelloWorldWorkflow_1.0_SeqWare_0.12.5
 
# and launch the test
java -jar ~/SeqWare/seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.WorkflowLauncher -- --no-metadata --provisioned-bundle-dir `pwd` --workflow MyHelloWorldWorkflow --version 1.0 --ini-files Workflow_Bundle_helloworld/1.0/config/workflow.ini --wait
</pre>

This should work just fine, it will give you status information and gradually complete the workflow.  If something goes wrong you should see status messages indicating what happened.  These will tell you the particular steps with the problem so you can look at the workflow file to debug.  Here is the sample output when I ran the command:

<pre>
TEMPLATE PATH: ${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/workflows/workflow.ftl
TEMPLATE FILE: /home/seqware/SeqWare/provisioned-bundles/Workflow_Bundle_HelloWorldWorkflow_1.0_SeqWare_0.12.5/Workflow_Bundle_helloworld/1.0/workflows/workflow.ftl
INI FILES: Workflow_Bundle_helloworld/1.0/config/workflow.ini
CREATING DAX IN: /tmp/dax88379466867104723094914822612050
  INI FILE: Workflow_Bundle_helloworld/1.0/config/workflow.ini
  KEY: parent-accessions VALUE: 0
  KEY: parent_accessions VALUE: 0
  KEY: output_prefix VALUE: ./provisioned/
  KEY: output_dir VALUE: seqware-results
  KEY: workflow_run_accession VALUE: 0
  KEY: parent_accession VALUE: 0
  KEY: input_file VALUE: ${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/data/input.txt
  KEY: workflow-run-accession VALUE: 0
  KEY: seqware_cluster VALUE: seqwarevm
  KEY: metadata VALUE: no-metadata
  KEY: workflow_bundle_dir VALUE: /home/seqware/SeqWare/provisioned-bundles/Workflow_Bundle_HelloWorldWorkflow_1.0_SeqWare_0.12.5
SUBMITTING TO PEGASUS: pegasus-plan -Dpegasus.user.properties=/home/seqware/.seqware/pegasus/properties --dax /tmp/dax88379466867104723094914822612050 --dir /home/seqware/SeqWare/pegasus-dax -o seqwarevm --force --submit -s seqwarevm
PEGASUS STATUS COMMAND: pegasus-status -l /home/seqware/SeqWare/pegasus-dax/seqware/pegasus/HelloWorldWorkflow/run0004
MONITORING PEGASUS STATUS:
RUNNING: step 1 of 5 (20%)
RUNNING: step 2 of 5 (40%)
RUNNING: step 3 of 5 (60%)
RUNNING: step 4 of 5 (80%)
WORKFLOW COMPLETED SUCCESSFULLY!
</pre>

## Packaging and Installing the MyHelloWorld Locally

Assuming the workflow above worked fine the next step is to install it locally,
this means it will be inserted into the MetaDB via the locally running web
service.  During this process it will zip up the workflow bundle and put it
into your released-bundles directory. Once you have the zip file you can share it with
other users and, in the future, upload it to an AppStore to make it even easier to share.

Here is an example showing how this
process works on the VM and what is happing in the database and your
released-bundles directory as you do this.  You may want to delete the zip file
that is in the released-bundles directory before you do this step below (or back
it up somewhere first).  To connect to the database in the example below you
can issue the following command in the terminal:

<pre> "psql -U seqware -W
seqware_meta_db"</pre>

...with password seqware.

<pre>
cd /home/seqware/SeqWare
java -jar ~/SeqWare/seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.BundleManager -- --bundle /home/seqware/SeqWare/provisioned-bundles/Workflow_Bundle_MyHelloWorldWorkflow_1.0_SeqWare_0.12.5 --install
</pre>

What happens here is the /home/seqware/SeqWare/provisioned-bundles/Workflow_Bundle_MyHelloWorldWorkflow_1.0_SeqWare_0.12.5 directory is zip'd up to your released-bundles directory and the metadata about the workflow is saved to the database.
 
The output of this program:

<pre>
# the output
Installing Bundle
Bundle: /home/seqware/SeqWare/provisioned-bundles/Workflow_Bundle_MyHelloWorldWorkflow_1.0_SeqWare_0.12.5
Now packaging /home/seqware/SeqWare/provisioned-bundles/Workflow_Bundle_MyHelloWorldWorkflow_1.0_SeqWare_0.12.5 to a zip file and transferring to the directory: /home/seqware/SeqWare/released-bundles Please be aware, this process can take hours if the bundle is many GB in size.
...
Bundle Has Been Installed to the MetaDB and Provisioned to /home/seqware/SeqWare/provisioned-bundles/Workflow_Bundle_MyHelloWorldWorkflow_1.0_SeqWare_0.12.5!
</pre>
 
Now notice two things, it is now in the local DB via the web service.

<pre>
seqware_meta_db=# select * from workflow order by create_tstmp desc limit 1;
-[ RECORD 1 ]-------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
workflow_id               | 3
name                      | MyHelloWorldWorkflow
description               | This is just a simple HelloWorld showing you how to create a very basic workflow.
input_algorithm           |
version                   | 1.0
seqware_version           |
owner_id                  | 1
base_ini_file             | ${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/config/workflow.ini
cmd                       | java -jar ${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/lib/seqware-pipeline-0.12.5.jar --plugin net.sourceforge.seqware.pipeline.plugins.WorkflowLauncher -- --bundle ${workflow_bundle_dir} --workflow MyHelloWorldWorkflow --version 1.0
current_working_dir       | /home/seqware/SeqWare/provisioned-bundles/Workflow_Bundle_MyHelloWorldWorkflow_1.0_SeqWare_0.12.5
host                      |
username                  |
workflow_template         | ${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/workflows/workflow.ftl
create_tstmp              | 2012-08-15 01:20:22.457
update_tstmp              | 2012-08-15 01:20:22.505
sw_accession              | 6
permanent_bundle_location | /home/seqware/SeqWare/released-bundles/Workflow_Bundle_MyHelloWorldWorkflow_1.0_SeqWare_0.12.5.zip
</pre>

And also notice you now have a zip file for this workflow:

<pre>
cd /home/seqware/SeqWare/released-bundles
ls -lth
total 50M
-rw-rw-r-- 1 seqware seqware 50M Aug 15 01:20 Workflow_Bundle_MyHelloWorldWorkflow_1.0_SeqWare_0.12.5.zip
</pre>

Now that this is installed you can trigger it just like you have done in the [User Tutorial](/docs/3-getting-started/user-tutorial/) using the web service previously.

## Next Steps

The guide [How to Write a Workflow Bundle](http://sourceforge.net/apps/mediawiki/seqware/index.php?title=How_to_Write_a_Bundled_Workflow) on the public SeqWare project wiki goes into very detailed information about workflow bundles, how to create them, the syntax they use, and other key information. In the near future this will be migrated to this site but the directions there should still be up to date.;T;
I"„f<p>This guide picks up where the <a href="/docs/3-getting-started/user-tutorial/">User Tutorial</a> left off. In that previous guide we showed you how to start up your local VM, create studies, experiments, and samples, associate an input file with a sample, and then launch a workflow to process that file.  This process is the same generic process we use at OICR to analyze samples from fastq to, eventually, annotated variants.  In this production system the workflows are fairly complex (they include branching and looping) and we string multiple worklfows together (output of one as input for the next) using <kbd>deciders</kbd>.</p>

<p>The next step presented in this tutorial is to create a workflow of your own based on the HelloWorld that comes bundled with the VM.  In theory you could use either a local VM or an Amazon instance to follow the tutorial below but in our case we will base it on the local VM.</p>

<div class="section" id="by-the-end-of-this-tutorial">
<h2>By the End of This Tutorial</h2>

<p>By the end of these tutorials you will:</p>

<ul>
<li>create a new SeqWare Pipeline workflow bundle based on HelloWorld</li>
  <li>package, install, schedule, and run your new workflow bundle in Pipeline and MetaDB</li>
  <li>generate a report on the outputs of your workflows in Pipeline and Portal</li>
  <li>be prepared to move on to more detailed documentation for each sub-project</li>
</ul>
</div><div class="section" id="first-steps">
<h2>First Steps</h2>

<p>Please launch your local VM in VirtualBox and login as user <kbd>seqware</kbd>, password <kbd>seqware</kbd> at this time. Click on the ‚ÄúSeqWare Directory‚Äù link on the desktop which will open a terminal to the location where we installed the SeqWare tools.</p>

</div><div class="section" id="overview-of-workflow-development-using-the-vm">
<h2>Overview of Workflow Development Using the VM</h2>

<p>You should be in the ~seqware/SeqWare directory now, this is
the working directory.  Notice there is a jar file here and also two important
directories: provisioned-bundles which contains unzipped workflow bundles and
is where you will work on new bundles and released-bundles (SW_BUNDLE_REPO_DIR
in the config) which contains zip versions of the workflows that you create
when you package up these bundles and install them locally or on the cloud. You
will work in provisioned-bundles, copying a template HelloWorld workflow to a
new bundle that you can modify You will also test your bundles from there as
well. Once you finish with the new bundle you will package and install it via
the web service (to either the remote cloud VM or local VM). Once
installed you can use the workflow scheduling tools you have used before to
trigger workflows (on the cloud or the local VM), monitor them, and get data
back.</p>

</div><div class="section" id="the-sample-workflow-bundle">
<h2>The Sample Workflow Bundle</h2>

<p>Go into the bundle directory so you can look around:</p>

<pre> cd provisioned-bundles/Workflow_Bundle_HelloWorldWorkflow_1.0_SeqWare_0.12.5/Workflow_Bundle_helloworld/1.0/</pre>

<p>You
should look at three files in particular.  The workflows/workflow.ftl and the
config/workflow.ini.  The first is the workflow script file written in an XML
file format from the Pegasus project.  It is templatized using FreeMarker so you
can replace variables using values from the config file and also write simple
macros and control blocks.  In this workflow example you see 4 key jobs.  The
first (IDPRE1) is the job that copies the input file specified either from S3
or another location.  The second job (ID001) is the meat of the workflow, it is
simply calling a script in the bin directory that echos a file and also writes
‚ÄúHello World‚Äù to the output.  The third and fourth jobs are related.  The first
(IDPOST1) copies the output file to the final destination while the second
records the output file back to the metadatabase.</p>

<p>Here is the example workflow XML:</p>

<pre>
<code class="language-text">
<?xml version="1.0" encoding="UTF-8"?><adag xmlns="http://pegasus.isi.edu/schema/DAX" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemalocation="http://pegasus.isi.edu/schema/DAX http://pegasus.isi.edu/schema/dax-3.2.xsd" version="3.2" count="1" index="0" name="HelloWorldWorkflow"><!--
This is a sample HelloWorld workflow. Use it as a template to build your own workflow.
--><!-- the directory structure inside the bundle -->
&lt;#assign workflow_name = "Workflow_Bundle_helloworld/1.0"/&gt;
<!-- MACRO: to create a mkdir pre job and stage mkdir binary -->
&lt;#macro requires_dir dir&gt;
  <profile namespace="env" key="GRIDSTART_PREJOB">/${workflow_bundle_dir}/${workflow_name}/bin/globus/pegasus-dirmanager -c -d ${dir}</profile>
&lt;/#macro&gt;
<!-- VARS -->
&lt;#-- workflow and seqware versions --&gt;
&lt;#assign seqware_version = "0.12.5"/&gt;
&lt;#assign workflow_version = "1.0"/&gt;
&lt;#assign java_version = "1.6.0"/&gt;
&lt;#assign perl_version = "5.14.1"/&gt;
&lt;#-- make sure it is a string --&gt;
&lt;#assign parentAccessions = "${parent_accessions}"/&gt;
&lt;#-- Set relative paths for files within the run--&gt;
&lt;#assign bin_dir = "bin"/&gt;
&lt;#assign data_dir = "data"/&gt;
&lt;#assign lib_dir = "lib"/&gt;

<!-- BASE FILE NAME -->
&lt;#-- Set the basename from input file name --&gt;
&lt;#list input_file?split("/") as tmp&gt;
  &lt;#assign basename = tmp/&gt;
&lt;/#list&gt;
<!-- EXECUTABLES INCLUDED WITH BUNDLE -->
<executable namespace="seqware" name="java" version="${java_version}" arch="x86_64" os="linux" installed="true"><!-- the path to the tool that actually runs a given module --><pfn url="file:///${workflow_bundle_dir}/${workflow_name}/bin/jre1.6.0_29/bin/java" site="${seqware_cluster}"></pfn></executable><executable namespace="seqware" name="perl" version="${perl_version}" arch="x86_64" os="linux" installed="true"><!-- the path to the tool that actually runs a given module --><pfn url="file:///${workflow_bundle_dir}/${workflow_name}/bin/perl-5.14.1/perl" site="${seqware_cluster}"></pfn></executable><executable namespace="pegasus" name="dirmanager" version="1" arch="x86_64" os="linux" installed="true"><!-- the path to the tool that actually runs a given module --><pfn url="file:///${workflow_bundle_dir}/${workflow_name}/bin/globus/pegasus-dirmanager" site="${seqware_cluster}"></pfn></executable><!-- Part 1: Define all jobs --><!-- find input base file name -->
   &lt;#list input_file?split("/") as tmp&gt;
     &lt;#assign basename = tmp/&gt;
   &lt;/#list&gt;
   <!-- Provision input file, make link if local file, copy from HTTP/S3 otherwise -->
  <job id="IDPRE1" namespace="seqware" name="java" version="${java_version}"><argument>
      -Xmx1000M
      -classpath ${workflow_bundle_dir}/${workflow_name}/classes:${workflow_bundle_dir}/${workflow_name}/lib/seqware-pipeline-${seqware_version}-full.jar
      net.sourceforge.seqware.pipeline.runner.Runner
      --no-metadata      
      --module net.sourceforge.seqware.pipeline.modules.utilities.ProvisionFiles
      --
      --input-file ${input_file}
      --output-dir ${data_dir}
    </argument><profile namespace="globus" key="jobtype">condor</profile><profile namespace="globus" key="count">1</profile><profile namespace="globus" key="maxmemory">2000</profile></job><!-- HelloWorld job, just calls a simple script. -->
  &lt;#assign algo = "job1"/&gt;
  <job id="ID001" namespace="seqware" name="java" version="${java_version}"><argument>
      -Xmx1000M
      -classpath ${workflow_bundle_dir}/${workflow_name}/bin:${workflow_bundle_dir}/${workflow_name}/lib/seqware-pipeline-${seqware_version}-full.jar
      net.sourceforge.seqware.pipeline.runner.Runner
      --${metadata}
      &lt;#list parentAccessions?split(",") as pa&gt;
      --metadata-parent-accession ${pa}
      &lt;/#list&gt;
      --metadata-processing-accession-file ${data_dir}/${algo}_accession
      --metadata-output-file-prefix ${output_prefix}
      --metadata-workflow-run-accession ${workflow_run_accession}
      --module net.sourceforge.seqware.pipeline.modules.GenericCommandRunner
      --
      --gcr-command ${workflow_bundle_dir}/${workflow_name}/bin/hello.sh ${data_dir}/${basename} ${data_dir}/${basename}.hello
    </argument><profile namespace="globus" key="jobtype">condor</profile><profile namespace="globus" key="count">1</profile><profile namespace="globus" key="maxmemory">2000</profile><!-- Prejob to make output directory -->
    &lt;@requires_dir "${data_dir}"/&gt;
  </job><!-- Provision output file to either local dir or S3 --><job id="IDPOST1" namespace="seqware" name="java" version="${java_version}"><argument>
      -Xmx1000M
      -classpath ${workflow_bundle_dir}/${workflow_name}/classes:${workflow_bundle_dir}/${workflow_name}/lib/seqware-pipeline-${seqware_version}-full.jar
      net.sourceforge.seqware.pipeline.runner.Runner
      --no-metadata      
      --module net.sourceforge.seqware.pipeline.modules.utilities.ProvisionFiles
      --
      --force-copy
      --input-file ${data_dir}/${basename}.hello
      --output-dir ${output_prefix}${output_dir}/seqware-${seqware_version}_HelloWorld-${workflow_version}/${random}
    </argument><profile namespace="globus" key="jobtype">condor</profile><profile namespace="globus" key="count">1</profile><profile namespace="globus" key="maxmemory">2000</profile></job><!-- Save output locations to MetaDB -->
  &lt;#assign algo = "jobpost2"/&gt;
  <job id="IDPOST2" namespace="seqware" name="java" version="${java_version}"><argument>
      -Xmx1000M
      -classpath ${workflow_bundle_dir}/${workflow_name}/classes:${workflow_bundle_dir}/${workflow_name}/lib/seqware-pipeline-${seqware_version}-full.jar
      net.sourceforge.seqware.pipeline.runner.Runner
      --${metadata}
      &lt;#list parentAccessions?split(",") as pa&gt;
      --metadata-parent-accession ${pa}
      &lt;/#list&gt;
      --metadata-processing-accession-file ${data_dir}/${algo}_accession
      --metadata-output-file-prefix ${output_prefix}
      --metadata-workflow-run-accession ${workflow_run_accession}
      --module net.sourceforge.seqware.pipeline.modules.GenericMetadataSaver
      --
      --gms-algorithm ComprehensiveMitochondrialGenomeAnalysisSummary
      --gms-suppress-output-file-check
      --gms-output-file HelloWorld::text/plain::${output_dir}/seqware-${seqware_version}_HelloWorld-${workflow_version}/${random}/${basename}.hello
    </argument><profile namespace="globus" key="jobtype">condor</profile><profile namespace="globus" key="count">1</profile><profile namespace="globus" key="maxmemory">2000</profile></job><!-- End of Job Definitions --><!-- Part 2: list of control-flow dependencies --><!-- Define task group dependencies --><child ref="ID001"><parent ref="IDPRE1"></parent></child><child ref="IDPOST1"><parent ref="ID001"></parent></child><child ref="IDPOST2"><parent ref="IDPOST1"></parent></child><!-- End of Dependencies --></adag></code>
</pre>

<p>The ini config file is the place where you define 1) what parameters the
workflow will take (via the Portal web app or Web Service) and 2) what the
default values should be.  Often times only a small handful of variables need
to be exposed, the rest can be hidden from the Porta/Web Service (display=F)
and just the default value used.</p>

<p>Looking at:</p>

<p>/home/seqware/SeqWare/provisioned-bundles/Workflow_Bundle_HelloWorldWorkflow<em>1.0_SeqWare</em>0.12.5/Workflow_Bundle_helloworld/1.0/config/workflow.ini</p>

<pre>
# key=input_file:type=file:display=F:file_meta_type=text/plain
input_file=${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/data/input.txt
# this is just a comment, the output directory is a conventions and used in many workflows to specify a relative output path
output_dir=seqware-results
# the output_prefix is a convension and used to specify the root of the absolute output path or an S3 bucket name 
# you should pick a path that is available on all custer nodes and can be written by your user
# ends in a "/"
output_prefix=./provisioned/
</pre>

<p>The final file to look at is metadata.xml which is the place where workflows included in a bundle are declared.  This is the place where you would rename a workflow, update its version string, etc.</p>

<p>Look at: </p>

<pre> /home/seqware/SeqWare/provisioned-bundles/Workflow_Bundle_HelloWorldWorkflow_1.0_SeqWare_0.12.5/Workflow_Bundle_helloworld/1.0/metadata.xml</pre>

<pre>
<bundle version="1.0"><workflow name="HelloWorldWorkflow" version="1.0"><description>This is just a simple HelloWorld showing you how to create a very basic workflow.</description><test command="java -jar ${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/lib/seqware-pipeline-0.12.5.jar --plugin net.sourceforge.seqware.pipeline.plugins.WorkflowLauncher -- --no-metadata --provisioned-bundle-dir ${workflow_bundle_dir} --workflow HelloWorldWorkflow --version 1.0 --ini-files ${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/config/workflow.ini "></test><workflow_command command="java -jar ${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/lib/seqware-pipeline-0.12.5.jar --plugin net.sourceforge.seqware.pipeline.plugins.WorkflowLauncher -- --bundle ${workflow_bundle_dir} --workflow HelloWorldWorkflow --version 1.0 "></workflow_command><workflow_template path="${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/workflows/workflow.ftl"></workflow_template><config path="${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/config/workflow.ini"></config><build command="ant -f ${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/build.xml"></build><requirements compute="single" memory="20M" network="local"></requirements></workflow></bundle></pre>

<p>This is only a brief introduction to the workflow bundle process.  Take a look at <a href="http://sourceforge.net/apps/mediawiki/seqware/index.php?title=How_to_Write_a_Bundled_Workflow">How to Write a Workflow Bundle</a> for extensive details on the workflow development process.  There is also information on this site on using Maven to create workflow bundles using the excellent archetype system.  And we also are prototyping a workflow language based on Java. These are experimental but could be very useful. Eventually that documentation will be migrated to this guide.</p>

</div><div class="section" id="creating-a-new-worlflow-bundle">
<h2>Creating a New Worlflow Bundle</h2>

<p>Now that you have seen the components for a bundle the next step is to create your own bundle based on HelloWorld.  We are only going to make superficial changes here but would expect that you would make much more radical changes if you were creating a new workflow.  While you can use the ‚Äúcopy and hack‚Äù method, in the future we will recommend the archetype approach.</p>

<p>First you need to change directories to the workflow and create a duplicate:</p>

<pre>
cd /home/seqware/SeqWare/provisioned-bundles
cp -r Workflow_Bundle_HelloWorldWorkflow_1.0_SeqWare_0.12.5 Workflow_Bundle_MyHelloWorldWorkflow_1.0_SeqWare_0.12.5
</pre>

<p>Now modify the metadata.xml, change the name of the workflow here:</p>

<pre>
<bundle version="1.0"><workflow name="MyHelloWorldWorkflow" version="1.0"><description>This is just a simple HelloWorld showing you how to create a very basic workflow.</description><test command="java -jar ${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/lib/seqware-pipeline-0.12.5.jar --plugin net.sourceforge.seqware.pipeline.plugins.WorkflowLauncher -- --no-metadata --provisioned-bundle-dir ${workflow_bundle_dir} --workflow MyHelloWorldWorkflow --version 1.0 --ini-files ${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/config/workflow.ini "></test><workflow_command command="java -jar ${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/lib/seqware-pipeline-0.12.5.jar --plugin net.sourceforge.seqware.pipeline.plugins.WorkflowLauncher -- --bundle ${workflow_bundle_dir} --workflow MyHelloWorldWorkflow --version 1.0 "></workflow_command><workflow_template path="${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/workflows/workflow.ftl"></workflow_template><config path="${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/config/workflow.ini"></config><build command="ant -f ${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/build.xml"></build><requirements compute="single" memory="20M" network="local"></requirements></workflow></bundle></pre>

<p>Next, change the name at the top of the workflow bundle:</p>

<pre>
xmlns="http://pegasus.isi.edu/schema/DAX" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://pegasus.isi.edu/schema/DAX http://pegasus.isi.edu/schema/dax-3.2.xsd" version="3.2" count="1" index="0" name="MyHelloWorldWorkflow"
...
</pre>

<p>That should be it for this example. More radical changes would, of course, be made in a real-world workflow.</p>

</div><div class="section" id="test-the-myhelloworld-workflow-bundle-on-the-vm">
<h2>Test the MyHelloWorld Workflow Bundle on the VM</h2>

<p>At this point you should be in the new workflow directory:</p>

<pre>
/home/seqware/SeqWare/provisioned-bundles/Workflow_Bundle_MyHelloWorldWorkflow_1.0_SeqWare_0.12.5/Workflow_Bundle_helloworld/1.0
</pre>

<p>This is where you will execute the test command to try to run the workflow on the local VM with sample default data.  You will repeat this process many times in your new bundle development process as you tweak and change your workflows, debugging as you go.</p>

<p class="warning"><strong>Tip:</strong> if someone gives you a zipped workflow bundle use a command similar to the below to unzip it to your /home/seqware/SeqWare/provisioned-bundles/ directory:

</p>
<pre>
java -jar ~/SeqWare/seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.BundleManager -- --bundle released-bundles/Workflow_Bundle_Someone_Gave_Me.zip --list
</pre>

This automatically unzips the bundle to the provisioned-bundles directory and then lists out the contents.
 
<pre>
# sample output
Running Plugin: net.sourceforge.seqware.pipeline.plugins.BundleManager
Setting Up Plugin: net.sourceforge.seqware.pipeline.plugins.BundleManager@a94884d
TEMPLATE PATH: ${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/workflows/workflow.ftl
List Workflows:
 Workflow:
  Name : HelloWorldWorkflow
  Version : 1.0
  Description : This is just a simple HelloWorld showing you how to create a very basic workflow.
  Test Command: java -jar ${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/lib/seqware-pipeline-0.12.5.jar --plugin net.sourceforge.seqware.pipeline.plugins.WorkflowLauncher -- --no-metadata --provisioned-bundle-dir ${workflow_bundle_dir} --workflow HelloWorldWorkflow --version 1.0 --ini-files ${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/config/workflow.ini
  Template Path:${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/workflows/workflow.ftl
  Config Path:${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/config/workflow.ini
  Requirements Compute: single Memory: 20M Network: local

</pre>


<p>Now in this example below I am just changing into the MyHelloWorld workflow directory and using the WorkflowLauncher to launch the workflow with the sample ini file included.</p>

<pre>
# cd into the right directory
cd /home/seqware/SeqWare/provisioned-bundles/Workflow_Bundle_MyHelloWorldWorkflow_1.0_SeqWare_0.12.5
 
# and launch the test
java -jar ~/SeqWare/seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.WorkflowLauncher -- --no-metadata --provisioned-bundle-dir `pwd` --workflow MyHelloWorldWorkflow --version 1.0 --ini-files Workflow_Bundle_helloworld/1.0/config/workflow.ini --wait
</pre>

<p>This should work just fine, it will give you status information and gradually complete the workflow.  If something goes wrong you should see status messages indicating what happened.  These will tell you the particular steps with the problem so you can look at the workflow file to debug.  Here is the sample output when I ran the command:</p>

<pre>
TEMPLATE PATH: ${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/workflows/workflow.ftl
TEMPLATE FILE: /home/seqware/SeqWare/provisioned-bundles/Workflow_Bundle_HelloWorldWorkflow_1.0_SeqWare_0.12.5/Workflow_Bundle_helloworld/1.0/workflows/workflow.ftl
INI FILES: Workflow_Bundle_helloworld/1.0/config/workflow.ini
CREATING DAX IN: /tmp/dax88379466867104723094914822612050
  INI FILE: Workflow_Bundle_helloworld/1.0/config/workflow.ini
  KEY: parent-accessions VALUE: 0
  KEY: parent_accessions VALUE: 0
  KEY: output_prefix VALUE: ./provisioned/
  KEY: output_dir VALUE: seqware-results
  KEY: workflow_run_accession VALUE: 0
  KEY: parent_accession VALUE: 0
  KEY: input_file VALUE: ${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/data/input.txt
  KEY: workflow-run-accession VALUE: 0
  KEY: seqware_cluster VALUE: seqwarevm
  KEY: metadata VALUE: no-metadata
  KEY: workflow_bundle_dir VALUE: /home/seqware/SeqWare/provisioned-bundles/Workflow_Bundle_HelloWorldWorkflow_1.0_SeqWare_0.12.5
SUBMITTING TO PEGASUS: pegasus-plan -Dpegasus.user.properties=/home/seqware/.seqware/pegasus/properties --dax /tmp/dax88379466867104723094914822612050 --dir /home/seqware/SeqWare/pegasus-dax -o seqwarevm --force --submit -s seqwarevm
PEGASUS STATUS COMMAND: pegasus-status -l /home/seqware/SeqWare/pegasus-dax/seqware/pegasus/HelloWorldWorkflow/run0004
MONITORING PEGASUS STATUS:
RUNNING: step 1 of 5 (20%)
RUNNING: step 2 of 5 (40%)
RUNNING: step 3 of 5 (60%)
RUNNING: step 4 of 5 (80%)
WORKFLOW COMPLETED SUCCESSFULLY!
</pre>

</div><div class="section" id="packaging-and-installing-the-myhelloworld-locally">
<h2>Packaging and Installing the MyHelloWorld Locally</h2>

<p>Assuming the workflow above worked fine the next step is to install it locally,
this means it will be inserted into the MetaDB via the locally running web
service.  During this process it will zip up the workflow bundle and put it
into your released-bundles directory. Once you have the zip file you can share it with
other users and, in the future, upload it to an AppStore to make it even easier to share.</p>

<p>Here is an example showing how this
process works on the VM and what is happing in the database and your
released-bundles directory as you do this.  You may want to delete the zip file
that is in the released-bundles directory before you do this step below (or back
it up somewhere first).  To connect to the database in the example below you
can issue the following command in the terminal:</p>

<pre> "psql -U seqware -W
seqware_meta_db"</pre>

<p>‚Ä¶with password seqware.</p>

<pre>
cd /home/seqware/SeqWare
java -jar ~/SeqWare/seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.BundleManager -- --bundle /home/seqware/SeqWare/provisioned-bundles/Workflow_Bundle_MyHelloWorldWorkflow_1.0_SeqWare_0.12.5 --install
</pre>

<p>What happens here is the /home/seqware/SeqWare/provisioned-bundles/Workflow_Bundle_MyHelloWorldWorkflow<em>1.0_SeqWare</em>0.12.5 directory is zip‚Äôd up to your released-bundles directory and the metadata about the workflow is saved to the database.</p>

<p>The output of this program:</p>

<pre>
# the output
Installing Bundle
Bundle: /home/seqware/SeqWare/provisioned-bundles/Workflow_Bundle_MyHelloWorldWorkflow_1.0_SeqWare_0.12.5
Now packaging /home/seqware/SeqWare/provisioned-bundles/Workflow_Bundle_MyHelloWorldWorkflow_1.0_SeqWare_0.12.5 to a zip file and transferring to the directory: /home/seqware/SeqWare/released-bundles Please be aware, this process can take hours if the bundle is many GB in size.
...
Bundle Has Been Installed to the MetaDB and Provisioned to /home/seqware/SeqWare/provisioned-bundles/Workflow_Bundle_MyHelloWorldWorkflow_1.0_SeqWare_0.12.5!
</pre>

<p>Now notice two things, it is now in the local DB via the web service.</p>

<pre>
seqware_meta_db=# select * from workflow order by create_tstmp desc limit 1;
-[ RECORD 1 ]-------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
workflow_id               | 3
name                      | MyHelloWorldWorkflow
description               | This is just a simple HelloWorld showing you how to create a very basic workflow.
input_algorithm           |
version                   | 1.0
seqware_version           |
owner_id                  | 1
base_ini_file             | ${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/config/workflow.ini
cmd                       | java -jar ${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/lib/seqware-pipeline-0.12.5.jar --plugin net.sourceforge.seqware.pipeline.plugins.WorkflowLauncher -- --bundle ${workflow_bundle_dir} --workflow MyHelloWorldWorkflow --version 1.0
current_working_dir       | /home/seqware/SeqWare/provisioned-bundles/Workflow_Bundle_MyHelloWorldWorkflow_1.0_SeqWare_0.12.5
host                      |
username                  |
workflow_template         | ${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/workflows/workflow.ftl
create_tstmp              | 2012-08-15 01:20:22.457
update_tstmp              | 2012-08-15 01:20:22.505
sw_accession              | 6
permanent_bundle_location | /home/seqware/SeqWare/released-bundles/Workflow_Bundle_MyHelloWorldWorkflow_1.0_SeqWare_0.12.5.zip
</pre>

<p>And also notice you now have a zip file for this workflow:</p>

<pre>
cd /home/seqware/SeqWare/released-bundles
ls -lth
total 50M
-rw-rw-r-- 1 seqware seqware 50M Aug 15 01:20 Workflow_Bundle_MyHelloWorldWorkflow_1.0_SeqWare_0.12.5.zip
</pre>

<p>Now that this is installed you can trigger it just like you have done in the <a href="/docs/3-getting-started/user-tutorial/">User Tutorial</a> using the web service previously.</p>

</div><div class="section" id="next-steps">
<h2>Next Steps</h2>

<p>The guide <a href="http://sourceforge.net/apps/mediawiki/seqware/index.php?title=How_to_Write_a_Bundled_Workflow">How to Write a Workflow Bundle</a> on the public SeqWare project wiki goes into very detailed information about workflow bundles, how to create them, the syntax they use, and other key information. In the near future this will be migrated to this site but the directions there should still be up to date.</p>
</div>;T;I"Je<p>This guide picks up where the <a href="/docs/3-getting-started/user-tutorial/">User Tutorial</a> left off. In that previous guide we showed you how to start up your local VM, create studies, experiments, and samples, associate an input file with a sample, and then launch a workflow to process that file.  This process is the same generic process we use at OICR to analyze samples from fastq to, eventually, annotated variants.  In this production system the workflows are fairly complex (they include branching and looping) and we string multiple worklfows together (output of one as input for the next) using <kbd>deciders</kbd>.</p>

<p>The next step presented in this tutorial is to create a workflow of your own based on the HelloWorld that comes bundled with the VM.  In theory you could use either a local VM or an Amazon instance to follow the tutorial below but in our case we will base it on the local VM.</p>

<h2>By the End of This Tutorial</h2>

<p>By the end of these tutorials you will:</p>

<ul>
  <li>create a new SeqWare Pipeline workflow bundle based on HelloWorld</li>
  <li>package, install, schedule, and run your new workflow bundle in Pipeline and MetaDB</li>
  <li>generate a report on the outputs of your workflows in Pipeline and Portal</li>
  <li>be prepared to move on to more detailed documentation for each sub-project</li>
</ul>

<h2>First Steps</h2>

<p>Please launch your local VM in VirtualBox and login as user <kbd>seqware</kbd>, password <kbd>seqware</kbd> at this time. Click on the ‚ÄúSeqWare Directory‚Äù link on the desktop which will open a terminal to the location where we installed the SeqWare tools.</p>

<h2>Overview of Workflow Development Using the VM</h2>

<p>You should be in the ~seqware/SeqWare directory now, this is
the working directory.  Notice there is a jar file here and also two important
directories: provisioned-bundles which contains unzipped workflow bundles and
is where you will work on new bundles and released-bundles (SW_BUNDLE_REPO_DIR
in the config) which contains zip versions of the workflows that you create
when you package up these bundles and install them locally or on the cloud. You
will work in provisioned-bundles, copying a template HelloWorld workflow to a
new bundle that you can modify You will also test your bundles from there as
well. Once you finish with the new bundle you will package and install it via
the web service (to either the remote cloud VM or local VM). Once
installed you can use the workflow scheduling tools you have used before to
trigger workflows (on the cloud or the local VM), monitor them, and get data
back.</p>

<h2>The Sample Workflow Bundle</h2>

<p>Go into the bundle directory so you can look around:</p>

<pre> cd provisioned-bundles/Workflow_Bundle_HelloWorldWorkflow_1.0_SeqWare_0.12.5/Workflow_Bundle_helloworld/1.0/</pre>

<p>You
should look at three files in particular.  The workflows/workflow.ftl and the
config/workflow.ini.  The first is the workflow script file written in an XML
file format from the Pegasus project.  It is templatized using FreeMarker so you
can replace variables using values from the config file and also write simple
macros and control blocks.  In this workflow example you see 4 key jobs.  The
first (IDPRE1) is the job that copies the input file specified either from S3
or another location.  The second job (ID001) is the meat of the workflow, it is
simply calling a script in the bin directory that echos a file and also writes
‚ÄúHello World‚Äù to the output.  The third and fourth jobs are related.  The first
(IDPOST1) copies the output file to the final destination while the second
records the output file back to the metadatabase.</p>

<p>Here is the example workflow XML:</p>

<pre>
<code class="language-text">
<?xml version="1.0" encoding="UTF-8"?>
<adag xmlns="http://pegasus.isi.edu/schema/DAX" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemalocation="http://pegasus.isi.edu/schema/DAX http://pegasus.isi.edu/schema/dax-3.2.xsd" version="3.2" count="1" index="0" name="HelloWorldWorkflow">
<!--
This is a sample HelloWorld workflow. Use it as a template to build your own workflow.
-->
<!-- the directory structure inside the bundle -->
&lt;#assign workflow_name = "Workflow_Bundle_helloworld/1.0"/&gt;
<!-- MACRO: to create a mkdir pre job and stage mkdir binary -->
&lt;#macro requires_dir dir&gt;
  <profile namespace="env" key="GRIDSTART_PREJOB">/${workflow_bundle_dir}/${workflow_name}/bin/globus/pegasus-dirmanager -c -d ${dir}</profile>
&lt;/#macro&gt;
<!-- VARS -->
&lt;#-- workflow and seqware versions --&gt;
&lt;#assign seqware_version = "0.12.5"/&gt;
&lt;#assign workflow_version = "1.0"/&gt;
&lt;#assign java_version = "1.6.0"/&gt;
&lt;#assign perl_version = "5.14.1"/&gt;
&lt;#-- make sure it is a string --&gt;
&lt;#assign parentAccessions = "${parent_accessions}"/&gt;
&lt;#-- Set relative paths for files within the run--&gt;
&lt;#assign bin_dir = "bin"/&gt;
&lt;#assign data_dir = "data"/&gt;
&lt;#assign lib_dir = "lib"/&gt;

<!-- BASE FILE NAME -->
&lt;#-- Set the basename from input file name --&gt;
&lt;#list input_file?split("/") as tmp&gt;
  &lt;#assign basename = tmp/&gt;
&lt;/#list&gt;
<!-- EXECUTABLES INCLUDED WITH BUNDLE -->
<executable namespace="seqware" name="java" version="${java_version}" arch="x86_64" os="linux" installed="true">
  <!-- the path to the tool that actually runs a given module -->
  <pfn url="file:///${workflow_bundle_dir}/${workflow_name}/bin/jre1.6.0_29/bin/java" site="${seqware_cluster}" />
</executable>
<executable namespace="seqware" name="perl" version="${perl_version}" arch="x86_64" os="linux" installed="true">
  <!-- the path to the tool that actually runs a given module -->
  <pfn url="file:///${workflow_bundle_dir}/${workflow_name}/bin/perl-5.14.1/perl" site="${seqware_cluster}" />
</executable>
<executable namespace="pegasus" name="dirmanager" version="1" arch="x86_64" os="linux" installed="true">
  <!-- the path to the tool that actually runs a given module -->
  <pfn url="file:///${workflow_bundle_dir}/${workflow_name}/bin/globus/pegasus-dirmanager" site="${seqware_cluster}" />     
</executable>

<!-- Part 1: Define all jobs -->
   <!-- find input base file name -->
   &lt;#list input_file?split("/") as tmp&gt;
     &lt;#assign basename = tmp/&gt;
   &lt;/#list&gt;
   <!-- Provision input file, make link if local file, copy from HTTP/S3 otherwise -->
  <job id="IDPRE1" namespace="seqware" name="java" version="${java_version}">
    <argument>
      -Xmx1000M
      -classpath ${workflow_bundle_dir}/${workflow_name}/classes:${workflow_bundle_dir}/${workflow_name}/lib/seqware-pipeline-${seqware_version}-full.jar
      net.sourceforge.seqware.pipeline.runner.Runner
      --no-metadata      
      --module net.sourceforge.seqware.pipeline.modules.utilities.ProvisionFiles
      --
      --input-file ${input_file}
      --output-dir ${data_dir}
    </argument>
    <profile namespace="globus" key="jobtype">condor</profile>
    <profile namespace="globus" key="count">1</profile>
    <profile namespace="globus" key="maxmemory">2000</profile>
  </job>
  <!-- HelloWorld job, just calls a simple script. -->
  &lt;#assign algo = "job1"/&gt;
  <job id="ID001" namespace="seqware" name="java" version="${java_version}">
    <argument>
      -Xmx1000M
      -classpath ${workflow_bundle_dir}/${workflow_name}/bin:${workflow_bundle_dir}/${workflow_name}/lib/seqware-pipeline-${seqware_version}-full.jar
      net.sourceforge.seqware.pipeline.runner.Runner
      --${metadata}
      &lt;#list parentAccessions?split(",") as pa&gt;
      --metadata-parent-accession ${pa}
      &lt;/#list&gt;
      --metadata-processing-accession-file ${data_dir}/${algo}_accession
      --metadata-output-file-prefix ${output_prefix}
      --metadata-workflow-run-accession ${workflow_run_accession}
      --module net.sourceforge.seqware.pipeline.modules.GenericCommandRunner
      --
      --gcr-command ${workflow_bundle_dir}/${workflow_name}/bin/hello.sh ${data_dir}/${basename} ${data_dir}/${basename}.hello
    </argument>
    <profile namespace="globus" key="jobtype">condor</profile>
    <profile namespace="globus" key="count">1</profile>
    <profile namespace="globus" key="maxmemory">2000</profile>
    <!-- Prejob to make output directory -->
    &lt;@requires_dir "${data_dir}"/&gt;
  </job>
  <!-- Provision output file to either local dir or S3 -->
  <job id="IDPOST1" namespace="seqware" name="java" version="${java_version}">
    <argument>
      -Xmx1000M
      -classpath ${workflow_bundle_dir}/${workflow_name}/classes:${workflow_bundle_dir}/${workflow_name}/lib/seqware-pipeline-${seqware_version}-full.jar
      net.sourceforge.seqware.pipeline.runner.Runner
      --no-metadata      
      --module net.sourceforge.seqware.pipeline.modules.utilities.ProvisionFiles
      --
      --force-copy
      --input-file ${data_dir}/${basename}.hello
      --output-dir ${output_prefix}${output_dir}/seqware-${seqware_version}_HelloWorld-${workflow_version}/${random}
    </argument>
    <profile namespace="globus" key="jobtype">condor</profile>
    <profile namespace="globus" key="count">1</profile>
    <profile namespace="globus" key="maxmemory">2000</profile>
  </job>
  <!-- Save output locations to MetaDB -->
  &lt;#assign algo = "jobpost2"/&gt;
  <job id="IDPOST2" namespace="seqware" name="java" version="${java_version}">
    <argument>
      -Xmx1000M
      -classpath ${workflow_bundle_dir}/${workflow_name}/classes:${workflow_bundle_dir}/${workflow_name}/lib/seqware-pipeline-${seqware_version}-full.jar
      net.sourceforge.seqware.pipeline.runner.Runner
      --${metadata}
      &lt;#list parentAccessions?split(",") as pa&gt;
      --metadata-parent-accession ${pa}
      &lt;/#list&gt;
      --metadata-processing-accession-file ${data_dir}/${algo}_accession
      --metadata-output-file-prefix ${output_prefix}
      --metadata-workflow-run-accession ${workflow_run_accession}
      --module net.sourceforge.seqware.pipeline.modules.GenericMetadataSaver
      --
      --gms-algorithm ComprehensiveMitochondrialGenomeAnalysisSummary
      --gms-suppress-output-file-check
      --gms-output-file HelloWorld::text/plain::${output_dir}/seqware-${seqware_version}_HelloWorld-${workflow_version}/${random}/${basename}.hello
    </argument>
    <profile namespace="globus" key="jobtype">condor</profile>
    <profile namespace="globus" key="count">1</profile>
    <profile namespace="globus" key="maxmemory">2000</profile>
  </job>

<!-- End of Job Definitions -->
<!-- Part 2: list of control-flow dependencies -->
  <!-- Define task group dependencies -->
  <child ref="ID001">
    <parent ref="IDPRE1" />
  </child>
  <child ref="IDPOST1">
    <parent ref="ID001" />
  </child>
  <child ref="IDPOST2">
    <parent ref="IDPOST1" />
  </child>
<!-- End of Dependencies -->
</adag>
</code>
</pre>

<p>The ini config file is the place where you define 1) what parameters the
workflow will take (via the Portal web app or Web Service) and 2) what the
default values should be.  Often times only a small handful of variables need
to be exposed, the rest can be hidden from the Porta/Web Service (display=F)
and just the default value used.</p>

<p>Looking at:</p>

<p>/home/seqware/SeqWare/provisioned-bundles/Workflow_Bundle_HelloWorldWorkflow<em>1.0_SeqWare</em>0.12.5/Workflow_Bundle_helloworld/1.0/config/workflow.ini</p>

<pre>
# key=input_file:type=file:display=F:file_meta_type=text/plain
input_file=${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/data/input.txt
# this is just a comment, the output directory is a conventions and used in many workflows to specify a relative output path
output_dir=seqware-results
# the output_prefix is a convension and used to specify the root of the absolute output path or an S3 bucket name 
# you should pick a path that is available on all custer nodes and can be written by your user
# ends in a "/"
output_prefix=./provisioned/
</pre>

<p>The final file to look at is metadata.xml which is the place where workflows included in a bundle are declared.  This is the place where you would rename a workflow, update its version string, etc.</p>

<p>Look at: </p>

<pre> /home/seqware/SeqWare/provisioned-bundles/Workflow_Bundle_HelloWorldWorkflow_1.0_SeqWare_0.12.5/Workflow_Bundle_helloworld/1.0/metadata.xml</pre>

<pre>
<bundle version="1.0">
  <workflow name="HelloWorldWorkflow" version="1.0">
    <description>This is just a simple HelloWorld showing you how to create a very basic workflow.</description>
    <test command="java -jar ${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/lib/seqware-pipeline-0.12.5.jar --plugin net.sourceforge.seqware.pipeline.plugins.WorkflowLauncher -- --no-metadata --provisioned-bundle-dir ${workflow_bundle_dir} --workflow HelloWorldWorkflow --version 1.0 --ini-files ${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/config/workflow.ini " />
    <workflow_command command="java -jar ${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/lib/seqware-pipeline-0.12.5.jar --plugin net.sourceforge.seqware.pipeline.plugins.WorkflowLauncher -- --bundle ${workflow_bundle_dir} --workflow HelloWorldWorkflow --version 1.0 " />
    <workflow_template path="${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/workflows/workflow.ftl" />
    <config path="${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/config/workflow.ini" />
    <build command="ant -f ${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/build.xml" />
    <requirements compute="single" memory="20M" network="local" />
  </workflow>
</bundle>
</pre>

<p>This is only a brief introduction to the workflow bundle process.  Take a look at <a href="http://sourceforge.net/apps/mediawiki/seqware/index.php?title=How_to_Write_a_Bundled_Workflow">How to Write a Workflow Bundle</a> for extensive details on the workflow development process.  There is also information on this site on using Maven to create workflow bundles using the excellent archetype system.  And we also are prototyping a workflow language based on Java. These are experimental but could be very useful. Eventually that documentation will be migrated to this guide.</p>

<h2>Creating a New Worlflow Bundle</h2>

<p>Now that you have seen the components for a bundle the next step is to create your own bundle based on HelloWorld.  We are only going to make superficial changes here but would expect that you would make much more radical changes if you were creating a new workflow.  While you can use the ‚Äúcopy and hack‚Äù method, in the future we will recommend the archetype approach.</p>

<p>First you need to change directories to the workflow and create a duplicate:</p>

<pre>
cd /home/seqware/SeqWare/provisioned-bundles
cp -r Workflow_Bundle_HelloWorldWorkflow_1.0_SeqWare_0.12.5 Workflow_Bundle_MyHelloWorldWorkflow_1.0_SeqWare_0.12.5
</pre>

<p>Now modify the metadata.xml, change the name of the workflow here:</p>

<pre>
<bundle version="1.0">
  <workflow name="MyHelloWorldWorkflow" version="1.0">
    <description>This is just a simple HelloWorld showing you how to create a very basic workflow.</description>
    <test command="java -jar ${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/lib/seqware-pipeline-0.12.5.jar --plugin net.sourceforge.seqware.pipeline.plugins.WorkflowLauncher -- --no-metadata --provisioned-bundle-dir ${workflow_bundle_dir} --workflow MyHelloWorldWorkflow --version 1.0 --ini-files ${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/config/workflow.ini " />
    <workflow_command command="java -jar ${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/lib/seqware-pipeline-0.12.5.jar --plugin net.sourceforge.seqware.pipeline.plugins.WorkflowLauncher -- --bundle ${workflow_bundle_dir} --workflow MyHelloWorldWorkflow --version 1.0 " />
    <workflow_template path="${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/workflows/workflow.ftl" />
    <config path="${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/config/workflow.ini" />
    <build command="ant -f ${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/build.xml" />
    <requirements compute="single" memory="20M" network="local" />
  </workflow>
</bundle>
</pre>

<p>Next, change the name at the top of the workflow bundle:</p>

<pre>
xmlns="http://pegasus.isi.edu/schema/DAX" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://pegasus.isi.edu/schema/DAX http://pegasus.isi.edu/schema/dax-3.2.xsd" version="3.2" count="1" index="0" name="MyHelloWorldWorkflow"
...
</pre>

<p>That should be it for this example. More radical changes would, of course, be made in a real-world workflow.</p>

<h2>Test the MyHelloWorld Workflow Bundle on the VM</h2>

<p>At this point you should be in the new workflow directory:</p>

<pre>
/home/seqware/SeqWare/provisioned-bundles/Workflow_Bundle_MyHelloWorldWorkflow_1.0_SeqWare_0.12.5/Workflow_Bundle_helloworld/1.0
</pre>

<p>This is where you will execute the test command to try to run the workflow on the local VM with sample default data.  You will repeat this process many times in your new bundle development process as you tweak and change your workflows, debugging as you go.</p>

<p class="warning"><strong>Tip:</strong> if someone gives you a zipped workflow bundle use a command similar to the below to unzip it to your /home/seqware/SeqWare/provisioned-bundles/ directory:

<pre>
java -jar ~/SeqWare/seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.BundleManager -- --bundle released-bundles/Workflow_Bundle_Someone_Gave_Me.zip --list
</pre>

This automatically unzips the bundle to the provisioned-bundles directory and then lists out the contents.
 
<pre>
# sample output
Running Plugin: net.sourceforge.seqware.pipeline.plugins.BundleManager
Setting Up Plugin: net.sourceforge.seqware.pipeline.plugins.BundleManager@a94884d
TEMPLATE PATH: ${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/workflows/workflow.ftl
List Workflows:
 Workflow:
  Name : HelloWorldWorkflow
  Version : 1.0
  Description : This is just a simple HelloWorld showing you how to create a very basic workflow.
  Test Command: java -jar ${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/lib/seqware-pipeline-0.12.5.jar --plugin net.sourceforge.seqware.pipeline.plugins.WorkflowLauncher -- --no-metadata --provisioned-bundle-dir ${workflow_bundle_dir} --workflow HelloWorldWorkflow --version 1.0 --ini-files ${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/config/workflow.ini
  Template Path:${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/workflows/workflow.ftl
  Config Path:${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/config/workflow.ini
  Requirements Compute: single Memory: 20M Network: local

</pre>
</p>

<p>Now in this example below I am just changing into the MyHelloWorld workflow directory and using the WorkflowLauncher to launch the workflow with the sample ini file included.</p>

<pre>
# cd into the right directory
cd /home/seqware/SeqWare/provisioned-bundles/Workflow_Bundle_MyHelloWorldWorkflow_1.0_SeqWare_0.12.5
 
# and launch the test
java -jar ~/SeqWare/seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.WorkflowLauncher -- --no-metadata --provisioned-bundle-dir `pwd` --workflow MyHelloWorldWorkflow --version 1.0 --ini-files Workflow_Bundle_helloworld/1.0/config/workflow.ini --wait
</pre>

<p>This should work just fine, it will give you status information and gradually complete the workflow.  If something goes wrong you should see status messages indicating what happened.  These will tell you the particular steps with the problem so you can look at the workflow file to debug.  Here is the sample output when I ran the command:</p>

<pre>
TEMPLATE PATH: ${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/workflows/workflow.ftl
TEMPLATE FILE: /home/seqware/SeqWare/provisioned-bundles/Workflow_Bundle_HelloWorldWorkflow_1.0_SeqWare_0.12.5/Workflow_Bundle_helloworld/1.0/workflows/workflow.ftl
INI FILES: Workflow_Bundle_helloworld/1.0/config/workflow.ini
CREATING DAX IN: /tmp/dax88379466867104723094914822612050
  INI FILE: Workflow_Bundle_helloworld/1.0/config/workflow.ini
  KEY: parent-accessions VALUE: 0
  KEY: parent_accessions VALUE: 0
  KEY: output_prefix VALUE: ./provisioned/
  KEY: output_dir VALUE: seqware-results
  KEY: workflow_run_accession VALUE: 0
  KEY: parent_accession VALUE: 0
  KEY: input_file VALUE: ${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/data/input.txt
  KEY: workflow-run-accession VALUE: 0
  KEY: seqware_cluster VALUE: seqwarevm
  KEY: metadata VALUE: no-metadata
  KEY: workflow_bundle_dir VALUE: /home/seqware/SeqWare/provisioned-bundles/Workflow_Bundle_HelloWorldWorkflow_1.0_SeqWare_0.12.5
SUBMITTING TO PEGASUS: pegasus-plan -Dpegasus.user.properties=/home/seqware/.seqware/pegasus/properties --dax /tmp/dax88379466867104723094914822612050 --dir /home/seqware/SeqWare/pegasus-dax -o seqwarevm --force --submit -s seqwarevm
PEGASUS STATUS COMMAND: pegasus-status -l /home/seqware/SeqWare/pegasus-dax/seqware/pegasus/HelloWorldWorkflow/run0004
MONITORING PEGASUS STATUS:
RUNNING: step 1 of 5 (20%)
RUNNING: step 2 of 5 (40%)
RUNNING: step 3 of 5 (60%)
RUNNING: step 4 of 5 (80%)
WORKFLOW COMPLETED SUCCESSFULLY!
</pre>

<h2>Packaging and Installing the MyHelloWorld Locally</h2>

<p>Assuming the workflow above worked fine the next step is to install it locally,
this means it will be inserted into the MetaDB via the locally running web
service.  During this process it will zip up the workflow bundle and put it
into your released-bundles directory. Once you have the zip file you can share it with
other users and, in the future, upload it to an AppStore to make it even easier to share.</p>

<p>Here is an example showing how this
process works on the VM and what is happing in the database and your
released-bundles directory as you do this.  You may want to delete the zip file
that is in the released-bundles directory before you do this step below (or back
it up somewhere first).  To connect to the database in the example below you
can issue the following command in the terminal:</p>

<pre> "psql -U seqware -W
seqware_meta_db"</pre>

<p>‚Ä¶with password seqware.</p>

<pre>
cd /home/seqware/SeqWare
java -jar ~/SeqWare/seqware-pipeline-0.12.5.jar -p net.sourceforge.seqware.pipeline.plugins.BundleManager -- --bundle /home/seqware/SeqWare/provisioned-bundles/Workflow_Bundle_MyHelloWorldWorkflow_1.0_SeqWare_0.12.5 --install
</pre>

<p>What happens here is the /home/seqware/SeqWare/provisioned-bundles/Workflow_Bundle_MyHelloWorldWorkflow<em>1.0_SeqWare</em>0.12.5 directory is zip‚Äôd up to your released-bundles directory and the metadata about the workflow is saved to the database.</p>

<p>The output of this program:</p>

<pre>
# the output
Installing Bundle
Bundle: /home/seqware/SeqWare/provisioned-bundles/Workflow_Bundle_MyHelloWorldWorkflow_1.0_SeqWare_0.12.5
Now packaging /home/seqware/SeqWare/provisioned-bundles/Workflow_Bundle_MyHelloWorldWorkflow_1.0_SeqWare_0.12.5 to a zip file and transferring to the directory: /home/seqware/SeqWare/released-bundles Please be aware, this process can take hours if the bundle is many GB in size.
...
Bundle Has Been Installed to the MetaDB and Provisioned to /home/seqware/SeqWare/provisioned-bundles/Workflow_Bundle_MyHelloWorldWorkflow_1.0_SeqWare_0.12.5!
</pre>

<p>Now notice two things, it is now in the local DB via the web service.</p>

<pre>
seqware_meta_db=# select * from workflow order by create_tstmp desc limit 1;
-[ RECORD 1 ]-------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
workflow_id               | 3
name                      | MyHelloWorldWorkflow
description               | This is just a simple HelloWorld showing you how to create a very basic workflow.
input_algorithm           |
version                   | 1.0
seqware_version           |
owner_id                  | 1
base_ini_file             | ${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/config/workflow.ini
cmd                       | java -jar ${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/lib/seqware-pipeline-0.12.5.jar --plugin net.sourceforge.seqware.pipeline.plugins.WorkflowLauncher -- --bundle ${workflow_bundle_dir} --workflow MyHelloWorldWorkflow --version 1.0
current_working_dir       | /home/seqware/SeqWare/provisioned-bundles/Workflow_Bundle_MyHelloWorldWorkflow_1.0_SeqWare_0.12.5
host                      |
username                  |
workflow_template         | ${workflow_bundle_dir}/Workflow_Bundle_helloworld/1.0/workflows/workflow.ftl
create_tstmp              | 2012-08-15 01:20:22.457
update_tstmp              | 2012-08-15 01:20:22.505
sw_accession              | 6
permanent_bundle_location | /home/seqware/SeqWare/released-bundles/Workflow_Bundle_MyHelloWorldWorkflow_1.0_SeqWare_0.12.5.zip
</pre>

<p>And also notice you now have a zip file for this workflow:</p>

<pre>
cd /home/seqware/SeqWare/released-bundles
ls -lth
total 50M
-rw-rw-r-- 1 seqware seqware 50M Aug 15 01:20 Workflow_Bundle_MyHelloWorldWorkflow_1.0_SeqWare_0.12.5.zip
</pre>

<p>Now that this is installed you can trigger it just like you have done in the <a href="/docs/3-getting-started/user-tutorial/">User Tutorial</a> using the web service previously.</p>

<h2>Next Steps</h2>

<p>The guide <a href="http://sourceforge.net/apps/mediawiki/seqware/index.php?title=How_to_Write_a_Bundled_Workflow">How to Write a Workflow Bundle</a> on the public SeqWare project wiki goes into very detailed information about workflow bundles, how to create them, the syntax they use, and other key information. In the near future this will be migrated to this site but the directions there should still be up to date.</p>
;T;@",/static/assets/images/create_study.png/{;{ "1/static/assets/images/create_experiment.png/{;{ "*/static/assets/images/my_studies.png/{;{ ")/static/assets/images/final_exp.png/{;{ "&/static/assets/images/upload.png/{;{ "'/static/assets/images/running.png/{;{ :versioni